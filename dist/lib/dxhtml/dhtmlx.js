function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this)}if(void 0===window.dhx&&(window.dhx=window.dhx4={version:"5.0",skin:null,skinDetect:function(a){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"material"}[this.readFromCss(a+"_skin_detect")]||null},readFromCss:function(e,g,h){var c=document.createElement("DIV");c.className=e,null!=document.body.firstChild?document.body.insertBefore(c,document.body.firstChild):document.body.appendChild(c),"string"==typeof h&&(c.innerHTML=h);var a=c[g||"offsetWidth"];return c.parentNode.removeChild(c),c=null,a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var e=this.first();for(var c in this.data)e=Math.max(e,this.data[c]);return e},reserve:function(a){return this.data[a]=this.last()+this.step,this.data[a]},clear:function(a){null!=this.data[a]&&(this.data[a]=null,delete this.data[a])}},s2b:function(a){return"string"==typeof a&&(a=a.toLowerCase()),1==a||1==a||"true"==a||"1"==a||"yes"==a||"y"==a||"on"==a},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}return obj=dhx4.temp,dhx4.temp=null,obj},absLeft:function(a){return"string"==typeof a&&(a=document.getElementById(a)),this.getOffset(a).left},absTop:function(a){return"string"==typeof a&&(a=document.getElementById(a)),this.getOffset(a).top},_aOfs:function(a){for(var e=0,c=0;a;)e+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:e,left:c}},_aOfsRect:function(g){var m=g.getBoundingClientRect(),n=document.body,c=document.documentElement,a=window.pageYOffset||c.scrollTop||n.scrollTop,h=window.pageXOffset||c.scrollLeft||n.scrollLeft,l=c.clientTop||n.clientTop||0,o=c.clientLeft||n.clientLeft||0,r=m.top+a-l,e=m.left+h-o;return{top:Math.round(r),left:Math.round(e)}},getOffset:function(a){return a.getBoundingClientRect?this._aOfsRect(a):this._aOfs(a)},_isObj:function(a){return null!=a&&"object"==typeof a&&void 0===a.length},_copyObj:function(g){if(this._isObj(g)){var e={};for(var c in g)"object"==typeof g[c]&&null!=g[c]?e[c]=this._copyObj(g[c]):e[c]=g[c]}else for(e=[],c=0;c<g.length;c++)"object"==typeof g[c]&&null!=g[c]?e[c]=this._copyObj(g[c]):e[c]=g[c];return e},screenDim:function(){var a=0<=navigator.userAgent.indexOf("MSIE"),c={};return c.left=document.body.scrollLeft,c.right=c.left+(window.innerWidth||document.body.clientWidth),c.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),c.bottom=c.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight),c},selectTextRange:function(h,m,c){var a=(h="string"==typeof h?document.getElementById(h):h).value.length;if(m=Math.max(Math.min(m,a),0),c=Math.min(c,a),h.setSelectionRange)try{h.setSelectionRange(m,c)}catch(l){}else if(h.createTextRange){var g=h.createTextRange();g.moveStart("character",m),g.moveEnd("character",c-a);try{g.select()}catch(l){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var e={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var c in e)0==this.transData.transProp&&null!=document.documentElement.style[c]&&(this.transData.transProp=c,this.transData.transEv=e[c]);e=null}return this.transData},_xmlNodeValue:function(a){for(var e="",c=0;c<a.childNodes.length;c++)e+=null!=a.childNodes[c].nodeValue?a.childNodes[c].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"";return e}},window.dhx4.isIE=0<=navigator.userAgent.indexOf("MSIE")||0<=navigator.userAgent.indexOf("Trident"),window.dhx4.isIE6=null==window.XMLHttpRequest&&0<=navigator.userAgent.indexOf("MSIE"),window.dhx4.isIE7=0<=navigator.userAgent.indexOf("MSIE 7.0")&&navigator.userAgent.indexOf("Trident")<0,window.dhx4.isIE8=0<=navigator.userAgent.indexOf("MSIE 8.0")&&0<=navigator.userAgent.indexOf("Trident"),window.dhx4.isIE9=0<=navigator.userAgent.indexOf("MSIE 9.0")&&0<=navigator.userAgent.indexOf("Trident"),window.dhx4.isIE10=0<=navigator.userAgent.indexOf("MSIE 10.0")&&0<=navigator.userAgent.indexOf("Trident")&&1!=window.navigator.pointerEnabled,window.dhx4.isIE11=0<=navigator.userAgent.indexOf("Trident")&&1==window.navigator.pointerEnabled,window.dhx4.isEdge=0<=navigator.userAgent.indexOf("Edge"),window.dhx4.isOpera=0<=navigator.userAgent.indexOf("Opera"),window.dhx4.isChrome=0<=navigator.userAgent.indexOf("Chrome")&&!window.dhx4.isEdge,window.dhx4.isKHTML=(0<=navigator.userAgent.indexOf("Safari")||0<=navigator.userAgent.indexOf("Konqueror"))&&!window.dhx4.isEdge,window.dhx4.isFF=0<=navigator.userAgent.indexOf("Firefox"),window.dhx4.isIPad=0<=navigator.userAgent.search(/iPad/gi),window.dhx4.dnd={evs:{},p_en:(window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled),_mTouch:function(a){return window.dhx4.isIE10&&a.pointerType==a.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&"mouse"==a.pointerType||window.dhx4.isEdge&&"mouse"==a.pointerType},_touchOn:function(a){null==a&&(a=document.body),a.style.touchAction=a.style.msTouchAction="",a=null},_touchOff:function(a){null==a&&(a=document.body),a.style.touchAction=a.style.msTouchAction="none",a=null}},1==window.navigator.pointerEnabled?window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}:1==window.navigator.msPointerEnabled?window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:void 0!==window.addEventListener&&(window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"})),void 0===window.dhx4.template&&(window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},window.dhx4.template=function(c,e,a){return c.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var m=arguments[1],l=window.dhx4.trim(arguments[3]),n=null,h=[e[m]];if(0<l.length){l=l.split(":");for(var g=[],o=0;o<l.length;o++)0<o&&null!=g[g.length-1].match(/\\$/)?g[g.length-1]=g[g.length-1].replace(/\\$/,"")+":"+l[o]:g.push(l[o]);n=g[0];for(o=1;o<g.length;o++)h.push(g[o])}return"string"==typeof n&&"function"==typeof window.dhx4.template[n]?window.dhx4.template[n].apply(window.dhx4.template,h):0<m.length&&void 0!==e[m]?1==a?window.dhx4.trim(e[m]):String(e[m]):""})},window.dhx4.template.date=function(a,c){return null!=a?a instanceof Date?window.dhx4.date2str(a,c):null!=(a=a.toString()).match(/^\d*$/)?window.dhx4.date2str(new Date(parseInt(a)),c):a:""},window.dhx4.template.maxlength=function(c,a){return String(c).substr(0,a)},window.dhx4.template.number_format=function(g,h,e,a){var c=window.dhx4.template._parseFmt(h,e,a);return 0==c?g:window.dhx4.template._getFmtValue(g,c)},window.dhx4.template.lowercase=function(a){return void 0!==a&&null!=a||(a=""),String(a).toLowerCase()},window.dhx4.template.uppercase=function(a){return void 0!==a&&null!=a||(a=""),String(a).toUpperCase()},window.dhx4.template._parseFmt=function(m,e,a){var g=m.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==g||4!=g.length)return!1;var c={i_len:!1,i_sep:"string"==typeof e?e:",",d_len:!1,d_sep:"string"==typeof a?a:".",s_bef:"string"==typeof g[1]?g[1]:"",s_aft:"string"==typeof g[3]?g[3]:""},l=g[2].split(".");null!=l[1]&&(c.d_len=l[1].length);var h=l[0].split(",");return 1<h.length&&(c.i_len=h[h.length-1].length),c},window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=r&&5==r.length){var v0="";if(null!=r[1]&&(v0+=r[1]),v0+=fmt.s_bef,!1!==fmt.i_len){for(var i=0,v1="",q=r[2].length-1;0<=q;q--)v1=""+r[2].charAt(q)+v1,++i==fmt.i_len&&0<q&&(v1=fmt.i_sep+v1,i=0);v0+=v1}else v0+=r[2];if(!1!==fmt.d_len){for(null==r[4]&&(r[4]="");r[4].length<fmt.d_len;)r[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=r[4].match(dhx4.temp);null!=t1&&(v0+=fmt.d_sep+t1),dhx4.temp=t1=null}return v0+=fmt.s_aft,v0}return value}),void 0===window.dhx4.dateLang&&(window.dhx4.dateLang="en",window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}},window.dhx4.dateFormat={en:"%Y-%m-%d"},window.dhx4.date2str=function(l,g,a){if(null!=g&&void 0!==g||(g=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=a&&void 0!==a||(a=window.dhx4.dateStrings[window.dhx4.dateLang]),l instanceof Date)var h=function(m){return 1==String(m).length?"0"+String(m):m},e=String(g||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,function(o){switch(o){case"%d":return h(l.getDate());case"%j":return l.getDate();case"%D":return a.dayShortName[l.getDay()];case"%l":return a.dayFullName[l.getDay()];case"%m":return h(l.getMonth()+1);case"%n":return l.getMonth()+1;case"%M":return a.monthShortName[l.getMonth()];case"%F":return a.monthFullName[l.getMonth()];case"%y":return h(l.getYear()%100);case"%Y":return l.getFullYear();case"%g":return(l.getHours()+11)%12+1;case"%h":return h((l.getHours()+11)%12+1);case"%G":return l.getHours();case"%H":return h(l.getHours());case"%i":return h(l.getMinutes());case"%s":return h(l.getSeconds());case"%a":return 11<l.getHours()?"pm":"am";case"%A":return 11<l.getHours()?"PM":"AM";case"%%":return"%";case"%u":return l.getMilliseconds();case"%P":if(null!=window.dhx4.temp_calendar&&null!=window.dhx4.temp_calendar.tz)return window.dhx4.temp_calendar.tz;var s=l.getTimezoneOffset(),r=Math.abs(Math.floor(s/60)),n=Math.abs(s)-60*r;return(0<s?"-":"+")+h(r)+":"+h(n);default:return o}});return e||String(l)},window.dhx4.str2date=function(l,A,E){null!=A&&void 0!==A||(A=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=E&&void 0!==E||(E=window.dhx4.dateStrings[window.dhx4.dateLang]),A=A.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var D=[],o=[];A=A.replace(/%[a-z]/gi,function(e){switch(e){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":return o.push(e),"(\\d{2})";case"%D":case"%l":case"%M":case"%F":return o.push(e),"([a-zéûäа-яё]{1,})";case"%j":case"%n":case"%g":case"%G":return o.push(e),"(\\d{1,2})";case"%Y":return o.push(e),"(\\d{4})";case"%a":return o.push(e),"([a|p]m)";case"%A":return o.push(e),"([A|P]M)";case"%u":return o.push(e),"(\\d{1,6})";case"%P":return o.push(e),"([+-]\\d{1,2}:\\d{1,2})"}return e});var F=new RegExp(A,"i"),s=l.match(F);if(null==s||s.length-1!=o.length)return"Invalid Date";for(var c=1;c<s.length;c++)D.push(s[c]);var g={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7},u={},n={};for(c=0;c<o.length;c++)if(void 0!==g[o[c]]){var h=g[o[c]];u[h]||(u[h]=[],n[h]=[]),u[h].push(D[c]),n[h].push(o[c])}D=[],o=[];for(c=1;c<=7;c++)if(null!=u[c])for(var y=0;y<u[c].length;y++)D.push(u[c][y]),o.push(n[c][y]);var a=new Date;a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);var x=function(v,e){for(var r=0;r<e.length;r++)if(e[r].toLowerCase()==v)return r;return-1};for(c=0;c<D.length;c++)switch(o[c]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":isNaN(D[c])||a[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[o[c]]](Number(D[c])+("%m"==o[c]||"%n"==o[c]?-1:0));break;case"%M":case"%F":var m=x(D[c].toLowerCase(),E[{"%M":"monthShortName","%F":"monthFullName"}[o[c]]]);0<=m&&a.setMonth(m);break;case"%y":if(!isNaN(D[c])){var C=Number(D[c]);a.setFullYear(C+(50<C?1900:2e3))}break;case"%g":case"%h":if(!isNaN(D[c]))(C=Number(D[c]))<=12&&0<=C&&a.setHours(C+(0<=x("pm",D)?12==C?0:12:12==C?-12:0));break;case"%P":null!=window.dhx4.temp_calendar&&(window.dhx4.temp_calendar.tz=D[c])}return a}),void 0===window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"get",parse:function(a){if("string"!=typeof a)return a;if(a=a.replace(/^[\s]+/,""),window.DOMParser&&!dhx4.isIE)var c=(new window.DOMParser).parseFromString(a,"text/xml");else window.ActiveXObject!==window.undefined&&((c=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",c.loadXML(a));return c},xmltop:function(a,h,g){if((void 0===h.status||h.status<400)&&(xml=h.responseXML?h.responseXML||h:dhx4.ajax.parse(h.responseText||h),xml&&null!==xml.documentElement))try{if(!xml.getElementsByTagName("parsererror").length)return xml.getElementsByTagName(a)[0]}catch(c){}return-1!==g&&dhx4.callEvent("onLoadXMLError",["Incorrect XML",h,g]),document.createElement("DIV")},xpath:function(g,a){if(a.nodeName||(a=a.responseXML||a),!dhx4.isIE){for(var m,h=[],c=(a.ownerDocument||a).evaluate(g,a,null,XPathResult.ANY_TYPE,null);m=c.iterateNext();)h.push(m);return h}try{return a.selectNodes(g)||[]}catch(l){return[]}},query:function(a){dhx4.ajax._call(a.method||"GET",a.url,a.data||"",a.async||!0,a.callback,null,a.headers)},get:function(a,c){return this._call("GET",a,null,!0,c)},getSync:function(a){return this._call("GET",a,null,!1)},put:function(c,a,e){return this._call("PUT",c,a,!0,e)},del:function(c,a,e){return this._call("DELETE",c,a,!0,e)},post:function(c,a,e){return 1==arguments.length?a="":2!=arguments.length||"function"!=typeof a&&"function"!=typeof window[a]?a=String(a):(e=a,a=""),this._call("POST",c,a,!0,e)},postSync:function(c,a){return a=null==a?"":String(a),this._call("POST",c,a,!1)},getLong:function(a,c){this._call("GET",a,null,!0,c,{url:a})},postLong:function(c,a,e){2!=arguments.length||"function"!=typeof a&&(window[a],0)||(e=a,a=""),this._call("POST",c,a,!0,e,{url:c,postData:a})},_call:function(a,c,e,h,m,r,g){var o=window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),l=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);if(1==h&&(o.onreadystatechange=function(){if(4==o.readyState||1==l&&3==o.readyState){if((200!=o.status||""==o.responseText)&&!dhx4.callEvent("onAjaxError",[{xmlDoc:o,filePath:c,async:h}]))return;window.setTimeout(function(){"function"==typeof m&&m.apply(window,[{xmlDoc:o,filePath:c,async:h}]),null!=r&&(void 0!==r.postData?dhx4.ajax.postLong(r.url,r.postData,m):dhx4.ajax.getLong(r.url,m)),o=m=null},1)}}),"GET"==a&&(c+=this._dhxr(c)),o.open(a,c,h),null!=g)for(var n in g)o.setRequestHeader(n,g[n]);else"POST"==a||"PUT"==a||"DELETE"==a?o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==a&&(e=null);return o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(e),1!=h&&(4==o.readyState||1==l&&3==o.readyState)&&(200==o.status&&""!=o.responseText||dhx4.callEvent("onAjaxError",[{xmlDoc:o,filePath:c,async:h}])),{xmlDoc:o,filePath:c,async:h}},_dhxr:function(a,c){return 1!=this.cache?(null==a.match(/^[\?\&]$/)&&(a=0<=a.indexOf("?")?"&":"?"),void 0===c&&(c=!0),a+"dhxr"+(new Date).getTime()+(1==c?"=1":"")):""}}),void 0===window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(m,e,l,h,n){if("clear"==n){for(var c in m._dhxdataload)m._dhxdataload[c]=null,delete m._dhxdataload[c];return m._loadData=null,m._dhxdataload=null,m.load=null,m.loadStruct=null,void(m=null)}if(m._dhxdataload={initObj:e,xmlToJson:l,xmlRootTag:h,onBeforeXLS:null},m._loadData=function(v,w,x){2==arguments.length&&(x=w,w=null);var u=null;if(3==arguments.length&&(x=x),"string"==typeof v){var s=v.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");if(new RegExp("^<"+this._dhxdataload.xmlRootTag).test(s.replace(/^<\?xml[^\?]*\?>\s*/,""))&&null!=(u=dhx4.ajax.parse(v))&&(u=this[this._dhxdataload.xmlToJson].apply(this,[u])),null!=u||null==s.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)&&null==s.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)||(u=dhx4.s2j(s)),null==u){this.callEvent("onXLS",[]);var r=[];if("function"==typeof this._dhxdataload.onBeforeXLS)if(null!=(s=this._dhxdataload.onBeforeXLS.apply(this,[v]))&&"object"==typeof s&&(null!=s.url&&(v=s.url),null!=s.params))for(var y in s.params)r.push(y+"="+encodeURIComponent(s.params[y]));var A=this,o=function(a){var D=null;null!=(D=0<=(a.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)||null!=a.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</)?A[A._dhxdataload.xmlToJson].apply(A,[a.xmlDoc.responseXML]):dhx4.s2j(a.xmlDoc.responseText))&&A[A._dhxdataload.initObj].apply(A,[D,v]),A.callEvent("onXLE",[]),null!=x&&("function"==typeof x?x.apply(A,[]):"function"==typeof window[x]&&window[x].apply(A,[])),o=x=null,D=a=A=null};return r=r.join("&")+("string"==typeof w?"&"+w:""),void("post"==dhx4.ajax.method?dhx4.ajax.post(v,r,o):"get"==dhx4.ajax.method&&dhx4.ajax.get(v+(0<r.length?(0<v.indexOf("?")?"&":"?")+r:""),o))}}else u="object"==typeof v.documentElement||void 0!==v.tagName&&void 0!==v.getElementsByTagName&&0<v.getElementsByTagName(this._dhxdataload.xmlRootTag).length?this[this._dhxdataload.xmlToJson].apply(this,[v]):window.dhx4._copyObj(v);null!=u&&this[this._dhxdataload.initObj].apply(this,[u]),null!=x&&("function"==typeof x?x.apply(this,[]):"function"==typeof window[x]&&window[x].apply(this,[]),x=null)},null!=n){var g={struct:"loadStruct",data:"load"};for(var c in n)1==n[c]&&(m[g[c]]=function(){return this._loadData.apply(this,arguments)})}m=null}),void 0===window.dhx4._eventable&&(window.dhx4._eventable=function(a,c){if("clear"==c)return a.detachAllEvents(),a.dhxevs=null,a.attachEvent=null,a.detachEvent=null,a.checkEvent=null,a.callEvent=null,a.detachAllEvents=null,void(a=null);a.dhxevs={data:{}},a.attachEvent=function(e,h){e=String(e).toLowerCase(),this.dhxevs.data[e]||(this.dhxevs.data[e]={});var g=window.dhx4.newId();return this.dhxevs.data[e][g]=h,g},a.detachEvent=function(l){for(var g in this.dhxevs.data){var h=0;for(var e in this.dhxevs.data[g])e==l?(this.dhxevs.data[g][e]=null,delete this.dhxevs.data[g][e]):h++;0==h&&(this.dhxevs.data[g]=null,delete this.dhxevs.data[g])}},a.checkEvent=function(e){return e=String(e).toLowerCase(),null!=this.dhxevs.data[e]},a.callEvent=function(g,l){if(g=String(g).toLowerCase(),null==this.dhxevs.data[g])return!0;var h=!0;for(var e in this.dhxevs.data[g])h=this.dhxevs.data[g][e].apply(this,l)&&h;return h},a.detachAllEvents=function(){for(var g in this.dhxevs.data){for(var e in this.dhxevs.data[g])this.dhxevs.data[g][e]=null,delete this.dhxevs.data[g][e];this.dhxevs.data[g]=null,delete this.dhxevs.data[g]}},a=null},dhx4._eventable(dhx4)),window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(a){return""==a},isNotEmpty:function(a){return a instanceof Array?0<a.length:""==!a},isValidBoolean:function(a){return!!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return!!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,5})$)/i)},isValidInteger:function(a){return!!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return!!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return!!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(c){var a=c.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&&!!(a[1]<=9999&&a[2]<=12&&a[3]<=31&&a[4]<=59&&a[5]<=59&&a[6]<=59)||!1},isValidDate:function(a){var c=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return c&&!!(c[1]<=9999&&c[2]<=12&&c[3]<=31)||!1},isValidTime:function(c){var a=c.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&&!!(a[1]<=24&&a[2]<=59&&a[3]<=59)||!1},isValidIPv4:function(a){var c=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return c&&!!(c[1]<=255&&c[2]<=255&&c[3]<=255&&c[4]<=255)||!1},isValidCurrency:function(a){return!!a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)},isValidSSN:function(a){return!!a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)},isValidSIN:function(a){return!!a.toString().match(/^\d{9}$/)}},dhtmlxValidation=new dhtmlxValidation),void 0===window.dhtmlx&&(window.dhtmlx={extend:function(e,c){for(var g in c)e[g]||(e[g]=c[g]);return e},extend_api:function(a,g,e){var c=window[a];c&&(window[a]=function(m){if(m&&"object"==typeof m&&!m.tagName){var l=c.apply(this,g._init?g._init(m):arguments);for(var h in dhtmlx)g[h]&&this[g[h]](dhtmlx[h]);for(var h in m)g[h]?this[g[h]](m[h]):0===h.indexOf("on")&&this.attachEvent(h,m[h])}else l=c.apply(this,arguments);return g._patch&&g._patch(this),l||this},window[a].prototype=c.prototype,e&&dhtmlx.extend(window[a].prototype,e))},url:function(a){return-1!=a.indexOf("?")?"&":"?"}}),dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null,a.dragStarter=null,a.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,c){a.onmousedown=this.preCreateDragCopy,a.dragStarter=c,this.addDragLanding(a,c)},dhtmlDragAndDropObject.prototype.addDragLanding=function(a,c){a.dragLanding=c},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if(!a&&!window.event||2!=(a||event).button)return window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(a),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),a&&a.preventDefault&&a.preventDefault()),!1},dhtmlDragAndDropObject.prototype.callDrag=function(g){if(g||(g=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(g,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,g),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;dragger.gldragNode.old&&(a=dragger.gldragNode.old),a.parentNode.removeChild(a);var c=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding&&a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var l=document.createElement("Div");l.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=l.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),c.dhtmlDragAndDrop.dragNode=dragger.dragNode}if(dragger.dragNode.style.left=g.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=g.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",g.srcElement)h=g.srcElement;else var h=g.target;dragger.checkLanding(h,g)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(h){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,g=0,c=0;e;)g+=e.offsetLeft,c+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);g+=1*a.split("_")[0],c+=1*a.split("_")[1]}if(h)return g+"_"+c;this.fx=g,this.fy=c}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(c,a){c&&c.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=c,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a),this.lastLanding_scr=_isIE?a.srcElement:a.target):c&&"BODY"!=c.tagName?this.checkLanding(c.parentNode,a):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(c,g){if(dragger=window.dhtmlDragAndDrop,!g){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null,a&&a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,_isIE?event.srcElement:c.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(g){g&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var a=0;a<window.frames.length;a++)try{window.frames[a]!=g&&window.frames[a].dhtmlDragAndDrop&&window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}catch(c){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=g&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(c){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(g,h){g&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=g.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=g.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=g.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=g.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&h&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=g&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(c){}for(var a=0;a<window.frames.length;a++)try{window.frames[a]!=g&&window.frames[a].dhtmlDragAndDrop&&window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,!g||h?1:0)}catch(c){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),525<_KHTMLrv?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||7<document.documentMode)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),void 0===window.dhtmlxEvent)function dhtmlxEvent(c,e,a){c.addEventListener?c.addEventListener(e,a,!1):c.attachEvent&&c.attachEvent("on"+e,a)}function dhtmlXCellObject(e,a){this.cell=document.createElement("DIV"),this.cell.className="dhx_cell"+(a||""),this._idd=e,this._isCell=!0,this.conf={borders:!0,idx:{},css:a||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",pr3:"dhx_cell_progress_svg",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}},this.dataNodes={},this.views={};var c=document.createElement("DIV");return c.className="dhx_cell_cont"+this.conf.css,this.cell.appendChild(c),c=null,this._updateIdx=function(){for(var g in this.conf.idx)this.conf.idx[g]=null,delete this.conf.idx[g];for(var m=0;m<this.cell.childNodes.length;m++){var h=this.cell.childNodes[m].className;for(var g in this.conf.idx_data){var l=new RegExp(this.conf.idx_data[g]);null!=h.match(l)&&(this.conf.idx[g]=m)}}this.callEvent("_onIdxUpdated",[])},this._adjustAttached=function(){for(var g in this.dataNodes)null!=this.dataNodes[g]&&"function"==typeof this.dataNodes[g].setSizes&&this.dataNodes[g].setSizes();if(null!=this.dataObj&&"function"==typeof this.dataObj.setSizes){if("layout"==this.dataType&&"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst())return void this.dataObj.setSizes();this.dataObj.setSizes.apply(this.dataObj,arguments)}},this._setSize=function(v,s,A,n,o,r,l,m){null==this.conf.size&&(this.conf.size={}),null==m&&(m={});var C={left:"x",top:"y",width:"w",height:"h"};for(var u in this.conf.size.x=v,this.conf.size.y=s,this.conf.size.w=Math.max(A,0),this.conf.size.h=Math.max(n,0),C){var g=m[u]||u;this.cell.style[g]=this.conf.size[C[u]]+"px"}this.callEvent("_onSetSize",[]),!0!==r?this._adjustCont(o,l):this._adjustAttached(o),this._adjustProgress()},this._adjustCont=function(o,m){var n=this.cell.childNodes[this.conf.idx.cont];if("function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&1==this.conf.collapsed)return n.style.left=n.style.top="0px",n.style.width=n.style.height="200px",void(n=null);var l=0;for(var g in this.conf.ofs_nodes.t){l+="func"==(h=this.conf.ofs_nodes.t[g])?this[g]():1==h?this.cell.childNodes[this.conf.idx[g]].offsetHeight:0}var r=0;for(var g in this.conf.ofs_nodes.b){var h;r+="func"==(h=this.conf.ofs_nodes.b[g])?this[g]():1==h?this.cell.childNodes[this.conf.idx[g]].offsetHeight:0}n.style.left="0px",n.style.top=l+"px",null==this.conf.cells_cont&&(this.conf.cells_cont={},n.style.width=this.cell.offsetWidth+"px",n.style.height=Math.max(this.cell.offsetHeight-l-r,0)+"px",this.conf.cells_cont.w=parseInt(n.style.width)-n.offsetWidth,this.conf.cells_cont.h=parseInt(n.style.height)-n.offsetHeight),n.style.left="0px",n.style.top=l+"px",n.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px",n.style.height=Math.max(this.conf.size.h-l-r+this.conf.cells_cont.h,0)+"px",n=null,this._adjustAttached(o),"expand"==m&&"editor"==this.dataType&&null!=this.dataObj&&this.dataObj._prepareContent(!0)},this._mtbUpdBorder=function(){for(var h=["menu","toolbar","ribbon"],m=0;m<h.length;m++)if(null!=this.conf.idx[h[m]]){var n=this.cell.childNodes[this.conf.idx[h[m]]],l="dhx_cell_"+h[m]+"_no_borders",g="dhx_cell_"+h[m]+"_def";n.className=n.className.replace(new RegExp(this.conf.borders?l:g),this.conf.borders?g:l),n=null}},this._resetSizeState=function(){this.conf.cells_cont=null},this.conf.view="def",this.conf.views_loaded={},this.conf.views_loaded[this.conf.view]=!0,this._viewSave=function(l){this.views[l]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};for(var m=this.cell.childNodes[this.conf.idx.cont];0<m.childNodes.length;)this.views[l].cellCont.push(m.firstChild),m.removeChild(m.firstChild);for(var h in m=null,this.dataType=null,this.dataObj=null,this.conf.url_data=null,this.dataNodes){for(var g in this.conf.ofs_nodes)void 0!==this.conf.ofs_nodes[g][h]&&(this.views[l].ofs_nodes[g][h]=this.conf.ofs_nodes[g][h],this.conf.ofs_nodes[g][h]=null,delete this.conf.ofs_nodes[g][h]);this.views[l].dataNodesCont[h]=this.cell.childNodes[this.conf.idx[h]],this.cell.removeChild(this.cell.childNodes[this.conf.idx[h]]),this.views[l].dataNodes[h]=this.dataNodes[h],this.dataNodes[h]=null,delete this.dataNodes[h],this._updateIdx()}this.callEvent("_onViewSave",[l])},this._viewRestore=function(l){if(null!=this.views[l]){this.dataObj=this.views[l].dataObj,this.dataType=this.views[l].dataType,this.conf.url_data=this.views[l].url_data;for(var m=0;m<this.views[l].cellCont.length;m++)this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[l].cellCont[m]);for(var h in this.views[l].dataNodes)this.dataNodes[h]=this.views[l].dataNodes[h],"menu"==h&&this.cell.insertBefore(this.views[l].dataNodesCont[h],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),"toolbar"==h&&this.cell.insertBefore(this.views[l].dataNodesCont[h],this.cell.childNodes[this.conf.idx.cont]),"ribbon"==h&&this.cell.insertBefore(this.views[l].dataNodesCont[h],this.cell.childNodes[this.conf.idx.cont]),"sb"==h&&this.cell.appendChild(this.views[l].dataNodesCont[h]),this._updateIdx();for(var h in this.views[l].ofs_nodes)for(var g in this.views[l].ofs_nodes[h])this.conf.ofs_nodes[h][g]=this.views[l].ofs_nodes[h][g];this.conf.borders!=this.views[l].borders&&this[this.views[l].borders?"_showBorders":"_hideBorders"](!0),"url"==this.dataType&&null!=this.conf.url_data&&0==this.conf.url_data.ajax&&null!=this.conf.url_data.post_data&&this.reloadURL(),this.callEvent("_onViewRestore",[l]),this._viewDelete(l)}},this._viewDelete=function(l){if(null!=this.views[l]){for(var h in this.views[l].borders=null,this.views[l].ofs_nodes){for(var g in this.views[l].ofs_nodes[h])this.views[l].ofs_nodes[h][g]=null;this.views[l].ofs_nodes[h]=null}this.views[l].dataType=null,this.views[l].dataObj=null,this.views[l].url_data=null;for(var m=0;m<this.views[l].cellCont.length;m++)this.views[l].cellCont[m]=null;for(var h in this.views[l].cellCont=null,this.views[l].dataNodes)this.views[l].dataNodes[h]=null,this.views[l].dataNodesCont[h]=null;this.views[l].dataNodes=this.views[l].dataNodesCont=null,this.views[l]=null,delete this.views[l]}},window.dhx4._eventable(this),this._updateIdx(),this}function dhtmlXCellTop(h,c){if(0!=arguments.length&&void 0!==h){var a=this;if(this.dataNodes={},this.conf.ofs={t:0,b:0,l:0,r:0},this.conf.ofs_nodes={t:{},b:{}},this.conf.progress=!1,this.conf.fs_mode=!1,this.conf.fs_tm=null,this.conf.fs_resize=!1,h==document.body){if(this.conf.fs_mode=!0,this.base=h,this.base==document.body){var g={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8},material:{t:9,b:9,l:8,r:8}};this.conf.ofs=null!=g[this.conf.skin]?g[this.conf.skin]:g.dhx_skyblue}}else this.base="string"==typeof h?document.getElementById(h):h;if(this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin,this.cont=document.createElement("DIV"),this.cont.className=this.conf.css+"_cont",this.base.appendChild(this.cont),null!=c)this.setOffsets(c,!1);else if(null!=this.base._ofs){this.setOffsets(this.base._ofs,!1),this.base._ofs=null;try{delete this.base._ofs}catch(l){}}this._adjustCont=function(){var n=this.conf.ofs.t;for(var m in this.conf.ofs_nodes.t)n+=1==this.conf.ofs_nodes.t[m]?this.dataNodes[m].offsetHeight:0;var e=this.conf.ofs.b;for(var m in this.conf.ofs_nodes.b)e+=1==this.conf.ofs_nodes.b[m]?this.dataNodes[m].offsetHeight:0;this.cont.style.left=this.conf.ofs.l+"px",this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.cont.style.top=n+"px",this.cont.style.height=this.base.clientHeight-n-e+"px"},this._setBaseSkin=function(e){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+e)},this._initFSResize=function(){1!=this.conf.fs_resize&&(this._doOnResizeStart=function(){window.clearTimeout(a.conf.fs_tm),a.conf.fs_tm=window.setTimeout(a._doOnResizeEnd,200)},this._doOnResizeEnd=function(){a.setSizes()},"function"==typeof window.addEventListener?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart),this.conf.fs_resize=!0)},1==this.conf.fs_mode&&this._initFSResize(),this._unloadTop=function(){this._mtbUnload(),this.detachHeader(),this.detachFooter(),1==this.conf.fs_mode&&("function"==typeof window.addEventListener?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart)),this.base.removeChild(this.cont);var e=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(e,""),this.cont=this.base=null,a=null},h=null}}function dhtmlXCalendarObject(l,s){this.i={};var e=null;if("string"==typeof l)var g=document.getElementById(l);else g=l;g&&"object"==typeof g&&g.tagName&&"input"!=String(g.tagName).toLowerCase()&&(e=g),g=null,"object"==typeof l&&l.length||(l=[l]);for(var c=0;c<l.length;c++)"string"==typeof l[c]&&(l[c]=document.getElementById(l[c])||null),null!=l[c]&&l[c].tagName&&"input"==String(l[c].tagName).toLowerCase()?this.i[window.dhx4.newId()]={input:l[c]}:l[c]instanceof Array||!(l[c]instanceof Object)||null==l[c].input&&null==l[c].button||(null!=l[c].input&&"string"==typeof l[c].input&&(l[c].input=document.getElementById(l[c].input)),null!=l[c].button&&"string"==typeof l[c].button&&(l[c].button=document.getElementById(l[c].button)),this.i[window.dhx4.newId()]=l[c]),l[c]=null;this.conf={skin:s||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"material",zi:window.dhx4.newId(),touch:!window.dhx4.isIE,time:!0,today:!1,ws_first:!0},this.setSkin=function(u,a){(this.conf.skin!=u||a)&&(this.conf.skin=u,this.base.className="dhtmlxcalendar_"+this.conf.skin,this._ifrSize())},this.base=document.createElement("DIV"),this.base.style.display="none",this.base.appendChild(document.createElement("DIV")),null!=e?(this._hasParent=!0,e.appendChild(this.base),e=null):document.body.appendChild(this.base),this.setParent=function(a){this._hasParent&&("object"==typeof a?a.appendChild(this.base):"string"==typeof a&&document.getElementById(a).appendChild(this.base))},this.setSkin(this.conf.skin,!0),this.base.onclick=function(a){(a=a||event).preventDefault&&a.preventDefault(),a.cancelBubble=!0},this.base.onmousedown=function(){return!1},this.conf.touch&&(this.base.ontouchstart=this.base.onclick),this.loadUserLanguage=function(x){if(this.langData[x]){if(this.lang=x,this.setWeekStartDay(this.langData[this.lang].weekstart),this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this.msCont)for(var v=0,u=0;u<this.msCont.childNodes.length;u++)for(var a=0;a<this.msCont.childNodes[u].childNodes.length;a++)this.msCont.childNodes[u].childNodes[a].innerHTML=this.langData[this.lang].monthesSNames[v++];this.contTime.childNodes[0].childNodes[0].childNodes[5].innerHTML=this.langData[this.lang].today,this.contTime.childNodes[0].childNodes[0].childNodes[4].innerHTML=this.langData[this.lang].clear}},this.contMonth=document.createElement("DIV"),this.contMonth.className="dhtmlxcalendar_month_cont",this.contMonth.onselectstart=function(a){return(a=a||event).cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},this.base.firstChild.appendChild(this.contMonth),(m=document.createElement("UL")).className="dhtmlxcalendar_line",this.contMonth.appendChild(m),(r=document.createElement("LI")).className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr",r.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>",m.appendChild(r);var h=this;r.onclick=function(w){"touchstart"==(w=w||event).type&&null!=w.preventDefault&&w.preventDefault();var u=w.target||w.srcElement;if(u.className&&0===u.className.indexOf("dhtmlxcalendar_month_arrow")){h._hideSelector();var v=u.parentNode.firstChild==u?-1:1,a=new Date(h._activeMonth);return h._drawMonth(new Date(h._activeMonth.getFullYear(),h._activeMonth.getMonth()+v,1,0,0,0,0)),void h._evOnArrowClick([a,new Date(h._activeMonth)])}return u.className&&"dhtmlxcalendar_month_label_month"==u.className?(w.cancelBubble=!0,void h._showSelector("month",Math.round(u.offsetLeft+u.offsetWidth/2),u.offsetTop+u.offsetHeight+2,"selector_month",!0)):u.className&&"dhtmlxcalendar_month_label_year"==u.className?(w.cancelBubble=!0,void h._showSelector("year",Math.round(u.offsetLeft+u.offsetWidth/2),u.offsetTop+u.offsetHeight+2,"selector_year",!0)):void h._hideSelector()},1==this.conf.touch&&(r.ontouchstart=r.onclick),this.contDays=document.createElement("DIV"),this.contDays.className="dhtmlxcalendar_days_cont",this.base.firstChild.appendChild(this.contDays),this.setWeekStartDay=function(a){0==a&&(a=7),this._wStart=Math.min(Math.max(isNaN(a)?1:a,1),7),this._drawDaysOfWeek()},this._drawDaysOfWeek=function(){if(0==this.contDays.childNodes.length)(x=document.createElement("UL")).className="dhtmlxcalendar_line",this.contDays.appendChild(x);else var x=this.contDays.firstChild;var u=this._wStart,v=this.langData[this.lang].daysSNames;v.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var y=0;y<8;y++){if(null==x.childNodes[y]){var a=document.createElement("LI");x.appendChild(a)}else a=x.childNodes[y];0==y?(a.className="dhtmlxcalendar_cell_wn",a.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"):(a.className="dhtmlxcalendar_cell"+(6<=u?" dhtmlxcalendar_day_weekday_cell":"")+(1==y?"_first":""),a.innerHTML=v[u],7<++u&&(u=1))}null!=this._activeMonth&&this._drawMonth(this._activeMonth)},this._wStart=this.langData[this.lang].weekstart,this.setWeekStartDay(this._wStart),this.contDates=document.createElement("DIV"),this.contDates.className="dhtmlxcalendar_dates_cont",this.base.firstChild.appendChild(this.contDates),this.contDates.onclick=function(y){"touchstart"==(y=y||event).type&&null!=y.preventDefault&&y.preventDefault();var u=y.target||y.srcElement;if(null!=u.parentNode&&null!=u.parentNode._date&&(u=u.parentNode),null!=u._date&&!u._css_dis){var w=h._activeDate.getHours(),v=h._activeDate.getMinutes(),x=u._date;if(h.checkEvent("onBeforeChange")&&!h.callEvent("onBeforeChange",[new Date(u._date.getFullYear(),u._date.getMonth(),u._date.getDate(),w,v)]))return;null!=h._activeDateCell&&(h._activeDateCell._css_date=!1,h._updateCellStyle(h._activeDateCell._q,h._activeDateCell._w));var a=h._activeDate.getFullYear()+"_"+h._activeDate.getMonth()!=x.getFullYear()+"_"+x.getMonth();h._nullDate=!1,h._activeDate=new Date(x.getFullYear(),x.getMonth(),x.getDate(),w,v),h._activeDateCell=u,h._activeDateCell._css_date=!0,h._activeDateCell._css_hover=!1,h._updateCellStyle(h._activeDateCell._q,h._activeDateCell._w),a&&h._drawMonth(h._activeDate),h._updateInp(),h._hasParent||("touchstart"==y.type?window.setTimeout(function(){h._hide()},400):h._hide()),h._evOnClick([new Date(h._activeDate.getTime())])}},1==this.conf.touch&&(this.contDates.ontouchstart=this.contDates.onclick),this.contDates.onmouseover=function(u){var a=(u=u||event).target||u.srcElement;if(null!=a.parentNode&&null!=a.parentNode._date&&(a=a.parentNode),null!=a._date){if(h._lastHover==a||a._css_hover)return;a._css_hover=!0,h._updateCellStyle(a._q,a._w),h._lastHover=a,h._evOnMouseOver([new Date(a._date.getFullYear(),a._date.getMonth(),a._date.getDate(),0,0,0,0),u]),a=null}},this.contDates.onmouseout=function(a){h._clearDayHover(a||event)},this._lastHover=null,this._clearDayHover=function(a){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),null!=a&&h._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),a]),this._lastHover=null)};for(c=0;c<6;c++){var m;(m=document.createElement("UL")).className="dhtmlxcalendar_line",this.contDates.appendChild(m);for(var o=0;o<=7;o++){(r=document.createElement("LI")).className=0==o?"dhtmlxcalendar_cell_wn":"dhtmlxcalendar_cell",m.appendChild(r)}}this.contTime=document.createElement("DIV"),this.contTime.className="dhtmlxcalendar_time_cont",this.contTime.style.display="none",this.base.firstChild.appendChild(this.contTime),this.showTime=function(){1!=this.conf.time&&(this.conf.time=!0,this._adjustTimeCont())},this.hideTime=function(){1==this.conf.time&&(this.conf.time=!1,this._adjustTimeCont())},this.showToday=function(){1!=this.conf.today&&(this.conf.today=!0,this._adjustTimeCont())},this.hideToday=function(){1==this.conf.today&&(this.conf.today=!1,this._adjustTimeCont())},this._adjustTimeCont=function(){var a="";1==this.conf.time&&(a+="_time"),1==this.conf.today&&(a+="_today"),""==a?this.contTime.style.display="none":(this.contTime.className="dhtmlxcalendar_time_cont dhtmlxcalendar_mode"+a,this.contTime.style.display=""),this._ifrSize()},this._adjustTimeCont(),(m=document.createElement("UL")).className="dhtmlxcalendar_line",this.contTime.appendChild(m);var r=document.createElement("LI");for(var n in r.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr",r.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'>:</span><span class='dhtmlxcalendar_label_minutes'></span><span class='dhtmlxcalendar_label_clear'>"+this.langData[this.lang].clear+"</span><span class='dhtmlxcalendar_label_today'>"+this.langData[this.lang].today+"</span>",m.appendChild(r),r.onclick=function(v){"touchstart"==(v=v||event).type&&null!=v.preventDefault&&v.preventDefault();var a=v.target||v.srcElement;if(null!=a.tagName&&"span"==a.tagName.toLowerCase()&&1==a._par&&null!=a.parentNode&&(a=a.parentNode),a.className&&"dhtmlxcalendar_label_hours"==a.className){v.cancelBubble=!0;var u=h.contMonth.offsetHeight+h.contDays.offsetHeight+h.contDates.offsetHeight+a.offsetTop;h._showSelector("hours",Math.round(a.offsetLeft+a.offsetWidth/2),u-2,"selector_hours",!0)}else if(a.className&&"dhtmlxcalendar_label_minutes"==a.className){if(v.cancelBubble=!0,1==h._minutesInterval){var w=h.getFormatedDate("%i");a.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+w.charAt(0)+"</span>"+w.charAt(1),a.firstChild._par=!0,h._selectorMode=1}u=h.contMonth.offsetHeight+h.contDays.offsetHeight+h.contDates.offsetHeight+a.offsetTop;h._showSelector("minutes",Math.round(a.offsetLeft+a.offsetWidth/2),u-2,"selector_minutes",!0)}else{if(h._hideSelector(),a.className&&"dhtmlxcalendar_label_today"==a.className)(w=new Date).setHours(h._activeDate.getHours()),w.setMinutes(h._activeDate.getMinutes()),w.setSeconds(h._activeDate.getSeconds()),h.setDate(w),h._updateInp(),h.callEvent("onButtonClick",[w]);a.className&&"dhtmlxcalendar_label_clear"==a.className&&(h._nullDate=!0,h._drawMonth(new Date),h._updateInp(),h.callEvent("onButtonClick",[null]))}},1==this.conf.touch&&(r.ontouchstart=r.onclick),this._activeMonth=null,this._activeDate=new Date,this._activeDateCell=null,this.setDate=function(u){window.dhx4.temp_calendar={tz:null},this._nullDate=void 0===u||""===u||!u,u instanceof Date||("Invalid Date"==(u=this._strToDate(String(u||"")))?u=new Date:this.conf.tz=window.dhx4.temp_calendar.tz,window.dhx4.temp_calendar=null),null==this.conf.tz&&(this.conf.tz=window.dhx4.date2str(u,"%P"));var a=u.getTime();this._isOutOfRange(a)||(this._activeDate=new Date(a),this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes())},this.getDate=function(v){if(this._nullDate)return null;var a=new Date(this._activeDate.getTime());if(v){window.dhx4.temp_calendar={tz:this.conf.tz};var u=this._dateToStr(a);return window.dhx4.temp_calendar=null,u}return a},this._drawMonth=function(F){if(F instanceof Date){isNaN(F.getFullYear())&&(F=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)),this._activeMonth=new Date(F.getFullYear(),F.getMonth(),1,0,0,0,0),this._activeDateCell=null;var D=new Date(this._activeMonth.getTime()),J=D.getDay()-this._wStart;J<0&&(J+=7),D.setDate(D.getDate()-J);for(var M=F.getMonth(),N=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime(),A=0,u=0;u<6;u++)for(var E=this._wStart,L=0;L<=7;L++)if(0==L){var K=this.getWeekNumber(new Date(D.getFullYear(),D.getMonth(),D.getDate()+A,0,0,0,0));if(52<=K&&1==this.conf.ws_first&&0==this._activeMonth.getMonth()){var y=this.getWeekNumber(new Date(D.getFullYear(),D.getMonth(),D.getDate()+A+7,0,0,0,0));y<K&&1<y&&(K=1)}this.contDates.childNodes[u].childNodes[L].innerHTML="<div class='dhtmlxcalendar_label'>"+K+"</div>"}else{var a=new Date(D.getFullYear(),D.getMonth(),D.getDate()+A,0,0,0,0);if(0!=a.getHours()){var C=12<a.getHours()?24-a.getHours():a.getHours();a.setTime(a.getTime()+36e5*C)}a.getDay();var x=a.getTime(),H="dhtmlxcalendar_label";null!=this._tipData[x]?(this._tipData[x].usePopup&&"function"==typeof window.dhtmlXPopup?(this.contDates.childNodes[u].childNodes[L].removeAttribute("title"),this._initTooltipPopup()):this.contDates.childNodes[u].childNodes[L].setAttribute("title",this._tipData[x].text),this._tipData[x].showIcon&&(H+=" dhtmlxcalendar_label_title")):this.contDates.childNodes[u].childNodes[L].removeAttribute("title"),this.contDates.childNodes[u].childNodes[L].innerHTML="<div class='"+H+"'>"+a.getDate()+"</div>",this.contDates.childNodes[u].childNodes[L]._date=new Date(x),this.contDates.childNodes[u].childNodes[L]._q=u,this.contDates.childNodes[u].childNodes[L]._w=L,this.contDates.childNodes[u].childNodes[L]._css_month=a.getMonth()==M,this.contDates.childNodes[u].childNodes[L]._css_date=!this._nullDate&&x==N,this.contDates.childNodes[u].childNodes[L]._css_weekend=6<=E,this.contDates.childNodes[u].childNodes[L]._css_dis=this._isOutOfRange(x),this.contDates.childNodes[u].childNodes[L]._css_holiday=1==this._holidays[x],this._updateCellStyle(u,L),x==N&&(this._activeDateCell=this.contDates.childNodes[u].childNodes[L]),7<++E&&(E=1),A++}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(F)}},this._updateCellStyle=function(x,a){var v=this.contDates.childNodes[x].childNodes[a],u="dhtmlxcalendar_cell dhtmlxcalendar_cell";u+=v._css_month?"_month":"",u+=v._css_date?"_date":"",u+=v._css_weekend?"_weekend":"",u+=v._css_holiday?"_holiday":"",u+=v._css_dis?"_dis":"",u+=v._css_hover&&!v._css_dis?"_hover":"",v.className=u,v=null},this._minutesInterval=5,this._initSelector=function(D,x){if(this._selCover||(this._selCover=document.createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.firstChild.appendChild(this._selCover)),this._sel||(this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.firstChild.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.onmouseover=function(H){var w=(H=H||event).target||H.srcElement;!0===w._cell&&(h._selHover!=w&&h._clearSelHover(),null!=String(w.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)&&(w.className+=" dhtmlxcalendar_selector_cell_hover",h._selHover=w))},this._sel.onmouseout=function(){h._clearSelHover()},this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(w){"touchstart"==(w=w||event).type&&null!=w.preventDefault&&w.preventDefault(),w.cancelBubble=!0,h._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(w){"touchstart"==(w=w||event).type&&null!=w.preventDefault&&w.preventDefault(),w.cancelBubble=!0,h._scrollYears(1)},1==this.conf.touch&&(this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick,this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick),this._sel._ta={},this._selHover=null,this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"),1!=this._sel._ta[D]){if("month"==D){this._msCells={},this.msCont=document.createElement("DIV"),this.msCont.className="dhtmlxcalendar_area_"+x,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);for(var u=0,a=0;a<4;a++){(C=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.msCont.appendChild(C);for(var E=0;E<3;E++){(F=document.createElement("LI")).innerHTML=this.langData[this.lang].monthesSNames[u],F.className="dhtmlxcalendar_selector_cell",C.appendChild(F),F._month=u,F._cell=!0,this._msCells[u++]=F}}this.msCont.onclick=function(H){"touchstart"==(H=H||event).type&&null!=H.preventDefault&&H.preventDefault(),H.cancelBubble=!0;var w=H.target||H.srcElement;null!=w._month&&(h._hideSelector(),h._updateActiveMonth(),h._drawMonth(new Date(h._activeMonth.getFullYear(),w._month,1,0,0,0,0)),h._doOnSelectorChange())},1==this.conf.touch&&(this.msCont.ontouchstart=this.msCont.onclick)}if("year"==D){this._ysCells={},this.ysCont=document.createElement("DIV"),this.ysCont.className="dhtmlxcalendar_area_"+x,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(a=0;a<4;a++){(C=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.ysCont.appendChild(C);for(E=0;E<3;E++){(F=document.createElement("LI")).className="dhtmlxcalendar_selector_cell",F._cell=!0,C.appendChild(F)}}this.ysCont.onclick=function(H){"touchstart"==(H=H||event).type&&null!=H.preventDefault&&H.preventDefault(),H.cancelBubble=!0;var w=H.target||H.srcElement;null!=w._year&&(h._hideSelector(),h._drawMonth(new Date(w._year,h._activeMonth.getMonth(),1,0,0,0,0)),h._doOnSelectorChange())},1==this.conf.touch&&(this.ysCont.ontouchstart=this.ysCont.onclick)}if("hours"==D){this._hsCells={},this.hsCont=document.createElement("DIV"),this.hsCont.className="dhtmlxcalendar_area_"+x,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);for(u=0,a=0;a<4;a++){(C=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.hsCont.appendChild(C);for(E=0;E<6;E++){(F=document.createElement("LI")).innerHTML=this._fixLength(u,2),F.className="dhtmlxcalendar_selector_cell",C.appendChild(F),F._hours=u,F._cell=!0,this._hsCells[u++]=F}}this.hsCont.onclick=function(H){"touchstart"==(H=H||event).type&&null!=H.preventDefault&&H.preventDefault(),H.cancelBubble=!0;var w=H.target||H.srcElement;null!=w._hours&&(h._hideSelector(),h._activeDate.setHours(w._hours),h._updateActiveHours(),h._updateVisibleHours(),h._doOnSelectorChange(),h.callEvent("onTimeChange",[new Date(h._activeDate.getTime())]))},1==this.conf.touch&&(this.hsCont.ontouchstart=this.hsCont.onclick)}if("minutes"==D){var A=4,v=3,y=2;1==this._minutesInterval&&(1==this._selectorMode?(A=2,v=3,y=1):(A=2,v=5,y=1,x+="5")),10==this._minutesInterval&&(A=2),15==this._minutesInterval&&(A=1,v=4,x+="4"),this._rsCells={},this.rsCont=document.createElement("DIV"),this.rsCont.className="dhtmlxcalendar_area_"+x,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);for(u=0,a=0;a<A;a++){var C;(C=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.rsCont.appendChild(C);for(E=0;E<v;E++){var F;(F=document.createElement("LI")).innerHTML=1<y?this._fixLength(u,y):u,F.className="dhtmlxcalendar_selector_cell",C.appendChild(F),F._minutes=u,F._cell=!0,this._rsCells[u]=F,u+=this._minutesInterval}}this.rsCont.onclick=function(I){"touchstart"==(I=I||event).type&&null!=I.preventDefault&&I.preventDefault(),I.cancelBubble=!0;var H=I.target||I.srcElement;if(null!=H._minutes){if(1==h._minutesInterval){var w=h.getFormatedDate("%i");if(w=1==h._selectorMode?H._minutes.toString()+w.charAt(1):w.charAt(0)+H._minutes.toString(),h._activeDate.setMinutes(Number(w)),h.callEvent("onTimeChange",[new Date(h._activeDate.getTime())]),h._hideSelector(),1==h._selectorMode)return h._updateVisibleMinutes(!0),h._selectorMode=2,h._showSelector("minutes",h._sel._x,h._sel._y,"selector_minutes",!0),void h._updateActiveMinutes();h._selectorMode=1}else h._hideSelector(),h._activeDate.setMinutes(H._minutes),h._updateActiveMinutes(),h.callEvent("onTimeChange",[new Date(h._activeDate.getTime())]);h._updateVisibleMinutes(),h._doOnSelectorChange()}},1==this.conf.touch&&(this.rsCont.ontouchstart=this.rsCont.onclick)}this._sel._ta[D]=!0}},this._showSelector=function(A,u,C,w,a){if(!0===a&&null!=this._sel&&this._isSelectorVisible()&&A==this._sel._t)this._hideSelector();else{"dhx_terrace"==this.conf.skin&&(u+=12),this._sel&&this._sel._ta[A]||this._initSelector(A,w),A!=this._sel._t&&"minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")),this._sel._x=u,this._sel._y=C,this._sel.style.visibility="hidden",this._sel.style.display="",this._selCover.style.width=this.base.offsetWidth-2+"px",this._selCover.style.top=this.contMonth.offsetHeight+"px",this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px",this._selCover.style.display="",this._sel._t=A,this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+w+("hours"==A&&1==this.conf.today?"2":""),this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display="year"==A?"":"none";var v=Math.max(0,u-Math.round(this._sel.offsetWidth/2));v+this._sel.offsetWidth>this._sel.parentNode.offsetWidth&&(v=this._sel.parentNode.offsetWidth-this._sel.offsetWidth),this._sel.style.left=v+"px",this._sel.style.top="hours"==A||"minutes"==A?C-this._sel.offsetHeight+"px":C+"px",this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px",this._sel.style.visibility="visible",this._doOnSelectorShow(A)}},this._doOnSelectorShow=function(a){"month"==a&&this._updateActiveMonth(),"year"==a&&this._updateYearsList(this._activeMonth),"hours"==a&&this._updateActiveHours(),"minutes"==a&&this._updateActiveMinutes()},this._hideSelector=function(a){this._sel&&(this._sel.style.display="none",this._sel.style.visible="hidden",this._selCover.style.display="none","minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"),this._unloadSelector("minutes")))},this._isSelectorVisible=function(){return!!this._sel&&"none"!=this._sel.style.display},this._doOnSelectorChange=function(a){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),!0===a])},this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null)},this._unloadSelector=function(v){if(this._sel&&this._sel._ta[v]){if("month"==v){for(var u in this.msCont.onclick=this.msCont.ontouchstart=null,this._msActive=null,this._msCells)this._msCells[u]._cell=null,this._msCells[u]._month=null,this._msCells[u].parentNode.removeChild(this._msCells[u]),this._msCells[u]=null;for(this._msCells=null;0<this.msCont.childNodes.length;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont),this.msCont=null}if("year"==v){for(var u in this.ysCont.onclick=this.ysCont.ontouchstart=null,this._ysCells)this._ysCells[u]._cell=null,this._ysCells[u]._year=null,this._ysCells[u].parentNode.removeChild(this._ysCells[u]),this._ysCells[u]=null;for(this._ysCells=null;0<this.ysCont.childNodes.length;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont),this.ysCont=null}if("hours"==v){for(var u in this.hsCont.onclick=this.hsCont.ontouchstart=null,this._hsActive=null,this._hsCells)this._hsCells[u]._cell=null,this._hsCells[u]._hours=null,this._hsCells[u].parentNode.removeChild(this._hsCells[u]),this._hsCells[u]=null;for(this._hsCells=null;0<this.hsCont.childNodes.length;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont),this.hsCont=null}if("minutes"==v){for(var u in this.rsCont.onclick=this.rsCont.ontouchstart=null,this._rsActive=null,this._rsCells)this._rsCells[u]._cell=null,this._rsCells[u]._minutes=null,this._rsCells[u].parentNode.removeChild(this._rsCells[u]),this._rsCells[u]=null;for(this._rsCells=null;0<this.rsCont.childNodes.length;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont),this.rsCont=null}this._sel._ta[v]=null}},this.setMinutesInterval=function(a){1!=a&&5!=a&&10!=a&&15!=a||(this._minutesInterval=a,this._unloadSelector("minutes"))},this._updateActiveMonth=function(){void 0!==this._msActive&&void 0!==this._msCells[this._msActive]&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"),this._msActive=this._activeMonth.getMonth(),this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateActiveYear=function(){var a=this._activeMonth.getFullYear();this._ysCells[a]&&(this._ysCells[a].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateYearsList=function(A){for(var v in this._ysCells)this._ysCells[v]=null,delete this._ysCells[v];for(var x=12*Math.floor(A.getFullYear()/12),y=0;y<4;y++)for(var u=0;u<3;u++)this.ysCont.childNodes[y].childNodes[u].innerHTML=x,this.ysCont.childNodes[y].childNodes[u]._year=x,this.ysCont.childNodes[y].childNodes[u].className="dhtmlxcalendar_selector_cell",this._ysCells[x++]=this.ysCont.childNodes[y].childNodes[u];this._updateActiveYear()},this._scrollYears=function(a){var v=(a<0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+a,u=new Date(v,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(u)},this._updateActiveHours=function(){void 0!==this._hsActive&&void 0!==this._hsCells[this._hsActive]&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"),this._hsActive=this._activeDate.getHours(),this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)},this._updateActiveMinutes=function(){null!=this._rsActive&&void 0!==this._rsActive&&void 0!==this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"),1==this._minutesInterval?this._rsActive=this.getFormatedDate("%i").toString().charAt(1==this._selectorMode?0:1):this._rsActive=this._activeDate.getMinutes(),void 0!==this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateVisibleMinutes=function(u){var a=this._fixLength(this._activeDate.getMinutes(),2).toString();1==u&&(a=a.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+a.charAt(1)+"</span>"),this.contTime.firstChild.firstChild.childNodes[3].innerHTML=a,1==u&&(this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=!0)},this._fixLength=function(a,u){for(;String(a).length<u;)a="0"+String(a);return a},this._dateFormat="",this._dateFormatRE=null,this.setDateFormat=function(x){var w={};if(null!=this._strToDate)for(var u in this.i)if(null!=this.i[u].input&&0<this.i[u].input.value.length){var y=this._strToDate(this.i[u].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");y instanceof Date&&(w[u]=y)}this._dateFormat=x;var v=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(a){switch(a.replace(/%/,"")){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+h.langData[h.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+h.langData[h.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM";case"u":return"\\d{1,6}";case"P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return a});for(var u in this._dateFormatRE=new RegExp(v,"i"),w)this.i[u].input.value=this._dateToStr(w[u]);w=null},this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this._updateDateStr=function(u){if(this._dateFormatRE&&u.match(this._dateFormatRE)&&u!=this.getFormatedDate()){var a=this._strToDate(u);a instanceof Date&&(!this.checkEvent("onBeforeChange")||this.callEvent("onBeforeChange",[new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())])?(this._nullDate=!1,this._activeDate=a,this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleMinutes(),this._updateVisibleHours(),this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t),this._doOnSelectorChange(!0)):this._updateInp())}},this.showMonth=function(a){"string"==typeof a&&(a=this._strToDate(a)),a instanceof Date&&this._drawMonth(a)},this.setFormatedDate=function(x,y,u,w){var v=this._strToDate(y,x);if(w)return v;this.setDate(v)},this.getFormatedDate=function(u,a){if(!(a&&a instanceof Date)){if(this._nullDate)return"";a=new Date(this._activeDate)}return this._dateToStr(a,u)},this.getWeekNumber=function(y){if("string"==typeof y&&(y=this._strToDate(y)),!(y instanceof Date))return"Invalid Date";void 0===this._ftDay&&(this._ftDay=4);var H=this._wStart,F=4,w=new Date(y.getFullYear(),0,1,0,0,0,0).getDay();0==w&&(w=7),F<H&&(F+=7,w+=7);var D=0;H<=w&&w<=F||(D=1);var C=w-H,E=new Date(y.getFullYear(),0,1-C+7*D,0,0,0,0),u=new Date(y.getFullYear(),y.getMonth(),y.getDate()+1,0,0,0,0),I=Math.ceil((u.getTime()-E.getTime())/6048e5);if(0==I){var A=new Date(y.getFullYear(),y.getMonth(),y.getDate(),0,0,0,0),a=A.getDay()-this._wStart;a<0&&(a+=7),A.setDate(A.getDate()-a),I=this.getWeekNumber(A)}return I},this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"},this.hideWeekNumbers=function(){this.base.firstChild.className=""},this.show=function(w){if(w||!this._hasParent){if("string"==typeof w){var v=document.getElementById(w);if(null!=v&&void 0!==v._dhtmlxcalendar_uid&&null!=this.i[v._dhtmlxcalendar_uid])return void this._show(v._dhtmlxcalendar_uid)}if("object"!=typeof w||void 0===w._dhtmlxcalendar_uid||this.i[w._dhtmlxcalendar_uid]!=w){if(void 0===w)for(var u in this.i)w||(w=u);w&&this._show(w)}else this._show(w._dhtmlxcalendar_uid)}else this._show()},this.hide=function(){this._isVisible()&&this._hide()},this.isVisible=function(){return this._isVisible()},this._activeInp=null,this.pos="bottom",this.setPosition=function(a,u){this._px=null,this._py=null,"right"==a||"bottom"==a?this.pos=a:(this.pos="int",void 0===a||isNaN(a)||(this.base.style.left=a+"px",this._px=a),void 0===u||isNaN(u)||(this.base.style.top=u+"px",this._py=u),this._ifrSize())},this._show=function(C,u){if(!0===u&&this._activeInp==C&&this._isVisible())this._hide();else{if(this.base.style.visibility="hidden",this.base.style.display="",C){-1==this.base.className.indexOf("dhtmlxcalendar_in_input")&&(this.base.className+=" dhtmlxcalendar_in_input");var v=this.i[C].input||this.i[C].button,D=window.dhx4.screenDim(),A={top:window.dhx4.absTop(v),left:window.dhx4.absLeft(v)};if("right"==this.pos)this.base.style.left=A.left+v.offsetWidth+"px",this.base.style.top=Math.min(A.top,D.bottom-this.base.offsetHeight)+"px";else if("bottom"==this.pos){var y=A.top+v.offsetHeight+1;if(y+this.base.offsetHeight>D.bottom){var w=A.top-this.base.offsetHeight;-20<=w&&(y=w)}var a=A.left;a+this.base.offsetWidth>D.right&&(a=Math.max(0,A.left+v.offsetWidth-this.base.offsetWidth)),this.base.style.left=a+"px",this.base.style.top=y+"px"}else this.base.style.left=(this._px||0)+"px",this.base.style.top=(this._py||0)+"px";this._activeInp=C,v=null}else null!=this._px&&null!=this._py?(this.base.style.left=this._px+"px",this.base.style.top=this._py+"px"):(this.base.style.left="0px",this.base.style.top="0px");this._hideSelector(),this.base.style.visibility="visible",this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this._ifrSize(),this._ifr&&(this._ifr.style.display=""),this.callEvent("onShow",[])}},this._hide=function(){null!=this._lastHover&&this._clearDayHover(),this._hideSelector(),this.base.style.display="none",window.dhx4.zim.clear(this.conf.zi),0<=this.base.className.indexOf("dhtmlxcalendar_in_input")&&(this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,"")),this._activeInp=null,this._ifr&&(this._ifr.style.display="none"),this.callEvent("onHide",[])},this._isVisible=function(){return"none"!=this.base.style.display},this._rangeActive=!1,this._rangeFrom=null,this._rangeTo=null,this._rangeSet={},this.setInsensitiveDays=function(v){for(var a=this._extractDates(v),u=0;u<a.length;u++)this._rangeSet[new Date(a[u].getFullYear(),a[u].getMonth(),a[u].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this.clearInsensitiveDays=function(){this._clearRangeSet(),this._drawMonth(this._activeMonth)},this._holidays={},this.setHolidays=function(u){if(null==u)this._clearHolidays();else if(null!=u)for(var a=this._extractDates(u),v=0;v<a.length;v++)this._holidays[new Date(a[v].getFullYear(),a[v].getMonth(),a[v].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this._extractDates=function(v){("string"==typeof v||v instanceof Date)&&(v=[v]);for(var u=[],x=0;x<v.length;x++)if("string"==typeof v[x])for(var y=v[x].split(","),a=0;a<y.length;a++)u.push(this._strToDate(y[a]));else v[x]instanceof Date&&u.push(v[x]);return u},this._clearRange=function(){this._rangeActive=!1,this._rangeType=null,this._rangeFrom=null,this._rangeTo=null},this._clearRangeSet=function(){for(var u in this._rangeSet)this._rangeSet[u]=null,delete this._rangeSet[u]},this._clearHolidays=function(){for(var u in this._holidays)this._holidays[u]=null,delete this._holidays[u]},this._isOutOfRange=function(u){if(1==this._rangeSet[u])return!0;if(this._rangeActive){if("in"==this._rangeType&&(u<this._rangeFrom||u>this._rangeTo))return!0;if("out"==this._rangeType&&u>=this._rangeFrom&&u<=this._rangeTo)return!0;if("from"==this._rangeType&&u<this._rangeFrom)return!0;if("to"==this._rangeType&&u>this._rangeTo)return!0}var a=new Date(u);return!(!this._rangeWeek||!0!==this._rangeWeekData[a.getDay()])||(!(!this._rangeMonth||!0!==this._rangeMonthData[a.getDate()])||!(!this._rangeYear||!0!==this._rangeYearData[a.getMonth()+"_"+a.getDate()]))},this.clearSensitiveRange=function(){this._clearRange(),this._drawMonth(this._activeMonth)},this.setSensitiveRange=function(w,v,a){var u=!1;if(null!=w&&null!=v){if(w instanceof Date||(w=this._strToDate(w)),v instanceof Date||(v=this._strToDate(v)),w.getTime()>v.getTime())return;this._rangeFrom=new Date(w.getFullYear(),w.getMonth(),w.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(v.getFullYear(),v.getMonth(),v.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="in",u=!0}u||null==w||null!=v||(w instanceof Date||(w=this._strToDate(w)),this._rangeFrom=new Date(w.getFullYear(),w.getMonth(),w.getDate(),0,0,0,0).getTime(),!(this._rangeTo=null)===a&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",u=!0),u||null!=w||null==v||(v instanceof Date||(v=this._strToDate(v)),this._rangeFrom=null,this._rangeTo=new Date(v.getFullYear(),v.getMonth(),v.getDate(),0,0,0,0).getTime(),!0===a&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",u=!0),u&&this._drawMonth(this._activeMonth)},this.setInsensitiveRange=function(u,a){if(null!=u&&null!=a){if(u instanceof Date||(u=this._strToDate(u)),a instanceof Date||(a=this._strToDate(a)),u.getTime()>a.getTime())return;return this._rangeFrom=new Date(u.getFullYear(),u.getMonth(),u.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="out",void this._drawMonth(this._activeMonth)}null==u||null!=a?null!=u||null==a||this.setSensitiveRange(a,null,!0):this.setSensitiveRange(null,u,!0)},this.disableDays=function(y,x){if("week"==y){for(var u in"object"!=typeof x&&void 0===x.length&&(x=[x]),this._rangeWeekData||(this._rangeWeekData={}),this._rangeWeekData)this._rangeWeekData[u]=!1,delete this._rangeWeekData[u];for(var w=0;w<x.length;w++)this._rangeWeekData[x[w]]=!0,7==x[w]&&(this._rangeWeekData[0]=!0);this._rangeWeek=!0}if("month"==y){for(var u in"object"!=typeof x&&void 0===x.length&&(x=[x]),this._rangeMonthData||(this._rangeMonthData={}),this._rangeMonthData)this._rangeMonthData[u]=!1,delete this._rangeMonthData[u];for(w=0;w<x.length;w++)this._rangeMonthData[x[w]]=!0;this._rangeMonth=!0}if("year"==y){var v=this._extractDates(x);for(var u in this._rangeYearData||(this._rangeYearData={}),this._rangeYearData)this._rangeYearData[u]=!1,delete this._rangeYearData[u];for(w=0;w<v.length;w++)this._rangeYearData[v[w].getMonth()+"_"+v[w].getDate()]=!0;this._rangeYear=!0}this._drawMonth(this._activeMonth)},this.enableDays=function(a){"week"==a&&(this._rangeWeek=!1),"month"==a&&(this._rangeMonth=!1),"year"==a&&(this._rangeYear=!1),this._drawMonth(this._activeMonth)},this._tipData={},this._tipTM=null,this._tipTMTime=400,this._tipEvs=!1,this._tipPopup=null,this._tipCellDate=null,this._tipCellDim=null,this.setTooltip=function(v,y,A,a){for(var w=this._extractDates(v),x=0;x<w.length;x++){var u=new Date(w[x].getFullYear(),w[x].getMonth(),w[x].getDate(),0,0,0,0).getTime();this._tipData[u]={text:y,showIcon:A,usePopup:a}}this._drawMonth(this._activeMonth)},this.clearTooltip=function(u){for(var v=this._extractDates(u),w=0;w<v.length;w++){var a=new Date(v[w].getFullYear(),v[w].getMonth(),v[w].getDate(),0,0,0,0).getTime();this._tipData[a]=null,delete this._tipData[a]}this._drawMonth(this._activeMonth)},this._initTooltipPopup=function(){this._tipEvs||(this.attachEvent("onMouseOver",function(u){var a=new Date(u.getFullYear(),u.getMonth(),u.getDate(),0,0,0,0).getTime();null!=this._tipData[a]&&(this._tipTM&&window.clearTimeout(this._tipTM),this._tipCellDate=u,this._tipCellDim=this.getCellDimension(u),this._tipText=this._tipData[a].text,this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime))}),this.attachEvent("onMouseOut",this._hideTooltipPopup),this._tipEvs=!0)},this._showTooltipPopup=function(A,a,C,u,v){h._tipPopup||(h._tipPopup=new dhtmlXPopup({mode:"top"})),h._tipPopup.attachHTML(h._tipText),h._tipPopup.show(h._tipCellDim.x,h._tipCellDim.y,h._tipCellDim.w,h._tipCellDim.h),h.callEvent("onPopupShow",[h._tipCellDate])},this._hideTooltipPopup=function(){this._tipTM&&window.clearTimeout(this._tipTM),null!=this._tipPopup&&this._tipPopup.isVisible()&&(this._tipPopup.hide(),this.callEvent("onPopupHide",[this._tipCellDate]))},this.getPopup=function(){return this._tipPopup},this.getCellDimension=function(v){if("string"==typeof v&&(v=this._strToDate(v)),!(v instanceof Date))return null;for(var x=new Date(v.getFullYear(),v.getMonth(),v.getDate(),0,0,0,0).getTime(),u=null,y=0;y<this.contDates.childNodes.length;y++)for(var a=0;a<this.contDates.childNodes[y].childNodes.length;a++){var A=this.contDates.childNodes[y].childNodes[a];null!=A._date&&A._date.getTime()==x&&(u={x:window.dhx4.absLeft(A),y:window.dhx4.absTop(A),w:A.offsetWidth,h:A.offsetHeight}),A=null}return u},this._updateFromInput=function(a){if(this._nullInInput&&0==a.value.replace(/\s/g,"").length){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[null]))return void this._updateInp();this.setDate(null)}else this._updateDateStr(a.value);a=null},this._doOnClick=function(u){var a=(u=u||event).target||u.srcElement;a._dhtmlxcalendar_uid&&a._dhtmlxcalendar_uid!=h._activeInp&&h._isVisible()&&h._activeInp?h._hide():a._dhtmlxcalendar_uid&&h.i[a._dhtmlxcalendar_uid]||(h._isSelectorVisible()?h._hideSelector():!h._hasParent&&h._isVisible()&&h._hide())},this._doOnKeyDown=function(a){27!=(a=a||event).keyCode&&13!=a.keyCode||(h._isSelectorVisible()?h._hideSelector():h._isVisible()&&!h._hasParent&&h._hide())},this._doOnInpClick=function(u){"touchstart"==(u=u||event).type&&null!=u.preventDefault&&u.preventDefault();var a=u.target||u.srcElement;a._dhtmlxcalendar_uid&&(h._listenerEnabled||h._updateFromInput(a),h._show(a._dhtmlxcalendar_uid,!0))},this._doOnInpKeyUp=function(u){var a=(u=u||event).target||u.srcElement;13!=u.keyCode&&a._dhtmlxcalendar_uid&&(h._listenerEnabled||h._updateFromInput(a))},this._doOnBtnClick=function(u){"touchstart"==(u=u||event).type&&null!=u.preventDefault&&u.preventDefault();var a=u.target||u.srcElement;a._dhtmlxcalendar_uid&&(null!=h.i[a._dhtmlxcalendar_uid].input&&h._updateFromInput(h.i[a._dhtmlxcalendar_uid].input),h._show(a._dhtmlxcalendar_uid,!0))},this._doOnUnload=function(){h&&h.unload&&h.unload()},"function"==typeof window.addEventListener?(document.body.addEventListener("click",h._doOnClick,!1),window.addEventListener("keydown",h._doOnKeyDown,!1),window.addEventListener("unload",h._doOnUnload,!1),1==this.conf.touch&&document.body.addEventListener("touchstart",h._doOnClick,!1)):(document.body.attachEvent("onclick",h._doOnClick),document.body.attachEvent("onkeydown",h._doOnKeyDown),window.attachEvent("onunload",h._doOnUnload)),this.attachObj=function(v){var u=window.dhx4.newId();return"string"==typeof v?this.i[u]={input:document.getElementById(v)}:void 0!==v.tagName?this.i[u]={input:v}:"object"!=typeof v||null==v.input&&null==v.button||(this.i[u]={},null!=v.input&&(this.i[u].input="string"==typeof v.input?document.getElementById(v.input):v.input),null!=v.button&&(this.i[u].button="string"==typeof v.button?document.getElementById(v.button):v.button)),this._attachEventsToObject(u),u},this.detachObj=function(w){var v=null;if(null!=this.i[w]?v=w:"string"==typeof w?v=(w=document.getElementById(w))._dhtmlxcalendar_uid:void 0!==w.tagName?v=w._dhtmlxcalendar_uid:"object"!=typeof w||null==w.input&&null==w.button||(null==v&&null!=w.input&&(v=("string"==typeof w.input?document.getElementById(w.input):w.input)._dhtmlxcalendar_uid),null==v&&null!=w.button&&(v=("string"==typeof w.button?document.getElementById(w.button):w.button)._dhtmlxcalendar_uid)),null!=v&&null!=this.i[v]){for(var u in this._detachEventsFromObject(v),this.i[u])this.i[v][u]._dhtmlxcalendar_uid=null,this.i[v][u]=null,delete this.i[v][u];return this.i[v]=null,delete this.i[v],!0}return!1},this._attachEventsToObject=function(u){null!=this.i[u].button?(this.i[u].button._dhtmlxcalendar_uid=u,"function"==typeof window.addEventListener?(this.i[u].button.addEventListener("click",h._doOnBtnClick,!1),1==this.conf.touch&&this.i[u].button.addEventListener("touchstart",h._doOnBtnClick,!1)):this.i[u].button.attachEvent("onclick",h._doOnBtnClick)):null!=this.i[u].input&&(this.i[u].input._dhtmlxcalendar_uid=u,"function"==typeof window.addEventListener?(this.i[u].input.addEventListener("click",h._doOnInpClick,!1),this.i[u].input.addEventListener("keyup",h._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[u].input.addEventListener("touchstart",h._doOnInpClick,!1)):(this.i[u].input.attachEvent("onclick",h._doOnInpClick),this.i[u].input.attachEvent("onkeyup",h._doOnInpKeyUp)))},this._detachEventsFromObject=function(u){null!=this.i[u].button?"function"==typeof window.addEventListener?(this.i[u].button.removeEventListener("click",h._doOnBtnClick,!1),1==this.conf.touch&&this.i[u].button.removeEventListener("touchstart",h._doOnBtnClick,!1)):this.i[u].button.detachEvent("onclick",h._doOnBtnClick):null!=this.i[u].input&&("function"==typeof window.addEventListener?(this.i[u].input.removeEventListener("click",h._doOnInpClick,!1),this.i[u].input.removeEventListener("keyup",h._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[u].input.removeEventListener("touchstart",h._doOnInpClick,!1)):(this.i[u].input.detachEvent("onclick",h._doOnInpClick),this.i[u].input.detachEvent("onkeyup",h._doOnInpKeyUp)))},this._updateInp=function(){null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate())},this.enableListener=function(a){a&&("function"==typeof window.addEventListener?(a.addEventListener("focus",h._listenerEvFocus,!1),a.addEventListener("blur",h._listenerEvBlur,!1)):(a.attachEvent("onfocus",h._listenerEvFocus),a.attachEvent("onblur",h._listenerEvBlur)),a=null)},this.disableListener=function(a){a&&(a._f0=!1,this._tmListener&&window.clearTimeout(this._tmListener),"function"==typeof window.addEventListener?(a.removeEventListener("focus",h._listenerEvFocus,!1),a.removeEventListener("blur",h._listenerEvBlur,!1)):(a.detachEvent("onfocus",h._listenerEvFocus),a.detachEvent("onblur",h._listenerEvBlur)),a=null)},this._startListener=function(a){this._tmListener&&window.clearTimeout(this._tmListener),void 0===a._v1&&(a._v1=a.value),a._v1!=a.value&&(this._updateFromInput(a),a._v1=a.value),a._f0&&(this._tmListener=window.setTimeout(function(){h._startListener(a)},100))},this._listenerEvFocus=function(u){var a=(u=u||event).target||u.srcElement;a._f0=!0,h._startListener(a),a=null},this._listenerEvBlur=function(u){var a=(u=u||event).target||u.srcElement;a._f0=!1,a=null},this.i)this._attachEventsToObject(n);return window.dhx4._eventable(this),this._evOnArrowClick=function(a){return this.callEvent("onArrowClick",a)},this._evOnClick=function(a){return this.callEvent("onClick",a)},this._evOnMouseOut=function(a){return this.callEvent("onMouseOut",a)},this._evOnMouseOver=function(a){return this.callEvent("onMouseOver",a)},this.unload=function(){for(var u in this._activeDate=null,this._activeDateCell=null,this._activeInp=null,this._activeMonth=null,this._dateFormat=null,this._dateFormatRE=null,this._lastHover=null,this._tmListener&&window.clearTimeout(this._tmListener),this._tmListener=null,"function"==typeof window.addEventListener?(document.body.removeEventListener("click",h._doOnClick,!1),window.removeEventListener("keydown",h._doOnKeyDown,!1),window.removeEventListener("unload",h._doOnUnload,!1),1==this.conf.touch&&document.body.removeEventListener("touchstart",h._doOnClick,!1)):(document.body.detachEvent("onclick",h._doOnClick),document.body.detachEvent("onkeydown",h._doOnKeyDown),window.detachEvent("onunload",h._doOnKeyDown)),this._doOnClick=null,this._doOnKeyDown=null,this._doOnUnload=null,this.i)this.i[u]._dhtmlxcalendar_uid=null,this._detachEventsFromObject(u),this.disableListener(this.i[u].input),this.i[u]=null,delete this.i[u];for(this.i=null,this._doOnInpClick=null,this._doOnInpKeyUp=null,window.dhx4._eventable(this,"clear"),this.contMonth.onselectstart=null,this.contMonth.firstChild.firstChild.onclick=null,this.contMonth.firstChild.firstChild.ontouchstart=null,this.contMonth.firstChild.firstChild.firstChild.onmouseover=null,this.contMonth.firstChild.firstChild.firstChild.onmouseout=null,this.contMonth.firstChild.firstChild.lastChild.onmouseover=null,this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;0<this.contMonth.firstChild.firstChild.childNodes.length;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);for(this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild),this.contMonth.removeChild(this.contMonth.firstChild),this.contMonth.parentNode.removeChild(this.contMonth),this.contMonth=null;0<this.contDays.firstChild.childNodes.length;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);for(this.contDays.removeChild(this.contDays.firstChild),this.contDays.parentNode.removeChild(this.contDays),this.contDays=null,this.contDates.onclick=null,this.contDates.ontouchstart=null,this.contDates.onmouseover=null,this.contDates.onmouseout=null;0<this.contDates.childNodes.length;){for(;0<this.contDates.lastChild.childNodes.length;)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);this.contDates.removeChild(this.contDates.lastChild)}for(this.contDates.parentNode.removeChild(this.contDates),this.contDates=null,this.contTime.firstChild.firstChild.onclick=null,this.contTime.firstChild.firstChild.ontouchstart=null;0<this.contTime.firstChild.firstChild.childNodes.length;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);if(this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild),this.contTime.removeChild(this.contTime.firstChild),this.contTime.parentNode.removeChild(this.contTime),this.contTime=null,this._lastHover=null,this._unloadSelector("month"),this._unloadSelector("year"),this._unloadSelector("hours"),this._unloadSelector("minutes"),this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null),this._sel){for(var u in this._sel._ta)this._sel._ta[u]=null;for(this._sel._ta=null,this._sel._t=null,this._sel.onmouseover=null,this._sel.onmouseout=null;0<this._sel.firstChild.firstChild.firstChild.childNodes.length;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);for(this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild),this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);0<this._sel.childNodes.length;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel),this._sel=null}for(var u in this.base.onclick=null,this.base.onmousedown=null,this.base.ontouchstart=null,this.base.onmouseout=null,this.base.parentNode.removeChild(this.base),this.base=null,this._clearDayHover=null,this._clearSelHover=null,this._doOnSelectorChange=null,this._doOnSelectorShow=null,this._drawMonth=null,this._fixLength=null,this._ifrSize=null,this._hide=null,this._hideSelector=null,this._initSelector=null,this._isSelectorVisible=null,this._isVisible=null,this._scrollYears=null,this._show=null,this._showSelector=null,this._strToDate=null,this._updateActiveHours=null,this._updateActiveMinutes=null,this._updateActiveMonth=null,this._updateActiveYear=null,this._updateCellStyle=null,this._updateDateStr=null,this._updateVisibleHours=null,this._updateVisibleMinutes=null,this._updateYearsList=null,this.enableIframe=null,this.hide=null,this.hideTime=null,this.setDate=null,this.setDateFormat=null,this.setYearsRange=null,this.show=null,this.showTime=null,(this.unload=null)!=this._tipPopup&&(this._tipPopup.unload(),this._tipPopup=null),this)delete this[u];u=h=null},this.setDate(this._activeDate),this}function dhtmlXCombo(l,r,e,n,h){var m=this,g=null,s=null;"object"!=typeof l||l.tagName||(l=(g=l).parent,e=g.width,r=g.name,n=g.mode,s=g.skin),this.cont="string"==typeof l?document.getElementById(l):l,this.conf={skin:null,form_name:r||"dhxcombo",combo_width:(parseInt(e)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:!1,combo_focus:!1,opts_type:"string"==typeof n&&void 0!==this.modes[n]?n:"option",opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:!0,allow_empty_value:!0,free_text_empty:!1,enabled:!0,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&void 0===window.addEventListener?1:0,ro_mode:!1,ro_text:"",ro_tm:null,ro_tm_time:750,img_path:"",img_def:"",img_def_dis:!0,template:{header:!0,input:"#text#",option:"#text#"},f_func:null,f_mode:!1,f_url:!1,f_cache:!1,f_cache_data:{},f_dyn:!1,f_dyn_end:!1,f_mask:"",f_ac:!0,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:!1,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:!1,clear_blur:!1,clear_bsp:!1,clear_key:!1,i_ofs:23,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1},material:{list_ofs:0,hdr_ofs:1,scr_ofs:1}},col_w:null},this.conf.combo_image=1==this.modes[this.conf.opts_type].image,this.t={},this.base=document.createElement("DIV"),this.base.style.width=this.conf.combo_width+"px",this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0))+"px;"+(this.conf.combo_image?"margin-left:"+this.conf.i_ofs+"px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":""),this.cont.appendChild(this.base),this.list=document.createElement("DIV"),this.list._listId=window.dhx4.newId(),this.list.style.display="none",document.body.insertBefore(this.list,document.body.firstChild),this._doOnListScroll=function(){null!=m.conf.s_tm&&window.clearTimeout(m.conf.s_tm),m.conf.s_tm=window.setTimeout(m._doOnListScrollAction,m.conf.s_time)},this._doOnListScrollAction=function(){m.conf.s_tm=null,"scroll"==m.conf.s_mode&&m.list.scrollHeight-m.list.scrollTop-10<m.list.clientHeight&&m._subloadRequest()},"function"==typeof window.addEventListener?this.list.addEventListener("scroll",this._doOnListScroll,!1):this.list.attachEvent("onscroll",this._doOnListScroll),this.setSkin(s||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"material"),this._updateTopImage=function(a){this.conf.combo_image&&(this.base.lastChild.innerHTML=null!=a?this.t[a].obj.getTopImage(this.t[a].item,this.conf.enabled):this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled))},this._filterOpts=function(A){this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm);var w=String(this.base.firstChild.value).replace(new RegExp(this._fixRE(this.conf.f_ac_text)+"$","i"),"");if(this.conf.f_server_last!=w.toLowerCase()){if(null!=this.conf.f_url&&this.checkEvent("onDynXLS"))return this.conf.f_server_last=w.toLowerCase(),void this.callEvent("onDynXLS",[w]);if(null!=this.conf.f_url){if(0==w.length)return this.conf.f_server_last=w.toLowerCase(),void this.clearAll();if(1==this.conf.f_cache&&null!=this.conf.f_cache_data[w]){this.clearAll(),this.conf.f_server_last=w.toLowerCase();for(var v=0;v<this.conf.f_cache_data[w].data.length;v++)this.load(this.conf.f_cache_data[w].data[v]);this.conf.f_dyn&&(this.conf.f_dyn_end=this.conf.f_cache_data[w].dyn_end,this.conf.f_mask=this.conf.f_cache_data[w].mask),!0!==A&&(this._showList(!0),this._checkForMatch())}else this.conf.f_server_tm=window.setTimeout(function(){m.conf.f_server_last=w.toLowerCase(),m.conf.f_mask=w;var F="mask="+encodeURIComponent(w);m.conf.f_dyn&&(F+="&pos=0",m.conf.f_dyn_end=!1);var a=function(J){if(m.conf.f_cache&&(m.conf.f_cache_data[w]||(m.conf.f_cache_data[w]={data:[],dyn_end:!1,mask:w}),m.conf.f_cache_data[w].data.push(J.xmlDoc.responseXML)),m.clearAll(),m.load(J.xmlDoc.responseXML),1==(0<m.base.offsetWidth&&0<m.base.offsetHeight)&&1==m.conf.enabled&&1==m.conf.combo_focus&&!0!==A){if(m.conf.f_ac&&"start"==m.conf.f_mode&&0==m.conf.clear_bsp&&null!=m.list.firstChild){var H=m.list.firstChild._optId,K=String(m.t[H].obj.getText(m.list.firstChild,!0));w==m.base.firstChild.value&&0===String(K).toLowerCase().indexOf(String(w).toLowerCase())&&(m.base.firstChild.value=K,m.conf.f_ac_text=K.substr(w.length),m._selectRange(w.length,K.length))}m._showList(!0),m._checkForMatch()}a=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(m.conf.f_url,F,a):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(m.conf.f_url+(0<=String(m.conf.f_url).indexOf("?")?"&":"?")+F,a)},200)}else{this.conf.f_server_last=w.toLowerCase();var u=0==w.length||new RegExp(("start"==this.conf.f_mode?"^":"")+this._fixRE(w),"i"),x=null;for(var C in this.t){var E=!1;if(!0!==u)if(null!=this.conf.f_func){var y=this._getOption(this.t[C].item._optId,v);E=1==this.conf.f_func.apply(window,[w,y])}else{var D=this.t[C].obj.getText(this.t[C].item,!0);E=1==u.test(D)}!0===u||1==E?(this.t[C].item.style.display="",null==x&&0<w.length&&(x=String(this.t[C].obj.getText(this.t[C].item,!0)))):this.t[C].item.style.display="none"}this.conf.f_ac&&"start"==this.conf.f_mode&&0==this.conf.clear_bsp&&null!=x&&(this.conf.f_ac_text=x.replace(new RegExp("^"+w,"i"),""),this.base.firstChild.value=x,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)),"between"==this.conf.f_mode&&1==this.conf.clear_bsp&&this._checkForMatch(!0),!0!==A&&(this._showList(!0),this._checkForMatch())}}else this._checkForMatch()},this._searchRO=function(u){this.conf.ro_tm&&window.clearTimeout(this.conf.ro_tm),this.conf.ro_text+=u,this._showList();for(var v=0;v<this.list.childNodes.length;v++){var a=this.list.childNodes[v]._optId;if(0===String(this.t[a].obj.getText(this.list.childNodes[v],!0)).toLowerCase().indexOf(this.conf.ro_text)){this._setSelected(a,!0,!0),this._confirmSelect("script",!1);break}}this.conf.ro_tm=window.setTimeout(function(){m.conf.ro_text=""},this.conf.ro_tm_time)},this._fixRE=function(a){return String(a).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$&")},this._initObj=function(a){void 0!==a.template&&this.setTemplate(a.template),1!=a.add&&1!=this.conf.f_loading&&this.clearAll(!1),this.addOption(a.options)},this._xmlToObj=function(P,x,v){var C={add:!1,options:[]},J=1==x?P:P.getElementsByTagName("complete");if(0<J.length){1==window.dhx4.s2b(J[0].getAttribute("add"))&&(C.add=!0);for(var I=J[0].childNodes,F=0;F<I.length;F++)if(void 0!==I[F].tagName){if("template"==String(I[F].tagName).toLowerCase()){for(var O={},A=0;A<I[F].childNodes.length;A++){if(null!=(H=I[F].childNodes[A]).tagName){var K=H.tagName;if(void 0!==this.conf.template[K]&&(O[K]=window.dhx4._xmlNodeValue(H)),"columns"==K)for(var M=0;M<H.childNodes.length;M++){var y=H.childNodes[M];if(null!=y.tagName&&"column"==y.tagName){var E={};for(var N in{width:1,css:1,header:1,option:1})null!=y.getAttribute(N)&&(E[N]=y.getAttribute(N));for(var N in{header:1,option:1}){var L=y.getElementsByTagName(N);null!=L[0]&&null!=L[0].firstChild&&(E[N]=window.dhx4._xmlNodeValue(L[0]))}null==O.columns&&(O.columns=[]),O.columns.push(E)}y=null}}H=null}this.setTemplate(O)}if("option"==String(I[F].tagName).toLowerCase()){var D=!1;D=1==x?C.options.length==v:window.dhx4.s2b(I[F].getAttribute("selected"));var u={value:I[F].getAttribute("value"),text:window.dhx4._xmlNodeValue(I[F]),selected:D,checked:window.dhx4.s2b(I[F].getAttribute("checked"))};for(var N in{img:1,img_dis:1,img_src:1,img_src_dis:1,css:1})null!=I[F].getAttribute(N)&&(u[N]=I[F].getAttribute(N));for(A=0;A<I[F].childNodes.length;A++)if(null!=I[F].childNodes[A].tagName&&"text"==String(I[F].childNodes[A].tagName).toLowerCase()){u.text={};var H=I[F].childNodes[A];for(M=0;M<H.childNodes.length;M++)null!=H.childNodes[M].tagName&&(u.text[H.childNodes[M].tagName]=window.dhx4._xmlNodeValue(H.childNodes[M]))}C.options.push(u)}}J=I=null}return C},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:!0}),window.dhx4._eventable(this),this._getNearItem=function(v,u){for(var a=null;null!=v;)v=v[u<0?"previousSibling":"nextSibling"],null==a&&null!=v&&""==v.style.display&&null!=v._optId&&(a=v,v=null);return a},this.setName(this.conf.form_name),this._doOnListMouseMove=function(u){for(var a=(u=u||event).target||u.srcElement;null!=a&&a!=this;)void 0!==a._optId&&(m.conf.tm_hover&&window.clearTimeout(m.conf.tm_hover),m._setSelected(a._optId,!1,!1,!0)),a=a.parentNode;a=null},this._doOnListMouseDown=function(a){(a=a||event).cancelBubble=!0,m.conf.clear_click=!0,window.setTimeout(function(){m.base.firstChild.focus()},1)},this._doOnListMouseUp=function(v){if((v=v||event).button==m.conf.btn_left){for(var a=v.target||v.srcElement;null!=a&&a!=this;){if(void 0!==a._optId){var u=!0;"function"==typeof m.t[a._optId].obj.optionClick&&!0!==m.t[a._optId].obj.optionClick(a,v,m)&&(u=!1),u&&(m._setSelected(a._optId,null,!0),m._confirmSelect("click"))}a=a.parentNode}a=null}},this._doOnListMouseOut=function(a){m.conf.tm_hover&&window.clearTimeout(m.conf.tm_hover),m.conf.tm_hover=window.setTimeout(function(){var u=m.conf.last_match||m.conf.last_selected;null==m.conf.last_match&&null!=m.t[u]&&m.base.firstChild.value!=m.t[u].obj.getText(m.t[u].item,!0)&&(u=null),m._setSelected(u,null,!0,!0)},1)},this._doOnBaseMouseDown=function(x){if(m.conf.enabled&&(m.conf.clear_click=!0,(x=x||event).button==m.conf.btn_left)){var u=x.target||x.srcElement;if(u!=this.firstChild){window.setTimeout(function(){m.base.firstChild.focus()},1);for(var w=u;w!=this&&null!=w;)if(w==this.lastChild){if("function"==typeof m.modes[m.conf.opts_type].topImageClick){var v=m.conf.last_hover||m.conf.last_selected,a=null!=v?m.t[v].item:null;if(!0!==m.modes[m.conf.opts_type].topImageClick(a,m))return void(v=a=null)}w=null}else w=w.parentNode}m._isListVisible()?m._hideList():(u!=this.firstChild&&(m.conf.clear_blur=!0),m._showList(),m._setSelected(m.conf.last_selected,!0,!0)),u=null}},this._doOnBodyMouseDown=function(){m.conf.clear_click?m.conf.clear_click=!1:m._confirmSelect("blur")},this._doOnInputFocus=function(){m.conf.clear_blur=!1,m.conf.tm_confirm_blur&&window.clearTimeout(m.conf.tm_confirm_blur),0==m.conf.combo_focus&&(m.conf.combo_focus=!0,"material"==m.conf.skin&&null==m.base.className.match(/dhxcombo_actv/)&&(m.base.className+=" dhxcombo_actv"),m.callEvent("onFocus",[]))},this._doOnInputBlur=function(){1!=m.conf.clear_blur?(m.conf.tm_confirm_blur&&window.clearTimeout(m.conf.tm_confirm_blur),m.conf.tm_confirm_blur=window.setTimeout(function(){0==m.conf.clear_click&&(m._confirmSelect("blur"),m.conf.combo_focus=!1,"material"==m.conf.skin&&null!=m.base.className.match(/dhxcombo_actv/)&&(m.base.className=m.base.className.replace(/\s*dhxcombo_actv/gi,"")),m.callEvent("onBlur",[]))},20)):m.conf.clear_blur=!1},this._doOnInputKeyUp=function(a){if(a=a||event,0!=m.conf.f_mode)return m.conf.clear_bsp=8==a.keyCode||46==a.keyCode,void m._filterOpts();m._checkForMatch()},this._doOnInputKeyDown=function(a){38!=(a=a||event).keyCode&&40!=a.keyCode||a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,m._keyOnUpDown(38==a.keyCode?-1:1)),113==a.keyCode&&(m._isListVisible()||(m._showList(),m.base.firstChild.value==m.conf.last_text?(m._setSelected(m.conf.last_selected,!0,!0),m.base.firstChild.value=m.conf.last_text,m.conf.f_server_last=m.base.firstChild.value.toLowerCase()):(m.conf.f_server_last=m.base.firstChild.value.toLowerCase(),0==m.conf.f_mode&&m._checkForMatch()))),27==a.keyCode&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,m._cancelSelect()),13==a.keyCode&&(a.preventDefault&&a.preventDefault(),m._confirmSelect("kbd")),1==m.conf.ro_mode&&(48<=a.keyCode&&a.keyCode<=57||65<=a.keyCode&&a.keyCode<=90)&&(m._searchRO(String.fromCharCode(a.keyCode).toLowerCase()),a.cancelBubble=!0),m.conf.clear_key=!0,m.callEvent("onKeyPressed",[a.keyCode||a.charCode])},this._doOnInputKeyPress=function(a){m.conf.clear_key?m.conf.clear_key=!1:(a=a||event,m.callEvent("onKeyPressed",[a.keyCode||a.charCode]))},this._keyOnUpDown=function(a){var u=null;if(this.conf.last_hover?u=this.t[this.conf.last_hover].item:this.conf.last_selected&&(u=this.t[this.conf.last_selected].item),(u||0!=this._getListVisibleCount())&&(null!=u&&""!=u.style.display&&(u=null),this._showList(),null!=u?this.t[u._optId].obj.isSelected(u)&&(u=this._getNearItem(u,a)):""!=(u=this.list.firstChild).style.display&&(u=this._getNearItem(u,1)),null!=u)){if(this._setSelected(u._optId,!0,!0),0==this.conf.f_mode)this.base.firstChild.value=this.t[u._optId].obj.getText(u,!0);else{var v=String(this.t[u._optId].obj.getText(u,!0));"start"==this.conf.f_mode&&1==this.conf.f_ac?0===v.toLowerCase().indexOf(this.conf.f_server_last)?(this.conf.f_ac_text=v.substring(this.conf.f_server_last.length,v.length),this.base.firstChild.value=v,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)):(this.base.firstChild.value=v,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this._selectRange(0,this.base.firstChild.value.length)):(this.base.firstChild.value=v,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())}u=null}},this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(var c=0;c<this.conf.evs_nodes.length;c++)for(var o in this.conf.evs_nodes[c].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[c].node.addEventListener(o,this[this.conf.evs_nodes[c].evs[o]],!1):this.conf.evs_nodes[c].node.attachEvent("on"+o,this[this.conf.evs_nodes[c].evs[o]]);return this.unload=function(){this.clearAll(),this.t=null;for(var v=0;v<this.conf.evs_nodes.length;v++){for(var u in this.conf.evs_nodes[v].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[v].node.removeEventListener(u,this[this.conf.evs_nodes[v].evs[u]],!1):this.conf.evs_nodes[v].node.detachEvent("on"+u,this[this.conf.evs_nodes[v].evs[u]]),this.conf.evs_nodes[v].evs[u]=null,delete this.conf.evs_nodes[v].evs[u];this.conf.evs_nodes[v].node=null,this.conf.evs_nodes[v].evs=null,delete this.conf.evs_nodes[v].node,delete this.conf.evs_nodes[v].evs,this.conf.evs_nodes[v]=null}for(var u in window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this._mcDetachHeader(),this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null,this.conf)this.conf[u]=null,delete this.conf[u];for(var u in this.conf=null,"function"==typeof window.addEventListener?this.list.removeEventListener("scroll",this._doOnListScroll,!1):this.list.detachEvent("onscroll",this._doOnListScroll),this.base.parentNode.removeChild(this.base),this.list.parentNode.removeChild(this.list),this.base=this.list=this.cont=null,this.modes=null,this)"function"==typeof this[u]&&(this[u]=null);m=null},this.DOMelem_input=this.base.firstChild,this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)],this.DOMlist=this.list,this.DOMelem=this.base,this.DOMParent=l,(l=null)!=g&&(null!=g.filter&&("string"==typeof g.filter?this.enableFilteringMode(!0,g.filter,window.dhx4.s2b(g.filter_cache),window.dhx4.s2b(g.filter_sub_load)):this.enableFilteringMode(!0)),null!=g.image_path&&this.setImagePath(g.image_path),null==g.default_image&&null==g.default_image_dis||this.setDefaultImage(g.default_image,g.default_image_dis),(g.items||g.options)&&this.addOption(g.items||g.options),(g.xml||g.json)&&this.load(g.xml||g.json),void 0!==g.readonly&&this.readonly(g.readonly),g=null),this}function dhtmlXComboFromSelect(e){"string"==typeof e&&(e=document.getElementById(e));var c=e.offsetWidth,r=e.getAttribute("name")||null,g=document.createElement("SPAN");e.parentNode.insertBefore(g,e);var h=new dhtmlXCombo(g,r,c,e.getAttribute("mode")||e.getAttribute("opt_type")||"option");g=null;var n=e.getAttribute("imagePath");n&&h.setImagePath(n);var o=e.getAttribute("defaultImage"),m=e.getAttribute("defaultImageDis");1==window.dhx4.s2b(m)&&(m=!0),null==o&&null==m||h.setDefaultImage(o,m);var a=h._xmlToObj([e],!0,e.selectedIndex);return 0<a.options.length&&h.addOption(a.options),a=null,e.parentNode.removeChild(e),e=null,h}function dhtmlXComboExtend(g,e){for(var c in dhtmlXCombo.prototype.modes[e])void 0===dhtmlXCombo.prototype.modes[g][c]&&(dhtmlXCombo.prototype.modes[g][c]=dhtmlXCombo.prototype.modes[e][c])}function dhtmlXColorPicker(n){if(!(this instanceof window.dhtmlXColorPicker))return new dhtmlXColorPicker(n);dhx4._eventable(this);var a,c,h=this;switch(this._nodes=[],this.activeNode=null,this._inputListenerId=null,this.base=null,this._globalNode=null,this.memory=null,this.skin=null,this.conf={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:"right",customColors:!1,selectedColor:null,hide:!1,hideOnSelect:!1,lang:"en",closeable:!0},this.value={red:-1,blue:-1,green:-1,hue:-1,sat:-1,lum:-1},this._initMoveSelection=function(l){return l=l||event,"function"==typeof window.addEventListener?(h._controllerNodes.colorArea.addEventListener("mousemove",h._setMoveSelection,!1),document.body.addEventListener("mouseup",h._cleanMoveSelection,!1)):(h._controllerNodes.colorArea.attachEvent("onmousemove",h._setMoveSelection),document.body.attachEvent("onmouseup",h._cleanMoveSelection)),h._setMoveSelection(l,h._controllerNodes.colorArea),!1},this._cleanMoveSelection=function(){return"function"==typeof window.removeEventListener?(h._controllerNodes.colorArea.removeEventListener("mousemove",h._setMoveSelection,!1),document.body.removeEventListener("mouseup",h._cleanMoveSelection,!1)):(h._controllerNodes.colorArea.detachEvent("onmousemove",h._setMoveSelection),document.body.detachEvent("onmouseup",h._cleanMoveSelection)),!1},this._setMoveSelection=function(l){l=l||event;var o=h._getOffsetPosition(l,h._controllerNodes.colorArea);return h._controllerNodes.fr_cover?setTimeout(function(){h._setColorAreaXY(o.x,o.y),h._setColorByXYC()},0):(h._setColorAreaXY(o.x,o.y),h._setColorByXYC()),!1},this._initMoveContrast=function(l){l=l||event,"function"==typeof window.addEventListener?(document.body.addEventListener("mousemove",h._setMoveContrast,!1),document.body.addEventListener("mouseup",h._cleanMoveContrast,!1)):(document.body.attachEvent("onmousemove",h._setMoveContrast),document.body.attachEvent("onmouseup",h._cleanMoveContrast)),h._setMoveContrast(l,h._controllerNodes.contrastArea)},this._cleanMoveContrast=function(){"function"==typeof window.removeEventListener?(document.body.removeEventListener("mousemove",h._setMoveContrast,!1),document.body.removeEventListener("mouseup",h._cleanMoveContrast,!1)):(document.body.detachEvent("onmousemove",h._setMoveContrast),document.body.detachEvent("onmouseup",h._cleanMoveContrast))},this._setMoveContrast=function(l){l=l||event;var o=h._getOffsetPosition(l,h._controllerNodes.contrastArea);h._setContrastY(o.y),h._setColorByXYC(!0)},this._doOnSelectColor=function(){var l=h.colorAIP.rgb2hex({r:h.value.red,g:h.value.green,b:h.value.blue});null!=h.activeNode&&(h.activeNode.valueCont&&(h.activeNode.valueCont.value=l),h.activeNode.valueColor&&(h.activeNode.valueColor.style.backgroundColor=l)),(h.base._dhx_remove||h.conf.hideOnSelect)&&h.hide(),h.callEvent("onSelect",[l,h.activeNode?h.activeNode.node:null])},this._doOnCancel=function(){1==h.callEvent("onCancel",[h.activeNode?h.activeNode.node:null])&&1==h.conf.closeable&&h.hide()},this._doOnFocusByInput=function(){var o=this!=window?this:event.srcElement,l=h.activeNode&&h.activeNode.valueCont&&h.activeNode.valueCont==o?h.activeNode:h._getNodeByValueCont(o);(h.activeNode=l)&&l==h.activeNode&&h._initListenerInput()},this._doOnBlurByInput=function(){var o=this!=window?this:event.srcElement,l=h.activeNode&&h.activeNode.valueCont&&h.activeNode.valueCont==o?h.activeNode:h._getNodeByValueCont(o);l&&l==h.activeNode&&h._removeListenerInput()},this._doOnClickByNode=function(o){o=o||event;var l=this!=window?this:event.srcElement;h.activeNode=h.activeNode.node!=l?h._getNodeByElement(l):h.activeNode,h.isVisible()||h.show()},this.saveColor=function(){h.memory.setValue(h.value)},this._onSelectMemoryEl=function(o){var l;for(l in h._refreshCoordinatesByHSL(o.value.hue,o.value.sat,o.value.lum),o.value)h.value[l]=o.value[l];h._refreshContrast(),h._refreshInputValues(),h._refreshColorValue()},this._doOnClickByBody=function(r){var l=!0,o=(r=r||event).target||r.srcElement;h._isBaseNode(o)&&(l=!1),l&&h.activeNode&&(h.activeNode.node==o||h.activeNode.valueCont==o)&&(l=!1),l&&h.hide()},this._doOnChangeHSL=function(){var s,r=parseInt(h._controllerNodes.hue.value),o=parseInt(h._controllerNodes.sat.value),l=parseInt(h._controllerNodes.lum.value);isNaN(r)||359<r||r<0?h._controllerNodes.hue.value=h.value.hue:h.value.hue=r,isNaN(o)||100<o||o<0?h._controllerNodes.sat.value=h.value.sat:h.value.sat=o,isNaN(l)||100<l||l<0?h._controllerNodes.lum.value=h.value.lum:h.value.lum=l,s=h.colorAIP.hsl2rgb(h.value.hue,h.value.sat/100,h.value.lum/100),h.value.red=Math.round(255*s.r),h.value.green=Math.round(255*s.g),h.value.blue=Math.round(255*s.b),h._refreshCoordinatesByHSL(h.value.hue,h.value.sat,h.value.lum),h._refreshContrast(),h._refreshInputValues(),h._refreshColorValue()},this._doOnChangeRGB=function(){var o,s=parseInt(h._controllerNodes.red.value),r=parseInt(h._controllerNodes.green.value),l=parseInt(h._controllerNodes.blue.value);isNaN(s)||255<s||s<0?h._controllerNodes.red.value=h.value.red:h.value.red=s,isNaN(r)||255<r||r<0?h._controllerNodes.green.value=h.value.green:h.value.green=r,isNaN(l)||255<l||l<0?h._controllerNodes.blue.value=h.value.blue:h.value.blue=l,o=h.colorAIP.rgb2hsl(h.value.red/255,h.value.green/255,h.value.blue/255),h.value.hue=Math.round(o.h),h.value.sat=Math.round(100*o.s),h.value.lum=Math.round(100*o.l),h._refreshCoordinatesByHSL(h.value.hue,h.value.sat,h.value.lum),h._refreshContrast(),h._refreshInputValues(),h._refreshColorValue()},this._doOnChangeHSV=function(){h._controllerNodes.hsv.value=h.setColor(h._controllerNodes.hsv.value)},this._checkType=function(o){if(!(o instanceof Array))return null==o?null:"string"==typeof o?"string":o.tagName&&"input"==o.tagName.toLowerCase()?"input":o.tagName&&"textarea"==o.tagName.toLowerCase()?"textarea":o.tagName?"container":"object"==typeof o?"object":void 0;switch(h._checkType(o[0])){case"string":return"array_string";case"input":case"textarea":return"array_input";case"object":return"array_object";default:return}},this._initByObject=function(l){l.parent&&l.parent.tagName?h.base=l.parent:"string"==typeof l.parent?h.base=document.getElementById(l.parent):(h.base=document.createElement("div"),h.base._dhx_remove=!0),l.color&&(h.conf.selectedColor=l.color),void 0!==l.closeable&&(this.conf.closeable=dhx4.s2b(l.closeable)),l.custom_colors&&(this._tempInitCC=function(){var s,r;if(this.initMemoryColors(),this.conf.customColors=!0,l.custom_colors instanceof Array)for(r=l.custom_colors.length,s=0;s<r;s++)this.setCustomColors(l.custom_colors[s]);this.base.parentNode&&this.showMemory(),delete this._tempInitCC}),l.hide&&(h.conf.hide=!0),l.input&&h._addNode(l.input,l.target_color,l.target_value);var o=l.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcolorpicker")||"material";h.setSkin(o),l.colors&&(h.initMemoryColors(),h.conf.customColors=!0),l.link&&h._addNode(l.link)},this.unload=function(){var s,o,r;for(this.isVisible()&&this.hide(),this.destructMemory(),o=this._nodes.length,s=0;s<o;s++){for(r in this._detachEventsFromNode(this._nodes[s]),this._nodes[s])this._nodes[s][r]=null;delete this._nodes[s]}for(r in this._nodes=null,this.base._dhx_remove?delete this.base._dhx_remove:this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,""),"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.removeEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.removeEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.removeEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.removeEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.removeEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.removeEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.detachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.detachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.detachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.detachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.detachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.detachEvent("onchange",this._doOnChangeHSV)),this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),delete this._controllerNodes.fr_cover),dhx4.zim.clear(this.conf.cp_id),dhx4._eventable(this,"clear"),this)this[r]=null;c=h=null},this._checkType(n)){case"object":h._initByObject(n);break;case"input":case"textarea":h._initByObject({}),this._addNode(n);break;case"string":return new dhtmlXColorPicker(document.getElementById(n));case"container":h._initByObject({parent:n});break;case null:h._initByObject({});break;case"array_string":case"array_input":for(h._initByObject({}),a=n.length,e=0;e<a;e++)this._addNode(n[e]);break;case"array_object":for(h._initByObject({}),a=n.length,e=0;e<a;e++)(c=this._addNode(n[e].input,n[e].target_color,n[e].target_value).conf).customColors=null!=n[e].custom_colors?dhx4.s2b(n[e].custom_colors):c.customColors,c.selectedColor=null!=n[e].color?n[e].color:c.selectedColor}if(this.base.innerHTML="<div class='dhxcp_g_area'><div class='dhxcp_sub_area'><div class='dhxcp_g_color_area'><div class='dhxcp_color_selector'><div class='dhxcp_v_line'></div><div class='dhxcp_h_line'></div></div><div class='dhxcp_contrast_area'><div class='dhxcp_h_line'></div></div></div><div class='dhxcp_g_input_area'><div class='dhxcp_value_cont'><div class='dhxcp_value_color'></div><input type='text' class='dhxcp_value'/></div><table class='dhxcp_inputs_cont' cellpadding='0' cellspacing='0' border='0'><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelHue+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelRed+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelSat+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelGreen+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelLum+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelBlue+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr></table></div><div class='dhxcp_g_memory_area'></div><div class='dhxcp_buttons_area'><button class='dhx_button_save'>"+this.i18n[this.conf.lang].btnSelect+"</button><button class='dhx_button_cancel'>"+this.i18n[this.conf.lang].btnCancel+"</button></div></div>",this._globalNode=this.base.firstChild,this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},"function"==typeof this._tempInitCC&&this._tempInitCC(),"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.addEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.addEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.addEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.addEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.addEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.addEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.attachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.attachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.attachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.attachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.attachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.attachEvent("onchange",this._doOnChangeHSV)),this.setColor(this.conf.selectedColor||"#ffffff"),this._nodes.length)for(var e=0;e<this._nodes.length;e++)this._attachEventsToNode(this._nodes[e]);this.conf.hide&&this.hide(),"function"==typeof this._cpInitFRM&&this._cpInitFRM()}function dhtmlXSlider(c){var a=this;if(this.conf={size:null,skin:null,vertical:!1,min:0,max:99,value:0,step:1,decimals:0,margin:2,border:1,inverse:!1,disabled:!1,tooltip:!1,visible:!0,linkTo:null,range:!1,bg:null,bg_mode:"left"},this._attachedNode={},this._movingInitialValues=null,this.base=null,1<arguments.length)return new dhtmlXSlider(this._renderArgumets(arguments));if("string"==typeof c||"object"==typeof c&&c.tagName)return new dhtmlXSlider({parent:c});"string"==typeof c.parent?this.base=document.getElementById(c.parent):this.base=c.parent,this._mergeConfig(this._readAttFormNode(this.base)),this._mergeConfig(c),null==this.conf.bg&&(this.conf.bg=1==this.conf.range),1==this.conf.range&&(this.conf.value instanceof Array||(this.conf.value=[this.conf.value]),this.conf.value.length<2&&this.conf.value.push(this.conf.value[0]),this.conf.linkTo instanceof Array||(this.conf.linkTo=[this.conf.linkTo])),this._detectDecimals(),null!=this.conf.size&&void 0!==this.conf.size||(this.conf.vertical?this.conf.size=this.base.offsetHeight:this.conf.size=this.base.offsetWidth);var e=this.conf.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxslider")||"material";return this.setSkin(e),this.base.innerHTML="<div class='dhxsl_container'><div class='dhxsl_track'>"+(1==this.conf.bg?"<div class='dhxsl_track_bg'></div>":"")+"</div><div class='dhxsl_runner'></div>"+(1==this.conf.range?"<div class='dhxsl_runner'></div>":"")+"</div>",this._nodes={cont:this.base.firstChild,track:this.base.firstChild.firstChild,runner:this.base.firstChild.childNodes[1],runner2:this.base.firstChild.childNodes[2]},this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=function(g){return"function"==typeof(g=g||event).preventDefault?g.preventDefault():g.returnValue=!1,!1},this._r_actv=null,1==this.conf.range?this.conf.value=this._normalizeRange(this.conf.value,this.conf.min,this.conf.max):this.conf.value=this._normalize(this.conf.value,this.conf.min,this.conf.max),this._setOrient(this.conf.vertical),this.setSize(this.conf.size),this._initMover=function(h,g){if(!a.conf.disabled)return"function"==typeof(h=h||event).preventDefault&&h.preventDefault(),null!=g?a._r_actv=a._nodes[0==g?"runner":"runner2"]:(a._r_actv=h.target||h.srcElement,-1==a._r_actv.className.indexOf("dhxsl_runner")&&(a._r_actv=a._nodes.runner)),a._r_actv.className="dhxsl_runner dhxsl_runner_actv",a._movingInitialValues={},1==a.conf.range?(a._movingInitialValues.index=a._r_actv==a._nodes.runner?0:1,a._movingInitialValues.value=a.conf.value[a._movingInitialValues.index]):a._movingInitialValues.value=a.conf.value,a._movingInitialValues.coord=a._getTouchCoord(h),0==a.conf.disabled&&("function"==typeof window.addEventListener?(window.addEventListener("mousemove",a._move,!1),window.addEventListener("mouseup",a._cleanMove,!1),window.addEventListener("touchmove",a._move,!1),window.addEventListener("touchend",a._cleanMove,!1)):(document.body.attachEvent("onmousemove",a._move),document.body.attachEvent("onmouseup",a._cleanMove))),a.callEvent("onMouseDown",[a._r_actv==a._nodes.runner?0:1]),!1},this._move=function(o){if(!a.conf.disabled){"function"==typeof(o=o||event).preventDefault&&o.preventDefault();var n=a.conf.vertical?a._r_actv.offsetHeight:a._r_actv.offsetWidth,l=a.conf.max-a.conf.min,h=a._getTouchCoord(o),m=a._movingInitialValues.value+(h-a._movingInitialValues.coord)*l/(a.conf.size-n)*(a.conf.inverse?-1:1);if(1==a.conf.range){var g=[a.conf.value[0],a.conf.value[1]];0==a._movingInitialValues.index?g[0]=Math.min(g[1],m):1==a._movingInitialValues.index&&(g[1]=Math.max(g[0],m)),a.setValue(g,!0)}else a.setValue(m,!0)}},this._cleanMove=function(g){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",a._move,!1),window.removeEventListener("mouseup",a._cleanMove,!1),window.removeEventListener("touchmove",a._move,!1),window.removeEventListener("touchend",a._cleanMove,!1)):(document.body.detachEvent("onmousemove",a._move),document.body.detachEvent("onmouseup",a._cleanMove)),a._movingInitialValues=null,a._r_actv.className=a._r_actv.className.replace(/\s{0,}dhxsl_runner_actv/gi,""),a.callEvent("onSlideEnd",[a.conf.value]),a.callEvent("onMouseUp",[a._r_actv==a._nodes.runner?0:1]),a._r_actv=null},this._doOnSetValue=function(s){if(!a.conf.disabled){if(null!=a._movingInitialValues)return!1;"function"==typeof(s=s||event).preventDefault&&s.preventDefault();var r=0,m=s.target||s.srcElement;if(null!=m.className.match(/dhxsl_track_bg/)&&(r=parseInt(m.style[a.conf.vertical?"top":"left"])),null!=s.type.match(/touch/))var o=a._getTouchCoord(s)+r;else o=(a.conf.vertical?s.offsetY||s.layerY:s.offsetX||s.layerX)+r;a.conf.vertical?a._nodes.runner.offsetHeight:a._nodes.runner.offsetWidth;var g=a.conf.max-a.conf.min,h=null,l=null;return l=1==a.conf.inverse?a.conf.max-o*g/a.conf.size:o*g/a.conf.size+a.conf.min,1==a.conf.range&&(l=[0==(h=Math.abs(a.conf.value[0]-l)<=Math.abs(a.conf.value[1]-l)?0:1)?l:a.conf.value[0],1==h?l:a.conf.value[1]]),a.conf.init_index=h,a.setValue(l,!0),(a.conf.init_index=null)==a._movingInitialValues&&a._initMover(s,h),!1}},this._doOnChangeInput=function(h){var g=(h=h||event).target||h.srcElement;a.setValue(g.value)},this._doOnKeyDown=function(h){var g=(h=h||event).target||h.srcElement;13==h.keyCode&&a.setValue(g.value)},this._attachEvents(this._nodes),this.unload=function(){for(var g in dhx4._eventable(this,"clear"),this._detachNode(),this._detachEvents(this._nodes),this.base.removeChild(this._nodes.cont),this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=null,delete this._nodes.cont,delete this._nodes.track,delete this._nodes.max,delete this._nodes.min,delete this._nodes.runner,this._nodes.runner2&&delete this._nodes.runner2,/\s?dhtmlxslider_\S*/.test(this.base.className)&&(this.base.className=this.base.className.replace(/\s?dhtmlxslider_\S*/,"")),this)this[g]=null;a=null},dhx4._eventable(this),this.conf.disabled&&this.disable(),this.conf.tooltip&&this.enableTooltip(),this.conf.visible||this.hide(),this.conf.linkTo&&this.linkTo(this.conf.linkTo),this}function dhtmlXPopup(e){var g=this;if(this.conf=e||{},e=null,this.mode=this.conf.mode||"bottom",this.conf.zi=window.dhx4.newId(),this.conf.context=null==this.conf.context||window.dhx4.s2b(this.conf.context),this.conf.IE6_display_fix=null!=this.conf.IE6_display_fix&&window.dhx4.s2b(this.conf.IE6_display_fix),this.conf.last_p_click=this.conf.last_body_click=null,this.p=document.createElement("DIV"),this.p.style.display="none",this.p.innerHTML="<div class='dhx_popup_area"+(window.dhx4.isIE?" dhx_popup_area_ie":"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'></div>",document.body.appendChild(this.p),this.p.oncontextmenu=function(a){if(0==g.conf.context)return(a=a||event).returnValue=!1},this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9},material:{t0:19,t1:9,t2:19,t3:9}},this.p.ontouchstart=this.p.onclick=function(l){l=l||event;var h=null!=g.conf.last_p_click&&g.conf.last_p_click!=l.type;if(g.conf.last_p_click=l.type,1!=h){if(g._clearClick=!0,null!=g._nodeObj)return g.callEvent("onContentClick",[]),!0;for(var a=l.target||l.srcElement,m=null;a!=g.p&&null!=a;)void 0===a._idd||a._isSeparator?a=a.parentNode:(m=a._idd,a=null);(a=null)!=m&&(g.callEvent("onClick",[m]),null!=g&&null!=g.isVisible&&g.isVisible()&&!0===g.callEvent("onBeforeHide",["select",l,m])&&(l.cancelBubble=!0,g.hide()))}},this.separator="DHXSEP_"+window.dhx4.newId(),this.tpl=[],this._setTemplate=function(a){this.tpl=a.split(",")},this.show=function(h){var a=null;if(1==arguments.length){if(h){if(!this._idExists(h))return}else h=this.conf.id[0];this.conf.toolbar&&(a=this.conf.toolbar._getItemDim(h)),this.conf.ribbon&&(a=this.conf.ribbon._getItemDim(h)),this.conf.form&&(a=this.conf.form._getItemDim(h))}else 4==arguments.length&&(this._clearClick=!0,a={left:h,top:arguments[1],width:arguments[2],height:arguments[3]},h=null);a&&(this.p.style.visibility="hidden",this.p.style.display="",this._setPos(a),this.p.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this.p.style.visibility="visible",this._lastId=h,this.callEvent("onShow",[h]))},this._setPos=function(J,n){var A=J.left,u=J.top,D=J.width,M=J.height;this._posData={left:A,top:u,width:D,height:M};var O=window.dhx4.screenDim(),H=n||this.mode;void 0===n&&(n=!1);var Q={top:u-this.p.offsetHeight-O.top,bottom:O.bottom-(u+M+this.p.offsetHeight),left:A-this.p.offsetWidth-O.left,right:O.right-(A+D+this.p.offsetWidth)};if(!n&&Q[H]<0){var K=this._getAvailPos(H,Q);if(!1!==K)return void this._setPos(J,K)}if("top"==H||"bottom"==H){var E=this.skinParams[this.conf.skin].t2,C=this.skinParams[this.conf.skin].t3,s=Math.round(this.p.offsetWidth/2),a=Math.round(this.p.lastChild.offsetWidth/2);if(A<O.left){var N=Math.min(A+D,O.left);D=A+D-N,A=N}A+D>O.right&&(D=O.right-A);var m=(v=Math.round(A+D/2))-s,L=v-E-a,r=v+a+E-this.p.offsetWidth;m<O.left-C?m=Math.min(O.left-C,L):m+this.p.offsetWidth>O.right+C&&(m=Math.max(r,O.right+C-this.p.offsetWidth)),this.p.style.left=m+"px",this.p.style.top=("top"==H?u-this.p.offsetHeight:u+M)+"px",v=v-m-a,this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+H,this.p.lastChild.style.top=("top"==H?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px",this.p.lastChild.style.left=v+"px"}if("left"==H||"right"==H){E=this.skinParams[this.conf.skin].t0,C=this.skinParams[this.conf.skin].t1;var o=Math.round(this.p.offsetHeight/2),T=Math.round(this.p.lastChild.offsetHeight/2);if(u<O.top){var l=Math.min(u+M,O.top);M=u+M-l,u=l}u+M>O.bottom&&(M=O.bottom-u);var v,I=(v=Math.round(u+M/2))-o,S=v-E-T,P=v+T+E-this.p.offsetHeight;I<O.top-C?I=Math.min(O.top-C,S):I+this.p.offsetHeight>O.bottom+C&&(I=Math.max(P,O.bottom+C-this.p.offsetHeight)),this.p.style.left=("left"==H?A-this.p.offsetWidth:A+D)+"px",this.p.style.top=I+"px",v=v-I-T,this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+H,this.p.lastChild.style.left=("left"==H?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px",this.p.lastChild.style.top=v+"px"}if(this._IEDisp&&null!=this._nodeId){var F=document.getElementById(this._nodeId);1==this.conf.IE6_display_fix&&(F.style.visibility="hidden"),window.setTimeout(function(){F.style.visibility="visible",F=null},1)}},this._getAvailPos=function(r,o){for(var l={top:["bottom","right","left"],bottom:["top","right","left"],left:["right","bottom","top"],right:["left","bottom","top"]},m=null,n=0;n<l[r].length;n++)null==m&&0<o[l[r][n]]&&(m=l[r][n]);if(null==m)for(var h in m="bottom",o)o[h]>o[m]&&(m=h);return m!=r&&m},this._repaint=function(){this.isVisible()&&this._setPos(this._posData)},this.clear=function(){if(this._nodeObj&&(window.dhx4.isIE&&"function"==typeof window.dhtmlXLayoutObject&&this._nodeObj instanceof window.dhtmlXLayoutObject&&(this.p.onmousedown=null),this._nodeObj.unload?this._nodeObj.unload():this._nodeObj.destruct&&this._nodeObj.destruct(),this._nodeObj=this._nodeId=null,null!=this._nodeObjEv)){for(var h=0;h<this._nodeObjEv.length;h++)this.detachEvent(this._nodeObjEv[h]);this._nodeObjEv=null}this._IEHoverInited&&this._IEHoverClear();for(var a=this.p.firstChild.firstChild.firstChild;0<a.childNodes.length;)a.removeChild(a.lastChild);a=null,this.itemData={}},this.hide=function(){if("none"!=this.p.style.display){this.p.style.display="none",window.dhx4.zim.clear(this.conf.zi);var a=this._lastId;this._lastId=null,this.callEvent("onHide",[a]),this.conf.last_p_click=this.conf.last_body_click=null}},this.isVisible=function(){return""==this.p.style.display},this.itemData={},this.getItemData=function(a){return a?this.itemData[a]?this.itemData[a]:{}:this.itemData},this.setSkin=function(a){this.conf.skin=a,this.p.className="dhx_popup_"+this.conf.skin,null!=this._nodeObj&&"function"==typeof this._nodeObj.setSkin&&this._nodeObj.setSkin(this.conf.skin),this._repaint()},this.attachList=function(l,s){this._setTemplate(l),this.clear();for(var m=this.p.firstChild.firstChild.firstChild,o=0;o<s.length;o++){var n=document.createElement("TR");if(s[o]!=this.separator){if(void 0===s[o].id||null==s[o].id)for(n._idd=window.dhx4.newId();null!=this.itemData[n._idd];)n._idd=window.dhx4.newId();else n._idd=s[o].id;this.itemData[n._idd]=s[o]}if(m.appendChild(n),s[o]==this.separator){n.className="dhx_popup_sep",n._isSeparator=!0,(u=document.createElement("TD")).className="dhx_popup_sep",u.colSpan=this.tpl.length,u.innerHTML="<div class='dhx_popup_sep'>&nbsp;</div>",n.appendChild(u),u=null}else{for(var a=0;a<this.tpl.length;a++){var u,h="dhx_popup_td";!this._IEFirstLast||1!=this.tpl.length&&0!=a&&a!=this.tpl.length-1||(1==this.tpl.length?h+=" dhx_popup_td_single":h+=0==a?" dhx_popup_td_first":" dhx_popup_td_last"),(u=document.createElement("TD")).className=h,u.innerHTML=s[o][this.tpl[a]]||"&nbsp;",n.appendChild(u),u=null}this._IEHover&&(n._IEHover=!0,this._IEHoverInited||this._IEHoverInit())}n=null}m=null,this._repaint()},this._attachNode=function(m,l){this.clear(),this._nodeId="dhxpopup_node_"+window.dhx4.newId();var a=this.p.firstChild.firstChild.firstChild,h=document.createElement("TR");h.className="dhxnode",a.appendChild(h);var n=document.createElement("TD");return n.className="dhx_popup_td",n.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'></div>",l.width&&(n.firstChild.style.width=l.width+"px"),l.height&&(n.firstChild.style.height=l.height+"px"),h.appendChild(n),n=h=a=null,"function"==typeof this["_attach_init_"+m]&&(this["_attach_init_"+m](l),this._enableIEVFix()),this._repaint(),this._nodeObj},this.unload=function(){if("function"==typeof window.addEventListener?(window.removeEventListener("touchstart",this._doOnClick,!1),window.removeEventListener("click",this._doOnClick,!1),window.removeEventListener("keyup",this._doOnKeyUp,!1),window.removeEventListener("unload",this._doOnUnload,!1)):(document.body.detachEvent("onclick",this._doOnClick,!1),document.body.detachEvent("onkeyup",this._doOnKeyUp,!1),document.body.detachEvent("onunload",this._doOnUnload,!1)),window.dhx4.detachEvent(this.conf.ev_grid_click),this.clear(),null!=this.conf.toolbarEvent&&null!=this.conf.toolbar&&(null!=this.conf.toolbar.detachEvent?this.conf.toolbar.detachEvent(this.conf.toolbarEvent):this.conf.toolbar._getItemDim=null),null!=this.conf.ribbonEvent&&null!=this.conf.ribbon&&(null!=this.conf.ribbon.detachEvent?this.conf.ribbon.detachEvent(this.conf.ribbonEvent):this.conf.ribbon._getItemDim=null),null!=this.conf.slider){for(var l=0;l<this.conf.slider_events.length;l++)this.conf.slider.detachEvent(this.conf.slider_events[l]);this.conf.slider_events=null,this._sliderShow=this._sliderHide=null,this.conf.slider=null}for(var h in window.dhx4._eventable(this,"clear"),this.p.onclick=this.p.ontouchstart=this.p.oncontextmenu=null,this.p.parentNode.removeChild(this.p),this.p=null,this.conf)this.conf[h]=null;for(var h in this)this[h]=null;g=null},window.dhx4._eventable(this),this._doOnClick=function(s){s=s||event;var a=null!=g.conf.last_body_click&&g.conf.last_body_click!=s.type;if(g.conf.last_body_click=s.type,1!=a)if(1!=g._clearClick){if(null!=g.conf.form){var l;if("option"==((u=s.target||s.srcElement).tagName||"").toLowerCase()&&(u=u.parentNode),null!=u.className&&0<=u.className.search("dhxform"))null!=u.parentNode&&null!=u.parentNode.parentNode&&null!=u.parentNode.parentNode._idd&&(l=u.parentNode.parentNode._idd,"ra"==u.parentNode.parentNode._type&&(l=[u.parentNode.parentNode._group,u.parentNode.parentNode._value]));else{for(var n=!0,o=!1;n&&!o;){0<(m=(u.className||"").toLowerCase()).length&&(o="dhxform_btn"==m||0<=m.search(/dhxeditor_inside/gi)||"dhxcombo_input"==m||0<=m.search(/dhxcombolist/gi)),n=null!=(u=u.parentNode)}if(o)return}if((u=null)!=l&&g._idExists(l))return}if("function"==typeof window.dhtmlXForm&&g._nodeObj instanceof window.dhtmlXForm){var v={},m=0,h=g._nodeObj;if(h.forEachItem(function(r){"combo"==h.getItemType(r)&&(v[h.getCombo(r).list._listId]=!0,m++)}),h=null,0<m){var u=s.target||s.srcElement;for(n=!0,o=!1;1==n&&1!=o;){0<(m=(u.className||"").toLowerCase()).length&&0<=m.search(/^dhxcombolist/gi)&&null!=u._listId&&1==v[u._listId]?(o=!0,u=null):n=null!=(u=u.parentNode)}if(1==o)return}}g.isVisible()&&!0===g.callEvent("onBeforeHide",["click",s])&&g.hide()}else g._clearClick=!1},this._doOnKeyUp=function(a){27==(a=a||event).keyCode&&g.isVisible()&&!0===g.callEvent("onBeforeHide",["esc",a])&&g.hide()},this._doOnUnload=function(){g.unload()},"function"==typeof window.addEventListener?(window.addEventListener("touchstart",this._doOnClick,!1),window.addEventListener("click",this._doOnClick,!1),window.addEventListener("keyup",this._doOnKeyUp,!1),window.addEventListener("unload",this._doOnUnload,!1)):(document.body.attachEvent("onclick",this._doOnClick,!1),document.body.attachEvent("onkeyup",this._doOnKeyUp,!1),document.body.attachEvent("onunload",this._doOnUnload,!1)),this.conf.ev_grid_click=window.dhx4.attachEvent("_onGridClick",function(h,a){(null==g._nodeObj||g._nodeObj!=a&&1!=g._findGrid(g._nodeObj,a))&&(g._clearClick=!1,g._doOnClick(h)),a=null}),this._findGrid=function(h,a){var l=!1;return"function"==typeof window.dhtmlXTabBar&&h instanceof window.dhtmlXTabBar&&h.forEachTab(function(m){var n=m.getAttachedObject();0==l&&null!=n&&(l=l||n==a||this._findGrid(n),n=null)}),"function"==typeof window.dhtmlXForm&&h instanceof window.dhtmlXForm&&h.forEachItem(function(m){1!=l&&"container"==h.getItemType(m)&&a.entBox==h.getContainer(m)&&(l=!0)}),h=null,l},this._idExists=function(l){for(var a=!1,h=0;h<this.conf.id.length;h++)a=this.conf.id[h]instanceof Array?a||this.conf.id[h][0]==l[0]&&this.conf.id[h][1]==l[1]:a||this.conf.id[h]==l;return a},this._IEDisp=window.dhx4.isIE6||"CSS1Compat"!=document.compatMode,this._IEHover=1==window.dhx4.isIE6,this._IEHover&&(this._IEHoverInit=function(){this.p.onmouseover=function(){for(var a=event.srcElement;a!=this&&1!=a._IEHover;)a=a.parentNode;if(a._IEHover){if(g._IEHoverTM&&window.clearTimeout(g._IEHoverTM),g._lastIEHover==a)return;g._IEHoverRender(a),a=null}},this.p.onmouseout=function(){g._IEHoverTM&&window.clearTimeout(g._IEHoverTM),g._IEHoverTM=window.setTimeout(function(){g._IEHoverRender(null)},1)},this._IEHoverRender=function(a){null!=this._lastIEHover&&0<=this._lastIEHover.className.search(/tr_hover/gi)&&(this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,""),this._lastIEHover=null),null!=a&&a.className.search(/tr_hover/gi)<0&&(a.className+=" tr_hover",g._lastIEHover=a)},this._IEHoverInited=!0},this._IEHoverClear=function(){this.p.onmouseover=null,this.p.onmouseout=null,this._IEHoverInited=!1}),this._IEFirstLast=window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8,this._enableIEVFix=function(){if(window.dhx4.isIE6||window.dhx4.isIE7){var h=this.attachEvent("onHide",function(){document.getElementById(this._nodeId).style.visibility="hidden"}),a=this.attachEvent("onShow",function(){document.getElementById(this._nodeId).style.visibility="visible"});null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(h,a)}},"function"==typeof window.dhtmlXToolbarObject&&null!=this.conf.toolbar&&this.conf.toolbar instanceof window.dhtmlXToolbarObject&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.toolbar.conf.skin,this._doOnToolbarClick=function(h){for(var a=0;a<g.conf.id.length;a++)h==g.conf.id[a]&&h!=g._lastId&&(g.show(h),g._clearClick=!0)},void 0===dhtmlXToolbarObject.prototype._getItemDim&&(dhtmlXToolbarObject.prototype._getItemDim=function(l){var a=this.objPull[this.idPrefix+l],h={left:window.dhx4.absLeft(a.obj),top:window.dhx4.absTop(a.obj),width:a.obj.offsetWidth+(a.arw?a.arw.offsetWidth:0),height:a.obj.offsetHeight};return a=null,h}),this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",this._doOnToolbarClick)),"function"==typeof window.dhtmlXRibbon&&null!=this.conf.ribbon&&this.conf.ribbon instanceof window.dhtmlXRibbon&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.ribbon.conf.skin,this._doOnRibbonClick=function(h){for(var a=0;a<g.conf.id.length;a++)h==g.conf.id[a]&&h!=g._lastId&&(g.show(h),g._clearClick=!0)},void 0===dhtmlXRibbon.prototype._getItemDim&&(dhtmlXRibbon.prototype._getItemDim=function(l){var a=this._items[l].base,h={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};return a=null,h}),this.conf.ribbonEvent=this.conf.ribbon.attachEvent("_showPopup",this._doOnRibbonClick)),"function"==typeof window.dhtmlXForm&&null!=this.conf.form&&this.conf.form instanceof window.dhtmlXForm&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.conf.mode||(this.mode="right"),this.skinParent=this.conf.form.skin,void 0===dhtmlXForm.prototype._getItemDim))for(var c in dhtmlXForm.prototype._getItemDim=function(a,h){return this.doWithItem(a,"_getDim")},dhtmlXForm.prototype.items)dhtmlXForm.prototype.items[c]._getDim=function(h){var a=h;({ta:!0,pw:!0,se:!0,tp:!0,fl:!0,calendar:!0,colorpicker:1,editor:!0,container:!0})[h._type]&&(a=h.childNodes[h._ll?1:0].childNodes[0]),{ch:!0,ra:!0,btn2state:!0}[h._type]&&(a=h.childNodes[h._ll?1:0].childNodes[1]),{bt:!0,lb:!0,fs:!0}[h._type]&&(a=h.firstChild),{combo:!0}[h._type]&&(a=h._combo.DOMParent.firstChild),{image:!0}[h._type]&&(a=h.childNodes[h._ll?1:0].lastChild),{bl:!0}[h._type]&&(a=h.firstChild.firstChild.firstChild);var l={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};return a=null,l};return"function"==typeof window.dhtmlXSlider&&null!=this.conf.slider&&this.conf.slider instanceof window.dhtmlXSlider&&(this.conf.mode||(this.mode="top"),this.conf.slider_tm=null,this._sliderShow=function(){g.conf.slider_tm&&window.clearTimeout(g.conf.slider_tm);var a=g.conf.slider._r_actv;if(null!=a){var h={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};g.show(h.left,h.top,h.width,h.height),a=null}},this._sliderHide=function(){g.conf.slider_tm=window.setTimeout(function(){g.hide()},200)},this.conf.slider_events=[this.conf.slider.attachEvent("onMouseDown",this._sliderShow),this.conf.slider.attachEvent("onMouseUp",this._sliderHide),this.conf.slider.attachEvent("onChange",this._sliderShow)]),this.setSkin(this.skinParent||this.conf.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_popup")||"material"),this}function dhtmlXMenuObject(h,l){var g=this;if(this.conf={skin:l||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxmenu")||"material",mode:"web",align:"left",is_touched:!1,selected:-1,last_click:-1,fixed_pos:!1,rtl:!1,icons_path:"",icons_css:!1,arrow_ff_fix:0<=navigator.userAgent.indexOf("MSIE")&&"BackCompat"==document.compatMode,live_id:window.dhx4.newId(),tags:{root:"menu",item:"item",text_ext:"itemtext",userdata:"userdata",tooltip:"tooltip",hotkey:"hotkey",href:"href"},autoload:{},hide_tm:{},top_mode:!0,top_tmtime:200,v_enabled:!1,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:"bottom",dir_sublv:"right",auto_overflow:!1,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,of_ah:{dhx_skyblue:24,dhx_web:25,dhx_terrace:27,material:25},of_ih:{dhx_skyblue:24,dhx_web:24,dhx_terrace:24,material:30},tm_sec:400,tm_handler:null,dload:!1,dload_url:"",dload_icon:!1,dload_params:{action:"loadMenu"},dload_pid:"parentId",tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:!1,ctx_zoneid:!1,ctx_autoshow:!0,ctx_autohide:!0,ctx_hideall:!0,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]},"object"==typeof h&&null!=h&&void 0===h.tagName){for(var e in null==h.icons_path&&null==h.icon_path||(this.conf.icons_path=h.icons_path||h.icon_path),null!=h.skin&&(this.conf.skin=h.skin),h.visible_area&&(this.conf.v_enabled=!0,this.conf.v={x1:h.visible_area.x1,x2:h.visible_area.x2,y1:h.visible_area.y1,y2:h.visible_area.y2}),{json:1,xml:1,items:1,top_text:1,align:1,open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1,iconset:1})null!=h[e]&&(this.conf.autoload[e]=h[e]);h=h.parent}if(null==h)this.base=document.body;else{var c="string"==typeof h?document.getElementById(h):h;null!=c?(this.base=c,this.base.id||(this.base.id="menuBaseId_"+(new Date).getTime()),this.base.className+=" dhtmlxMenu_"+this.conf.skin+"_Middle dir_left",this.base._autoSkinUpdate=!0,this.base.oncontextmenu&&(this.base._oldContextMenuHandler=this.base.oncontextmenu),this.conf.ctx_baseid=this.base.id,this.base.onselectstart=function(a){return(a=a||event).preventDefault?a.preventDefault():a.returnValue=!1,!1},this.base.oncontextmenu=function(a){return(a=a||event).preventDefault?a.preventDefault():a.returnValue=!1,!1}):this.base=document.body}for(var e in this.idPrefix="",this.topId="dhxWebMenuTopId",this.idPull={},this.itemPull={},this.userData={},this.radio={},this.setSkin=function(n){var o=this.conf.skin;switch(this.conf.skin=n,this.conf.skin){case"dhx_skyblue":case"dhx_web":this.conf.tl_botmarg=2,this.conf.tl_rmarg=1,this.conf.tl_ofsleft=1;break;case"dhx_terrace":case"material":this.conf.tl_botmarg=0,this.conf.tl_rmarg=0,this.conf.tl_ofsleft=0}for(var m in this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+o+"_Middle","")+" dhtmlxMenu_"+this.conf.skin+"_Middle"),this.idPull)this.idPull[m].className=String(this.idPull[m].className).replace(o,this.conf.skin)},this.setSkin(this.conf.skin),this._addSubItemToSelected=function(n,m){for(var a=!0,o=0;o<this.conf.selected_sub.length;o++)this.conf.selected_sub[o][0]==n&&this.conf.selected_sub[o][1]==m&&(a=!1);return 1==a&&this.conf.selected_sub.push(new Array(n,m)),a},this._removeSubItemFromSelected=function(r,o){for(var a=new Array,n=!1,s=0;s<this.conf.selected_sub.length;s++)this.conf.selected_sub[s][0]==r&&this.conf.selected_sub[s][1]==o?n=!0:a[a.length]=this.conf.selected_sub[s];return 1==n&&(this.conf.selected_sub=a),n},this._getSubItemToDeselectByPolygon=function(r){for(var a=new Array,s=0;s<this.conf.selected_sub.length;s++)if(this.conf.selected_sub[s][1]==r){a[a.length]=this.conf.selected_sub[s][0],a=a.concat(this._getSubItemToDeselectByPolygon(this.conf.selected_sub[s][0]));for(var o=!0,n=0;n<this.conf.opened_poly.length;n++)this.conf.opened_poly[n]==this.conf.selected_sub[s][0]&&(o=!1);1==o&&(this.conf.opened_poly[this.conf.opened_poly.length]=this.conf.selected_sub[s][0]),this.conf.selected_sub[s][0]=-1,this.conf.selected_sub[s][1]=-1}return a},this._hidePolygon=function(a){if(null!=this.idPull["polygon_"+a]){if(null!=this.idPull["polygon_"+a]._zId&&window.dhx4.zim.clear(this.idPull["polygon_"+a]._zId),void 0!==this._menuEffect&&!1!==this._menuEffect)this._hidePolygonEffect("polygon_"+a);else{if("none"==this.idPull["polygon_"+a].style.display)return;this.idPull["polygon_"+a].style.display="none",null!=this.idPull["arrowup_"+a]&&(this.idPull["arrowup_"+a].style.display="none"),null!=this.idPull["arrowdown_"+a]&&(this.idPull["arrowdown_"+a].style.display="none"),this._updateItemComplexState(a,!0,!1),window.dhx4.isIE6&&null!=this.idPull["polygon_"+a+"_ie6cover"]&&(this.idPull["polygon_"+a+"_ie6cover"].style.display="none")}(a=String(a).replace(this.idPrefix,""))==this.topId&&(a=null),this.callEvent("onHide",[a]),null!=a&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+a,!0)}},this._showPolygon=function(I,n){var N=this._countVisiblePolygonItems(I);if(0!=N){var J="polygon_"+I;if(null!=this.idPull[J]&&null!=this.idPull[I]){if(this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context&&!this.idPull[I]._mouseOver&&n==this.conf.dir_toplv)return;this.conf.fixed_pos||this._autoDetectVisibleArea();var P=null,E=null;if(null==this.idPull[J]._zId&&(this.idPull[J]._zId=window.dhx4.newId()),this.idPull[J]._zInd=window.dhx4.zim.reserve(this.idPull[J]._zId),this.idPull[J].style.visibility="hidden",this.idPull[J].style.left="0px",this.idPull[J].style.top="0px",this.idPull[J].style.display="",this.idPull[J].style.zIndex=this.idPull[J]._zInd,this.conf.auto_overflow)if(this.idPull[J].childNodes[1].childNodes[0].offsetHeight>this.conf.v.y2-this.conf.v.y1){var D=Math.max(Math.floor((this.conf.v.y2-this.conf.v.y1-2*this.conf.of_ah[this.conf.skin])/this.conf.of_ih[this.conf.skin]),1);this.conf.overflow_limit=D}else this.conf.overflow_limit=0,null!=this.idPull["arrowup_"+I]&&this._removeUpArrow(String(I).replace(this.idPrefix,"")),null!=this.idPull["arrowdown_"+I]&&this._removeDownArrow(String(I).replace(this.idPrefix,""));if(0<this.conf.overflow_limit&&this.conf.overflow_limit<N&&(null==this.idPull["arrowup_"+I]&&this._addUpArrow(String(I).replace(this.idPrefix,"")),null==this.idPull["arrowdown_"+I]&&this._addDownArrow(String(I).replace(this.idPrefix,"")),(P=this.idPull["arrowup_"+I]).style.display="none",(E=this.idPull["arrowdown_"+I]).style.display="none"),0<this.conf.overflow_limit&&this.conf.overflow_limit<N?(this.idPull[J].childNodes[1].style.height=this.conf.of_ih[this.conf.skin]*this.conf.overflow_limit+"px",P.style.width=E.style.width=this.idPull[J].childNodes[1].style.width=this.idPull[J].childNodes[1].childNodes[0].offsetWidth+"px",this.idPull[J].childNodes[1].scrollTop=0,P.style.display="",P.offsetHeight,E.style.display="",E.offsetHeight):(this.idPull[J].childNodes[1].style.height="",this.idPull[J].childNodes[1].style.width=""),null!=this.itemPull[I])this.itemPull[I].parent;else if(this.conf.context)this.idPull[this.idPrefix+this.topId];var a=null!=this.idPull[I].tagName?window.dhx4.absLeft(this.idPull[I]):this.idPull[I][0],O=null!=this.idPull[I].tagName?window.dhx4.absTop(this.idPull[I]):this.idPull[I][1],m=null!=this.idPull[I].tagName?this.idPull[I].offsetWidth:0,o=null!=this.idPull[I].tagName?this.idPull[I].offsetHeight:0,v=0,u=0,C=this.idPull[J].offsetWidth,L=this.idPull[J].offsetHeight;if("bottom"==n&&(v=this.conf.rtl?a+(null!=m?m:0)-C:"right"==this.conf.align?a+m-C:a-1+(n==this.conf.dir_toplv?this.conf.tl_rmarg:0),u=O-1+o+this.conf.tl_botmarg),"right"==n&&(v=a+m-1,u=O+2),"left"==n&&(v=a-this.idPull[J].offsetWidth+2,u=O+2),"top"==n&&(v=a-1,u=O-L+2),this.conf.fixed_pos)var H=65536,F=65536;else{H=null!=this.conf.v.x2?this.conf.v.x2:0,F=null!=this.conf.v.y2?this.conf.v.y2:0;0==H&&(window.innerWidth?(H=window.innerWidth,F=window.innerHeight):(H=document.body.offsetWidth,F=document.body.scrollHeight))}if(H<v+C&&!this.conf.rtl&&(v=a-C+2),v<this.conf.v.x1&&this.conf.rtl&&(v=a+m-2),v<0&&(v=0),F<u+L&&null!=this.conf.v.y2&&(u=Math.max(O+o-L+2,this.conf.v_enabled?this.conf.v.y1+2:2),this.conf.context&&this.idPrefix+this.topId==I&&null!=E&&(u-=2),null==this.itemPull[I]||this.conf.context||this.itemPull[I].parent==this.idPrefix+this.topId&&(u-=this.base.offsetHeight)),this.idPull[J].style.left=v+"px",this.idPull[J].style.top=u+"px",void 0!==this._menuEffect&&!1!==this._menuEffect)this._showPolygonEffect(J);else if(this.idPull[J].style.visibility="",0<this.conf.overflow_limit&&this.conf.overflow_limit<N&&(this.idPull[J].childNodes[1].scrollTop=0,this._checkArrowsState(I)),window.dhx4.isIE6){var s=J+"_ie6cover";if(null==this.idPull[s]){var r=document.createElement("IFRAME");r.className="dhtmlxMenu_IE6CoverFix_"+this.conf.skin,r.frameBorder=0,r.setAttribute("src","javascript:false;"),document.body.insertBefore(r,document.body.firstChild),this.idPull[s]=r}this.idPull[s].style.left=v+"px",this.idPull[s].style.top=u+"px",this.idPull[s].style.width=this.idPull[J].offsetWidth+"px",this.idPull[s].style.height=this.idPull[J].offsetHeight+"px",this.idPull[s].style.zIndex=this.idPull[J].style.zIndex-1,this.idPull[s].style.display=""}(I=String(I).replace(this.idPrefix,""))==this.topId&&(I=null),this.callEvent("onShow",[I]),null!=I&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+I].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+I,!1)}}},this._redistribSubLevelSelection=function(r,o){for(;0<this.conf.opened_poly.length;)this.conf.opened_poly.pop();var a=this._getSubItemToDeselectByPolygon(o);this._removeSubItemFromSelected(-1,-1);for(var m=0;m<a.length;m++)null!=this.idPull[a[m]]&&a[m]!=r&&"enabled"==this.itemPull[a[m]].state&&(this.idPull[a[m]].className="sub_item");for(m=0;m<this.conf.opened_poly.length;m++)this.conf.opened_poly[m]!=o&&this._hidePolygon(this.conf.opened_poly[m]);if("enabled"==this.itemPull[r].state){if(this.idPull[r].className="sub_item_selected",this.itemPull[r].complex&&this.conf.dload&&"no"==this.itemPull[r].loaded){1==this.conf.dload_icon&&this._updateLoaderIcon(r,!0),this.itemPull[r].loaded="get";var n=r.replace(this.idPrefix,"");this._dhxdataload.onBeforeXLS=function(){var u={params:{}};for(var s in u.params[this.conf.dload_pid]=n,this.conf.dload_params)u.params[s]=this.conf.dload_params[s];return u},this.loadStruct(this.conf.dload_url)}(this.itemPull[r].complex||this.conf.dload&&"yes"==this.itemPull[r].loaded)&&this.itemPull[r].complex&&null!=this.idPull["polygon_"+r]&&(this._updateItemComplexState(r,!0,!0),this._showPolygon(r,this.conf.dir_sublv)),this._addSubItemToSelected(r,o),this.conf.selected=r}},this._doOnClick=function(n,x,r){if(this.conf.last_click=n,null!=this.itemPull[this.idPrefix+n].href_link&&"enabled"==this.itemPull[this.idPrefix+n].state){var s=document.createElement("FORM"),v=String(this.itemPull[this.idPrefix+n].href_link).split("?");if(s.action=v[0],null!=v[1])for(var o=String(v[1]).split("&"),a=0;a<o.length;a++){var w=String(o[a]).split("="),u=document.createElement("INPUT");u.type="hidden",u.name=w[0]||"",u.value=w[1]||"",s.appendChild(u)}return null!=this.itemPull[this.idPrefix+n].href_target&&(s.target=this.itemPull[this.idPrefix+n].href_target),s.style.display="none",document.body.appendChild(s),s.submit(),void(null!=s&&(document.body.removeChild(s),s=null))}if("c"!=x.charAt(0)&&"d"!=x.charAt(1)&&"s"!=x.charAt(2)){if(this.checkEvent("onClick"))this.callEvent("onClick",[n,this.conf.ctx_zoneid,r]);else if("d"==x.charAt(1)||"win"==this.conf.mode&&"t"==x.charAt(2))return;this.conf.context&&this._isContextMenuVisible()&&this.conf.ctx_autohide?this._hideContextMenu():this._clearAndHide&&this._clearAndHide()}},this._doOnTouchMenu=function(a){0==this.conf.is_touched&&(this.conf.is_touched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[a]))},this._searchMenuNode=function(o,s){for(var a=new Array,r=0;r<s.length;r++)if("object"==typeof s[r]){5==s[r].length&&"object"!=typeof s[r][0]&&s[r][0].replace(this.idPrefix,"")==o&&0==r&&(a=s);var n=this._searchMenuNode(o,s[r]);0<n.length&&(a=n)}return a},this._getMenuNodes=function(r){var n=new Array;for(var o in this.itemPull)this.itemPull[o].parent==r&&(n[n.length]=o);return n},this._genStr=function(a){for(var m="dhxId_",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<a;n++)m+=o.charAt(Math.round(Math.random()*(o.length-1)));return m},this.getItemType=function(a){return a=this.idPrefix+a,null==this.itemPull[a]?null:this.itemPull[a].type},this.forEachItem=function(n){for(var m in this.itemPull)n(String(m).replace(this.idPrefix,""))},this._clearAndHide=function(){for(g.conf.selected=-1,g.conf.last_click=-1;0<g.conf.opened_poly.length;)g.conf.opened_poly.pop();for(var a=0;a<g.conf.selected_sub.length;a++){var m=g.conf.selected_sub[a][0];null!=g.idPull[m]&&"enabled"==g.itemPull[m].state&&("sub_item_selected"==g.idPull[m].className&&(g.idPull[m].className="sub_item"),g.idPull[m].className=="dhtmlxMenu_"+g.conf.skin+"_TopLevel_Item_Selected"&&(null!=g.itemPull[m].cssNormal?g.idPull[m].className=g.itemPull[m].cssNormal:g.idPull[m].className="dhtmlxMenu_"+g.conf.skin+"_TopLevel_Item_Normal")),g._hidePolygon(m)}g.conf.is_touched=!1,g.conf.context&&g.conf.ctx_hideall&&g._hidePolygon(g.idPrefix+g.topId)},this._showSubLevelItem=function(m,a){null!=document.getElementById("arrow_"+this.idPrefix+m)&&(document.getElementById("arrow_"+this.idPrefix+m).style.display=a?"none":""),null!=document.getElementById("image_"+this.idPrefix+m)&&(document.getElementById("image_"+this.idPrefix+m).style.display=a?"none":""),null!=document.getElementById(this.idPrefix+m)&&(document.getElementById(this.idPrefix+m).style.display=a?"":"none")},this._hideSubLevelItem=function(a){this._showSubLevelItem(a,!0)},this.idPrefix=this._genStr(12)+"_",this._bodyClick=function(a){2==(a=a||event).button||window.dhx4.isOpera&&1==a.ctrlKey||(g.conf.context?g.conf.ctx_autohide&&(!window.dhx4.isOpera||g._isContextMenuVisible()&&window.dhx4.isOpera)&&g._hideContextMenu():g._clearAndHide&&g._clearAndHide())},this._bodyContext=function(n){n=n||event;var m=String((n.srcElement||n.target).className);if(-1==m.search("dhtmlxMenu")||-1==m.search("SubLevelArea")){for(var a=!0,o=n.target||n.srcElement;null!=o;)null!=o.id&&g.isContextZone(o.id)&&(a=!1),o==document.body&&(a=!1),o=o.parentNode;a&&g.hideContextMenu()}},void 0!==window.addEventListener?(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1)):(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext)),this.unload=function(){window.dhx4._eventable(this,"clear"),dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]}catch(n){}if(this.conf.live_id=null,"function"==typeof window.addEventListener?(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1)):(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)),this._bodyClick=null,this._bodyContext=null,this.removeItem(this.idPrefix+this.topId,!0),this.itemPull=null,this.idPull=null,this.conf.context)for(var m in this.conf.ctx_zones)this.removeContextZone(m);for(var m in null!=this.cont&&(this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null),null!=this.base&&(this.conf.context||(this.base.className=""),this.conf.context||(this.base.oncontextmenu=this.base._oldContextMenuHandler||null),this.base.onselectstart=null,this.base=null),this)this[m]=null;g=null},dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=this,window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson",this.conf.tags.root,{struct:!0}),window.dhx4._eventable(this),1==window.dhx4.s2b(this.conf.autoload.context)&&this.renderAsContextMenu(),null!=this.conf.autoload.dynamic?this.enableDynamicLoading(this.conf.autoload.dynamic,window.dhx4.s2b(this.conf.autoload.dynamic_icon)):null!=this.conf.autoload.items?this.loadStruct(this.conf.autoload.items,this.conf.autoload.onload):null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml&&this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload),{onclick:1,oncheckboxclick:1,onradioclick:1})null!=this.conf.autoload[e]&&("function"==typeof this.conf.autoload[e]?this.attachEvent(e,this.conf.autoload[e]):"function"==typeof window[this.conf.autoload[e]]&&this.attachEvent(e,window[this.conf.autoload[e]]));for(var e in null!=this.conf.autoload.top_text&&this.setTopText(this.conf.autoload.top_text),null!=this.conf.autoload.align&&this.setAlign(this.conf.autoload.align),null!=this.conf.autoload.open_mode&&this.setOpenMode(this.conf.autoload.open_mode),null!=this.conf.autoload.overflow&&this.setOverflowHeight(this.conf.autoload.overflow),"awesome"==this.conf.autoload.iconset&&(this.conf.icons_css=!0),this.conf.autoload)this.conf.autoload[e]=null,delete this.conf.autoload[e];return this.conf.autoload=null,this}function dhtmlXRibbon(g){var c,a,e=this;this.conf={type:"ribbon",icons_path:g&&g.icons_path?g.icons_path:"",icons_css:g&&"awesome"==g.iconsset,arrows_mode:g&&g.arrows_mode?g.arrows_mode:null,skin:"dhx_skyblue"},this._eventHandlers={},this._base=null,this._items={},this._tabbar=null,this.childIds=[],"string"==typeof g?a=g:g&&g.tagName?a=g:g&&g.parent&&(g.parent.tagName||"string"==typeof g.parent)&&(a=g.parent),this._doOnHighlight0=function(n){var m=(n=n||event).target||n.srcElement,h=e._findItemByNode(m),l=e._items[h._dhx_ribbonId];if(!l.conf.disable)return(!e.items[l.type]||"function"!=typeof e.items[l.type].mouseover||1==e.items[l.type].mouseover(l,e,n))&&void(/dhxrb_highlight0/.test(h.className)||(h.className+=" dhxrb_highlight0"))},this._doOffHighlight0=function(n){var m=(n=n||event).target||n.srcElement,h=e._findItemByNode(m),l=e._items[h._dhx_ribbonId];if(!l.conf.disable){if(e.items[l.type]&&"function"==typeof e.items[l.type].mouseout&&1!=e.items[l.type].mouseout(l,e,n))return!1;/dhxrb_highlight1/.test(h.className)&&(h.className=h.className.replace(/\s?dhxrb_highlight1/,"")),/dhxrb_highlight0/.test(h.className)&&(h.className=h.className.replace(/\s?dhxrb_highlight0/,""))}},this._doOnHighlight1=function(n){var m=(n=n||event).target||n.srcElement,h=e._findItemByNode(m),l=e._items[h._dhx_ribbonId];if(!l.conf.disable){if(e.callEvent("_showPopup",[l.id]),e.items[l.type]&&"function"==typeof e.items[l.type].mousedown&&1!=e.items[l.type].mousedown(l,e,n))return!1;/dhxrb_highlight1/.test(h.className)||(h.className+=" dhxrb_highlight1")}},this._doOffHighlight1=function(n){var m=(n=n||event).target||n.srcElement,h=e._findItemByNode(m),l=e._items[h._dhx_ribbonId];if(!l.conf.disable)return(!e.items[l.type]||"function"!=typeof e.items[l.type].mouseup||1==e.items[l.type].mouseup(l,e,n))&&void(/dhxrb_highlight1/.test(h.className)&&(h.className=h.className.replace(/\s?dhxrb_highlight1/,"")))},this._doOnClick=function(n){var m=(n=n||event).target||n.srcElement,h=e._findItemByNode(m),l=e._items[h._dhx_ribbonId];l.conf.disable||e.items[l.type]&&"function"==typeof e.items[l.type].click&&e.items[l.type].click(l,e,n)},this._doOnFocus=function(n){var m=(n=n||event).target||n.srcElement,h=e._findItemByNode(m),l=e._items[h._dhx_ribbonId];l.conf.disable||(e.callEvent("_showPopup",[l.id]),e.items[l.type]&&"function"==typeof e.items[l.type].focus&&e.items[l.type].focus(l,e,n))},this._doOnBlur=function(n){var m=(n=n||event).target||n.srcElement,h=e._findItemByNode(m),l=e._items[h._dhx_ribbonId];l.conf.disable||e.items[l.type]&&"function"==typeof e.items[l.type].blur&&e.items[l.type].blur(l,e,n)},this._doOnChange=function(n){var m=(n=n||event).target||n.srcElement,h=e._findItemByNode(m),l=e._items[h._dhx_ribbonId];l.conf.disable||e.items[l.type]&&"function"==typeof e.items[l.type].change&&e.items[l.type].change(l,e,n)},this._doOnKeydown=function(n){var m=(n=n||event).target||n.srcElement,h=e._findItemByNode(m),l=e._items[h._dhx_ribbonId];l.conf.disable||e.items[l.type]&&"function"==typeof e.items[l.type].keydown&&e.items[l.type].keydown(l,e,n)},this._tabCustomApi={enable:function(n,l){var h=null;if(1!=(l=l||!1)){h=e._items[this._idd];for(var m=0;m<h.childIds.length;m++)e.enable(h.childIds[m])}return e._tabOriginalApi.enable.apply(this,[n])},disable:function(n,l){var h=null;if(0!=l){h=e._items[this._idd];for(var m=0;m<h.childIds.length;m++)e.disable(h.childIds[m])}return e._tabOriginalApi.disable.apply(this,[n])},close:function(m){var l=e._items[this._idd];for(var h in e._removeTab(l),e._tabOriginalApi.close.apply(this,[m]),e._tabOriginalApi)this[h]=null}},this._attachEventTabbar=function(){this._tabbar.attachEvent("onSelect",function(){return e.callEvent("onSelect",arguments)}),this._tabbar.attachEvent("onTabClick",function(){return e.callEvent("onTabClick",arguments)}),this._tabbar.attachEvent("onTabClose",function(){return e.callEvent("onTabClose",arguments)})},"string"==typeof a?this._base=document.getElementById(a):a&&a.tagName?this._base=a:(this._base=document.createElement("div"),this._base._dhx_remove=!0,document.body.firstChild?document.body.insertBefore(this._base,document.body.firstChild):document.body.appendChild(this._base)),c=dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||dhx4.skinDetect("dhtmlxribbon")||"material","object"==typeof g&&g.skin&&(c=g.skin),this.setSkin(c),dhx4._eventable(this),dhx4._enableDataLoading(this,"_renderData","_xmlToJson","ribbon",{struct:!0}),this.attachEvent("_onHeightChanged",function(){this.conf.inited=!0}),this._base.className+=" dhxrb_without_tabbar",this._base.innerHTML="<div class='dhxrb_background_area'></div>",null!=g&&(g.json?this.loadStruct(g.json,g.onload):g.xml?this.loadStruct(g.xml,g.onload):this._renderData(g)),this.unload=function(){for(var l=[],m=0;m<this.childIds.length;m++)l.push(this.childIds[m]);dhx4._enableDataLoading(this,null,null,null,"clear"),dhx4._eventable(this,"clear");for(m=0;m<l.length;m++)"tab"==this._items[l[m]].type?this.tabs(l[m]).close(!1):this.removeItem(l[m]);for(var h in this._tabbar&&(this._tabbar.unload(),this._tabbar=null),this._base.innerHTML="",this._base._dhx_remove?this._base.parentNode.removeChild(this._base):this._base.className=this._base.className.replace(/\s?(dhtmlx|dhxrb)(\S*)/gi,""),this)this[h]=null;e=null}}function dhtmlXToolbarObject(c,e){var a=this;for(this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"material",align:"left",align_autostart:"left",icons_path:"",icons_css:!1,iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null,cssShadow:dhx4.isIE6||dhx4.isIE7||dhx4.isIE8?"":" dhx_toolbar_shadow"},"object"==typeof c&&null!=c&&void 0===c.tagName&&(null==c.icons_path&&null==c.icon_path||(this.conf.icons_path=c.icons_path||c.icon_path),null!=c.icons_size&&(this.conf.icons_size_autoload=c.icons_size),null!=c.iconset&&(this.conf.icons_css="awesome"==c.iconset),null!=c.json&&(this.conf.json_autoload=c.json),null!=c.xml&&(this.conf.xml_autoload=c.xml),null!=c.onload&&(this.conf.onload_autoload=c.onload),null==c.onclick&&null==c.onClick||(this.conf.auto_onclick=c.onclick||c.onClick),null!=c.items&&(this.conf.items_autoload=c.items),null!=c.skin&&(this.conf.skin=c.skin),null!=c.align&&(this.conf.align_autostart=c.align),c=c.parent),this.cont="object"!=typeof c?document.getElementById(c):c;0<this.cont.childNodes.length;)this.cont.removeChild(this.cont.childNodes[0]);return c=null,this.cont.dir="ltr",this.base=document.createElement("DIV"),this.base.className="dhxtoolbar_float_left",this.cont.appendChild(this.base),this.cont.ontouchstart=function(g){return g=g||event,"input"==String(g.target.tagName||"").toLowerCase()||(g.preventDefault?g.preventDefault():g.returnValue=!1,!(g.cancelBubble=!0))},this.setSkin(this.conf.skin),this.objPull={},this.anyUsed=null,this._genStr=function(g){for(var h="dhxId_",m="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l=0;l<g;l++)h+=m.charAt(Math.round(Math.random()*(m.length-1)));return h},this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput"),this.idPrefix=this._genStr(12),window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:!0}),window.dhx4._eventable(this),this._getObj=function(m,g){for(var h=null,l=0;l<m.childNodes.length;l++)null!=m.childNodes[l].tagName&&String(m.childNodes[l].tagName).toLowerCase()==String(g).toLowerCase()&&(h=m.childNodes[l]);return h},this._addImgObj=function(h){var g=document.createElement(1==this.conf.icons_css?"I":"IMG");return 0<h.childNodes.length?h.insertBefore(g,h.childNodes[0]):h.appendChild(g),g},this._setItemImage=function(m,h,g){var l;(1==g?m.imgEn=h:m.imgDis=h,!m.state&&1==g||m.state&&0==g)||(1==this.conf.icons_css?(null==(l=this._getObj(m.obj,"i"))&&(l=this._addImgObj(m.obj)),l.className=this.conf.icons_path+h):(null==(l=this._getObj(m.obj,"img"))&&(l=this._addImgObj(m.obj)),l.src=this.conf.icons_path+h))},this._clearItemImage=function(l,g){if(1==g?l.imgEn="":l.imgDis="",!(!l.state&&1==g||l.state&&0==g)){var h=this._getObj(l.obj,this.conf.icons_css?"i":"img");null!=h&&h.parentNode.removeChild(h)}},this._setItemText=function(g,l){var h=this._getObj(g.obj,"div");null!=l&&0!=l.length?(null==h&&((h=document.createElement("DIV")).className="dhxtoolbar_text",g.obj.appendChild(h)),h.innerHTML=l):null!=h&&h.parentNode.removeChild(h)},this._getItemText=function(g){var h=this._getObj(g.obj,"div");return null!=h?h.innerHTML:""},this._enableItem=function(h){if(!h.state){h.state=!0,"buttonTwoState"==this.objPull[h.id].type&&1==this.objPull[h.id].obj.pressed?(h.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",h.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):(h.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",h.obj.renderAs=h.obj.className),h.arw&&(h.arw.className=String(h.obj.className).replace("btn","arw"));var g=this._getObj(h.obj,this.conf.icons_css?"i":"img");""!=h.imgEn?(null==g&&(g=this._addImgObj(h.obj)),g[this.conf.icons_css?"className":"src"]=this.conf.icons_path+h.imgEn):null!=g&&g.parentNode.removeChild(g)}},this._disableItem=function(h){if(h.state){h.state=!1,h.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+("buttonTwoState"==this.objPull[h.id].type&&h.obj.pressed?"pres_":"")+"dis",h.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",h.arw&&(h.arw.className=String(h.obj.className).replace("btn","arw"));var g=this._getObj(h.obj,this.conf.icons_css?"i":"img");""!=h.imgDis?(null==g&&(g=this._addImgObj(h.obj)),g[this.conf.icons_css?"className":"src"]=this.conf.icons_path+h.imgDis):null!=g&&g.parentNode.removeChild(g),null!=h.polygon&&"none"!=h.polygon.style.display&&(window.dhx4.zim.clear(h.polygon._idd),h.polygon.style.display="none",h.polygon._ie6cover&&(h.polygon._ie6cover.style.display="none"),"dhx_terrace"==this.conf.skin&&this._improveTerraceButtonSelect(h.id,!0),this.callEvent("onButtonSelectHide",[h.obj.idd])),this.anyUsed=null}},this.clearAll=function(){for(var g in this.objPull)this._removeItem(String(g).replace(this.idPrefix,""))},this._doOnClick=function(g){a&&a.forEachItem&&a.forEachItem(function(l){if("buttonSelect"==a.objPull[a.idPrefix+l].type){var h=a.objPull[a.idPrefix+l];!0===h.arw._skip?h.arw._skip=!1:"none"!=h.polygon.style.display&&(h.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",h.obj.className=h.obj.renderAs,h.arw.className=String(h.obj.renderAs).replace("btn","arw"),a.anyUsed=null,a.conf.touch_id=null,window.dhx4.zim.clear(h.polygon._idd),h.polygon.style.display="none",h.polygon._ie6cover&&(h.polygon._ie6cover.style.display="none"),"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(h.id,!0),a.callEvent("onButtonSelectHide",[h.obj.idd]))}})},void 0!==window.addEventListener?(window.addEventListener("mousedown",this._doOnClick,!1),window.addEventListener("touchstart",this._doOnClick,!1)):document.body.attachEvent("onmousedown",this._doOnClick),null!=this.conf.icons_size_autoload&&(this.setIconSize(this.conf.icons_size_autoload),this.conf.icons_size_autoload=null),null!=this.conf.items_autoload?(this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload),this.conf.items_autoload=null):null!=this.conf.json_autoload?(this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload),this.conf.json_autoload=null):null!=this.conf.xml_autoload&&(this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload),this.conf.xml_autoload=null),this.conf.align_autostart!=this.conf.align&&(this.setAlign(this.conf.align_autostart),this.conf.align_autostart=null),"function"==typeof this.conf.auto_onclick?this.attachEvent("onClick",this.conf.auto_onclick):"string"==typeof this.conf.auto_onclick&&"function"==typeof window[this.conf.auto_onclick]&&this.attachEvent("onClick",window[this.conf.auto_onclick]),this}function dhtmlXEditor(e,g){var c=this;for(this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:!1,toolbar:!1,iconsPath:"",evs:["focus","blur","keydown","keyup","keypress","mouseup","mousedown","click","touchend"],iOSfix:null!=navigator.userAgent.match(/Mobile/gi)&&null!=navigator.userAgent.match(/iPad/gi)&&null!=navigator.userAgent.match(/AppleWebKit/gi),extra_css:"",font:{family:"Tahoma",size:"12px",color:"black"}},this._doOnFocusChanged=null,this._doOnAccess=null,"object"==typeof e&&null!=e&&null==e.tagName&&(g=e.skin,null!=e.content&&(this.conf.content=e.content),null!=e.contentHTML&&(this.conf.contentHTML=e.contentHTML),null!=e.iconsPath&&(this.conf.iconsPath=e.iconsPath),null!=e.extraCss&&(this.conf.extra_css=e.extraCss),null!=e.toolbar&&(this.conf.toolbar=window.dhx4.s2b(e.toolbar)),null!=e.onFocusChanged&&(this._doOnFocusChanged=e.onFocusChanged),null!=e.onAccess&&(this._doOnAccess=e.onAccess),e=e.parent),this.conf.skin=g||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"material","string"==typeof e&&(e=document.getElementById(e)),this.base=e,this.base.className+=" dhxeditor_"+this.conf.skin;0<this.base.childNodes.length;)this.base.removeChild(this.base.childNodes[0]);var h=window.dhx4.isIE?this.base.currentStyle.position:null!=window.getComputedStyle?window.getComputedStyle(this.base,null).getPropertyValue("position"):"";"relative"!=h&&"absolute"!=h&&(this.base.style.position="relative"),this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this),this.base.appendChild(this.cell.cell),this.cBlock=document.createElement("DIV"),this.cBlock.className="dhxcont_content_blocker",this.cBlock.style.display="none",this.base.appendChild(this.cBlock),this.editor=document.createElement("IFRAME"),this.editor.className="dhxeditor_mainiframe",this.editor.frameBorder=0,window.dhx4.isOpera&&(this.editor.scrolling="yes"),this.setSizes();var a=this.editor;return void 0!==window.addEventListener?a.onload=function(){for(var l=0;l<c.conf.evs.length;l++)a.contentWindow.addEventListener(c.conf.evs[l],c._ev,!1)}:a.onreadystatechange=function(l){if(void 0!==a.readyState&&"complete"==a.readyState)try{for(var m=0;m<c.conf.evs.length;m++)a.contentWindow.document.body.attachEvent("on"+c.conf.evs[m],c._ev)}catch(n){}},this._ev=function(m){var l=(m=m||event).type;1!=c.conf.iOSfix||"touchend"!=l?(c.callEvent("onAccess",[l,m]),"function"==typeof c._doOnAccess?c._doOnAccess(l,m):"string"==typeof c._doOnAccess&&"function"==typeof window[c._doOnAccess]&&window[c._doOnAccess](l,m)):c.editor.contentWindow.focus()},this._focus=function(){window.dhx4.isIE?this.editor.contentWindow.document.body.focus():this.editor.contentWindow.focus()},this.cell.attachObject(this.editor),this.edWin=this.editor.contentWindow,this.edDoc=this.edWin.document,this._prepareContent=function(n,r){var m="";!0===n&&null!=this.getContent&&(m=this.getContent());var l=this.editor.contentWindow.document;if(l.open("text/html","replace"),window.dhx4.isOpera?l.write("<html><head>"+this.conf.extra_css+"<style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(!0!==r?"contenteditable='true'":"")+" tabindex='0'></body></html>"):window.dhx4.isKHTML?l.write("<html><head>"+this.conf.extra_css+"<style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(!0!==r?"contenteditable='true'":"")+" tabindex='0'></body></html>"):window.dhx4.isIE?l.write("<html><head>"+this.conf.extra_css+"<style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; height:100%; margin:0px; background-color: #ffffff; outline: none; "+this._fontConf()+"} </style></head><body "+(!0!==r?"contenteditable='true'":"")+" tabindex='0'></body></html>"):l.write("<html><head>"+this.conf.extra_css+"<style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(!0!==r?"contenteditable='true'":"")+" tabindex='0'></body></html>"),l.close(),window.dhx4.isIE?l.contentEditable=!0!==r:l.designMode=!0!==r?"On":"Off",window.dhx4.isFF)try{l.execCommand("useCSS",!1,!0)}catch(o){}!0===n&&null!=this.setContent&&this.setContent(m)},this._prepareContent(),this._doOnResize=function(){window.clearTimeout(c.conf.resizeTM),c.conf.resizeTM=window.setTimeout(function(){c.setSizes&&c.setSizes()},c.conf.resizeTMTime)},this._runCommand=function(n,r){if(!0!==this.conf.roMode){arguments.length<2&&(r=null),window.dhx4.isIE&&this.edWin.focus();try{this.editor.contentWindow.document.execCommand(n,!1,r)}catch(o){}if(window.dhx4.isIE){this.edWin.focus();var l=this;window.setTimeout(function(){l.edWin.focus(),l=null},1)}}},this.applyBold=function(){this._runCommand("Bold")},this.applyItalic=function(){this._runCommand("Italic")},this.applyUnderscore=function(){this._runCommand("Underline")},this.clearFormatting=function(){this._runCommand("RemoveFormat");var l=this.getContent();l=l.replace(/<\/?h\d>/gi,""),this.setContent(l)},this._doOnClick=function(n){var m=n||window.event,l=m.target||m.srcElement;c._showInfo(l)},this._doOnMouseDown=function(n){var m=n||window.event,l=m.target||m.srcElement;c._showInfo(l)},this._doOnKeyUp=function(o){var n=o||window.event,l=n.keyCode,m=n.target||n.srcElement;1=={37:1,38:1,39:1,40:1,13:1}[l]&&c._showInfo(m)},this._getParentByTag=function(l,n){n=n.toLowerCase();var m=l;do{if(""==n||m.nodeName.toLowerCase()==n)return m}while(m=m.parentNode);return l},this._isStyleProperty=function(m,r,l,o){r=r.toLowerCase();var s=m;do{if(s.nodeName.toLowerCase()==r&&s.style[l]==o)return!0}while(s=s.parentNode);return!1},this._setStyleProperty=function(l,o){this.style[o]=!1;var m=this._getParentByTag(l,o);m&&m.tagName.toLowerCase()==o&&(this.style[o]=!0),"del"==o&&this._getParentByTag(l,"strike")&&"strike"==this._getParentByTag(l,"strike").tagName.toLowerCase()&&(this.style.del=!0)},this._showInfo=function(m){if((m=this._getSelectionBounds().end?this._getSelectionBounds().end:m)&&this._setStyleProperty)try{if(this.edWin.getComputedStyle){var n=401==(l=this.edWin.getComputedStyle(m,null)).getPropertyValue("font-weight")?700:l.getPropertyValue("font-weight");this.style={fontStyle:l.getPropertyValue("font-style"),fontSize:l.getPropertyValue("font-size"),textDecoration:l.getPropertyValue("text-decoration"),fontWeight:n,fontFamily:l.getPropertyValue("font-family"),textAlign:l.getPropertyValue("text-align")},window.dhx4.isKHTML&&(this.style.fontStyle=l.getPropertyValue("font-style"),this.style.vAlign=l.getPropertyValue("vertical-align"),this.style.del=this._isStyleProperty(m,"span","textDecoration","line-through"),this.style.u=this._isStyleProperty(m,"span","textDecoration","underline"))}else{var l=m.currentStyle;this.style={fontStyle:l.fontStyle,fontSize:l.fontSize,textDecoration:l.textDecoration,fontWeight:l.fontWeight,fontFamily:l.fontFamily,textAlign:l.textAlign}}this._setStyleProperty(m,"h1"),this._setStyleProperty(m,"h2"),this._setStyleProperty(m,"h3"),this._setStyleProperty(m,"h4"),window.dhx4.isKHTML||(this._setStyleProperty(m,"del"),this._setStyleProperty(m,"sub"),this._setStyleProperty(m,"sup"),this._setStyleProperty(m,"u")),this.callEvent("onFocusChanged",[this.style,l])}catch(o){return null}},this._getSelectionBounds=function(){var r,n,u,m;if(this.edWin.getSelection){var s=this.edWin.getSelection();return window.dhx4.isEdge&&0==s.rangeCount?{root:null,start:null,end:null}:(u=(r=s.getRangeAt(s.rangeCount-1)).startContainer,m=r.endContainer,n=r.commonAncestorContainer,"#text"==u.nodeName&&(n=n.parentNode),"#text"==u.nodeName&&(u=u.parentNode),"body"==u.nodeName.toLowerCase()&&(u=u.firstChild),"#text"==m.nodeName&&(m=m.parentNode),"body"==m.nodeName.toLowerCase()&&(m=m.lastChild),u==m&&(n=u),{root:n,start:u,end:m})}if(this.edWin.document.selection){if(!(r=this.edDoc.selection.createRange()).duplicate)return null;n=r.parentElement();var o=r.duplicate(),l=r.duplicate();return o.collapse(!0),l.moveToElementText(o.parentElement()),l.setEndPoint("EndToStart",o),u=o.parentElement(),o=r.duplicate(),(l=r.duplicate()).collapse(!1),o.moveToElementText(l.parentElement()),o.setEndPoint("StartToEnd",l),m=l.parentElement(),"body"==u.nodeName.toLowerCase()&&(u=u.firstChild),"body"==m.nodeName.toLowerCase()&&(m=m.lastChild),u==m&&(n=u),{root:n,start:u,end:m}}return null},this.getContent=function(){return this.edDoc.body?window.dhx4.isFF||window.dhx4.isChrome?this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,""):window.dhx4.isIE&&0==this.edDoc.body.innerText.length?"":this.edDoc.body.innerHTML:""},this.setContent=function(n){if(n=n||"",this.edDoc.body){var m=!1;if(window.dhx4.isFF){var l=navigator.userAgent.match(/Firefox\/(\d*)/);m=null!=l&&l[1]<28}m?(void 0===this.conf.ffTest&&(this.editor.contentWindow.document.body.innerHTML="",this._runCommand("InsertHTML","test"),this.conf.ffTest=0<this.editor.contentWindow.document.body.innerHTML.length),this.conf.ffTest?this.editor.contentWindow.document.body.innerHTML=n:(this.editor.contentWindow.document.body.innerHTML="",0==n.length&&(n=" "),this._runCommand("InsertHTML",n))):this.editor.contentWindow.document.body.innerHTML=n,this.callEvent("onContentSet",[])}else this.conf.firstLoadEv||(this.conf.firstLoadEv=!0,this.conf.firstLoadData=n,this._onFirstLoad=function(){c.setContent(c.conf.firstLoadData),"function"==typeof window.addEventListener?c.edWin.removeEventListener("load",c._onFirstLoad,!1):c.edWin.detachEvent("onload",c._onFirstLoad),c.conf.firstLoadData=null,c.conf.firstLoadEv=!1,c._onFirstLoad=null},"function"==typeof window.addEventListener?this.edWin.addEventListener("load",this._onFirstLoad,!1):this.edWin.attachEvent("onload",this._onFirstLoad))},this.setContentHTML=function(l){window.dhx4.ajax.get(l,function(m){null!=m.xmlDoc.responseText&&c.setContent(m.xmlDoc.responseText)})},window.dhx4._eventable(this),this.attachEvent("onFocusChanged",function(l){"function"==typeof this._doOnFocusChanged?this._doOnFocusChanged(l):"string"==typeof this._doOnFocusChanged&&"function"==typeof window[this._doOnFocusChanged]&&window[this._doOnFocusChanged](l)}),"function"==typeof window.addEventListener?(window.addEventListener("resize",this._doOnResize,!1),this.edDoc.addEventListener("click",this._doOnClick,!1),this.edDoc.addEventListener("keyup",this._doOnKeyUp,!1),window.dhx4.isOpera&&this.edDoc.addEventListener("mousedown",this._doOnMouseDown,!1)):(window.attachEvent("onresize",this._doOnResize),this.edDoc.attachEvent("onclick",this._doOnClick),this.edDoc.attachEvent("onkeyup",this._doOnKeyUp)),this.unload=function(){if("function"==typeof window.addEventListener){window.removeEventListener("resize",this._doOnResize,!1),this.edDoc.removeEventListener("click",this._doOnClick,!1),this.edDoc.removeEventListener("keyup",this._doOnKeyUp,!1),window.dhx4.isOpera&&this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,!1);for(var l=0;l<c.conf.evs.length;l++)a.contentWindow.removeEventListener(c.conf.evs[l],c._ev,!1);null!=this.tb&&1==this.conf.iOSfix&&(this.tb.cont.removeEventListener("touchend",this._doOnIOSFix,!1),this._doOnIOSFix=null)}else{window.detachEvent("onresize",this._doOnResize,!1),this.edDoc.detachEvent("onclick",this._doOnClick),this.edDoc.detachEvent("onkeyup",this._doOnKeyUp);for(l=0;l<c.conf.evs.length;l++)a.contentWindow.document.body.detachEvent("on"+c.conf.evs[l],c._ev)}for(this._doOnAccess=null,this._doOnFocusChanged=null,"function"==typeof window.addEventListener?this.editor.onload=null:this.editor.onreadystatechange=null,this.editor.parentNode.removeChild(this.editor),this.editor=null,this.edDoc=null,this.edWin=null,this.cell._unload(),this.cell=null,this.tb=null,window.dhx4._eventable(this,"clear"),this.cBlock.parentNode.removeChild(this.cBlock),this.cBlock=null,this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");0<this.base.childNodes.length;)this.base.removeChild(this.base.childNodes[0]);this.base=null,this._doOnClick=null,this._doOnKeyUp=null,this._doOnMouseDown=null,this._ev=null,this._focus=null,this._prepareContent=null,this._doOnResize=null,this.setIconsPath=null,this.init=null,this.setSizes=null,this._runCommand=null,this.applyBold=null,this.applyItalic=null,this.applyUnderscore=null,this.clearFormatting=null,this._showInfo=null,this._getSelectionBounds=null,this.getContent=null,this.setContent=null,this.setContentHTML=null,this.setReadonly=null,this.isReadonly=null,this.unload=null,c=a=null},1==this.conf.toolbar&&"function"==typeof this.attachToolbar&&"function"==typeof window.dhtmlXToolbarObject&&(this.attachToolbar(this.conf.iconsPath),1==this.conf.iOSfix&&(this._doOnIOSFix=function(){c.editor.contentWindow.focus()},this.tb.cont.addEventListener("touchend",this._doOnIOSFix,!1))),this.setIconsPath=function(l){this.conf.iconsPath=l},0<this.conf.content.length?(this.setContent(this.conf.content),this.conf.content=""):0<this.conf.contentHTML.length&&(this.setContentHTML(this.conf.contentHTML),this.conf.contentHTML=""),this}function xmlPointer(a){this.d=a}function dhtmlXTreeObject(o,l,c,a){if(dhtmlxEvent.initTouch&&dhtmlxEvent.initTouch(),_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}this.parentObject="object"!=typeof o?document.getElementById(o):o,this.parentObject.style.overflow="hidden",this._itim_dg=!0,this.dlmtr=",",this.dropLower=!1,this.enableIEImageFix(!0),this.xmlstate=0,this.mytype="tree",this.smcheck=!0,this.width=l,this.height=c,this.rootId=a,this.childCalc=null,this.def_img_x="18px",this.def_img_y="18px",this.def_line_img_x="18px",this.def_line_img_y="24px",this._dragged=new Array,this._selected=new Array,this.style_pointer="pointer",this._aimgs=!0,this.htmlcA=" [",this.htmlcB="]",this.lWin=window,this.cMenu=0,this.mlitems=0,this.iconURL="",this.dadmode=0,this.slowParse=!1,this.autoScroll=!0,this.hfMode=0,this.nodeCut=new Array,this.XMLsource=0,this.XMLloadingWarning=0,this._idpull={},this._pullSize=0,this.treeLinesOn=!0,this.tscheck=!1,this.timgen=!0,this.dpcpy=!1,this._ld_id=null,this._dynDeleteBranches={},this._oie_onXLE=[],this.imPath=window.dhx_globalImgPath||"",this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif"),this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif"),this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif"),this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"),this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"),this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif"),this.cutImg=new Array(0,0,0),this.cutImage="but_cut.gif",dhx4._eventable(this),this.dragger=new dhtmlDragAndDropObject,this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this),this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none",this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow",this.allTree=this._createSelf(),this.allTree.appendChild(this.htmlNode.htmlNode),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden");var h=this;if(this.allTree.onselectstart=new Function("return false;"),_isMacOS&&(this.allTree.oncontextmenu=function(r){return h._doContClick(r||window.event,!0)}),this.allTree.onmousedown=function(r){return h._doContClick(r||window.event)},this.XMLLoader=this._parseXMLTree,_isIE&&this.preventIECashing(!0),this.selectionBar=document.createElement("DIV"),this.selectionBar.className="selectionBar",this.selectionBar.innerHTML="&nbsp;",this.selectionBar.style.display="none",this.allTree.appendChild(this.selectionBar),window.addEventListener&&window.addEventListener("unload",function(){try{h.destructor()}catch(r){}},!1),window.attachEvent&&window.attachEvent("onunload",function(){try{h.destructor()}catch(r){}}),this.setImagesPath=this.setImagePath,this.setIconsPath=this.setIconPath,this.setSkin(window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtree")||"material"),dhtmlx.image_path){var m=dhtmlx.image_path,g=this.parentObject.className.match(/dhxtree_dhx_([a-z_]*)/i);null!=g&&null!=g[1]&&(m+="dhxtree_"+g[1]+"/"),this.setImagePath(m)}return this}function cObject(){return this}function dhtmlXTreeItemObject(l,c,e,a,g,h){return this.htmlNode="",this.acolor="",this.scolor="",this.tr=0,this.childsCount=0,this.tempDOMM=0,this.tempDOMU=0,this.dragSpan=0,this.dragMove=0,this.span=0,this.closeble=1,this.childNodes=new Array,this.userData=new cObject,this.checkstate=0,this.treeNod=a,this.label=c,this.parentObject=e,this.actionHandler=g,this.images=new Array(a.imageArray[0],a.imageArray[1],a.imageArray[2]),this.id=a._globalIdStorageAdd(l,this),this.treeNod.checkBoxOff?this.htmlNode=this.treeNod._createItem(1,this,h):this.htmlNode=this.treeNod._createItem(0,this,h),this.htmlNode.objBelong=this}function dhx_dragSomethingInTree(){this.lWin=window,this._createDragNode=function(c){var a=document.createElement("div");return a.style.position="absolute",a.innerHTML=c.innerHTML||c.value,a.className="dragSpanDiv",a},this._preventNsDrag=function(a){return(a||window.event).cancelBubble=!0,a&&a.preventDefault&&a.preventDefault(),!1},this._nonTrivialNode=function(c,e,a,g){if(this._customDrop)return this._customDrop(c,g.img.id,e.id,a?a.id:null);var h=g.img.getAttribute("image")||"",m=g.img.id||"new",l=g.img.getAttribute("text")||(_isIE?g.img.innerText:g.img.textContent);c[a?"insertNewNext":"insertNewItem"](a?a.id:e.id,m,l,"",h,h,h)}}function jsonPointer(c,a){this.d=c,this.dp=a}function dhtmlXTreeFromHTML(obj){"object"!=typeof obj&&(obj=document.getElementById(obj));for(var n=obj,id=n.id,cont="",j=0;j<obj.childNodes.length;j++)if("1"==obj.childNodes[j].nodeType){if("XMP"==obj.childNodes[j].tagName)for(var cHead=obj.childNodes[j],m=0;m<cHead.childNodes.length;m++)cont+=cHead.childNodes[m].data;else"ul"==obj.childNodes[j].tagName.toLowerCase()&&(cont=dhx_li2trees(obj.childNodes[j],new Array,0));break}obj.innerHTML="";var t=new dhtmlXTreeObject(obj,"100%","100%",0),z_all=new Array;for(b in t)z_all[b.toLowerCase()]=b;for(var atr=obj.attributes,a=0;a<atr.length;a++)if(0==atr[a].name.indexOf("set")||0==atr[a].name.indexOf("enable")){var an=atr[a].name;t[an]||(an=z_all[atr[a].name]),t[an].apply(t,atr[a].value.split(","))}if("object"==typeof cont){t.XMLloadingWarning=1;for(var i=0;i<cont.length;i++){var n=t.insertNewItem(cont[i][0],cont[i][3],cont[i][1]);cont[i][2]&&t._setCheck(n,cont[i][2])}t.XMLloadingWarning=0,t.lastLoadedXMLId=0,t._redrawFrom(t)}else t.parse("<tree id='0'>"+cont+"</tree>");window[id]=t;var oninit=obj.getAttribute("oninit");return oninit&&eval(oninit),t}function dhx_init_trees(){for(var c=document.getElementsByTagName("div"),a=0;a<c.length;a++)"dhtmlxTree"==c[a].className&&dhtmlXTreeFromHTML(c[a])}function dhx_li2trees(s,l,e){for(var m=0;m<s.childNodes.length;m++){var r=s.childNodes[m];if(1==r.nodeType&&"li"==r.tagName.toLowerCase()){for(var o="",n=null,a=r.getAttribute("checked"),h=0;h<r.childNodes.length;h++){var g=r.childNodes[h];3==g.nodeType?o+=g.data:"ul"!=g.tagName.toLowerCase()?o+=dhx_outer_html(g):n=g}l[l.length]=[e,o,a,r.id||l.length+1],n&&(l=dhx_li2trees(n,l,r.id||l.length))}}return l}function dhx_outer_html(c){if(c.outerHTML)return c.outerHTML;var a=document.createElement("DIV");return a.appendChild(c.cloneNode(!0)),a=a.innerHTML}function setCookie(a,c){document.cookie=a+"="+c}function getCookie(c){var e=c+"=";if(0<document.cookie.length){var g=document.cookie.indexOf(e);if(-1!=g){g+=e.length;var a=document.cookie.indexOf(";",g);return-1==a&&(a=document.cookie.length),document.cookie.substring(g,a)}}}function dhtmlXTreeView(g){var h=this;if("object"==typeof g&&null==g.tagName||(g={parent:g,clear:!0}),this.base="string"==typeof g.parent?document.getElementById(g.parent):g.parent,this.base!=document.body)for(;0<this.base.childNodes.length;)this.base.removeChild(this.base.lastChild);this.conf={skin:g.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtreeview")||"material",tree_id:window.dhx4.newId(),ofs:{w:1,h:0},adjust_base:!1,icons:this.icons["string"==typeof g.iconset&&null!=this.icons[g.iconset]&&1==this.icons[g.iconset].r?g.iconset:"tree_native"],autoload:{url:null,mode:"id"},selected:{},ud:{},idx:{sign:0,icon:1,text:2},silent:!1,is_mac:null!=navigator.platform.match(/^mac/i)&&"function"==typeof window.addEventListener,mac_cmd_key:!1},this.setSkin(this.conf.skin),this.cont=document.createElement("DIV"),this.cont.className="dhxtreeview_cont",this.base.appendChild(this.cont),this.area=document.createElement("DIV"),this.area.className="dhxtreeview_area",this.cont.appendChild(this.area),this.cont.onclick=function(a){a=a||event,h.callEvent("_onTreeClick",[a,{stop:!1}])},this.cont.ondblclick=function(l){var a=(l=l||event).target||l.srcElement;null!=a.className.match(/dhxtreeview_item_label/)&&h._openCloseItem(a.parentNode.parentNode._itemId,!0)},this.items={},this._addItem=function(u,n,r,l){var s=null!=n?this.items[n].level+1:1,m=document.createElement("DIV");if(m.className="dhxtreeview_item",m.innerHTML="<div class='dhxtreeview_item_text'></div>",null!=l&&l<0&&(r.index=0),null==n)var o=this.area;else{0==this.items[n].kids&&this._initKidsNode(n),this.items[n].kids_request=!1;o=this.items[n].item.lastChild.firstChild}null!=l&&null!=o.childNodes[l]?o.insertBefore(m,o.childNodes[l]):o.appendChild(m),o=null,m._itemId=u,m._treeId=this.conf.tree_id,1==window.dhx4.isIE&&(m.onselectstart=function(v){(v=v||event).preventDefault?v.preventDefault():v.returnValue=!1}),this.items[u]={id:u,pId:n,treeId:this.conf.tree_id,text:r.text,item:m,level:s,kids:!1,opened:window.dhx4.s2b(r.open),userdata:window.dhx4._copyObj(r.userdata||{}),half_opened:!1},this.callEvent("_onItemRendered",[u,r]),m.firstChild.innerHTML=this._getItemHtml(u),m=null,1==window.dhx4.s2b(r.select)&&this._setSelected(u,!0),this.callEvent("_onItemInited",[u,r])},this.addItem=function(n,l,m,a){null==this.items[n]&&(null!=m&&null==this.items[m]&&(m=null),this._addItem(n,m,{text:l},a),this._callPublicEvent("onAddItem",[n,l,m,a]))},this._removeSingleItem=function(m){for(var l in 1==window.dhx4.isIE&&(this.items[m].item.onselectstart=null),this.items[m].item.parentNode.removeChild(this.items[m].item),this.items[m])this.items[m][l]=null,delete this.items[m][l];delete this.items[m],1==this.conf.selected[m]&&delete this.conf.selected[m]},this._removeItem=function(m){for(var l in this.items)this.items[l].pId==m&&this._removeItem(l);null!=m&&this._removeSingleItem(m)},this.deleteItem=function(a){null!=this.items[a]&&this._callPublicEvent("onBeforeDeleteItem",[a])&&(this._removeItem(a),this._callPublicEvent("onDeleteItem",[a]))},this.clearAll=function(){this._removeItem(null),1!=this.conf.unloading&&this._fixAreaWidth()},this._initKidsNode=function(l){var a;null==this.items[l].item.lastChild.className.match(/dhxtreeview_kids_cont/)&&((a=document.createElement("DIV")).className="dhxtreeview_kids_cont",a.innerHTML="<div style='position:relative;'></div>",a.style.opacity="1",1!=this.items[l].opened&&(0!=this.conf.transProp?(a.style.height="0px",a.style.opacity="0",a.firstChild.style.display="none"):a.style.display="none"),this.items[l].item.appendChild(a)),this.items[l].kids=!0,this._iconUpdate(l),this._signUpdate(l),a=null},this._clearKidsNode=function(a){null!=this.items[a].item.lastChild.className.match(/dhxtreeview_kids_cont/)&&this.items[a].item.removeChild(this.items[a].item.lastChild),this.items[a].kids=!1,this._iconUpdate(a),this._signUpdate(a)},this.openItem=function(l,a){1!=this.items[l].opened&&(void 0===a&&(a=!0),this._openCloseItem(l,a))},this.closeItem=function(l,a){1==this.items[l].opened&&(void 0===a&&(a=!0),this._openCloseItem(l,a))},this._openCloseItem=function(l,a){if(!0===this.callEvent("_onBeforeOpen",[l]))return(1==this.items[l].kids||1==this.items[l].kids_request)&&(1==this.items[l].half_opened?(this.items[l].half_opened=!1,void this._signUpdate(l)):void(a&&0!=this.conf.transProp?(this.items[l].transEv||(this.items[l].item.lastChild.addEventListener(this.conf.transEv,this._doOnTrEnd),this.items[l].transEv=!0),1==this.items[l].opened?(this.items[l].transMode="close",this.items[l].item.lastChild.style.overflow="hidden",this.items[l].item.lastChild.style.height=this.items[l].item.lastChild.childNodes[0].offsetHeight+"px",window.setTimeout(function(){h.items[l].item.lastChild.style[h.conf.transProp]=h.conf.transValueHeight,h.items[l].item.lastChild.style.height="0px",h.items[l].item.lastChild.style.opacity="0",h.items[l].opened=!1,h._iconUpdate(l),h._signUpdate(l)},50)):(this.items[l].transMode="open",this.items[l].item.lastChild.style[this.conf.transProp]=this.conf.transValueHeight,this.items[l].item.lastChild.childNodes[0].style.display="",this.items[l].item.lastChild.style.overflow="hidden",this.items[l].item.lastChild.style.height=this.items[l].item.lastChild.childNodes[0].offsetHeight+"px",this.items[l].item.lastChild.style.opacity="1",this.items[l].opened=!0,this._iconUpdate(l),this._signUpdate(l))):(this.items[l].opened=!this.items[l].opened,this.items[l].item.lastChild.style.display=1==this.items[l].opened?"":"none",this.items[l].item.lastChild.childNodes[0].style.display=this.items[l].item.lastChild.style.display,this.items[l].item.lastChild.style.height=1==this.items[l].opened?"":"0px",this.items[l].item.lastChild.style.opacity=1==this.items[l].opened?1:0,this._iconUpdate(l),this._signUpdate(l),this._fixAreaWidth())))},this._doOnTrEnd=function(){var a=this.parentNode._itemId;h.items[a].item.lastChild.style[h.conf.transProp]="","close"==h.items[a].transMode?h.items[a].item.lastChild.childNodes[0].style.display="none":(h.items[a].item.lastChild.style.height="",h.items[a].item.lastChild.style.overflow=""),h._fixAreaWidth()},this.setSizes=function(){1==this.conf.adjust_base&&(this.base.style.width=this.base.parentNode.clientWidth-2+"px",this.base.style.height=this.base.parentNode.clientHeight-2+"px"),this.cont.style.left=this.conf.ofs.w+"px",this.cont.style.top=this.conf.ofs.h+"px",this.cont.style.width=this.base.clientWidth-2*this.conf.ofs.w+"px",this.cont.style.height=this.base.clientHeight-2*this.conf.ofs.h+"px",this._fixAreaWidth()},this._fixAreaWidth=function(a){this.area.style.width="100%",this.cont.scrollWidth!=this.cont.clientWidth&&(this.area.style.width=this.cont.scrollWidth+1+"px"),1==window.dhx4.isIE7&&!1!==a&&window.setTimeout(function(){h._fixAreaWidth(!1)},1)},this.setSizes(),dhx4._eventable(this);var e=window.dhx4.transDetect();for(var c in this.conf.transProp=e.transProp,this.conf.transEv=e.transEv,this.conf.transValueHeight="height 0.15s",e=null,1==this.conf.is_mac&&(this._macOnKey=function(a){((window.dhx4.isKHTML||window.dhx4.isChrome||window.dhx4.isOpera)&&(91==a.keyCode||93==a.keyCode)||window.dhx4.isFF&&224==a.keyCode)&&(h.conf.mac_cmd_key="keydown"==a.type)},window.addEventListener("keydown",this._macOnKey,!1),window.addEventListener("keyup",this._macOnKey,!1)),this.modules)null!=this.modules[c].init&&this[this.modules[c].init](g);return this.unload=function(){for(var l in this.conf.unloading=!0,this.cont.onclick=null,this.cont.ondblclick=null,this.clearAll(),1==this.conf.is_mac&&(window.removeEventListener("keydown",this._macOnKey,!1),window.removeEventListener("keyup",this._macOnKey,!1)),this.modules)null!=this.modules[l].unload&&this[this.modules[l].unload]();for(var l in this.area.parentNode.removeChild(this.area),this.area=null,this.cont.parentNode.removeChild(this.cont),this.cont=null,this.base.className=String(this.base.className).replace(new RegExp("s{0,}dhxtreeview_"+(this.conf.skin||"")),""),window.dhx4._eventable(this,"clear"),this)this[l]=null;h=null},null==g.items&&null==g.json&&null==g.xml||this.loadStruct(g.items||g.json||g.xml,g.onload),this}var globalActiveDHTMLGridObject;function dhtmlxArray(a){return dhtmlx.extend(a||new Array,dhtmlxArray._master)}function dhtmlXGridObject(id){if(dhtmlxEvent.initTouch&&dhtmlxEvent.initTouch(),_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}id?"object"==typeof id?(this.entBox=id,this.entBox.id||(this.entBox.id="cgrid2_"+this.uid())):this.entBox=document.getElementById(id):(this.entBox=document.createElement("DIV"),this.entBox.id="cgrid2_"+this.uid()),this.entBox.innerHTML="",dhx4._eventable(this);var self=this;this._RaSeCol=[],this._wcorr=0,this.fontWidth=7,this.cell=null,this.row=null,this.iconURL="",this.editor=null,this._f2kE=!0,this._dclE=!0,this.combos=new Array(0),this.defVal=new Array(0),this.rowsAr={},this.rowsBuffer=dhtmlxArray(),this.rowsCol=dhtmlxArray(),this._data_cache={},this._ecache={},this._ud_enabled=!0,this.xmlLoader=this.doLoadDetails,this._maskArr=[],this.selectedRows=dhtmlxArray(),this.UserData={},this._sizeFix=this._borderFix=0,this.entBox.className+=" gridbox",this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?this.entBox.style.width||window.getComputedStyle(this.entBox,null).width:this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0)||"100%",this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?this.entBox.style.height||window.getComputedStyle(this.entBox,null).height:this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0)||"100%",this.entBox.style.cursor="default",this.entBox.onselectstart=function(){return!1};var t_creator=function(name){var t=document.createElement("TABLE");return t.cellSpacing=t.cellPadding=0,t.style.cssText="width:100%;table-layout:fixed;",t.className=name.substr(2),t};return this.obj=t_creator("c_obj"),this.hdr=t_creator("c_hdr"),this.hdr.style.marginRight="20px",this.hdr.style.paddingRight="20px",this.objBox=document.createElement("DIV"),this.objBox.style.width="100%",this.objBox.style.overflow="auto",this.objBox.appendChild(this.obj),this.objBox.className="objbox",dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),this.hdrBox=document.createElement("DIV"),this.hdrBox.style.width="100%",this.hdrBox.style.height="25px",this.hdrBox.style.overflow="hidden",this.hdrBox.className="xhdr",this.preloadImagesAr=new Array(0),this.sortImg=document.createElement("DIV"),this.sortImg.style.display="none",this.hdrBox.appendChild(this.sortImg),this.hdrBox.appendChild(this.hdr),this.hdrBox.style.position="relative",this.entBox.appendChild(this.hdrBox),this.entBox.appendChild(this.objBox),this.entBox.grid=this,this.objBox.grid=this,this.hdrBox.grid=this,this.obj.grid=this,this.hdr.grid=this,this.cellWidthPX=[],this.cellWidthPC=[],this.cellWidthType=this.entBox.cellwidthtype||"px",this.delim=this.entBox.delimiter||",",this._csvDelim=",",this.hdrLabels=[],this.columnIds=[],this.columnColor=[],this._hrrar=[],this.cellType=dhtmlxArray(),this.cellAlign=[],this.initCellWidth=[],this.fldSort=[],this._srdh=_isIE&&"BackCompat"!=document.compatMode?22:20,this.imgURL=window.dhx_globalImgPath||"",this.isActive=!1,this.isEditable=!0,this.useImagesInHeader=!1,this.pagingOn=!1,this.rowsBufferOutSize=0,dhtmlxEvent(window,"unload",function(){try{self.destructor&&self.destructor()}catch(e){}}),this.setSkin=function(name){this._srdh=window.dhx4.readFromCss("dhxgrid_rh_"+name)+4,this.skin_name=name,this._imgURL&&this.setImagePath(this._imgURL);var classname=this.entBox.className.split(" gridbox")[0];switch(this.entBox.className=classname+" gridbox gridbox_"+name+(_isIE?" isIE":" isModern"),this.skin_h_correction=0,this.enableAlterCss("ev_"+name,"odd_"+name,this.isTreeGrid()),this._fixAlterCss(),name){case"dhx_terrace":case"material":this._srdh=33,this.forceDivInHeader=!0;break;case"dhx_web":case"material":this.forceDivInHeader=!0,this._srdh=31;break;case"dhx_skyblue":this.forceDivInHeader=!0}if(_isIE&&this.hdr){var d=this.hdr.parentNode;d.removeChild(this.hdr),d.appendChild(this.hdr)}this.setSizes()},_isIE&&this.preventIECaching(!0),window.dhtmlDragAndDropObject&&(this.dragger=new dhtmlDragAndDropObject),this._doOnScroll=function(e,mode){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]),this.doOnScroll(e,mode)},this.doOnScroll=function(e,mode){this.hdrBox.scrollLeft=this.objBox.scrollLeft,this.ftr&&(this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft),mode||this._srnd&&(this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dLoadTimer=window.setTimeout(function(){self._update_srnd_view&&self._update_srnd_view()},100))},this.attachToObject=function(obj){obj.appendChild(this.globalBox?this.globalBox:this.entBox),this.setSizes()},this.init=function(fl){if(this.isTreeGrid()&&!this._h2&&(this._h2=this._createHierarchy(),this._fake&&!this._realfake&&(this._fake._h2=this._h2),this._tgc={imgURL:null}),this._hstyles){if(this.skin_name||this.setSkin(window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxgrid")||"material"),this.editStop(),this.lastClicked=null,this.resized=null,this.fldSorted=this.r_fldSorted=null,this.cellWidthPX=[],this.cellWidthPC=[],0<this.hdr.rows.length){var temp=this.xmlFileUrl;this.clearAll(!0),this.xmlFileUrl=temp}for(var hdrRow=this.hdr.insertRow(0),i=0;i<this.hdrLabels.length;i++)hdrRow.appendChild(document.createElement("TH")),hdrRow.childNodes[i]._cellIndex=i,hdrRow.childNodes[i].style.height="0px";_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined?hdrRow.style.position="absolute":hdrRow.style.height="auto",(hdrRow=this.hdr.insertRow(_isKHTML?2:1))._childIndexes=new Array;var col_ex=0;for(i=0;i<this.hdrLabels.length;i++)hdrRow._childIndexes[i]=i-col_ex,this.hdrLabels[i]!=this.splitSign||0==i?(hdrRow.insertCell(i-col_ex),hdrRow.childNodes[i-col_ex]._cellIndex=i,hdrRow.childNodes[i-col_ex]._cellIndexS=i,this.setColumnLabel(i,this.hdrLabels[i])):(_isKHTML&&hdrRow.insertCell(i-col_ex),hdrRow.cells[i-col_ex-1].colSpan=(hdrRow.cells[i-col_ex-1].colSpan||1)+1,hdrRow.childNodes[i-col_ex-1]._cellIndex++,col_ex++,hdrRow._childIndexes[i]=i-col_ex);0==col_ex&&(hdrRow._childIndexes=null),this._cCount=this.hdrLabels.length,_isIE&&window.setTimeout(function(){self.setSizes&&self.setSizes()},1),this.obj.firstChild||this.obj.appendChild(document.createElement("TBODY"));var tar=this.obj.firstChild;if(!tar.firstChild){tar.appendChild(document.createElement("TR")),tar=tar.firstChild,_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined?tar.style.position="absolute":tar.style.height="auto";for(i=0;i<this.hdrLabels.length;i++)tar.appendChild(document.createElement("TH")),tar.childNodes[i].style.height="0px"}this._c_order=null,1!=this.multiLine&&(this.obj.className+=" row20px"),this.sortImg.style.position="absolute",this.sortImg.style.display="none",this.sortImg.className="dhxgrid_sort_desc",this.sortImg.defLeft=0,this.noHeader?this.hdrBox.style.display="none":this.noHeader=!1,this._ivizcol&&this.setColHidden(),this.attachHeader(),this.attachHeader(0,0,"_aFoot"),this.setSizes(),fl&&this.parseXML(),this.obj.scrollTop=0,this.dragAndDropOff&&this.dragger.addDragLanding(this.entBox,this),this._initDrF&&this._initD(),dhx4.callEvent("onGridCreated",[this])}},this.setColumnSizes=function(gridWidth){for(var summ=0,fcols=[],fix=0,i=0;i<this._cCount;i++)if("*"!=this.initCellWidth[i]||this._hrrar[i]){if("%"==this.cellWidthType){void 0===this.cellWidthPC[i]&&(this.cellWidthPC[i]=this.initCellWidth[i]);var cwidth=gridWidth*this.cellWidthPC[i]/100||0;.5<fix&&(cwidth++,fix--);fix=fix+cwidth-(this.cellWidthPX[i]=Math.floor(cwidth))}else void 0===this.cellWidthPX[i]&&(this.cellWidthPX[i]=this.initCellWidth[i]);this._hrrar[i]||(summ+=1*this.cellWidthPX[i])}else this._awdth=!1,fcols.push(i);if(fcols.length){var ms=Math.floor((gridWidth-summ)/fcols.length);ms<0&&(ms=1);for(i=0;i<fcols.length;i++){var next=Math.max(this._drsclmW&&this._drsclmW[fcols[i]]||0,ms);summ+=this.cellWidthPX[fcols[i]]=next}if(summ<gridWidth){var last=fcols[fcols.length-1];this.cellWidthPX[last]=this.cellWidthPX[last]+(gridWidth-summ),summ=gridWidth}this._setAutoResize()}return this.obj.style.width=summ+"px",this.hdr.style.width=summ+"px",this.ftr&&(this.ftr.style.width=summ+"px"),this.chngCellWidth(),summ},this.setSizes=function(){if(this.hdr.rows[0]){var quirks=this.quirks=_isIE&&"BackCompat"==document.compatMode,outerBorder=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes)if(this.globalBox){if(!this.globalBox.clientWidth)return;var ow=this.globalBox.clientWidth,splitOuterBorder=(this.globalBox.offsetWidth-ow)/2;if(this._delta_x&&!this._realfake){this.globalBox.style.width=this._delta_x;var owu=this.globalBox.clientWidth;this.entBox.style.width=Math.max(0,owu+(quirks?2*splitOuterBorder:0)-this._fake.entBox.clientWidth)+"px",owu!=this._lastTimeSplitWidth&&(this._fake._correctSplit(this._fake.entBox.clientWidth),this._lastTimeSplitWidth=owu)}this._delta_y&&!this._realfake&&(this.globalBox.style.height=this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(quirks?2*splitOuterBorder:0)+"px")}else this._delta_x&&(this.entBox.parentNode&&"TD"==this.entBox.parentNode.tagName?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-2*outerBorder+"px"):this.entBox.style.width=this._delta_x),this._delta_y&&(this.entBox.style.height=this._delta_y);if(window.clearTimeout(this._sizeTime),this.entBox.offsetWidth||this.globalBox&&this.globalBox.offsetWidth){var border_x=this._wthB||!this.entBox.cmp&&!this._delta_x||0!=(this.skin_name||"").indexOf("dhx")||quirks?0:2,border_y=this._wthB||!this.entBox.cmp&&!this._delta_y||0!=(this.skin_name||"").indexOf("dhx")||quirks?0:2;this._sizeFix&&(border_x-=this._sizeFix,border_y-=this._sizeFix);var isVScroll=!this.parentGrid&&this.objBox.scrollHeight>this.objBox.offsetHeight,scrfix=dhtmlx.$customScroll?0:18,gridWidth=this.entBox.clientWidth-(this.skin_h_correction||0)*(quirks?0:1)-border_x,gridWidthActive=this.entBox.clientWidth-(this.skin_h_correction||0)-border_x,gridHeight=this.entBox.clientHeight-border_y,summ=this.setColumnSizes(gridWidthActive-(isVScroll?scrfix:0)-(this._correction_x||0)),isHScroll=!this.parentGrid&&(this.objBox.scrollWidth>this.objBox.offsetWidth||"scroll"==this.objBox.style.overflowX),headerHeight=this.hdr.clientHeight,footerHeight=this.ftr?this.ftr.clientHeight:0,newWidth=gridWidth,newHeight=gridHeight-headerHeight-footerHeight;if(this._awdth&&this._awdth[0]&&99999==this._awdth[1]&&(isHScroll=0),this._ahgr&&(newHeight=this._ahgrMA?this.entBox.parentNode.clientHeight-headerHeight-footerHeight:this.obj.offsetHeight+(isHScroll?scrfix:0)+(this._correction_y||0),this._ahgrM&&(newHeight=this._ahgrF?Math.min(this._ahgrM,newHeight+headerHeight+footerHeight)-headerHeight-footerHeight:Math.min(this._ahgrM,newHeight)),isVScroll&&newHeight>=this.obj.scrollHeight+(isHScroll?scrfix:0)&&(isVScroll=!1,this.setColumnSizes(gridWidthActive-(this._correction_x||0)))),this._awdth&&this._awdth[0]){"%"==this.cellWidthType&&(this.cellWidthType="px"),this._fake&&(summ+=this._fake.entBox.clientWidth);newWidth=Math.min(Math.max(summ+(isVScroll?scrfix:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0);this.objBox.style.overflowX=!isVScroll&&this.objBox.scrollWidth<=newWidth?"hidden":"auto",this._fake&&(newWidth-=this._fake.entBox.clientWidth)}newHeight=Math.max(0,newHeight),this._ff_size_delta=.1==this._ff_size_delta?.2:.1,_isFF||(this._ff_size_delta=0),this.dontSetSizes||(this.entBox.style.width=Math.max(0,newWidth+(quirks?2:0)*outerBorder+this._ff_size_delta)+"px",this.entBox.style.height=newHeight+(quirks?2:0)*outerBorder+headerHeight+footerHeight+"px"),this.objBox.style.height=newHeight+(quirks&&!isVScroll?2:0)*outerBorder+"px",this.hdrBox.style.height=headerHeight+"px",newHeight!=gridHeight&&this.doOnScroll(0,!this._srnd);var ext=this["setSizes_"+this.skin_name];ext&&ext.call(this),this.setSortImgPos(),headerHeight!=this.hdr.clientHeight&&this._ahgr&&this.setSizes(),this.callEvent("onSetSizes",[])}else this._sizeTime=window.setTimeout(function(){self.setSizes&&self.setSizes()},250)}},this.chngCellWidth=function(){_isOpera&&this.ftr&&(this.ftr.width=this.objBox.scrollWidth+"px");for(var l=this._cCount,i=0;i<l;i++)this.hdr.rows[0].cells[i].style.width=this.cellWidthPX[i]+"px",this.obj.rows[0].childNodes[i].style.width=this.cellWidthPX[i]+"px",this.ftr&&(this.ftr.rows[0].cells[i].style.width=this.cellWidthPX[i]+"px")},this.setDelimiter=function(delim){this.delim=delim},this.setInitWidthsP=function(wp){this.cellWidthType="%",this.initCellWidth=wp.split(this.delim.replace(/px/gi,"")),arguments[1]||this._setAutoResize()},this._setAutoResize=function(){if(!this._realfake){window;var self=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(self._resize_timer),self._setAutoResize&&(self._resize_timer=window.setTimeout(function(){self.setSizes&&self.setSizes(),self._fake&&self._fake._correctSplit()},100))}),this._setAutoResize=function(){}}},this.setInitWidths=function(wp){if(this.cellWidthType="px",this.initCellWidth=wp.split(this.delim),_isFF)for(var i=0;i<this.initCellWidth.length;i++)"*"!=this.initCellWidth[i]&&(this.initCellWidth[i]=parseInt(this.initCellWidth[i]))},this.enableMultiline=function(state){this.multiLine=dhx4.s2b(state)},this.enableMultiselect=function(state){this.selMultiRows=dhx4.s2b(state)},this.setImagePath=function(path){path=path.replace(/imgs\/dhxgrid_[a-z]*\/$/,"imgs/"),this._imgURL=path,this.imgURL=path+"dhxgrid_"+(this.skin_name||"dhx_skyblue").replace("dhx_","")+"/",this.iconTree=this.imgURL+"tree/"},this.setImagesPath=this.setImagePath,this.setIconPath=function(path){this.iconURL=path},this.setIconsPath=this.setIconPath,this.changeCursorState=function(ev){var el=ev.target||ev.srcElement;if("TD"!=el.tagName&&(el=this.getFirstParentOfType(el,"TD")),el){if("TD"==el.tagName&&this._drsclmn&&!this._drsclmn[el._cellIndex])return el.style.cursor="default";var check=(ev.layerX||0)+(_isIE||"DIV"!=ev.target.tagName?0:el.offsetLeft);el.offsetWidth-(ev.offsetX||-1*(parseInt(this.getPosition(el,this.hdrBox))-check))<(_isOpera?20:10)?el.style.cursor="E-resize":el.style.cursor="default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this.startColResize=function(ev){this.resized&&this.stopColResize(),this.resized=null;var el=ev.target||ev.srcElement;"TD"!=el.tagName&&(el=this.getFirstParentOfType(el,"TD"));var x=ev.clientX,tabW=this.hdr.offsetWidth,startW=parseInt(el.offsetWidth);if("TD"==el.tagName&&"default"!=el.style.cursor){if(this._drsclmn&&!this._drsclmn[el._cellIndex])return;self._old_d_mm=document.body.onmousemove,self._old_d_mu=document.body.onmouseup,document.body.onmousemove=function(e){self&&self.doColResize(e||window.event,el,startW,x,tabW)},document.body.onmouseup=function(){self&&self.stopColResize()}}},this.stopColResize=function(){document.body.onmousemove=self._old_d_mm||"",document.body.onmouseup=self._old_d_mu||"",this.setSizes(),this.doOnScroll(0,1),this.callEvent("onResizeEnd",[this])},this.doColResize=function(ev,el,startW,x,tabW){el.style.cursor="E-resize",this.resized=el;var fcolW=startW+(ev.clientX-x);ev.clientX;if(this.callEvent("onResize",[el._cellIndex,fcolW,this])){_isIE&&(this.objBox.scrollLeft=this.hdrBox.scrollLeft);var result=!1;if(1<el.colSpan){for(var a_sizes=new Array,i=0;i<el.colSpan;i++)a_sizes[i]=Math.round(fcolW*this.hdr.rows[0].childNodes[el._cellIndexS+i].offsetWidth/el.offsetWidth);for(i=0;i<el.colSpan;i++)result=this._setColumnSizeR(el._cellIndexS+1*i,a_sizes[i])}else result=this._setColumnSizeR(el._cellIndex,fcolW);return this.doOnScroll(0,1),this.setSizes(),this._fake&&this._awdth&&this._fake._correctSplit(),result}},this._setColumnSizeR=function(ind,fcolW){if(!(fcolW>(this._drsclmW&&!this._notresize&&this._drsclmW[ind]||10)))return!1;if(this.obj.rows[0].childNodes[ind].style.width=fcolW+"px",this.hdr.rows[0].childNodes[ind].style.width=fcolW+"px",this.ftr&&(this.ftr.rows[0].childNodes[ind].style.width=fcolW+"px"),"px"==this.cellWidthType)this.cellWidthPX[ind]=fcolW;else{var gridWidth=parseInt(this.entBox.offsetWidth);this.objBox.scrollHeight>this.objBox.offsetHeight&&(gridWidth-=17);var pcWidth=Math.round(fcolW/gridWidth*100);this.cellWidthPC[ind]=pcWidth}"none"!=this.sortImg.style.display&&this.setSortImgPos()},this.setSortImgState=function(state,ind,order,row){if(order=(order||"asc").toLowerCase(),!dhx4.s2b(state))return this.sortImg.style.display="none",this.r_fldSorted&&(this.r_fldSorted.className=""),void(this.fldSorted=this.r_fldSorted=null);this.sortImg.className="asc"==order?"dhxgrid_sort_asc":"dhxgrid_sort_desc",this.sortImg.style.display="",this.fldSorted=this.hdr.rows[0].childNodes[ind];var r=this.hdr.rows[row||1];if(r){for(var i=0;i<r.childNodes.length;i++)if(r.childNodes[i]._cellIndexS==ind)return this.r_fldSorted=r.childNodes[i],this.setSortImgPos();return this.setSortImgState(state,ind,order,(row||1)+1)}},this.setSortImgPos=function(ind,mode,hRowInd,el){if(!this._hrrar||!this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:ind]){if(this.ar_fldSorted&&(this.ar_fldSorted.className=""),!el)if(ind)el=this.hdr.rows[hRowInd||0].cells[ind];else var el=this.r_fldSorted;if(null!=el){var pos=this.getPosition(el,this.hdrBox),wdth=el.offsetWidth;(this.ar_fldSorted=el).className=this.sortImg.className+"_col",this.sortImg.style.left=Number(pos[0]+wdth-13)+"px",this.sortImg.defLeft=parseInt(this.sortImg.style.left),this.sortImg.style.top=Number(pos[1]+5)+"px",this.useImagesInHeader||mode||(this.sortImg.style.display="inline"),this.sortImg.style.left=this.sortImg.defLeft+"px"}}},this.setActive=function(fl){if(0==arguments.length)fl=!0;1==fl?(globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject!=this&&(globalActiveDHTMLGridObject.editStop(),globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])),(globalActiveDHTMLGridObject=this).isActive=!0):(this.isActive=!1,this.callEvent("onBlur",[this]))},this._doClick=function(ev){var selMethod=0,el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if(el&&el.parentNode&&el.parentNode.idd){if(this.markedCells){var markMethod=0;return(ev.shiftKey||ev.metaKey)&&(markMethod=1),ev.ctrlKey&&(markMethod=2),this.doMark(el,markMethod),!0}return 0!=this.selMultiRows&&(ev.shiftKey&&null!=this.row&&this.selectedRows.length&&(selMethod=1),(ev.ctrlKey||ev.metaKey)&&(selMethod=2)),this.doClick(el,!0,selMethod,!1)}},this._doContClick=function(ev){var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if(!el||void 0===el.parentNode.idd)return this.callEvent("onEmptyClick",[ev]),!0;if(2==ev.button||_isMacOS&&ev.ctrlKey){if(!this.callEvent("onRightClick",[el.parentNode.idd,el._cellIndex,ev])){var z=function(e){return!((e||event).cancelBubble=!0)};return((ev.srcElement||ev.target).oncontextmenu=z)(ev)}if(this._ctmndx){if(!this.callEvent("onBeforeContextMenu",[el.parentNode.idd,el._cellIndex,this]))return!0;if(_isIE&&(ev.srcElement.oncontextmenu=function(){return!(event.cancelBubble=!0)}),this._ctmndx.showContextMenu){var dEl0=window.document.documentElement,dEl1=window.document.body,corrector=new Array(dEl0.scrollLeft||dEl1.scrollLeft,dEl0.scrollTop||dEl1.scrollTop);if(_isIE)var x=ev.clientX+corrector[0],y=ev.clientY+corrector[1];else x=ev.pageX,y=ev.pageY;this._ctmndx.showContextMenu(x-1,y-1),this.contextID=this._ctmndx.contextMenuZoneId=el.parentNode.idd+"_"+el._cellIndex,this._ctmndx._skip_hide=!0}else el.contextMenuId=el.parentNode.idd+"_"+el._cellIndex,el.contextMenu=this._ctmndx,el.a=this._ctmndx._contextStart,el.a(el,ev),el.a=null;return!(ev.cancelBubble=!0)}}else this._ctmndx&&(this._ctmndx.hideContextMenu?this._ctmndx.hideContextMenu():this._ctmndx._contextEnd());return!0},this.doClick=function(el,fl,selMethod,show){this.selMultiRows||(selMethod=0);var psid=this.row?this.row.idd:0;if(this.setActive(!0),selMethod||(selMethod=0),null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")),"TD"==el.tagName){if(this.checkEvent("onSelectStateChanged"))var initial=this.getSelectedId();var prow=this.row;if(1==selMethod){var elRowIndex=this.rowsCol._dhx_find(el.parentNode),lcRowIndex=this.rowsCol._dhx_find(this.lastClicked);if(lcRowIndex<elRowIndex)var strt=lcRowIndex,end=elRowIndex;else strt=elRowIndex,end=lcRowIndex;for(var i=0;i<this.rowsCol.length;i++)if(strt<=i&&i<=end){if(!this.rowsCol[i]||this.rowsCol[i]._sRow)return this.clearSelection(),this.doClick(el,fl,0,show);if(!this.rowsCol[i].idd)continue;-1==this.rowsCol[i].className.indexOf("rowselected")&&this.callEvent("onBeforeSelect",[this.rowsCol[i].idd,psid,el._cellIndex])&&(this.rowsCol[i].className+=" rowselected",this.selectedRows[this.selectedRows.length]=this.rowsCol[i])}}else if(2==selMethod&&-1!=el.parentNode.className.indexOf("rowselected")){el.parentNode.className=el.parentNode.className.replace(/rowselected/g,""),this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(el.parentNode));var skipRowSelection=!0;show=!1}if(this.editStop(),void 0===el.parentNode.idd)return!0;if(skipRowSelection||el.parentNode._sRow||(this.callEvent("onBeforeSelect",[el.parentNode.idd,psid,el._cellIndex])?this.getSelectedRowId()!=el.parentNode.idd?(0==selMethod&&this.clearSelection(),prow==(this.cell=el).parentNode&&this._chRRS&&(fl=!1),this.row=el.parentNode,this.row.className+=" rowselected",-1==this.selectedRows._dhx_find(this.row)&&(this.selectedRows[this.selectedRows.length]=this.row)):(this.cell=el,this.row=el.parentNode):fl=!1),this.cell&&-1!=this.cell.parentNode.className.indexOf("rowselected")&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected"),1!=selMethod&&!this.row)return;this.lastClicked=el.parentNode;var rid=this.row.idd,cid=this.cell;if(fl&&void 0!==rid&&cid&&!skipRowSelection?self.onRowSelectTime=setTimeout(function(){self.callEvent&&self.callEvent("onRowSelect",[rid,cid._cellIndex])},100):this.callEvent("onRowSelectRSOnly",[rid]),this.checkEvent("onSelectStateChanged")){var afinal=this.getSelectedId();initial!=afinal&&this.callEvent("onSelectStateChanged",[afinal,initial])}if(skipRowSelection)return!1}!(this.isActive=!0)!==show&&this.cell&&this.cell.parentNode.idd&&this.moveToVisible(this.cell)},this.selectAll=function(){this.clearSelection();var coll=this.rowsBuffer;this.pagingOn&&(coll=this.rowsCol);for(var i=0;i<coll.length;i++)this.render_row(i).className+=" rowselected";this.selectedRows=dhtmlxArray([].concat(coll)),this.selectedRows.length&&(this.row=this.selectedRows[0],this.cell=this.row.cells[0]),this._fake&&!this._realfake&&this._fake.selectAll()},this.selectCell=function(r,cInd,fl,preserve,edit,show){if(fl||(fl=!1),"object"!=typeof r&&(r=this.render_row(r)),!r||-1==r)return null;if(r._childIndexes)var c=r.childNodes[r._childIndexes[cInd]];else c=r.childNodes[cInd];c||(c=r.childNodes[0]),this.markedCells?this.doMark(c,preserve?2:0):preserve?this.doClick(c,fl,3,show):this.doClick(c,fl,0,show),edit&&this.editCell()},this.moveToVisible=function(cell_obj,onlyVScroll){if(this.pagingOn){var newPage=Math.floor(this.getRowIndex(cell_obj.parentNode.idd)/this.rowsBufferOutSize)+1;newPage!=this.currentPage&&this.changePage(newPage)}try{if(cell_obj.offsetHeight){var distance=cell_obj.offsetLeft+cell_obj.offsetWidth+20,scrollLeft=0;distance>this.objBox.offsetWidth+this.objBox.scrollLeft?cell_obj.offsetLeft>this.objBox.scrollLeft&&(scrollLeft=cell_obj.offsetLeft-(this.objBox.offsetWidth-cell_obj.offsetWidth)+5):cell_obj.offsetLeft<this.objBox.scrollLeft&&(distance-=2*cell_obj.offsetWidth/3)<this.objBox.scrollLeft&&(scrollLeft=cell_obj.offsetLeft-5),scrollLeft&&!onlyVScroll&&(this.objBox.scrollLeft=scrollLeft)}if(cell_obj.offsetHeight)distance=cell_obj.offsetTop;else{var mask=this._realfake?this._fake.rowsAr[cell_obj.parentNode.idd]:cell_obj.parentNode;distance=this.rowsBuffer._dhx_find(mask)*this._srdh}if(distance+cell_obj.offsetHeight+38>this.objBox.offsetHeight+this.objBox.scrollTop)var scrollTop=distance;else if(distance<this.objBox.scrollTop)scrollTop=distance-5;scrollTop&&(this.objBox.scrollTop=scrollTop)}catch(er){}},this.editCell=function(){if(!this.editor||this.cell!=this.editor.cell){if(this.editStop(),1!=this.isEditable||!this.cell)return!1;var c=this.cell;if(c.parentNode._locked)return!1;if(this.editor=this.cells4(c),null!=this.editor){if(this.editor.isDisabled())return this.editor=null,!1;0!=this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])&&this.editor.edit?(this._Opera_stop=(new Date).valueOf(),c.className+=" editable",this.editor.edit(),this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])):this.editor=null}}},this.editStop=function(mode){if(_isOpera&&this._Opera_stop){if(1*this._Opera_stop+50>(new Date).valueOf())return;this._Opera_stop=null}if(this.editor&&null!=this.editor){if(this.editor.cell.className=this.editor.cell.className.replace("editable",""),mode){var t=this.editor.val;return this.editor.detach(),this.editor.setValue(t),this.editor=null,void this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,t])}this.editor.detach()&&(this.cell.wasChanged=!0);var g=this.editor;if(null==g)return;this.editor=null;var z=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,g.getValue(),g.val]);"string"==typeof z||"number"==typeof z?g[g.setImage?"setLabel":"setValue"](z):z||g[g.setImage?"setLabel":"setValue"](g.val),this._ahgr&&this.multiLine&&this.setSizes()}},this._nextRowCell=function(row,dir,pos){return(row=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(row),dir))?row.childNodes[row._childIndexes?row._childIndexes[pos]:pos]:null},this._getNextCell=function(acell,dir,i){var arow=(acell=acell||this.cell).parentNode;this._tabOrder?void 0!==(i=this._tabOrder[acell._cellIndex])&&(acell=i<0?this._nextRowCell(arow,dir,Math.abs(i)-1):arow.childNodes[i]):0<=(i=acell._cellIndex+dir)&&i<this._cCount?(arow._childIndexes&&(i=arow._childIndexes[acell._cellIndex]+dir),acell=arow.childNodes[i]):acell=this._nextRowCell(arow,dir,1==dir?0:this._cCount-1);return acell?"none"==acell.style.display||this.smartTabOrder&&this.cells(acell.parentNode.idd,acell._cellIndex).isDisabled()?this._getNextCell(acell,dir):acell:(1==dir&&this.tabEnd&&(this.tabEnd.focus(),this.tabEnd.focus(),this.setActive(!1)),-1==dir&&this.tabStart&&(this.tabStart.focus(),this.tabStart.focus(),this.setActive(!1)),null)},this._nextRow=function(ind,dir){var r=this.render_row(ind+dir);return r&&-1!=r?r&&"none"==r.style.display?this._nextRow(ind+dir,dir):r:null},this.scrollPage=function(dir){if(this.rowsBuffer.length){var master=this._realfake?this._fake:this,new_ind=Math.floor((master._r_select||this.getRowIndex(this.row.idd)||0)+dir*this.objBox.offsetHeight/(this._srdh||20));new_ind<0&&(new_ind=0),new_ind>=this.rowsBuffer.length&&(new_ind=this.rowsBuffer.length-1),this._srnd&&!this.rowsBuffer[new_ind]?(this.objBox.scrollTop+=Math.floor(dir*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20),this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop),master._r_select=new_ind):(this.selectCell(new_ind,this.cell._cellIndex,!0,!1,!1,this.multiLine||this._srnd),this.multiLine||this._srnd||this._realfake||(this.objBox.scrollTop=this.getRowById(this.getRowId(new_ind)).offsetTop,this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)),master._r_select=null)}},this.doKey=function(ev){if(!ev)return!0;if((ev.target||ev.srcElement).value!==window.undefined){var zx=ev.target||ev.srcElement;if("dhxcombo_input"!=zx.className&&(!zx.parentNode||-1==zx.parentNode.className.indexOf("editable")))return!0}if(globalActiveDHTMLGridObject&&this!=globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(ev);if(0==this.isActive)return!0;if(this._htkebl)return!0;if(!this.callEvent("onKeyPress",[ev.keyCode,ev.ctrlKey,ev.shiftKey,ev]))return!1;var code="k"+ev.keyCode+"_"+(ev.ctrlKey?1:0)+"_"+(ev.shiftKey?1:0);if(this.cell){if(this._key_events[code])return!1===this._key_events[code].call(this)||(ev.preventDefault&&ev.preventDefault(),!(ev.cancelBubble=!0));this._key_events.k_other&&this._key_events.k_other.call(this,ev)}return!0},this.selectRow=function(r,fl,preserve,show){"object"!=typeof r&&(r=this.render_row(r)),this.selectCell(r,0,fl,preserve,!1,show)},this.wasDblClicked=function(ev){var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if(el){var rowId=el.parentNode.idd;return this.callEvent("onRowDblClicked",[rowId,el._cellIndex,ev])}},this._onHeaderClick=function(e,el){var that=this.grid;if(el=el||that.getFirstParentOfType(_isIE?event.srcElement:e.target,"TD"),null==this.grid.resized){if(!this.grid.callEvent("onHeaderClick",[el._cellIndexS,e||window.event]))return!1;that.sortField(el._cellIndexS,!1,el)}this.grid.resized=null},this.deleteSelectedRows=function(){var num=this.selectedRows.length;if(0!=num){var tmpAr=this.selectedRows;this.selectedRows=dhtmlxArray();for(var i=num-1;0<=i;i--){var node=tmpAr[i];if(this.deleteRow(node.idd,node)){if(node==this.row)var ind=i}else this.selectedRows[this.selectedRows.length]=node}if(ind)try{ind+1>this.rowsCol.length&&ind--,this.selectCell(ind,0,!0)}catch(er){this.row=null,this.cell=null}}},this.getSelectedRowId=function(){for(var selAr=new Array(0),uni={},i=0;i<this.selectedRows.length;i++){var id=this.selectedRows[i].idd;uni[id]||(uni[selAr[selAr.length]=id]=!0)}return 0==selAr.length?null:selAr.join(this.delim)},this.getSelectedCellIndex=function(){return null!=this.cell?this.cell._cellIndex:-1},this.getColWidth=function(ind){return parseInt(this.cellWidthPX[ind])},this.setColWidth=function(ind,value){if("*"==value)this.initCellWidth[ind]="*";else{if(this._hrrar[ind])return;"px"==this.cellWidthType?this.cellWidthPX[ind]=parseInt(value):this.cellWidthPC[ind]=parseInt(value)}this.setSizes()},this.getRowIndex=function(row_id){for(var i=0;i<this.rowsBuffer.length;i++)if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==row_id)return i;return-1},this.getRowId=function(ind){return this.rowsBuffer[ind]?this.rowsBuffer[ind].idd:this.undefined},this.setRowId=function(ind,row_id){this.changeRowId(this.getRowId(ind),row_id)},this.changeRowId=function(oldRowId,newRowId){if(oldRowId!=newRowId){var row=this.rowsAr[oldRowId];row.idd=newRowId,this.UserData[oldRowId]&&(this.UserData[newRowId]=this.UserData[oldRowId],this.UserData[oldRowId]=null),this._h2&&this._h2.get[oldRowId]&&(this._h2.get[newRowId]=this._h2.get[oldRowId],this._h2.get[newRowId].id=newRowId,delete this._h2.get[oldRowId]),this.rowsAr[oldRowId]=null,this.rowsAr[newRowId]=row;for(var i=0;i<row.childNodes.length;i++)row.childNodes[i]._code&&(row.childNodes[i]._code=this._compileSCL(row.childNodes[i]._val,row.childNodes[i]));if(this._mat_links&&this._mat_links[oldRowId]){var a=this._mat_links[oldRowId];for(var c in delete this._mat_links[oldRowId],a)for(i=0;i<a[c].length;i++)this._compileSCL(a[c][i].original,a[c][i])}this.callEvent("onRowIdChange",[oldRowId,newRowId])}},this.setColumnIds=function(ids){this.columnIds=ids.split(this.delim)},this.setColumnId=function(ind,id){this.columnIds[ind]=id},this.getColIndexById=function(id){for(var i=0;i<this.columnIds.length;i++)if(this.columnIds[i]==id)return i},this.getColumnId=function(cin){return this.columnIds[cin]},this.getColumnLabel=function(cin,ind,hdr){for(var z=(hdr||this.hdr).rows[(ind||0)+1],i=0;i<z.cells.length;i++)if(z.cells[i]._cellIndexS==cin)return _isIE?z.cells[i].innerText:z.cells[i].textContent;return""},this.getColLabel=this.getColumnLabel,this.getFooterLabel=function(cin,ind){return this.getColumnLabel(cin,ind,this.ftr)},this.setRowTextBold=function(row_id){var r=this.getRowById(row_id);r&&(r.style.fontWeight="bold")},this.setRowTextStyle=function(row_id,styleString){var r=this.getRowById(row_id);if(r)for(var i=0;i<r.childNodes.length;i++){var pfix=r.childNodes[i]._attrs.style||"";this._hrrar&&this._hrrar[i]&&(pfix="display:none;"),_isIE,r.childNodes[i].style.cssText=pfix+"width:"+r.childNodes[i].style.width+";"+styleString}},this.setRowColor=function(row_id,color){for(var r=this.getRowById(row_id),i=0;i<r.childNodes.length;i++)r.childNodes[i].bgColor=color},this.setCellTextStyle=function(row_id,ind,styleString){var r=this.getRowById(row_id);if(r){var cell=r.childNodes[r._childIndexes?r._childIndexes[ind]:ind];if(cell){var pfix="";this._hrrar&&this._hrrar[ind]&&(pfix="display:none;"),_isIE,cell.style.cssText=pfix+"width:"+cell.style.width+";"+styleString}}},this.setRowTextNormal=function(row_id){var r=this.getRowById(row_id);r&&(r.style.fontWeight="normal")},this.doesRowExist=function(row_id){return null!=this.getRowById(row_id)},this.getColumnsNum=function(){return this._cCount},this.moveRowUp=function(row_id){var r=this.getRowById(row_id);if(this.isTreeGrid())return this.moveRowUDTG(row_id,-1);var rInd=this.rowsCol._dhx_find(r);if(r.previousSibling&&0!=rInd){r.parentNode.insertBefore(r,r.previousSibling),this.rowsCol._dhx_swapItems(rInd,rInd-1),this.setSizes();var bInd=this.rowsBuffer._dhx_find(r);this.rowsBuffer._dhx_swapItems(bInd,bInd-1),this._cssEven&&this._fixAlterCss(rInd-1)}},this.moveRowDown=function(row_id){var r=this.getRowById(row_id);if(this.isTreeGrid())return this.moveRowUDTG(row_id,1);var rInd=this.rowsCol._dhx_find(r);if(r.nextSibling){this.rowsCol._dhx_swapItems(rInd,rInd+1),r.nextSibling.nextSibling?r.parentNode.insertBefore(r,r.nextSibling.nextSibling):r.parentNode.appendChild(r),this.setSizes();var bInd=this.rowsBuffer._dhx_find(r);this.rowsBuffer._dhx_swapItems(bInd,bInd+1),this._cssEven&&this._fixAlterCss(rInd)}},this.getCombo=function(col_ind){return this.combos[col_ind]||(this.combos[col_ind]=new dhtmlXGridComboObject),this.combos[col_ind]},this.setUserData=function(row_id,name,value){row_id||(row_id="gridglobaluserdata"),this.UserData[row_id]||(this.UserData[row_id]=new Hashtable),this.UserData[row_id].put(name,value)},this.getUserData=function(row_id,name){row_id||(row_id="gridglobaluserdata"),this.getRowById(row_id);var z=this.UserData[row_id];return z?z.get(name):""},this.setEditable=function(fl){this.isEditable=dhx4.s2b(fl)},this.selectRowById=function(row_id,multiFL,show,call){call||(call=!1),this.selectCell(this.getRowById(row_id),0,call,multiFL,!1,show)},this.clearSelection=function(){this.editStop();for(var i=0;i<this.selectedRows.length;i++){var r=this.rowsAr[this.selectedRows[i].idd];r&&(r.className=r.className.replace(/rowselected/g,""))}this.selectedRows=dhtmlxArray(),(this.row=null)!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,""),this.cell=null),this.callEvent("onSelectionCleared",[])},this.copyRowContent=function(from_row_id,to_row_id){var frRow=this.getRowById(from_row_id);if(this.isTreeGrid())this._copyTreeGridRowContent(frRow,from_row_id,to_row_id);else for(var i=0;i<frRow.cells.length;i++)this.cells(to_row_id,i).setValue(this.cells(from_row_id,i).getValue());_isIE||(this.getRowById(from_row_id).cells[0].height=frRow.cells[0].offsetHeight)},this.setFooterLabel=function(c,label,ind){return this.setColumnLabel(c,label,ind,this.ftr)},this.setColumnLabel=function(c,label,ind,hdr){var z=(hdr||this.hdr).rows[ind||1],col=z._childIndexes?z._childIndexes[c]:c;if(z.cells[col]){if(this.useImagesInHeader){z.cells[col].style.textAlign="left",z.cells[col].innerHTML="<img src='"+label+"'>";var a=new Image;a.src=""+label.replace(/(\.[a-z]+)/,".des$1"),this.preloadImagesAr[this.preloadImagesAr.length]=a;var b=new Image;b.src=""+label.replace(/(\.[a-z]+)/,".asc$1"),this.preloadImagesAr[this.preloadImagesAr.length]=b}else{var hdrHTML="<div class='hdrcell'>";if(-1!=label.indexOf("img:[")){var imUrl=label.replace(/.*\[([^>]+)\].*/,"$1");label=label.substr(label.indexOf("]")+1,label.length),hdrHTML+="<img width='18px' height='18px' align='absmiddle' src='"+imUrl+"' hspace='2'>"}hdrHTML+=label,hdrHTML+="</div>",z.cells[col].innerHTML=hdrHTML,this._hstyles[c]&&(z.cells[col].style.cssText=this._hstyles[c])}if(-1!=(label||"").indexOf("#")){var t=label.match(/(^|{)#([^}]+)(}|$)/);if(t){var tn="_in_header_"+t[2];this[tn]&&this[tn](this.forceDivInHeader?z.cells[col].firstChild:z.cells[col],col,label.split(t[0]))}}}},this.setColLabel=function(a,b,ind,c){return this.setColumnLabel(a,b,(ind||0)+1,c)},this.clearAll=function(header){if(this.obj.rows[0]){this._h2&&(this._h2=this._createHierarchy(),this._fake&&(this._realfake?this._h2=this._fake._h2:this._fake._h2=this._h2)),this.limit=this._limitC=0,this.editStop(!0),this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dload&&(this.objBox.scrollTop=0,this.limit=this._limitC||0,this._initDrF=!0);this.rowsCol.length;for(var i=this.obj.rows.length-1;0<i;i--){(t_r=this.obj.rows[i]).parentNode.removeChild(t_r)}if(header){this._master_row=null,this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(i=this.hdr.rows.length-1;0<=i;i--){var t_r;(t_r=this.hdr.rows[i]).parentNode.removeChild(t_r)}this.ftr&&(this.ftr.parentNode.removeChild(this.ftr),this.ftr=null),this._aHead=this.ftr=this.cellWidth=this._aFoot=null,this.cellType=dhtmlxArray(),this._hrrar=[],this.columnIds=[],this.combos=[],this._strangeParams=[],this.defVal=[],this._ivizcol=null}this.row=null,this.cell=null,this.rowsCol=dhtmlxArray(),this.rowsAr={},this._RaSeCol=[],this.rowsBuffer=dhtmlxArray(),this.UserData=[],this.selectedRows=dhtmlxArray(),(this.pagingOn||this._srnd)&&(this.xmlFileUrl=""),this.pagingOn&&this.changePage(1),this._contextCallTimer&&window.clearTimeout(this._contextCallTimer),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,this.setSortImgState(!1),this.setSizes(),this.callEvent("onClearAll",[])}},this.sortField=function(ind,repeatFl,r_el){if(0==this.getRowsNum())return!1;var el=this.hdr.rows[0].cells[ind];if(el&&"TH"==el.tagName&&this.fldSort.length-1>=el._cellIndex&&"na"!=this.fldSort[el._cellIndex]){var data=this.getSortingState(),sortType=data[0]==ind&&"asc"==data[1]?"des":"asc";if(!this.callEvent("onBeforeSorting",[ind,this.fldSort[ind],sortType]))return;if(this.sortImg.className="dhxgrid_sort_"+("asc"==sortType?"asc":"desc"),this.useImagesInHeader){var cel=this.hdr.rows[1].cells[el._cellIndex].firstChild;if(null!=this.fldSorted){var celT=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;celT.src=celT.src.replace(/(\.asc\.)|(\.des\.)/,".")}cel.src=cel.src.replace(/(\.[a-z]+)$/,"."+sortType+"$1")}this.sortRows(el._cellIndex,this.fldSort[el._cellIndex],sortType),this.fldSorted=el,this.r_fldSorted=r_el;var c=this.hdr.rows[1];(c=r_el.parentNode)._childIndexes?c._childIndexes[el._cellIndex]:el._cellIndex;this.setSortImgPos(!1,!1,!1,r_el)}},this.setCustomSorting=function(func,col){this._customSorts||(this._customSorts=new Array),this._customSorts[col]="string"==typeof func?eval(func):func,this.fldSort[col]="cus"},this.enableHeaderImages=function(fl){this.useImagesInHeader=fl},this.setHeader=function(hdrStr,splitSign,styles){if("object"!=typeof hdrStr)var arLab=this._eSplit(hdrStr);else arLab=[].concat(hdrStr);for(var arWdth=new Array(0),arTyp=new dhtmlxArray(0),arAlg=new Array(0),arVAlg=new Array(0),arSrt=new Array(0),i=0;i<arLab.length;i++)arWdth[arWdth.length]=Math.round(100/arLab.length),arTyp[arTyp.length]="ed",arAlg[arAlg.length]="left",arVAlg[arVAlg.length]="middle",arSrt[arSrt.length]="na";this.splitSign=splitSign||"#cspan",this.hdrLabels=arLab,this.cellWidth=arWdth,this.initCellWidth.length||this.setInitWidthsP(arWdth.join(this.delim),!0),this.cellType=arTyp,this.cellAlign=arAlg,this.cellVAlign=arVAlg,this.fldSort=arSrt,this._hstyles=styles||[]},this._eSplit=function(str){if(![].push)return str.split(this.delim);var a="r"+(new Date).valueOf(),z=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(str||"").replace(RegExp(z,"g"),a).replace(RegExp("\\\\"+a,"g"),this.delim).split(a)},this.getColType=function(cInd){return this.cellType[cInd]},this.getColTypeById=function(cID){return this.cellType[this.getColIndexById(cID)]},this.setColTypes=function(typeStr){this.cellType=dhtmlxArray(typeStr.split(this.delim)),this._strangeParams=new Array;for(var i=0;i<this.cellType.length;i++){if(-1!=this.cellType[i].indexOf("[")){var z=this.cellType[i].split(/[\[\]]+/g);this.cellType[i]=z[0],this.defVal[i]=z[1],0==z[1].indexOf("=")&&(this.cellType[i]="math",this._strangeParams[i]=z[0])}window["eXcell_"+this.cellType[i]]||dhx4.callEvent("onConfigurationError",["Incorrect cell type: "+this.cellType[i],this,this.cellType[i]])}},this.setColSorting=function(sortStr){this.fldSort=sortStr.split(this.delim);for(var check={str:1,int:1,date:1},i=0;i<this.fldSort.length;i++)check[this.fldSort[i]]||"function"!=typeof window[this.fldSort[i]]||(this._customSorts||(this._customSorts=new Array),this._customSorts[i]=window[this.fldSort[i]],this.fldSort[i]="cus")},this.setColAlign=function(alStr){this.cellAlign=alStr.split(this.delim);for(var i=0;i<this.cellAlign.length;i++)this.cellAlign[i]=this.cellAlign[i]._dhx_trim()},this.setColVAlign=function(valStr){this.cellVAlign=valStr.split(this.delim)},this.setNoHeader=function(fl){this.noHeader=dhx4.s2b(fl)},this.showRow=function(rowID){this.getRowById(rowID),this._h2&&this.openItem(this._h2.get[rowID].parent.id);for(var c=this.getRowById(rowID).childNodes[0];c&&"none"==c.style.display;)c=c.nextSibling;c&&this.moveToVisible(c,!0)},this.setStyle=function(ss_header,ss_grid,ss_selCell,ss_selRow){this.ssModifier=[ss_header,ss_grid,ss_selCell,ss_selCell,ss_selRow];for(var prefs=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"],index=0;!_isIE;){try{document.styleSheets[index].cssRules.length}catch(e){index++;continue}break}for(var i=0;i<prefs.length;i++)this.ssModifier[i]&&(_isIE?document.styleSheets[0].addRule(prefs[i],this.ssModifier[i]):document.styleSheets[index].insertRule(prefs[i]+" { "+this.ssModifier[i]+" }",document.styleSheets[index].cssRules.length))},this.setColumnColor=function(clr){this.columnColor=clr.split(this.delim)},this.enableAlterCss=function(cssE,cssU,perLevel,levelUnique){(cssE||cssU)&&this.attachEvent("onGridReconstructed",function(){this._fixAlterCss(),this._fake&&this._fake._fixAlterCss()}),this._cssSP=perLevel,this._cssSU=levelUnique,this._cssEven=cssE,this._cssUnEven=cssU},this._fixAlterCss=function(ind){if(this._h2&&(this._cssSP||this._cssSU))return this._fixAlterCssTGR(ind);if(this._cssEven||this._cssUnEven)for(var j=ind=ind||0,i=ind;i<this.rowsCol.length;i++)if(this.rowsCol[i]&&"none"!=this.rowsCol[i].style.display){if(this.rowsCol[i]._cntr){j=1;continue}-1!=this.rowsCol[i].className.indexOf("rowselected")?this.rowsCol[i].className=j%2==1?this._cssUnEven+" rowselected "+(this.rowsCol[i]._css||""):this._cssEven+" rowselected "+(this.rowsCol[i]._css||""):this.rowsCol[i].className=j%2==1?this._cssUnEven+" "+(this.rowsCol[i]._css||""):this._cssEven+" "+(this.rowsCol[i]._css||""),j++}},this.clearChangedState=function(){for(var i=0;i<this.rowsCol.length;i++){var row=this.rowsCol[i];if(row&&row.childNodes)for(var cols=row.childNodes.length,j=0;j<cols;j++)row.childNodes[j].wasChanged=!1}},this.getChangedRows=function(and_added){var res=new Array;return this.forEachRow(function(id){var row=this.rowsAr[id];if("TR"==row.tagName){var cols=row.childNodes.length;if(and_added&&row._added)res[res.length]=row.idd;else for(var j=0;j<cols;j++)if(row.childNodes[j].wasChanged){res[res.length]=row.idd;break}}}),res.join(this.delim)},this._sUDa=!1,this._sAll=!1,this.setSerializationLevel=function(userData,fullXML,config,changedAttr,onlyChanged,asCDATA){this._sUDa=userData,this._sAll=fullXML,this._sConfig=config,this._chAttr=changedAttr,this._onlChAttr=onlyChanged,this._asCDATA=asCDATA},this.setSerializableColumns=function(list){if(list){this._srClmn=(list||"").split(",");for(var i=0;i<this._srClmn.length;i++)this._srClmn[i]=dhx4.s2b(this._srClmn[i])}else this._srClmn=null},this._serialise=function(rCol,inner,closed){this.editStop();var out=[],close="</"+this.xml.s_row+">";if(this.isTreeGrid())this._h2.forEachChildF(0,function(el){var temp=this._serializeRow(this.render_row_tree(-1,el.id));return out.push(temp),!!temp},this,function(){out.push(close)});else for(var i=0;i<this.rowsBuffer.length;i++)if(this.rowsBuffer[i]){if(this._chAttr&&this.rowsBuffer[i]._locator)continue;var temp=this._serializeRow(this.render_row(i));out.push(temp),temp&&out.push(close)}return[out.join("")]},this._serializeRow=function(r,i){var out=[],ra=this.xml.row_attrs,ca=this.xml.cell_attrs;if(out.push("<"+this.xml.s_row),out.push(" id='"+r.idd+"'"),this._sAll&&-1!=this.selectedRows._dhx_find(r)&&out.push(" selected='1'"),this._h2&&"minus"==this._h2.get[r.idd].state&&out.push(" open='1'"),ra.length)for(i=0;i<ra.length;i++)out.push(" "+ra[i]+"='"+r._attrs[ra[i]]+"'");if(out.push(">"),this._sUDa&&this.UserData[r.idd]){keysAr=this.UserData[r.idd].getKeys();for(var ii=0;ii<keysAr.length;ii++){var subkey=keysAr[ii];0!==subkey.indexOf("__")&&out.push("<userdata name='"+subkey+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[r.idd].get(subkey)+(this._asCDATA?"]]>":"")+"</userdata>")}}for(var changeFl=!1,jj=0;jj<this._cCount;jj++)if(!this._srClmn||this._srClmn[jj]){var zx=this.cells3(r,jj);if(out.push("<cell"),ca.length)for(i=0;i<ca.length;i++)out.push(" "+ca[i]+"='"+zx.cell._attrs[ca[i]]+"'");if(zxVal=zx[this._agetm](),this._asCDATA&&(zxVal="<![CDATA["+zxVal+"]]>"),this._ecspn&&zx.cell.colSpan&&1<zx.cell.colSpan&&out.push(' colspan="'+zx.cell.colSpan+'" '),this._chAttr?zx.wasChanged()&&(out.push(' changed="1"'),changeFl=!0):this._onlChAttr&&zx.wasChanged()&&(changeFl=!0),this._sAll&&"tree"==this.cellType[jj]?out.push((this._h2?" image='"+this._h2.get[r.idd].image+"'":"")+">"+zxVal+"</cell>"):out.push(">"+zxVal+"</cell>"),this._ecspn&&zx.cell.colSpan)for(var u=0;u<zx.cell.colSpan-1;u++)out.push("<cell/>"),jj++}return!this._onlChAttr||changeFl||r._added?out.join(""):""},this._serialiseConfig=function(){for(var out="<head>",i=0;i<this.hdr.rows[0].cells.length;i++)if(!this._srClmn||this._srClmn[i]){var sort=this.fldSort[i];"cus"==sort&&(sort=(sort=this._customSorts[i].toString()).replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")),out+="<column width='"+this.getColWidth(i)+"' align='"+this.cellAlign[i]+"' type='"+this.cellType[i]+"' sort='"+(sort||"na")+"' color='"+(this.columnColor[i]||"")+"'"+(this.columnIds[i]?" id='"+this.columnIds[i]+"'":"")+">",this._asCDATA?out+="<![CDATA["+this.getColumnLabel(i)+"]]>":out+=this.getColumnLabel(i);var z=this.getCombo(i);if(z)for(var j=0;j<z.keys.length;j++)out+="<option value='"+z.keys[j]+"'>"+z.values[j]+"</option>";out+="</column>"}return out+"</head>"},this.serialize=function(){var out='<?xml version="1.0"?><rows>';if(this._mathSerialization?this._agetm="getMathValue":this._agetm="getValue",this._sUDa&&this.UserData.gridglobaluserdata)for(var keysAr=this.UserData.gridglobaluserdata.getKeys(),i=0;i<keysAr.length;i++)out+="<userdata name='"+keysAr[i]+"'>"+this.UserData.gridglobaluserdata.get(keysAr[i])+"</userdata>";return this._sConfig&&(out+=this._serialiseConfig()),out+=this._serialise(),out+="</rows>"},this.getPosition=function(oNode,pNode){if(!pNode){var pos=dhx4.getOffset(oNode);return[pos.left,pos.top]}pNode=pNode||document.body;for(var oCurrentNode=oNode,iLeft=0,iTop=0;oCurrentNode&&oCurrentNode!=pNode;)iLeft+=oCurrentNode.offsetLeft-oCurrentNode.scrollLeft,iTop+=oCurrentNode.offsetTop-oCurrentNode.scrollTop,oCurrentNode=oCurrentNode.offsetParent;return pNode==document.body&&(_isIE?(iTop+=document.body.offsetTop||document.documentElement.offsetTop,iLeft+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(iLeft+=document.body.offsetLeft,iTop+=document.body.offsetTop)),[iLeft,iTop]},this.getFirstParentOfType=function(obj,tag){for(;obj&&obj.tagName!=tag&&"BODY"!=obj.tagName;)obj=obj.parentNode;return obj},this.objBox.onscroll=function(){this.grid._doOnScroll()},this.hdrBox.onscroll=function(){this._try_header_sync||(this._try_header_sync=!0,1<Math.abs(this.grid.objBox.scrollLeft-this.scrollLeft)&&(this.grid.objBox.scrollLeft=this.scrollLeft),this._try_header_sync=!1)},(!_isOpera||8.5<_OperaRv)&&(this.hdr.onmousemove=function(e){this.grid.changeCursorState(e||window.event)},this.hdr.onmousedown=function(e){return this.grid.startColResize(e||window.event)}),this.obj.onmousemove=this._drawTooltip,this.objBox.onclick=function(e){(e=e||event).cancelBubble=!0,this.firstChild.grid.setActive(!0),window.dhx4.callEvent("_onGridClick",[e,this.firstChild.grid])},this.obj.onclick=function(e){!1!==this.grid._doClick(e||window.event)&&(this.grid._sclE?this.grid.editCell(e||window.event):this.grid.editStop()),(e=e||event).cancelBubble=!0,window.dhx4.callEvent("_onGridClick",[e,this.grid])},_isMacOS?this.entBox.oncontextmenu=function(e){e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1;var that=this.grid;return that._realfake&&(that=that._fake),that._doContClick(e||window.event)}:(this.entBox.onmousedown=function(e){return this.grid._doContClick(e||window.event)},this.entBox.oncontextmenu=function(e){return this.grid._ctmndx&&((e||event).cancelBubble=!0),!this.grid._ctmndx}),this.obj.ondblclick=function(e){if(!this.grid.wasDblClicked(e||window.event))return!1;this.grid._dclE&&(this.grid.getFirstParentOfType(_isIE?event.srcElement:e.target,"TR")==this.grid.row&&this.grid.editCell(e||window.event));return(e||event).cancelBubble=!0,!_isOpera&&void 0},this.hdr.onclick=this._onHeaderClick,this.sortImg.onclick=function(){self._onHeaderClick.apply({grid:self},[null,self.r_fldSorted])},this.hdr.ondblclick=this._onHeaderDblClick,document.body._dhtmlxgrid_onkeydown||(dhtmlxEvent(document,"keydown",function(e){if(globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(e||window.event)}),document.body._dhtmlxgrid_onkeydown=!0),dhtmlxEvent(document.body,"click",function(){self.editStop&&self.editStop(),self.isActive&&self.setActive(!1)}),-1!=this.entBox.style.height.toString().indexOf("%")&&(this._delta_y=this.entBox.style.height),-1!=this.entBox.style.width.toString().indexOf("%")&&(this._delta_x=this.entBox.style.width),(this._delta_x||this._delta_y)&&this._setAutoResize(),this.setColHidden=this.setColumnsVisibility,this.enableCollSpan=this.enableColSpan,this.setMultiselect=this.enableMultiselect,this.setMultiLine=this.enableMultiline,this.deleteSelectedItem=this.deleteSelectedRows,this.getSelectedId=this.getSelectedRowId,this.getHeaderCol=this.getColumnLabel,this.isItemExists=this.doesRowExist,this.getColumnCount=this.getColumnsNum,this.setSelectedRow=this.selectRowById,this.setHeaderCol=this.setColumnLabel,this.preventIECashing=this.preventIECaching,this.enableAutoHeigth=this.enableAutoHeight,this.getUID=this.uid,dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path),dhtmlx.skin&&this.setSkin(dhtmlx.skin),this}function dhtmlXGridCellObject(a){this.destructor=function(){return this.cell.obj=null,this.cell=null,this.grid=null,this.base=null},this.cell=a,this.getValue=function(){return this.cell.textContent&&"TEXTAREA"==this.cell.textContent.tagName?this.cell.textContent.value:this.cell.innerHTML._dhx_trim()},this.getMathValue=function(){return this.cell.original?this.cell.original:this.getValue()},this.getFont=function(){return arOut=new Array(3),this.cell.style.fontFamily&&(arOut[0]=this.cell.style.fontFamily),"bold"!=this.cell.style.fontWeight&&"bold"!=this.cell.parentNode.style.fontWeight||(arOut[1]="bold"),"italic"!=this.cell.style.fontStyle&&"italic"!=this.cell.parentNode.style.fontWeight||(arOut[1]+="italic"),this.cell.style.fontSize?arOut[2]=this.cell.style.fontSize:arOut[2]="",arOut.join("-")},this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"},this.getBgColor=function(){return this.cell.style.backgroundColor||"#FFFFFF"},this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:this.cell.style.textAlign?this.cell.style.textAlign:"left"},this.getWidth=function(){return this.cell.scrollWidth},this.setFont=function(c){fntAr=c.split("-"),this.cell.style.fontFamily=fntAr[0],this.cell.style.fontSize=fntAr[fntAr.length-1],3==fntAr.length&&(/bold/.test(fntAr[1])&&(this.cell.style.fontWeight="bold"),/italic/.test(fntAr[1])&&(this.cell.style.fontStyle="italic"),/underline/.test(fntAr[1])&&(this.cell.style.textDecoration="underline"))},this.setTextColor=function(c){this.cell.style.color=c},this.setBgColor=function(c){""==c&&(c=null),this.cell.style.background=c},this.setHorAlign=function(c){1==c.length?this.cell.style.textAlign="c"==c?"center":"l"==c?"left":"right":this.cell.style.textAlign=c},this.wasChanged=function(){return!!this.cell.wasChanged},this.isCheckbox=function(){var c=this.cell.firstChild;return!(!c||"INPUT"!=c.tagName)&&(type=c.type,"radio"==type||"checkbox"==type)},this.isChecked=function(){if(this.isCheckbox())return this.cell.firstChild.checked},this.isDisabled=function(){return this.cell._disabled},this.setChecked=function(c){this.isCheckbox()&&("true"!=c&&1!=c&&(c=!1),this.cell.firstChild.checked=c)},this.setDisabled=function(c){"true"!=c&&1!=c&&(c=!1),this.isCheckbox()&&(this.cell.firstChild.disabled=c,this.disabledF&&this.disabledF(c)),this.cell._disabled=c}}function eXcell(){this.obj=null,this.val=null,this.changeState=function(){return!1},this.edit=function(){this.val=this.getValue()},this.detach=function(){return!1},this.getPosition=function(g){for(var a=g,e=0,c=0;"BODY"!=a.tagName;)e+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return new Array(e,c)}}function eXcell_ed(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){this.cell.atag=this.grid.multiLine?"TEXTAREA":"INPUT",this.val=this.getValue(),this.obj=document.createElement(this.cell.atag),this.obj.setAttribute("autocomplete","off"),this.obj.style.height=this.cell.offsetHeight-(this.grid.multiLine?9:4)+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(c){(c||event).cancelBubble=!0},this.obj.onmousedown=function(c){(c||event).cancelBubble=!0},this.obj.value=this.val,this.cell.innerHTML="",this.cell.appendChild(this.obj),this.obj.onselectstart=function(c){return c||(c=event),c.cancelBubble=!0},_isIE&&(this.obj.focus(),this.obj.blur()),this.obj.focus()},this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()},this.detach=function(){return this.setValue(this.obj.value),this.val!=this.getValue()}}function eXcell_edtxt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(c){c&&""!=c.toString()._dhx_trim()?this.cell._clearCell=!1:(c=" ",this.cell._clearCell=!0),this.setCTxtValue(c)}}function eXcell_edn(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){var c=this.obj.value;return this.setValue(c),this.val!=this.getValue()}}function eXcell_ch(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.disabledF=function(c){this.cell.innerHTML=1==c||1==c?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")},this.changeState=function(c){!0!==c||this.grid.isActive||(null!=window.globalActiveDHTMLGridObject&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0)),!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()},this.setChecked=function(c){this.setValue(c.toString())},this.detach=function(){return this.val!=this.getValue()},this.edit=null}function eXcell_ra(a){this.base=eXcell_ch,this.base(a),this.grid=a.parentNode.grid,this.disabledF=function(c){this.cell.innerHTML=1==c||1==c?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")},this.changeState=function(c){!1===c&&1==this.getValue()||!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.edit=null}function eXcell_txt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_textarea",this.obj.onclick=function(g){(g||event).cancelBubble=!0};var c=this.grid.getPosition(this.cell);if(this.obj.value=this.val,this.obj.style.display="",this.obj.style.textAlign=this.cell.style.textAlign,document.body.appendChild(this.obj),_isOpera&&(this.obj.onkeypress=function(g){if(9==g.keyCode||27==g.keyCode)return!1}),this.obj.onkeydown=function(h){var g=h||event;if(9==g.keyCode||27==g.keyCode)return globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:g.keyCode,shiftKey:g.shiftKey,srcElement:"0"}),!1},this.obj.style.left=c[0]+"px",this.obj.style.top=c[1]+this.cell.offsetHeight+"px",this.cell.offsetWidth<200)var e=200;else e=this.cell.offsetWidth;this.obj.style.width=e+16+"px",_isIE&&(this.obj.select(),this.obj.value=this.obj.value),this.obj.focus()},this.detach=function(){var c;return c=this.obj.value,this.cell._clearCell=""==c,this.setValue(c),document.body.removeChild(this.obj),this.obj=null,this.val!=this.getValue()},this.getValue=function(){return this.obj?this.obj.value:this.cell._clearCell?"":void 0!==this.cell._brval?this.cell._brval:this.grid.multiLine?this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}function eXcell_txttxt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(c){(this.cell._brval=c)&&""!=c.toString()._dhx_trim()?this.cell._clearCell=!1:(c=" ",this.cell._clearCell=!0),this.setCTxtValue(c)}}function eXcell_co(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0),this.shiftNext=function(){var c=this.list.options[this.list.selectedIndex+1];return c&&(c.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text,!0},this.shiftPrev=function(){if(0!=this.list.selectedIndex){var c=this.list.options[this.list.selectedIndex-1];c&&(c.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text}return!0},this.edit=function(){this.val=this.getValue(),this.text=this.getText()._dhx_trim();var g=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_combo_edit",this.obj.style.height=this.cell.offsetHeight-(this.grid.multiLine?9:4)+"px",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(o){(o||event).cancelBubble=!0},this.obj.onmousedown=function(o){(o||event).cancelBubble=!0},this.obj.value=this.text,this.obj.onselectstart=function(o){return o||(o=event),o.cancelBubble=!0};var l=this;this.obj.onkeyup=function(s){var r=(s||event).keyCode;if(38!=r&&40!=r&&9!=r)for(var u=this.readonly?String.fromCharCode(r):this.value,v=l.list.options,o=0;o<v.length;o++)if(0==v[o].text.indexOf(u))return v[o].selected=!0},this.list=document.createElement("SELECT"),this.list.className="dhx_combo_select",this.list.style.width=this.cell.offsetWidth+"px",this.list.style.left=g[0]+"px",this.list.style.top=g[1]+this.cell.offsetHeight+"px",this.list.onclick=function(s){var r=s||window.event,o=r.target||r.srcElement;"OPTION"==o.tagName&&(o=o.parentNode),l.editable=!1,l.grid.editStop(),r.cancelBubble=!0};for(var c=this.combo.getKeys(),h=!1,n=0,e=0;e<c.length;e++){var m=this.combo.get(c[e]);this.list.options[this.list.options.length]=new Option(m,c[e]),c[e]==this.val&&(n=this.list.options.length-1,h=!0)}0==h&&(this.list.options[this.list.options.length]=new Option(this.text,null===this.val?"":this.val),n=this.list.options.length-1),document.body.appendChild(this.list),this.list.size="6",this.cstate=1,this.editable?this.cell.innerHTML="":(this.obj.style.width="0px",this.obj.style.height="0px"),this.cell.appendChild(this.obj),this.list.options[n].selected=!0,this.editable&&(this.obj.focus(),this.obj.focus()),this.editable||(this.obj.style.visibility="hidden",this.obj.style.position="absolute",this.list.focus(),this.list.onkeydown=function(o){if(o=o||window.event,l.grid.setActive(!0),o.keyCode<30)return l.grid.doKey({target:l.cell,keyCode:o.keyCode,shiftKey:o.shiftKey,ctrlKey:o.ctrlKey})})},this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value},this.detach=function(){if(this.val!=this.getValue()&&(this.cell.wasChanged=!0),null!=this.list.parentNode)if(this.editable){var c=this.list.options[this.list.selectedIndex];if(c&&c.text==this.obj.value)this.setValue(this.list.value);else{var e=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),g=e.values._dhx_find(this.obj.value);-1!=g?this.setValue(e.keys[g]):this.setValue(this.cell.combo_value=this.obj.value)}}else this.setValue(this.list.value);return this.list.parentNode&&this.list.parentNode.removeChild(this.list),this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_coro(a){this.base=eXcell_co,this.base(a),this.editable=!1}function eXcell_cotxt(a){this.base=eXcell_co,this.base(a)}function eXcell_corotxt(a){this.base=eXcell_co,this.base(a),this.editable=!1}function eXcell_cp(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(c){}this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("SPAN"),this.obj.style.border="1px solid black",this.obj.style.position="absolute";var e=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj),document.body.appendChild(this.obj),this.obj.style.left=e[0]+"px",this.obj.style.zIndex=1e3,this.obj.style.top=e[1]+this.cell.offsetHeight+"px"},this.toolDNum=function(e){return 1==e.length&&(e="0"+e),e},this.colorPanel=function(s,w){var m=document.createElement("TABLE");w.appendChild(m),m.cellSpacing=0,m.editor_obj=this,m.style.cursor="default",m.onclick=function(y){var x=y||window.event,n=x.target||x.srcElement,r=n.parentNode.parentNode.parentNode.editor_obj;r&&(r.setValue(n._bg),r.grid.editStop())};for(var h=256/s,l=0;l<=256/h;l++)for(var e=m.insertRow(l),o=0;o<=256/h;o++)for(var g=0;g<=256/h;g++){R=new Number(h*l)-(0==l?0:1),G=new Number(h*o)-(0==o?0:1),B=new Number(h*g)-(0==g?0:1);var v=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+this.toolDNum(B.toString(16)),u=e.insertCell(o);u.width="10px",u.innerHTML="&nbsp;",u.title=v.toUpperCase(),u.style.backgroundColor="#"+v,u._bg="#"+v,null!=this.val&&"#"+v.toUpperCase()==this.val.toUpperCase()&&(u.style.border="2px solid white")}},this.getValue=function(){return this.cell.firstChild._bg||""},this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))},this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))},this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))},this.detach=function(){return null!=this.obj.offsetParent&&document.body.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_img(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(c){}this.getValue=function(){if("IMG"==this.cell.firstChild.tagName)return this.cell.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");if("A"==this.cell.firstChild.tagName){var e=this.cell.firstChild.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");return e+="^"+this.cell.lnk,this.cell.trg&&(e+="^"+this.cell.trg),e}},this.isDisabled=function(){return!0}}function eXcell_icon(a){this.base=eXcell_ed,this.base(a);try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(c){}this.setValue=function(e){this.cell._raw_value=e,this.setCValue('<div class="dhx_grid_icon"><i class="fa fa-'+e.toString()._dhx_trim()+'"></i></div>')},this.getValue=function(){return this.cell._raw_value},this.isDisabled=function(){return!0}}function eXcell_price(a){this.base=eXcell_ed,this.base(a),this.getValue=function(){return 1<this.cell.childNodes.length?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}function eXcell_dyn(a){this.base=eXcell_ed,this.base(a),this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()}}function eXcell_ro(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}function eXcell_ron(a){this.cell=a,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}function eXcell_rotxt(a){this.cell=a,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.setValue=function(c){c?this.cell._clearCell=!1:(c=" ",this.cell._clearCell=!0),this.setCTxtValue(c)},this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}function dhtmlXGridComboObject(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this.put=function(c,e){for(var a=0;a<this.keys.length;a++)if(this.keys[a]==c)return this.values[a]=e,!0;this.values[this.values.length]=e,this.keys[this.keys.length]=c},this.get=function(c){for(var a=0;a<this.keys.length;a++)if(this.keys[a]==c)return this.values[a];return null},this.clear=function(){this.keys=new dhtmlxArray,this.values=new dhtmlxArray},this.remove=function(c){for(var a=0;a<this.keys.length;a++)if(this.keys[a]==c)return this.keys._dhx_removeAt(a),this.values._dhx_removeAt(a),!0},this.size=function(){for(var a=0,c=0;c<this.keys.length;c++)null!=this.keys[c]&&a++;return a},this.getKeys=function(){for(var a=new Array(0),c=0;c<this.keys.length;c++)null!=this.keys[c]&&(a[a.length]=this.keys[c]);return a},this.save=function(){this._save=new Array;for(var a=0;a<this.keys.length;a++)this._save[a]=[this.keys[a],this.values[a]]},this.restore=function(){if(this._save){this.keys[a]=new Array,this.values[a]=new Array;for(var a=0;a<this._save.length;a++)this.keys[a]=this._save[a][0],this.values[a]=this._save[a][1]}},this}function Hashtable(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this}function dragContext(A,y,x,w,v,u,r,s,o,n,g){return this.source=A||"grid",this.target=y||"grid",this.mode=x||"move",this.dropmode=w||"child",this.sid=v||0,this.tid=u,this.sobj=r||null,this.tobj=s||null,this.sExtra=o||null,this.tExtra=n||null,this.before=g||!1,this}function eXcell_stree(a){if(a){if(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._sub_trees)return;if(this._sub=this.grid._sub_trees[a._cellIndex],!this._sub)return;this._sub=this._sub[0]}this.getValue=function(){return this.cell._val},this.setValue=function(c){this.cell._val=c,c=this._sub.getItemText(this.cell._val),this.setCValue(c||"&nbsp;",c)},this.edit=function(){this._sub.parentObject.style.display="block";var e=this.grid.getPosition(this.cell);this._sub.parentObject.style.top=e[1]+"px",this._sub.parentObject.style.left=e[0]+"px",this._sub.parentObject.style.position="absolute";var c=this.grid.editStop;this.grid.editStop=function(){},this.grid.editStop=c},this.detach=function(){if(this._sub.parentObject.style.display="none",null!=this.grid._sub_id){var c=this.cell._val;return this.setValue(this._sub.getSelectedItemId()),this.grid._sub_id=null,this.cell._val!=c}}}function eXcell_link(a){this.cell=a,this.grid=this.cell.parentNode.grid,this.isDisabled=function(){return!0},this.edit=function(){},this.getValue=function(){if(this.cell.firstChild.getAttribute){var c=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(c?"^"+c:"")}return""},this.setValue=function(e){if("number"!=typeof e&&(!e||""==e.toString()._dhx_trim()))return this.setCValue("&nbsp;",c),this.cell._clearCell=!0;var c=e.split("^");1==c.length?c[1]="":1<c.length&&(c[1]="href='"+c[1]+"'",3==c.length?c[1]+=" target='"+c[2]+"'":c[1]+=" target='_blank'"),this.setCValue("<a "+c[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+c[0]+"</a>",c)}}function eXcell_grid(a){if(a){if(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._sub_grids)return;if(this._sub=this.grid._sub_grids[a._cellIndex],!this._sub)return;this._sindex=this._sub[1],this._sub=this._sub[0]}this.getValue=function(){return this.cell.val},this.setValue=function(c){this.cell.val=c,this._sub.getRowById(c)&&(c=(c=this._sub.cells(c,this._sindex))?c.getValue():""),this.setCValue(c||"&nbsp;",c)},this.edit=function(){this.val=this.cell.val,this._sub.entBox.style.display="block";var e=this.grid.getPosition(this.cell);this._sub.entBox.style.top=e[1]+"px",this._sub.entBox.style.left=e[0]+"px",this._sub.entBox.style.position="absolute",this._sub.setSizes();var c=this.grid.editStop;this.grid.editStop=function(){},this._sub.getRowById(this.cell.val)&&this._sub.setSelectedRow(this.cell.val),this._sub.setActive(!0),this.grid.editStop=c},this.detach=function(){var c=this.cell.val;return this._sub.entBox.style.display="none",null!==this._sub.getSelectedId()&&(this.setValue(this._sub.getSelectedId()),this.grid.setActive(!0),this.cell.val!=c)}}function eXcell_dhxCalendar(a){if(a&&(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var e=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[e]);var c=this.grid;e.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){c.editStop()},1),!0});dhtmlxEvent(e.base,"click",function(h){(h||event).cancelBubble=!0}),e=null}}function eXcell_dhxCalendarA(a){if(a&&(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var e=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[e]);var c=this.grid;e.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){c.editStop()},1),!0});dhtmlxEvent(e.base,"click",function(h){(h||event).cancelBubble=!0})}}function eXcell_cntr(a){if(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=!0,this.grid._h2&&this.grid.attachEvent("onOpenEn",function(e){this.resetCounter(a._cellIndex)});var c=function(){var e=this;return window.setTimeout(function(){e.resetCounter&&(e._fake&&!e._realfake&&a._cellIndex<e._fake._cCount?e._fake.resetCounter(a._cellIndex):e.resetCounter(a._cellIndex))},1),!0};this.grid.attachEvent("onBeforeSorting",c),this.grid.attachEvent("onFilterEnd",c)}this.edit=function(){},this.getValue=function(){return this.cell.innerHTML},this.setValue=function(g){this.cell.style.paddingRight="2px";var e=this.cell;window.setTimeout(function(){if(e.parentNode){var h=e.parentNode.rowIndex;(e.parentNode.grid.currentPage||h<0||e.parentNode.grid._srnd)&&(h=e.parentNode.grid.rowsBuffer._dhx_find(e.parentNode)+1),h<=0||(e.innerHTML=h,e.parentNode.grid._fake&&e._cellIndex<e.parentNode.grid._fake._cCount&&e.parentNode.grid._fake.rowsAr[e.parentNode.idd]&&e.parentNode.grid._fake.cells(e.parentNode.idd,e._cellIndex).setCValue(h),e=null)}},100)}}function eXcell_acheck(a){try{this.cell=a,this.grid=this.cell.parentNode.grid,this.cell.obj=this}catch(c){}this.changeState=function(){!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("<checkbox state='false'>"):this.setValue("<checkbox state='true'>"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.getValue=function(){try{return this.cell.chstate.toString()}catch(e){return null}},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()},this.setChecked=function(e){this.setValue(e.toString())},this.detach=function(){return this.val!=this.getValue()},this.drawCurrentState=function(){return 1==this.cell.chstate?"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;'  style='cursor:pointer; font-weight:bold; text-align:center; '><span style='height:8px; width:8px; background:green; display:inline-block;'></span>&nbsp;Yes</div>":"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;' style='cursor:pointer;  text-align:center; '><span style='height:8px; width:8px; background:red; display:inline-block;'></span>&nbsp;No</div>"}}function eXcell_context(a){if(a){if(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._sub_context)return;if(this._sub=this.grid._sub_context[a._cellIndex],!this._sub)return;this._sindex=this._sub[1],this._sub=this._sub[0]}this.getValue=function(){return _isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(e){this.cell._val=e;var c=this._sub.itemPull[this._sub.idPrefix+this.cell._val];e=c?c.title:e,this.setCValue(e||"&nbsp;",e)},this.edit=function(){var e=this.grid.getPosition(this.cell);this._sub.showContextMenu(e[0]+this.cell.offsetWidth,e[1]);var c=this.grid.editStop;this.grid.editStop=function(){},this.grid.editStop=c},this.detach=function(){if(null!=this.grid._sub_id){var c=this.cell._val;return this.setValue(this.grid._sub_id),this.grid._sub_id=null,this.cell._val!=c}this._sub.hideContextMenu()}}function dhtmlXGridFromTable(obj,init){"object"!=typeof obj&&(obj=document.getElementById(obj));var w=document.createElement("DIV");w.setAttribute("width",obj.getAttribute("gridWidth")||(obj.offsetWidth?obj.offsetWidth+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).width:obj.currentStyle?obj.currentStyle.width:0)),w.setAttribute("height",obj.getAttribute("gridHeight")||(obj.offsetHeight?obj.offsetHeight+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).height:obj.currentStyle?obj.currentStyle.height:0)),w.className=obj.className,obj.className="",obj.id&&(w.id=obj.id);var mr=obj,drag=obj.getAttribute("dragAndDrop");mr.parentNode.insertBefore(w,mr);var f=mr.getAttribute("name")||"name_"+(new Date).valueOf(),windowf=new dhtmlXGridObject(w);window[f]=windowf;var acs=mr.getAttribute("onbeforeinit"),acs2=mr.getAttribute("oninit");acs&&eval(acs),windowf.setImagePath(windowf.imgURL||mr.getAttribute("imgpath")||mr.getAttribute("image_path")||"");var skin=mr.getAttribute("skin");skin&&windowf.setSkin(skin),init&&init(windowf);for(var hrow=mr.rows[0],za="",zb="",zc="",zd="",ze="",i=0;i<hrow.cells.length;i++){za+=(za?",":"")+hrow.cells[i].innerHTML;var width=hrow.cells[i].getAttribute("width")||hrow.cells[i].offsetWidth||(window.getComputedStyle?window.getComputedStyle(hrow.cells[i],null).width:hrow.cells[i].currentStyle?hrow.cells[i].currentStyle.width:0);zb+=(zb?",":"")+("*"==width?width:parseInt(width)),zc+=(zc?",":"")+(hrow.cells[i].getAttribute("align")||"left"),zd+=(zd?",":"")+(hrow.cells[i].getAttribute("type")||"ed"),ze+=(ze?",":"")+(hrow.cells[i].getAttribute("sort")||"str");var f_a=hrow.cells[i].getAttribute("format");f_a&&(-1!=hrow.cells[i].getAttribute("type").toLowerCase().indexOf("calendar")?windowf._dtmask=f_a:windowf.setNumberFormat(f_a,i))}windowf.setHeader(za),windowf.setInitWidths(zb),windowf.setColAlign(zc),windowf.setColTypes(zd),windowf.setColSorting(ze),"auto"==obj.getAttribute("gridHeight")&&windowf.enableAutoHeigth(!0),obj.getAttribute("multiline")&&windowf.enableMultiline(!0);var lmn=mr.getAttribute("lightnavigation");lmn&&windowf.enableLightMouseNavigation(lmn);var evr=mr.getAttribute("evenrow"),uevr=mr.getAttribute("unevenrow");return(evr||uevr)&&windowf.enableAlterCss(evr,uevr),drag&&windowf.enableDragAndDrop(!0),windowf.init(),obj.getAttribute("split")&&windowf.splitAt(obj.getAttribute("split")),windowf.callEvent("onXLS",[]),windowf._process_inner_html(mr,1),acs2&&eval(acs2),obj.parentNode&&obj.parentNode.removeChild&&obj.parentNode.removeChild(obj),windowf.callEvent("onXLE",[]),windowf}function eXcell_math(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){this.grid.editor=new eXcell_ed(this.cell),this.grid.editor.fix_self=!0,this.grid.editor.getValue=this.cell.original?function(){return this.cell.original}:this.getValue,this.grid.editor.setValue=this.setValue,this.grid.editor.edit()},this.isDisabled=function(){return!this.grid._mathEdit},this.setValue=function(c){c=this.grid._compileSCL(c,this.cell,this.fix_self),this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).setValue(c):(this.setCValue(c),this.cell._clearCell=!1)},this.getValue=function(){return this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).getValue():this.cell.innerHTML}}function eXcell_time(a){this.base=eXcell_ed,this.base(a),this.getValue=function(){return this.cell.innerHTML.toString()},this.setValue=function(l){var h=new RegExp(" ","i");if(""==(l=l.replace(h,":")))l="00:00";else{h=new RegExp("[a-zA-Z]","i");if(l.match(h))l="00:00";else{h=new RegExp("[0-9]+[\\.\\/;\\-,_\\]\\[\\?\\: ][0-9]+","i");if(-1!=l.search(h)){h=new RegExp("[\\./\\;\\-\\,\\_\\]\\[ \\?]","i");l=l.replace(h,":")}else{h=new RegExp("[^0-9]","i");if(res1=l.search(h),l.match(h))l="00:00";else if(1==l.length)l="00:0"+l;else if(parseInt(l)<60)l="00:"+l;else if(l.length<5){var e=parseInt(l);e-=60*(c=Math.floor(e/60));var c=c.toString();for(e=e.toString();c.length<2;)c="0"+c;for(;e.length<2;)e="0"+e;l=c+":"+e}}}}this.cell.innerHTML=l}}function eXcell_sub_row(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")},this._setState=function(c,e){(e||this.cell).innerHTML="<img src='"+this.grid.imgURL+c+"' width='18' height='18' />",(e||this.cell).firstChild.onclick=this.grid._expandMonolite},this.open=function(){this.cell.firstChild.onclick(null,!0)},this.close=function(){this.cell.firstChild.onclick(null,!1,!0)},this.isOpen=function(){return!!this.cell.parentNode._expanded},this.setValue=function(c){c&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",c),this._setState(c?"plus.gif":"blank.gif")},this.setContent=function(c){this.cell.parentNode._expanded?(this.cell.parentNode._expanded.innerHTML=c,this.resize()):(this.cell._previous_content=null,this.setValue(c),this.cell._sub_row_type=null)},this.resize=function(){this.grid._detectHeight(this.cell.parentNode._expanded,this.cell,this.cell.parentNode._expanded.scrollHeight)},this.isDisabled=function(){return!0},this.getTitle=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")?"click to expand|collapse":""}}function eXcell_sub_row_ajax(a){this.base=eXcell_sub_row,this.base(a),this.setValue=function(c){c&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",c),this.cell._sub_row_type="ajax",this.cell._previous_content=null,this._setState(c?"plus.gif":"blank.gif")}}function eXcell_sub_row_grid(a){this.base=eXcell_sub_row,this.base(a),this.setValue=function(c){c&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",c),this.cell._sub_row_type="grid",this._setState(c?"plus.gif":"blank.gif")},this.getSubGrid=function(){return a._sub_grid?a._sub_grid:null}}function eXcell_ra_str(a){a&&(this.base=eXcell_ra,this.base(a),this.grid=a.parentNode.grid)}function eXcell_combo(a){a&&(this.cell=a,this.grid=a.parentNode.grid,this._combo_pre="",this.edit=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.grid.imgURL),this.val=this.getValue();var c=this.getText();this.cell._clearCell&&(c=""),this.cell.innerHTML="",this.cell._brval?this.combo=this.cell._brval:this.combo=(this.grid._realfake?this.grid._fake:this.grid)._col_combos[this.cell._cellIndex],this.cell.appendChild(this.combo.DOMParent),this.combo.DOMParent.style.margin="0",this.combo.DOMelem_input.focus(),this.combo.setSize(this.cell.offsetWidth-2),this.combo._xml?this.combo.setComboText(c):-1!=this.combo.getIndexByValue(this.cell.combo_value)?this.combo.selectOption(this.combo.getIndexByValue(this.cell.combo_value)):this.combo.getOptionByLabel(c)?this.combo.selectOption(this.combo.getIndexByValue(this.combo.getOptionByLabel(c).value)):this.combo.setComboText(c),this.combo.openSelect()},this.selectComboOption=function(e,c){c.selectOption(c.getIndexByValue(c.getOptionByLabel(e).value))},this.getValue=function(c){return this.cell.combo_value||""},this.getText=function(e){var g=this.cell;return""==this._combo_pre&&g.childNodes[1]?g=g.childNodes[1]:g.childNodes[0].childNodes[1],_isIE?g.innerText:g.textContent},this.setValue=function(h){if("object"==typeof h){this.cell._brval=this.initCombo();var e=this.cell._cellIndex,g=this.cell.parentNode.idd;h.firstChild?this.cell.combo_value=h.firstChild.data:(this.cell.combo_value="&nbsp;",this.cell._clearCell=!0),this.setComboOptions(this.cell._brval,h,this.grid,e,g)}else{this.cell.combo_value=h;var c=null;(c=this.cell._brval)&&"object"==typeof this.cell._brval?h=(c.getOption(h)||{}).text||h:(c=this.grid._col_combos[this.cell._cellIndex]||this.grid._fake&&(c=this.grid._fake._col_combos[this.cell._cellIndex]))&&(h=(c.getOption(h)||{}).text||h),""==(h||"").toString()._dhx_trim()&&(h=null),null!==h?this.setComboCValue(h):(this.setComboCValue("&nbsp;",""),this.cell._clearCell=!0)}},this.detach=function(){var c=this.combo.getParent();if(c.parentNode!=this.cell)return!1;this.cell.removeChild(c);var e=this.cell.combo_value;return this.combo._confirmSelect("blur"),this.combo.getComboText()&&""!=this.combo.getComboText().toString()._dhx_trim()?(this.setComboCValue(this.combo.getComboText().replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.combo.getActualValue()),this.cell._clearCell=!1):(this.setComboCValue("&nbsp;"),this.cell._clearCell=!0),this.cell.combo_value=this.combo.getActualValue(),this.combo.closeAll(),this.grid._still_active=!0,this.grid.setActive(1),e!=this.cell.combo_value})}function eXcell_clist(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(c){}this.edit=function(){this.val=this.getValue();var g=this.cell._combo||this.grid.clists[this.cell._cellIndex];if(g){this.obj=document.createElement("DIV");for(var e=this.val.split(","),o="",m=0;m<g.length;m++){for(var n=!1,h=0;h<e.length;h++)g[m]==e[h]&&(n=!0);o+=n?"<div><input type='checkbox' id='dhx_clist_"+m+"' checked='true' /><label for='dhx_clist_"+m+"'>"+g[m]+"</label></div>":"<div><input type='checkbox' id='dhx_clist_"+m+"'/><label for='dhx_clist_"+m+"'>"+g[m]+"</label></div>"}o+="<div><input type='button' value='"+(this.grid.applyButtonText||"Apply")+"' style='width:100px; font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/></div>",(this.obj.editor=this).obj.innerHTML=o,document.body.appendChild(this.obj),this.obj.style.position="absolute",this.obj.className="dhx_clist",this.obj.onclick=function(r){return(r||event).cancelBubble=!0};var l=this.grid.getPosition(this.cell);this.obj.style.left=l[0]+"px",this.obj.style.top=l[1]+this.cell.offsetHeight+"px",this.obj.getValue=function(){for(var s="",r=0;r<this.childNodes.length-1;r++)this.childNodes[r].childNodes[0].checked&&(s&&(s+=", "),s+=this.childNodes[r].childNodes[1].innerHTML);return s.replace(/&amp;/g,"&")}}},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim().replace(/&amp;/g,"&").replace(/, /g,",")},this.detach=function(e){return this.obj&&(this.setValue(this.obj.getValue()),this.obj.editor=null,this.obj.parentNode.removeChild(this.obj),this.obj=null),this.val!=this.getValue()}}function eXcell_calck(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(c){}this.edit=function(){this.val=this.getValue();var e=this.grid.getPosition(this.cell);this.obj=new calcX(e[0],e[1]+this.cell.offsetHeight,this,this.val)},this.getValue=function(){return this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){return this.obj&&(this.setValue(this.obj.inputZone.value),this.obj.removeSelf()),this.obj=null,this.val!=this.getValue()}}function calcX(left,top,onReturnSub,val){if(this.top=top||0,this.left=left||0,this.onReturnSub=onReturnSub||null,this.operandA=0,this.operandB=0,this.operatorA="",this.state=0,this.dotState=0,this.calckGo=function(){return eval(this.operandA+"*1"+this.operatorA+this.operandB+"*1")},this.isNumeric=function(str){return-1==str.search(/[^1234567890]/gi)},this.isOperation=function(str){return-1==str.search(/[^\+\*\-\/]/gi)},this.onCalcKey=function(e){that=this.calk;var z=this.innerHTML,rZone=that.inputZone;0!=that.state&&2!=that.state||!that.isNumeric(z)||("0"!=rZone.value?rZone.value+=z:rZone.value=z),0!=that.state&&2!=that.state||"."!=z||0!=that.dotState||(that.dotState=1,rZone.value+=z),"C"==z&&(rZone.value=0,that.dotState=0,that.state=0),0==that.state&&that.isOperation(z)&&(that.operatorA=z,that.operandA=rZone.value,that.state=1),2==that.state&&that.isOperation(z)&&(that.operandB=rZone.value,rZone.value=that.calckGo(),that.operatorA=z,that.operandA=rZone.value,that.state=1),2==that.state&&"="==z&&(that.operandB=rZone.value,rZone.value=that.calckGo(),that.operatorA=z,that.operandA=rZone.value,that.state=3),1==that.state&&that.isNumeric(z)&&(rZone.value=z,that.state=2,that.dotState=0),3==that.state&&that.isNumeric(z)&&(rZone.value=z,that.state=0),3==that.state&&that.isOperation(z)&&(that.operatorA=z,that.operandA=rZone.value,that.state=1),"e"==z&&(rZone.value=Math.E,1==that.state&&(that.state=2),that.dotState=0),"p"==z&&(rZone.value=Math.PI,1==that.state&&(that.state=2),that.dotState=0),"Off"==z&&that.topNod.parentNode.removeChild(that.topNod),(e||event)&&((e||event).cancelBubble=!0)},this.sendResult=function(){if(that=this.calk,2==that.state){var rZone=that.inputZone;that.operandB=rZone.value,rZone.value=that.calckGo(),that.operatorA=z,that.operandA=rZone.value,that.state=3}var z=that.inputZone.value;that.topNod.parentNode.removeChild(that.topNod),that.onReturnSub.grid.editStop(!1)},this.removeSelf=function(){this.topNod.parentNode&&this.topNod.parentNode.removeChild(this.topNod)},this.keyDown=function(){this.className="calcPressed"},this.keyUp=function(){this.className="calcButton"},this.init_table=function(){var table=this.topNod.childNodes[0];if(table&&"TABLE"==table.tagName){for(i=1;i<table.childNodes[0].childNodes.length;i++)for(j=0;j<table.childNodes[0].childNodes[i].childNodes.length;j++)table.childNodes[0].childNodes[i].childNodes[j].onclick=this.onCalcKey,table.childNodes[0].childNodes[i].childNodes[j].onmousedown=this.keyDown,table.childNodes[0].childNodes[i].childNodes[j].onmouseout=this.keyUp,table.childNodes[0].childNodes[i].childNodes[j].onmouseup=this.keyUp,table.childNodes[0].childNodes[i].childNodes[j].calk=this;this.inputZone=this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0],this.onReturnSub?(this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].onclick=this.sendResult,this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].calk=this):this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].innerHTML=""}},this.drawSelf=function(){var div=document.createElement("div");div.className="calcTable",div.style.position="absolute",div.style.top=this.top+"px",div.style.left=this.left+"px",div.innerHTML="<table cellspacing='0' id='calc_01' class='calcTable'><tr><td colspan='4'><table cellpadding='1' cellspacing='0' width='100%'><tr><td width='100%' style='overflow:hidden;'><input style='width:100%' class='calcInput' value='0' align='right' readonly='true' style='text-align:right'></td><td class='calkSubmit'>=</td></tr></table></td></tr><tr><td class='calcButton' width='25%'>Off</td><td class='calcButton' width='25%'>p</td><td class='calcButton' width='25%'>e</td><td class='calcButton' width='25%'>/</td></tr><tr><td class='calcButton'>7</td><td class='calcButton'>8</td><td class='calcButton'>9</td><td class='calcButton'>*</td></tr><tr><td class='calcButton'>4</td><td class='calcButton'>5</td><td class='calcButton'>6</td><td class='calcButton'>+</td></tr><tr><td class='calcButton'>1</td><td class='calcButton'>2</td><td class='calcButton'>3</td><td class='calcButton'>-</td></tr><tr><td class='calcButton'>0</td><td class='calcButton'>.</td><td class='calcButton'>C</td><td class='calcButton'>=</td></tr></table>",div.onclick=function(e){(e||event).cancelBubble=!0},document.body.appendChild(div),this.topNod=div},this.drawSelf(),this.init_table(),val){var rZone=this.inputZone;rZone.value=1*val,this.operandA=1*val,this.state=3}return this}null==dhtmlxEvent.touchDelay&&(dhtmlxEvent.touchDelay=2e3),void 0===dhtmlxEvent.initTouch&&(dhtmlxEvent.initTouch=function(){var g,h,c,a;function e(){if(h){var l=document.createEvent("HTMLEvents");l.initEvent("dblclick",!0,!0),h.dispatchEvent(l),g=h=null}}dhtmlxEvent(document.body,"touchstart",function(l){h=l.touches[0].target,c=l.touches[0].clientX,a=l.touches[0].clientY,g=window.setTimeout(e,dhtmlxEvent.touchDelay)}),dhtmlxEvent(document.body,"touchmove",function(l){g&&(50<Math.abs(l.touches[0].clientX-c)||50<Math.abs(l.touches[0].clientY-a))&&(window.clearTimeout(g),g=h=!1)}),dhtmlxEvent(document.body,"touchend",function(l){g&&(window.clearTimeout(g),g=h=!1)}),dhtmlxEvent.initTouch=function(){}}),window.dhtmlx||(dhtmlx={}),dhtmlx.assert=function(c,a){c||dhtmlx.error(a)},dhtmlx.assert_enabled=function(){return!1},dhtmlx.assert_event=function(l,e){for(var c in l._event_check||(l._event_check={},l._event_check_size={}),e){l._event_check[c.toLowerCase()]=e[c];var h=-1;for(var g in e[c])h++;l._event_check_size[c.toLowerCase()]=h}},dhtmlx.assert_method_info=function(h,c,g,l){for(var a=[],e=0;e<l.length;e++)a.push(l[e][0]+" : "+l[e][1]+"\n   "+l[e][2].describe()+(l[e][3]?"; optional":""));return h.name+"."+c+"\n"+g+"\n Arguments:\n - "+a.join("\n - ")},dhtmlx.assert_method=function(e,a){for(var c in a)dhtmlx.assert_method_process(e,c,a[c].descr,a[c].args,a[c].min||99,a[c].skip)},dhtmlx.assert_method_process=function(l,c,h,m,e,g){var a=l[c];g||(l[c]=function(){if(arguments.length!=m.length&&arguments.length<e)dhtmlx.log("warn","Incorrect count of parameters\n"+l[c].describe()+"\n\nExpecting "+m.length+" but have only "+arguments.length);else for(var n=0;n<m.length;n++)m[n][3]||m[n][2](arguments[n])||dhtmlx.log("warn","Incorrect method call\n"+l[c].describe()+"\n\nActual value of "+(n+1)+" parameter: {"+typeof arguments[n]+"} "+arguments[n]);return a.apply(this,arguments)}),l[c].describe=function(){return dhtmlx.assert_method_info(l,c,h,m)}},dhtmlx.assert_event_call=function(e,c,a){e._event_check&&(e._event_check[c]?dhtmlx.isNotDefined(a)?dhtmlx.log("warn","Event without parameters :"+c):e._event_check_size[c]!=a.length&&dhtmlx.log("warn","Incorrect event call, expected "+e._event_check_size[c]+" parameter(s), but have "+a.length+" parameter(s), for "+c+" event"):dhtmlx.log("warn","Not expected event call :"+c))},dhtmlx.assert_event_attach=function(c,a){c._event_check&&!c._event_check[a]&&dhtmlx.log("warn","Unknown event name: "+a)},dhtmlx.assert_property=function(c,a){c._settings_check||(c._settings_check={}),dhtmlx.extend(c._settings_check,a)},dhtmlx.assert_check=function(e,c){if("object"==typeof e)for(var a in e)dhtmlx.assert_settings(a,e[a],c)},dhtmlx.assert_settings=function(n,h,g){if(g=g||this._settings_check){if(!g[n])return dhtmlx.log("warn","Unknown propery: "+n);for(var a=!1,e=0;e<g[n].length;e++){var l=g[n][e];if("string"!=typeof l&&("function"==typeof l?a=a||l(h):"object"==typeof l&&"function"==typeof l[1]&&(a=a||l[1](h))&&l[2]&&dhtmlx.assert_check(h,l[2]),a))break}a||dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(n,g)+"\nActual value: {"+typeof h+"} "+h)}},dhtmlx.assert_info=function(c,l){for(var a=l[c],h="",g=[],e=0;e<a.length;e++)"string"==typeof rule?h=a[e]:a[e].describe?g.push(a[e].describe()):a[e][1]&&a[e][1].describe&&g.push(a[e][1].describe());return"Property: "+c+", "+h+" \nExpected value: \n - "+g.join("\n - ")},dhtmlx.assert_enabled()&&(dhtmlx.assert_rule_color=function(a){return"string"==typeof a&&(0===a.indexOf("#")&&""===a.substr(1).replace(/[0-9A-F]/gi,""))},dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"},dhtmlx.assert_rule_template=function(a){return"function"==typeof a||"string"==typeof a},dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"},dhtmlx.assert_rule_boolean=function(a){return"boolean"==typeof a},dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"},dhtmlx.assert_rule_object=function(a,c){return"object"==typeof a},dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"},dhtmlx.assert_rule_string=function(a){return"string"==typeof a},dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"},dhtmlx.assert_rule_htmlpt=function(a){return!!dhtmlx.toNode(a)},dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"},dhtmlx.assert_rule_notdocumented=function(a){return!1},dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"},dhtmlx.assert_rule_key=function(c){var a=function(e){return c[e]};return a.describe=function(){var g=[];for(var e in c)g.push(e);return"{String} can take one of next values: "+g.join(", ")},a},dhtmlx.assert_rule_dimension=function(a){return 1*a==a&&!isNaN(a)&&0<=a},dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"},dhtmlx.assert_rule_number=function(a){return"number"==typeof a},dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"},dhtmlx.assert_rule_function=function(a){return"function"==typeof a},dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"},dhtmlx.assert_rule_any=function(a){return!0},dhtmlx.assert_rule_any.describe=function(){return"Any value"},dhtmlx.assert_rule_mix=function(e,c){var g=function(a){return!(!e(a)&&!c(a))};return g.describe=function(){return e.describe()},g}),dhtmlx.codebase="./",dhtmlx.copy=function(c){var a=dhtmlx.copy._function;return a.prototype=c,new a},dhtmlx.copy._function=function(){},dhtmlx.extend=function(c,a){for(var e in a)c[e]=a[e];return dhtmlx.assert_enabled()&&a._assert&&(c._assert(),c._assert=null),dhtmlx.assert(c,"Invalid nesting target"),dhtmlx.assert(a,"Invalid nesting source"),a._init&&c._init(),c},dhtmlx.proto_extend=function(){for(var l=arguments,e=l[0],c=[],h=l.length-1;0<h;h--)for(var g in"function"==typeof l[h]&&(l[h]=l[h].prototype),l[h])"_init"==g?c.push(l[h][g]):e[g]||(e[g]=l[h][g]);l[0]._init&&c.push(l[0]._init),e._init=function(){for(var m=0;m<c.length;m++)c[m].apply(this,arguments)},e.base=l[1];var a=function(m){this._init(m),this._parseSettings&&this._parseSettings(m,this.defaults)};return a.prototype=e,e=l=null,a},dhtmlx.bind=function(c,a){return function(){return c.apply(a,arguments)}},dhtmlx.require=function(a){dhtmlx._modules[a]||(dhtmlx.assert(dhtmlx.ajax,"load module is required"),dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText),dhtmlx._modules[a]=!0)},dhtmlx._modules={},dhtmlx.exec=function(code){window.execScript?window.execScript(code):window.eval(code)},dhtmlx.methodPush=function(a,e,c){return function(){return a[e].apply(a,arguments)}},dhtmlx.isNotDefined=function(c){return void 0===c},dhtmlx.delay=function(g,c,e,a){setTimeout(function(){var h=g.apply(c,e);return g=c=e=null,h},a||1)},dhtmlx.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed},dhtmlx.toNode=function(a){return"string"==typeof a?document.getElementById(a):a},dhtmlx.toArray=function(a){return dhtmlx.extend(a||[],dhtmlx.PowerArray)},dhtmlx.toFunctor=function(str){return"string"==typeof str?eval(str):str},dhtmlx._events={},dhtmlx.event=function(g,e,a,c){g=dhtmlx.toNode(g);var h=dhtmlx.uid();return dhtmlx._events[h]=[g,e,a],c&&(a=dhtmlx.bind(a,c)),g.addEventListener?g.addEventListener(e,a,!1):g.attachEvent&&g.attachEvent("on"+e,a),h},dhtmlx.eventRemove=function(c){if(c){dhtmlx.assert(this._events[c],"Removing non-existing event");var a=dhtmlx._events[c];a[0].removeEventListener?a[0].removeEventListener(a[1],a[2],!1):a[0].detachEvent&&a[0].detachEvent("on"+a[1],a[2]),delete this._events[c]}},dhtmlx.log=function(c,e,a){window.console&&console.log&&(c=c.toLowerCase(),window.console[c]?window.console[c](e||"unknown error"):window.console.log(c+": "+e),a&&window.console.log(a))},dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date,dhtmlx.log("Info","Timing start ["+a+"]"),window.setTimeout(function(){var c=new Date;dhtmlx.log("Info","Timing end ["+a+"]:"+(c.valueOf()-dhtmlx._start_time_log.valueOf())/1e3+"s")},1)},dhtmlx.log_time=function(a){var e="_start_time_log"+a;if(dhtmlx[e]){var c=new Date;dhtmlx.log("Info","Timing end ["+a+"]:"+(c.valueOf()-dhtmlx[e].valueOf())/1e3+"s"),dhtmlx[e]=null}else dhtmlx[e]=new Date,dhtmlx.log("Info","Timing start ["+a+"]")},dhtmlx.error=function(c,a){dhtmlx.log("error",c,a)},dhtmlx.EventSystem={_init:function(){this._events={},this._handlers={},this._map={}},block:function(){this._events._block=!0},unblock:function(){this._events._block=!1},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(e,h){if(this._events._block)return!0;e=e.toLowerCase(),dhtmlx.assert_event_call(this,e,h);var g=this._events[e.toLowerCase()],a=!0;if(dhtmlx.debug&&dhtmlx.log("info","["+this.name+"] event:"+e,h),g)for(var c=0;c<g.length;c++)!1===g[c].apply(this,h||[])&&(a=!1);return this._map[e]&&!this._map[e].callEvent(e,h)&&(a=!1),a},attachEvent:function(c,a,g){c=c.toLowerCase(),dhtmlx.assert_event_attach(this,c),g=g||dhtmlx.uid(),a=dhtmlx.toFunctor(a);var e=this._events[c]||dhtmlx.toArray();return e.push(a),this._events[c]=e,this._handlers[g]={f:a,t:c},g},detachEvent:function(g){if(this._handlers[g]){var c=this._handlers[g].t,a=this._handlers[g].f;this._events[c].remove(a),delete this._handlers[g]}}},dhtmlx.PowerArray={removeAt:function(c,a){0<=c&&this.splice(c,a||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(c,e){if(e||0===e){var a=this.splice(e,this.length-e);this[e]=c,this.push.apply(this,a)}else this.push(c)},find:function(a){for(i=0;i<this.length;i++)if(a==this[i])return i;return-1},each:function(a,e){for(var c=0;c<this.length;c++)a.call(e||this,this[c])},map:function(a,e){for(var c=0;c<this.length;c++)this[c]=a.call(e||this,this[c]);return this}},dhtmlx.env={},-1!=navigator.userAgent.indexOf("Opera")?dhtmlx._isOpera=!0:(dhtmlx._isIE=!!document.all,dhtmlx._isFF=!document.all,dhtmlx._isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),-1!=navigator.appVersion.indexOf("MSIE 8.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=8),-1!=navigator.appVersion.indexOf("MSIE 9.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=9)),dhtmlx.env={},function(){dhtmlx.env.transform=!1,dhtmlx.env.transition=!1;for(var a={names:["transform","transition"],transform:["transform","WebkitTransform","MozTransform","oTransform","msTransform"],transition:["transition","WebkitTransition","MozTransition","oTransition"]},g=document.createElement("DIV"),c=0;c<a.names.length;c++)for(;p=a[a.names[c]].pop();)void 0!==g.style[p]&&(dhtmlx.env[a.names[c]]=!0)}(),dhtmlx.env.transform_prefix=function(){var a;return dhtmlx._isOpera?a="-o-":(a="",dhtmlx._isFF&&(a="-moz-"),dhtmlx._isWebKit&&(a="-webkit-")),a}(),dhtmlx.env.svg=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),dhtmlx.zIndex={drag:1e4},dhtmlx.html={create:function(c,a,e){a=a||{};var g=document.createElement(c);for(var h in a)g.setAttribute(h,a[h]);return a.style&&(g.style.cssText=a.style),a.class&&(g.className=a.class),e&&(g.innerHTML=e),g},getValue:function(a){return(a=dhtmlx.toNode(a))?dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value:""},remove:function(c){if(c instanceof Array)for(var a=0;a<c.length;a++)this.remove(c[a]);else c&&c.parentNode&&c.parentNode.removeChild(c)},insertBefore:function(c,e,a){c&&(e?e.parentNode.insertBefore(c,e):a.appendChild(c))},locate:function(c,h){for(var a=(c=c||event).target||c.srcElement;a;){if(a.getAttribute){var g=a.getAttribute(h);if(g)return g}a=a.parentNode}return null},offset:function(g){if(g.getBoundingClientRect){var m=g.getBoundingClientRect(),n=document.body,c=document.documentElement,a=window.pageYOffset||c.scrollTop||n.scrollTop,h=window.pageXOffset||c.scrollLeft||n.scrollLeft,l=c.clientTop||n.clientTop||0,o=c.clientLeft||n.clientLeft||0,r=m.top+a-l,e=m.left+h-o;return{y:Math.round(r),x:Math.round(e)}}for(r=0,e=0;g;)r+=parseInt(g.offsetTop,10),e+=parseInt(g.offsetLeft,10),g=g.offsetParent;return{y:r,x:e}},pos:function(a){if((a=a||event).pageX||a.pageY)return{x:a.pageX,y:a.pageY};var c=dhtmlx._isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:a.clientX+c.scrollLeft-c.clientLeft,y:a.clientY+c.scrollTop-c.clientTop}},preventEvent:function(a){a&&a.preventDefault&&a.preventDefault(),dhtmlx.html.stopEvent(a)},stopEvent:function(a){return!((a||event).cancelBubble=!0)},addCss:function(c,a){c.className+=" "+a},removeCss:function(c,a){c.className=c.className.replace(RegExp(a,"g"),"")}},function(){var a=document.getElementsByTagName("SCRIPT");dhtmlx.assert(a.length,"Can't locate codebase"),a.length&&((a=(a[a.length-1].getAttribute("src")||"").split("/")).splice(a.length-1,1),dhtmlx.codebase=a.slice(0,a.length).join("/")+"/")}(),dhtmlx.ui||(dhtmlx.ui={}),dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){},this._htmlmap=null,this._htmlrows=null,this._html&&document.body.appendChild(this._html),this._html=null,this._obj&&(this._obj.innerHTML="",this._obj._htmlmap=null),this._obj=this._dataobj=null,this.data=null,this._events=this._handlers={},this.render&&(this.render=function(){})}},dhtmlx.destructors=[],dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var e=0;e<dhtmlx.destructors.length;e++)dhtmlx.destructors[e].destructor();dhtmlx.destructors=[]}for(var c in dhtmlx._events){var g=dhtmlx._events[c];g[0].removeEventListener?g[0].removeEventListener(g[1],g[2],!1):g[0].detachEvent&&g[0].detachEvent("on"+g[1],g[2]),delete dhtmlx._events[c]}}),dhtmlx.ajax=function(a,c,e){if(0!==arguments.length){var g=new dhtmlx.ajax;e&&(g.master=e),g.get(a,null,c)}return this.getXHR?this:new dhtmlx.ajax},dhtmlx.ajax.prototype={getXHR:function(){return dhtmlx._isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(h,o,m){var c=this.getXHR();if("function"==typeof m&&(m=[m]),"object"==typeof o){var l=[];for(var e in o){var n=o[e];null!==n&&n!==dhtmlx.undefined||(n=""),l.push(e+"="+encodeURIComponent(n))}o=l.join("&")}o&&!this.post&&(h=h+(-1!=h.indexOf("?")?"&":"?")+o,o=null),c.open(this.post?"POST":"GET",h,!this._sync),this.post&&c.setRequestHeader("Content-type","application/x-www-form-urlencoded");var g=this;return c.onreadystatechange=function(){if(!c.readyState||4==c.readyState){if(m&&g)for(var a=0;a<m.length;a++)m[a]&&m[a].call(g.master||g,c.responseText,c.responseXML,c);g.master=null,m=g=null}},c.send(o||null),c},get:function(a,e,c){return this.post=!1,this.send(a,e,c)},post:function(a,e,c){return this.post=!0,this.send(a,e,c)},sync:function(){return this._sync=!0,this}},dhtmlx.AtomDataLoader={_init:function(a){this.data={},a&&(this._settings.datatype=a.datatype||"json",this._after_init.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0,this._settings.url&&this.url_setter(this._settings.url),this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(a){return this._ready_for_data&&this.load(a,this._settings.datatype),a},data_setter:function(a){return this._ready_for_data?(this.parse(a,this._settings.datatype),!0):a},load:function(a,c){this.callEvent("onXLS",[]),"string"==typeof c?(this.data.driver=dhtmlx.DataDriver[c],c=arguments[2]):this.data.driver=dhtmlx.DataDriver[this._settings.datatype||"xml"],window.dhx4?dhx4.ajax.get(a,dhtmlx.bind(function(g){var e=g.xmlDoc,l=e.responseText,h=e.responseXML;this._onLoad&&this._onLoad.call(this,l,h,e),c&&c.call(this,l,h,e)},this)):dhtmlx.ajax(a,[this._onLoad,c],this)},parse:function(c,a){this.callEvent("onXLS",[]),this.data.driver=dhtmlx.DataDriver[a||"xml"],this._onLoad(c,null)},_onLoad:function(h,c,a){var e=this.data.driver,g=e.getRecords(e.toObject(h,c))[0];this.data=e?e.getDetails(g):h,this.callEvent("onXLE",[])},_check_data_feed:function(c){if(!this._settings.dataFeed||this._ignore_feed||!c)return!0;var a=this._settings.dataFeed;return"function"==typeof a?a.call(this,c.id||c,c):(a=a+(-1==a.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(c.id||c),this.callEvent("onXLS",[]),dhtmlx.ajax(a,function(g,e){this._ignore_feed=!0,this.setValues(dhtmlx.DataDriver.json.toObject(g)[0]),this._ignore_feed=!1,this.callEvent("onXLE",[])},this),!1)}},dhtmlx.DataDriver={},dhtmlx.DataDriver.json={toObject:function(data){return data||(data="[]"),"string"==typeof data?(eval("dhtmlx.temp="+data),dhtmlx.temp):data},getRecords:function(a){return a&&a.data&&(a=a.data),!a||a instanceof Array?a:[a]},getDetails:function(a){return a},getInfo:function(a){return{_size:a.total_count||0,_from:a.pos||0,_key:a.dhx_security}}},dhtmlx.DataDriver.json_ext={toObject:function(data){if(data||(data="[]"),"string"==typeof data){var temp;eval("temp="+data),dhtmlx.temp=[];for(var header=temp.header,i=0;i<temp.data.length;i++){for(var item={},j=0;j<header.length;j++)void 0!==temp.data[i][j]&&(item[header[j]]=temp.data[i][j]);dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(a){return!a||a instanceof Array?a:[a]},getDetails:function(a){return a},getInfo:function(a){return{_size:a.total_count||0,_from:a.pos||0}}},dhtmlx.DataDriver.html={toObject:function(c){if("string"==typeof c){var a=null;return-1==c.indexOf("<")&&(a=dhtmlx.toNode(c)),a||((a=document.createElement("DIV")).innerHTML=c),a.getElementsByTagName(this.tag)}return c},getRecords:function(a){return a.tagName?a.childNodes:a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:"LI"},dhtmlx.DataDriver.jsarray={toObject:function(data){return"string"==typeof data?(eval("dhtmlx.temp="+data),dhtmlx.temp):data},getRecords:function(a){return a},getDetails:function(e){for(var a={},c=0;c<e.length;c++)a["data"+c]=e[c];return a},getInfo:function(a){return{_size:0,_from:0}}},dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(e){e=this.stringToArray(e);for(var a={},c=0;c<e.length;c++)a["data"+c]=e[c];return a},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(c){c=c.split(this.cell);for(var a=0;a<c.length;a++)c[a]=c[a].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return c},row:"\n",cell:","},dhtmlx.DataDriver.xml={toObject:function(c,a){return a&&(a=this.checkResponse(c,a))?a:"string"==typeof c?this.fromString(c):c},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:a.documentElement.getAttribute("total_count")||0,_from:a.documentElement.getAttribute("pos")||0,_key:a.documentElement.getAttribute("dhx_security")}},xpath:function(h,r){if(window.XPathResult){var g=h;-1==h.nodeName.indexOf("document")&&(h=h.ownerDocument);for(var n=[],c=h.evaluate(r,g,null,XPathResult.ANY_TYPE,null),o=c.iterateNext();o;)n.push(o),o=c.iterateNext();return n}var m=!0;try{void 0===h.selectNodes&&(m=!1)}catch(l){}if(m)return h.selectNodes(r);var a=r.split("/").pop();return h.getElementsByTagName(a)},tagToObject:function(e,o){o=o||{};for(var h=!1,c=e.childNodes,m=0;m<c.length;m++)if(1==c[m].nodeType){var l=c[m].tagName;void 0!==o[l]?(o[l]instanceof Array||(o[l]=[o[l]]),o[l].push(this.tagToObject(c[m],{}))):o[c[m].tagName]=this.tagToObject(c[m],{}),h=!0}var g=e.attributes;if(g&&g.length){for(m=0;m<g.length;m++)o[g[m].name]=g[m].value;h=!0}return h?(o.value=this.nodeValue(e),o):this.nodeValue(e)},nodeValue:function(a){return a.firstChild?a.firstChild.wholeText||a.firstChild.data:""},fromString:function(c){if(window.DOMParser&&!dhtmlx._isIE)return(new DOMParser).parseFromString(c,"text/xml");if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.xmlDOM");return a.loadXML(c),a}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(g,e){if(e&&e.firstChild&&"parsererror"!=e.firstChild.tagName)return e;var c=this.fromString(g.replace(/^[\s]+/,""));if(c)return c;dhtmlx.error("xml can't be parsed",g)}},dhtmlx.DataLoader={_init:function(a){a=a||"",this.name="DataStore",this.data=a.datastore||new dhtmlx.DataStore,this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(a,c){dhtmlx.AtomDataLoader.load.apply(this,arguments),this.data.feed||(this.data.feed=function(g,e){if(this._load_count)return this._load_count=[g,e];this._load_count=!0,this.load(a+(-1==a.indexOf("?")?"?":"&")+"posStart="+g+"&count="+e,function(){var h=this._load_count;this._load_count=!1,"object"==typeof h&&this.data.feed.apply(this,h)})})},_onLoad:function(e,c,a){this.data._parse(this.data.driver.toObject(e,c)),this.callEvent("onXLE",[]),this._readyHandler&&(this.data.detachEvent(this._readyHandler),this._readyHandler=null)},dataFeed_setter:function(a){return this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(m,l){if(this._settings.dataFeed){var h={};if(!m&&!h)return;if("function"==typeof m){if(!l)return;m(l,h)}else h={text:l};this.clearAll();var c=this._settings.dataFeed;if("function"==typeof c)return c.call(this,l,h);var g=[];for(var e in h)g.push("dhx_filter["+e+"]="+encodeURIComponent(h[e]));return this.load(c+(c.indexOf("?")<0?"?":"&")+g.join("&"),this._settings.datatype),!1}},this)),a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);a&&a.call&&a.apply(this,arguments)}}},dhtmlx.DataStore=function(){this.name="DataStore",dhtmlx.extend(this,dhtmlx.EventSystem),this.setDriver("xml"),this.pull={},this.order=dhtmlx.toArray()},dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],"incorrect DataDriver"),this.driver=dhtmlx.DataDriver[a]},_parse:function(h){this.callEvent("onParse",[this.driver,h]),this._filter_order&&this.filter();var l=this.driver.getInfo(h);l._key&&(dhtmlx.security_key=l._key);var g=this.driver.getRecords(h),n=1*(l._from||0);0===n&&this.order[0]&&(n=this.order.length);for(var c=0,e=0;e<g.length;e++){var a=this.driver.getDetails(g[e]),m=this.id(a);this.pull[m]||(this.order[c+n]=m,c++),this.pull[m]=a,this.extraParser&&this.extraParser(a),this._scheme&&(this._scheme.$init?this._scheme.$update(a):this._scheme.$update&&this._scheme.$update(a))}for(e=0;e<l._size;e++)if(!this.order[e]){a={id:m=dhtmlx.uid(),$template:"loading"};this.pull[m]=a,this.order[e]=m}this.callEvent("onStoreLoad",[this.driver,h]),this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(c,a){dhtmlx.assert(this.pull[c],"Can't change id, for non existing item: "+c),this.pull[a]=this.pull[c],this.pull[a].id=a,this.order[this.order.find(c)]=a,this._filter_order&&(this._filter_order[this._filter_order.find(c)]=a),this.callEvent("onIdChange",[c,a]),this._render_change_id&&this._render_change_id(c,a)},get:function(a){return this.item(a)},set:function(c,a){return this.update(c,a)},item:function(a){return this.pull[a]},update:function(c,a){if(this._scheme&&this._scheme.$update&&this._scheme.$update(a),!1===this.callEvent("onBeforeUpdate",[c,a]))return!1;this.pull[c]=a,this.refresh(c)},refresh:function(a){this._skip_refresh||(a?this.callEvent("onStoreUpdated",[a,this.pull[a],"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a){this._skip_refresh=!0,a.call(this),this._skip_refresh=!1},getRange:function(g,e){if(g=g?this.indexById(g):this.startOffset||0,e?e=this.indexById(e):(e=Math.min(this.endOffset||1/0,this.dataCount()-1))<0&&(e=0),this.min&&(g=this.min),this.max&&(e=this.max),e<g){var c=e;e=g,g=c}return this.getIndexRange(g,e)},getIndexRange:function(g,e){e=Math.min(e||1/0,this.dataCount()-1);for(var a=dhtmlx.toArray(),c=g||0;c<=e;c++)a.push(this.item(this.order[c]));return a},dataCount:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,g){if(a<0||g<0)dhtmlx.error("DataStore::move","Incorrect indexes");else{var e=this.idByIndex(a),c=this.item(e);this.order.removeAt(a),this.order.insertAt(e,Math.min(this.order.length,g)),this.callEvent("onStoreUpdated",[e,c,"move"])}},scheme:function(a){this._scheme=a},sync:function(h,g,a){"function"!=typeof g&&(a=g,g=null),dhtmlx.debug_bind&&(this.debug_sync_master=h,dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id));var e=h;"DataStore"!=h.name&&(h=h.data);var c=dhtmlx.bind(function(n,l,m){("update"!=m||g)&&(n=null),n||(this.order=dhtmlx.toArray([].concat(h.order)),this._filter_order=null,this.pull=h.pull,g&&this.silent(g),this._on_sync&&this._on_sync()),dhtmlx.debug_bind&&dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id),a?a=!1:this.refresh(n)},this);h.attachEvent("onStoreUpdated",c),this.feed=function(m,l){e.loadNext(l,m)},c()},add:function(h,a){if(this._scheme){for(var c in h=h||{},this._scheme)h[c]=h[c]||this._scheme[c];this._scheme&&(this._scheme.$init?this._scheme.$update(h):this._scheme.$update&&this._scheme.$update(h))}var l=this.id(h),g=this.dataCount();if((dhtmlx.isNotDefined(a)||a<0)&&(a=g),g<a&&(dhtmlx.log("Warning","DataStore:add","Index of out of bounds"),a=Math.min(this.order.length,a)),!1===this.callEvent("onBeforeAdd",[l,h,a]))return!1;if(this.exists(l))return dhtmlx.error("Not unique ID");if(this.pull[l]=h,this.order.insertAt(l,a),this._filter_order){var e=this._filter_order.length;!a&&this.order.length&&(e=0),this._filter_order.insertAt(l,e)}return this.callEvent("onafterAdd",[l,a]),this.callEvent("onStoreUpdated",[l,h,"add"]),l},remove:function(e){if(e instanceof Array)for(var a=0;a<e.length;a++)this.remove(e[a]);else{if(!1===this.callEvent("onBeforeDelete",[e]))return!1;if(!this.exists(e))return dhtmlx.error("Not existing ID",e);var c=this.item(e);this.order.remove(e),this._filter_order&&this._filter_order.remove(e),delete this.pull[e],this.callEvent("onafterdelete",[e]),this.callEvent("onStoreUpdated",[e,c,"delete"])}},clearAll:function(){this.pull={},this.order=dhtmlx.toArray(),this.feed=null,this._filter_order=null,this.callEvent("onClearAll",[]),this.refresh()},idByIndex:function(a){return(a>=this.order.length||a<0)&&dhtmlx.log("Warning","DataStore::idByIndex Incorrect index"),this.order[a]},indexById:function(c){return this.order.find(c)},next:function(c,a){return this.order[this.indexById(c)+(a||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(c,a){return this.order[this.indexById(c)-(a||1)]},sort:function(l,c,a){var e=l;"function"==typeof l?e={as:l,dir:c}:"string"==typeof l&&(e={by:l,dir:c,as:a});var h=[e.by,e.dir,e.as];if(this.callEvent("onbeforesort",h)){if(this.order.length){var m=dhtmlx.sort.create(e),g=this.getRange(this.first(),this.last());g.sort(m),this.order=g.map(function(n){return this.id(n)},this)}this.refresh(),this.callEvent("onaftersort",h)}},filter:function(h,g){if(this.callEvent("onBeforeFilter",[h,g])&&(this._filter_order&&(this.order=this._filter_order,delete this._filter_order),this.order.length)){if(h){var c=h;g=g||"","string"==typeof h&&(h=dhtmlx.Template.fromHTML(h),g=g.toString().toLowerCase(),c=function(n,m){return-1!=h(n).toLowerCase().indexOf(m)});for(var e=dhtmlx.toArray(),a=0;a<this.order.length;a++){var l=this.order[a];c(this.item(l),g)&&e.push(l)}this._filter_order=this.order,this.order=e}this.refresh(),this.callEvent("onAfterFilter",[])}},each:function(e,c){for(var a=0;a<this.order.length;a++)e.call(c||this,this.item(this.order[a]))},provideApi:function(g,c){this.debug_bind_master=g,c&&this.mapEvent({onbeforesort:g,onaftersort:g,onbeforeadd:g,onafteradd:g,onbeforedelete:g,onafterdelete:g,onbeforeupdate:g});for(var e=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"],a=0;a<e.length;a++)g[e[a]]=dhtmlx.methodPush(this,e[a]);dhtmlx.assert_enabled()&&this.assert_event(g)},serialize:function(){for(var e=this.order,a=[],c=0;c<e.length;c++)a.push(this.pull[e[c]]);return a}},dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{int:function(e,c){return(c*=1)<(e*=1)?1:e<c?-1:0},string_strict:function(e,c){return e=e.toString(),(c=c.toString())<e?1:e<c?-1:0},string:function(e,c){return e=e.toString().toLowerCase(),(c=c.toString().toLowerCase())<e?1:e<c?-1:0}},by:function(c,a){return c?("function"!=typeof a&&(a=dhtmlx.sort.as[a||"string"]),c=dhtmlx.Template.fromHTML(c),function(g,e){return a(c(g),c(e))}):a},dir:function(c,a){return"asc"==c?a:function(g,e){return-1*a(g,e)}}},dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(c){var a=(c=c||event).which||c.keyCode;this.callEvent(this._edit_id?"onEditKeyPress":"onKeyPress",[a,c.ctrlKey,c.shiftKey,c])}},dhtmlx.MouseEvents={_init:function(){this.on_click&&(dhtmlx.event(this._obj,"click",this._onClick,this),dhtmlx.event(this._obj,"contextmenu",this._onContext,this)),this.on_dblclick&&dhtmlx.event(this._obj,"dblclick",this._onDblClick,this),this.on_mouse_move&&(dhtmlx.event(this._obj,"mousemove",this._onMouse,this),dhtmlx.event(this._obj,dhtmlx._isIE?"mouseleave":"mouseout",this._onMouse,this))},_onClick:function(a){return this._mouseEvent(a,this.on_click,"ItemClick")},_onDblClick:function(a){return this._mouseEvent(a,this.on_dblclick,"ItemDblClick")},_onContext:function(a){var c=dhtmlx.html.locate(a,this._id);if(c&&!this.callEvent("onBeforeContextMenu",[c,a]))return dhtmlx.html.preventEvent(a)},_onMouse:function(a){dhtmlx._isIE&&(a=document.createEventObject(event)),this._mouse_move_timer&&window.clearTimeout(this._mouse_move_timer),this.callEvent("onMouseMoving",[a]),this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){"mousemove"==a.type?this._onMouseMove(a):this._onMouseOut(a)},this),500)},_onMouseMove:function(a){this._mouseEvent(a,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[a||event])},_onMouseOut:function(a){this.callEvent("onMouseOut",[a||event])},_mouseEvent:function(m,l,c){for(var a=(m=m||event).target||m.srcElement,g="",n=null,h=!1;a&&a.parentNode;){if(!h&&a.getAttribute&&(n=a.getAttribute(this._id))){if(a.getAttribute("userdata")&&this.callEvent("onLocateData",[n,a,m]),!this.callEvent("on"+c,[n,m,a]))return;h=!0}if((g=a.className)&&l[g=(g=g.split(" "))[0]||g[1]])return l[g].call(this,m,n||dhtmlx.html.locate(m,this._id),a);a=a.parentNode}return h}},dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(c,a){return"object"==typeof c?this._parseSeetingColl(c):this._define(c,a)},_define:function(c,a){dhtmlx.assert_settings.call(this,c,a);var e=this[c+"_setter"];return this._settings[c]=e?e.call(this,a):a},_parseSeetingColl:function(e){if(e)for(var c in e)this._define(c,e[c])},_parseSettings:function(e,a){var c=dhtmlx.extend({},a);"object"!=typeof e||e.tagName||dhtmlx.extend(c,e),this._parseSeetingColl(c)},_mergeSettings:function(a,e){for(var c in e)switch(typeof a[c]){case"object":a[c]=this._mergeSettings(a[c]||{},e[c]);break;case"undefined":a[c]=e[c]}return a},_parseContainer:function(c,a,e){"object"!=typeof c||c.tagName||(c=c.container),this._obj=this.$view=dhtmlx.toNode(c),!this._obj&&e&&(this._obj=e(c)),dhtmlx.assert(this._obj,"Incorrect html container"),this._obj.className+=" "+a,this._obj.onselectstart=function(){return!1},this._dataobj=this._obj},_set_type:function(a){if("object"==typeof a)return this.type_setter(a);dhtmlx.assert(this.types,"RenderStack :: Types are not defined"),dhtmlx.assert(this.types[a],"RenderStack :: Inccorect type name",a),this.type=dhtmlx.extend({},this.types[a]),this.customize()},customize:function(a){a&&dhtmlx.extend(this.type,a),this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type)),this.type._item_end=this.template_item_end(this.type),this.render()},type_setter:function(a){return this._set_type("object"==typeof a?dhtmlx.Type.add(this,a):a),a},template_setter:function(a){return this.type_setter({template:a})},css_setter:function(a){return this._obj.className+=" "+a,a}},dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(c){var a=dhtmlx.Template.setter(c),e=this;return function(){return a.apply(e,arguments)}},fromHTML:function(a){return"function"==typeof a?a:this._cache[a]?this._cache[a]:(a='return "'+(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a||"").toString()).replace(/[\r\n]+/g,"\\n")).replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"')).replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"')).replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"')).replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"')).replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"')).replace(/\{obj\}/g,'"+obj+"')).replace(/\{-obj/g,"{obj")).replace(/\{-common/g,"{common"))+'";',this._cache[a]=Function("obj","common",a))}},dhtmlx.Type={add:function(e,c){!e.types&&e.prototype.types&&(e=e.prototype),dhtmlx.assert_enabled()&&this.assert_event(c);var a=c.name||"default";return this._template(c),this._template(c,"edit"),this._template(c,"loading"),e.types[a]=dhtmlx.extend(dhtmlx.extend({},e.types[a]||this._default),c),a},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(e,a){var c=e[a="template"+(a?"_"+a:"")];if(c&&"string"==typeof c){if(-1!=c.indexOf("->"))switch((c=c.split("->"))[0]){case"html":c=dhtmlx.html.getValue(c[1]).replace(/\"/g,'\\"');break;case"http":c=(new dhtmlx.ajax).sync().get(c[1],{uid:(new Date).valueOf()}).responseText}e[a]=dhtmlx.Template.fromHTML(c)}}},dhtmlx.SingleRender={_init:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},render:function(){this.callEvent&&!this.callEvent("onBeforeRender",[this.data])||(this.data&&(this._dataobj.innerHTML=this._toHTML(this.data)),this.callEvent&&this.callEvent("onAfterRender",[]))}},dhtmlx.ui.Tooltip=function(a){this.name="Tooltip",dhtmlx.assert_enabled()&&this._assert(),"string"==typeof a&&(a={template:a}),dhtmlx.extend(this,dhtmlx.Settings),dhtmlx.extend(this,dhtmlx.SingleRender),this._parseSettings(a,{type:"default",dy:0,dx:20}),this._dataobj=this._obj=document.createElement("DIV"),this._obj.className="dhx_tooltip",dhtmlx.html.insertBefore(this._obj,document.body.firstChild)},dhtmlx.ui.Tooltip.prototype={show:function(a,c){this._disabled||(this.data!=a&&(this.data=a,this.render(a)),this._obj.style.top=c.y+this._settings.dy+"px",this._obj.style.left=c.x+this._settings.dx+"px",this._obj.style.display="block")},hide:function(){this.data=null,this._obj.style.display="none"},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},types:{default:dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty},dhtmlx.AutoTooltip={tooltip_setter:function(c){var a=new dhtmlx.ui.Tooltip(c);return this.attachEvent("onMouseMove",function(h,g){a.show(this.get(h),dhtmlx.html.pos(g))}),this.attachEvent("onMouseOut",function(h,g){a.hide()}),this.attachEvent("onMouseMoving",function(h,g){a.hide()}),a}},dhtmlx.compat=function(a,c){dhtmlx.compat[a]&&dhtmlx.compat[a](c)},dhtmlx.attaches||(dhtmlx.attaches={}),dhtmlx.attaches.attachAbstract=function(c,a){var h=document.createElement("DIV");h.id="CustomObject_"+dhtmlx.uid(),h.style.width="100%",h.style.height="100%",h.cmp="grid",document.body.appendChild(h),this.attachObject(h.id),a.container=h.id;var g=this.vs[this.av];g.grid=new window[c](a),g.gridId=h.id,g.gridObj=h,g.grid.setSizes=function(){this.resize?this.resize():this.render()};return this.vs[this._viewRestore()].grid},dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract("dhtmlXDataView",a)},dhtmlx.attaches.attachChart=function(a){return this.attachAbstract("dhtmlXChart",a)},dhtmlx.compat.layout=function(){},dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a)return!1;this._viewSave(this.conf.view),this._viewRestore(a),this._updateIdx(),this._adjustCont(),this.conf.view=a;var c=void 0===this.conf.views_loaded[this.conf.view];return this.conf.views_loaded[this.conf.view]=!0,c},dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view},dhtmlXCellObject.prototype.unloadView=function(g){if(g==this.conf.view){var h=this.conf.unloading;return this.conf.unloading=!0,"function"==typeof this.detachMenu&&this.detachMenu(),"function"==typeof this.detachToolbar&&this.detachToolbar(),"function"==typeof this.detachRibbon&&this.detachRibbon(),this.detachStatusBar(),this._detachObject(null,!0),this.conf.unloading=h,void(this.conf.unloading||this._adjustCont(this._idd))}if(null!=this.views[g]){var e=this.views[g];for(var c in e.dataNodes)"function"==typeof e.dataNodes[c].unload&&e.dataNodes[c].unload(),e.dataNodes[c]=null,e.dataNodesCont[c]=null;"url"==e.dataType?null!=e.cellCont&&"null"!=e.cellCont[0]&&this._detachURLEvents(e.cellCont[0]):null!=e.dataObj&&("function"==typeof e.dataObj.unload?e.dataObj.unload():"function"==typeof e.dataObj.destructor&&e.dataObj.destructor(),e.dataObj=null),e=null,this._viewDelete(g),void 0!==this.conf.views_loaded[g]&&delete this.conf.views_loaded[g]}},dhtmlXCellObject.prototype.getId=function(){return this._idd},dhtmlXCellObject.prototype.progressOn=function(){if(1!=this.conf.progress){this.conf.progress=!0;var c=document.createElement("DIV");c.className=this.conf.idx_data.pr1;var a=document.createElement("DIV");"material"==this.conf.skin&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)?(a.className=this.conf.idx_data.pr3,a.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>'):a.className=this.conf.idx_data.pr2,null!=this.conf.idx.cover?this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cover]):this.cell.appendChild(a),this.cell.insertBefore(c,a),c=a=null,this._updateIdx(),this._adjustProgress()}},dhtmlXCellObject.prototype.progressOff=function(){if(1==this.conf.progress){for(var c in{pr3:3,pr2:2,pr1:1}){var e=this.cell.childNodes[this.conf.idx[c]];null!=e&&e.parentNode.removeChild(e),e=null}this.conf.progress=!1,this._updateIdx()}},dhtmlXCellObject.prototype._adjustProgress=function(){if(null!=this.conf.idx.pr1){this.conf.pr||(this.conf.pr={});var c=this.cell.childNodes[this.conf.idx.pr1],a=this.cell.childNodes[this.conf.idx.pr2]||this.cell.childNodes[this.conf.idx.pr3];this.conf.pr.ofs||(a.style.width=c.offsetWidth+"px",a.style.height=c.offsetHeight+"px",this.conf.pr.ofs={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight}),a.style.width=c.offsetWidth-this.conf.pr.ofs.w+"px",a.style.height=c.offsetHeight-this.conf.pr.ofs.h+"px",c=a=null}},dhtmlXCellObject.prototype._showCellCover=function(){if(1!=this.conf.cover){this.conf.cover=!0;var a=document.createElement("DIV");a.className=this.conf.idx_data.cover,this.cell.appendChild(a),a=null,this._updateIdx()}},dhtmlXCellObject.prototype._hideCellCover=function(){1==this.conf.cover&&(this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]),this._updateIdx(),this.conf.cover=!1)},dhtmlXCellObject.prototype._showBorders=function(a){this.conf.borders||(this.conf.borders=!0,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css,this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!0]),!0!==a&&this._adjustCont(this._idd))},dhtmlXCellObject.prototype._hideBorders=function(a){this.conf.borders&&(this.conf.borders=!1,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders",this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!1]),!0!==a&&this._adjustCont(this._idd))},dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth},dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight},dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"},dhtmlXCellObject.prototype._unload=function(){for(var c in this.conf.unloading=!0,this.callEvent("_onCellUnload",[]),this.progressOff(),this.unloadView(this.conf.view),this.dataNodes=null,this.cell.parentNode.removeChild(this.cell),this.cell=null,window.dhx4._eventable(this,"clear"),this.views)this.unloadView(c);for(var c in this.conf=null,this)this[c]=null},dhtmlXCellObject.prototype.attachObject=function(g,e){if(!window.dhx4.s2b(e)||"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell||(e=!1),"string"==typeof g&&(g=document.getElementById(g)),g.parentNode!=this.cell.childNodes[this.conf.idx.cont]){if(e){g.style.display="";var a=g.offsetWidth,c=g.offsetHeight}this._attachObject(g),this.dataType="obj",g.style.display="",g=null,e&&this._adjustByCont(a,c)}else g=null},dhtmlXCellObject.prototype.appendObject=function(a){"string"==typeof a&&(a=document.getElementById(a)),a.parentNode!=this.cell.childNodes[this.conf.idx.cont]&&(this.conf.append_mode||(this.cell.childNodes[this.conf.idx.cont].style.overflow="auto",this.conf.append_mode=!0),this._attachObject(a,null,null,!0),this.dataType="obj",a.style.display=""),a=null},dhtmlXCellObject.prototype.detachObject=function(c,a){this._detachObject(null,c,a)},dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb},dhtmlXCellObject.prototype.getAttachedObject=function(){return"obj"==this.dataType||"url"==this.dataType||"url-ajax"==this.dataType?this.cell.childNodes[this.conf.idx.cont].firstChild:this.dataObj},dhtmlXCellObject.prototype.attachURL=function(c,u,g){1==g&&(g={});var h=void 0!==g&&0!=g&&null!=g;if(null==this.conf.url_data&&(this.conf.url_data={}),this.conf.url_data.url=c,this.conf.url_data.ajax=1==u,this.conf.url_data.post_data=1==g?{}:g||null,null!=this.conf.url_data.xml_doc){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(n){}this.conf.url_data.xml_doc.xmlDoc=null,this.conf.url_data.xml_doc=null}if(1==u){var s=this;if(h){var l="";for(var r in g)l+="&"+encodeURIComponent(r)+"="+encodeURIComponent(g[r]);this.conf.url_data.xml_doc=dhx4.ajax.post(c,l,function(a){null!=s.attachHTMLString&&"string"==typeof a.xmlDoc.responseText&&(s.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>"),"function"==typeof s._doOnFrameContentLoaded&&s._doOnFrameContentLoaded(),s.dataType="url-ajax"),s=a=null})}else this.conf.url_data.xml_doc=dhx4.ajax.get(c,function(a){null!=s.attachHTMLString&&"string"==typeof a.xmlDoc.responseText&&(s.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>"),"function"==typeof s._doOnFrameContentLoaded&&s._doOnFrameContentLoaded(),s.dataType="url-ajax"),s=a=null})}else{if("url"==this.dataType)var m=this.getFrame();else(m=document.createElement("IFRAME")).frameBorder=0,m.border=0,m.style.width="100%",m.style.height="100%",m.style.position="relative",this._attachObject(m),this.dataType="url",this._attachURLEvents();if(h){var o=void 0===this.conf.url_data.post_ifr;this.conf.url_data.post_ifr=!0,o&&this._attachURLEvents(),m.src="about:blank"}else m.src=c+window.dhx4.ajax._dhxr(c);m=null}m=null},dhtmlXCellObject.prototype.reloadURL=function(){"url"!=this.dataType&&"url-ajax"!=this.dataType||null!=this.conf.url_data&&this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)},dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);for(var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[],i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");s&&(window.execScript?window.execScript(s):window.eval(s))}},dhtmlXCellObject.prototype.attachScheduler=function(a,m,c,g){g=g||window.scheduler;var h=!1;c&&((l=document.getElementById(c))&&(h=!0));if(!h){var l,e=c||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';(l=document.createElement("DIV")).id="dhxSchedObj_"+(new Date).getTime(),l.style.width="100%",l.style.height="100%",l.style.position="relative",l.style.overflow="hidden",l.className="dhx_cal_container",l.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+e+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}return this._attachObject(l),this.dataType="scheduler",this.dataObj=g,this.dataObj.setSizes=function(){this.update_view()},g.init(l.id,a,m),l=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachMap=function(a){var c=document.createElement("DIV");return c.style.width="100%",c.style.height="100%",c.style.position="relative",c.style.overflow="hidden",this._attachObject(c),a||(a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}),this.dataType="maps",this.dataObj=new google.maps.Map(c,a),this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")},c=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype._createNode_sb=function(n,g,m,a,l){if(void 0!==l)n=l;else{var c=g||{},o="string"==typeof c.text&&0<c.text.length?c.text:"&nbsp;",e="number"==typeof c.height&&c.height;(n=document.createElement("DIV")).className="dhx_cell_statusbar_def",n.innerHTML="<div class='"+(1==c.paging?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+o+"</div>",0!=e&&(n.firstChild.style.height=n.firstChild.style.lineHeight=e+"px")}return null!=this.conf.idx.pr1?this.cell.insertBefore(n,this.cell.childNodes[this.conf.idx.pr1]):this.cell.appendChild(n),this.conf.ofs_nodes.b.sb=!0,this._updateIdx(),this._adjustCont(this._idd),n},dhtmlXCellObject.prototype.attachStatusBar=function(a){if(!this.dataNodes.sb)return null!=a&&1==window.dhx4.s2b(a.paging)&&(a.height=null),"dhx_skyblue"==this.conf.skin&&"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"),this.dataNodes.sb=this._attachObject("sb",a),this.dataNodes.sb.setText=function(c){this.childNodes[0].innerHTML=c},this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sb.onselectstart=function(c){return!1},this.dataNodes.sb},dhtmlXCellObject.prototype.detachStatusBar=function(){this.dataNodes.sb&&("dhx_skyblue"==this.conf.skin&&"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")),this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null,this.dataNodes.sb=null,delete this.dataNodes.sb,this._detachObject("sb"))},dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")},dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")},dhtmlXCellObject.prototype._mtbShowHide=function(c,a){this.dataNodes[c]&&(this.cell.childNodes[this.conf.idx[c]].style.display=a,this._adjustCont())},dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){return"url"!=this.dataType?null:this.cell.childNodes[this.conf.idx.cont].firstChild},dhtmlXCellObject.prototype._attachURLEvents=function(){if("url"==this.dataType){var e=this,c=this._idd,a=this.cell.childNodes[this.conf.idx.cont].firstChild;"function"!=typeof this._doOnFrameMouseDown&&(this._doOnFrameMouseDown=function(g){e.callEvent("_onContentMouseDown",[c,g||event])}),"function"==typeof window.addEventListener?a.onload=function(){try{"function"==typeof e._doOnFrameMouseDown&&this.contentWindow.document.body.addEventListener("mousedown",e._doOnFrameMouseDown,!1)}catch(g){}try{"function"==typeof e._doOnFrameContentLoaded&&e._doOnFrameContentLoaded()}catch(g){}}:a.onreadystatechange=function(g){if("complete"==this.readyState){try{"function"==typeof e._doOnFrameMouseDown&&this.contentWindow.document.body.attachEvent("onmousedown",e._doOnFrameMouseDown)}catch(h){}try{"function"==typeof e._doOnFrameContentLoaded&&e._doOnFrameContentLoaded()}catch(h){}}}}},dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(1==this.conf.url_data.post_ifr){var l=this.getFrame().contentWindow.document,h=l.createElement("FORM");h.method="POST",h.action=this.conf.url_data.url,l.body.appendChild(h);var e={};for(var c in 1!=window.dhx4.ajax.cache&&(e["dhxr"+(new Date).getTime()]="1"),this.conf.url_data.post_data)e[c]=this.conf.url_data.post_data[c];for(var c in e){var g=l.createElement("INPUT");g.type="hidden",g.name=c,g.value=e[c],h.appendChild(g),g=null}this.conf.url_data.post_ifr=!1,h.submit()}else this.callEvent("_onContentLoaded",[this._idd])},dhtmlXCellObject.prototype._detachURLEvents=function(a){if(null==a){if("url"!=this.dataType)return;a=this.cell.childNodes[this.conf.idx.cont].firstChild}if("function"==typeof window.addEventListener){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,!1)}catch(c){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(c){}}a=null},dhtmlXCellObject.prototype._attachObject=function(h,c,g,a,e){if("string"==typeof h&&1=={menu:1,toolbar:1,ribbon:1,sb:1}[h])return this["_createNode_"+h].apply(this,arguments);1!=a&&this._detachObject(null,!0,null),"string"==typeof g?this.cell.childNodes[this.conf.idx.cont].innerHTML=g:this.cell.childNodes[this.conf.idx.cont].appendChild(h),h=null},dhtmlXCellObject.prototype._detachObject=function(m,c,a){if(this.callEvent("_onBeforeContentDetach",[]),"menu"==m||"toolbar"==m||"ribbon"==m||"sb"==m)return(l=this.cell.childNodes[this.conf.idx[m]]).parentNode.removeChild(l),l=null,this.conf.ofs_nodes["sb"==m?"b":"t"][m]=!1,this._updateIdx(),void(this.conf.unloading||this._adjustCont(this._idd));if(1==c?a=!1:void 0===a?a=document.body:"string"==typeof a&&(a=document.getElementById(a)),!1===a){if(1==this.conf.unloading&&null!=String(this.dataType).match(/ajax/)&&null!=this.conf.url_data&&null!=this.conf.url_data.xml_doc){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(h){}this.conf.url_data.xml_doc.xmlDoc=null,this.conf.url_data.xml_doc=null}"url"==this.dataType?this._detachURLEvents():null!=this.dataObj&&("function"==typeof this.dataObj.unload?this.dataObj.unload():"function"==typeof this.dataObj.destructor&&this.dataObj.destructor())}for(var l=this.cell.childNodes[this.conf.idx.cont];0<l.childNodes.length;)!1===a?l.removeChild(l.lastChild):(l.firstChild.style.display="none",a.appendChild(l.firstChild));this.conf.append_mode&&(l.style.overflow="",this.conf.append_mode=!1);var g="tabbar"==this.dataType;this.dataObj=null,a=l=this.dataType=null,1!=this.conf.unloading&&g&&(this.showHeader(!0),this._showBorders())},dhtmlXCellObject.prototype._attachFromCell=function(c){this.detachObject(!0);var g="layout";for(var e in"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(g="window"),"function"==typeof window.dhtmlXWindowsCell&&c instanceof window.dhtmlXWindowsCell&&1==c.wins.w[c._idd].conf.parked&&c.wins._winCellSetOpacity(c._idd,"open",!1),"function"==typeof window.dhtmlXAccordionCell&&c instanceof window.dhtmlXAccordionCell&&0==c.conf.opened&&c._cellSetOpacity("open",!1),c.dataNodes)this._attachObject(e,null,null,null,c.cell.childNodes[c.conf.idx[e]]),this.dataNodes[e]=c.dataNodes[e],c.dataNodes[e]=null,c.conf.ofs_nodes["sb"==e?"b":"t"][e]=!1,c._updateIdx();if(this._mtbUpdBorder(),null!=c.dataType&&null!=c.dataObj){for(this.dataType=c.dataType,this.dataObj=c.dataObj;0<c.cell.childNodes[c.conf.idx.cont].childNodes.length;)this.cell.childNodes[this.conf.idx.cont].appendChild(c.cell.childNodes[c.conf.idx.cont].firstChild);c.dataType=null,c.dataObj=null,"grid"==this.dataType&&("window"==g&&"dhx_skyblue"==this.conf.skin?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2))}else for(;0<c.cell.childNodes[c.conf.idx.cont].childNodes.length;)this.cell.childNodes[this.conf.idx.cont].appendChild(c.cell.childNodes[c.conf.idx.cont].firstChild);for(var e in this.conf.view=c.conf.view,c.conf.view="def",c.views)this.views[e]=c.views[e],c.views[e]=null,delete c.views[e];c._updateIdx(),c._adjustCont(),this._updateIdx(),this._adjustCont(),1==c.conf.progress?(c.progressOff(),this.progressOn()):this.progressOff(),"window"==g&&this.wins.w[this._idd].conf.parked&&this.wins._winCellSetOpacity(this._idd,"close",!1)},dhtmlXCellTop.prototype.setOffsets=function(l,h){var g=!1;for(var c in l){var e=c.charAt(0);void 0===this.conf.ofs[e]||isNaN(l[c])||(this.conf.ofs[e]=parseInt(l[c]),g=!0)}!1!==h&&"function"==typeof this.setSizes&&1==g&&this.setSizes()},dhtmlXCellTop.prototype.attachMenu=function(a){if(null==this.dataNodes.menu)return this.dataNodes.menuObj=document.createElement("DIV"),this.dataNodes.menuObj.className="dhxcelltop_menu",this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont),"object"==typeof a&&null!=a||(a={}),a.skin=this.conf.skin,a.parent=this.dataNodes.menuObj,this.dataNodes.menu=new dhtmlXMenuObject(a),this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.menuObj.style.display&&(null==this.conf.ofs_menu&&(this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.conf.ofs_menu={w:this.dataNodes.menuObj.offsetWidth-parseInt(this.dataNodes.menuObj.style.width)}),this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px",this.dataNodes.menuObj.style.marginTop=(null!=this.dataNodes.haObj?0:this.conf.ofs.t)+"px",this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r-this.conf.ofs_menu.w+"px")}),this.conf.ofs_nodes.t.menuObj=!0,this.setSizes(),a.parnt=null,a=null,this.dataNodes.menu},dhtmlXCellTop.prototype.detachMenu=function(){null!=this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj),this.dataNodes.menuObj=null,this.detachEvent(this.dataNodes.menuEv),this.dataNodes.menuEv=null,delete this.dataNodes.menu,delete this.dataNodes.menuObj,delete this.dataNodes.menuEv,this.conf.ofs_nodes.t.menuObj=!1,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.attachToolbar=function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar)return this.dataNodes.toolbarObj=document.createElement("DIV"),this.dataNodes.toolbarObj.className="dhxcelltop_toolbar",this.base.insertBefore(this.dataNodes.toolbarObj,this.cont),this.dataNodes.toolbarObj.appendChild(document.createElement("DIV")),"object"==typeof a&&null!=a||(a={}),a.skin=this.conf.skin,a.parent=this.dataNodes.toolbarObj.firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(a),this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.toolbarObj.style.display&&(this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px",this.dataNodes.toolbarObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),(this.dataNodes.toolbar._masterCell=this).dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()}),this.conf.ofs_nodes.t.toolbarObj=!0,this.setSizes(),a.parnt=null,a=null,this.dataNodes.toolbar},dhtmlXCellTop.prototype.detachToolbar=function(){null!=this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj),this.dataNodes.toolbarObj=null,this.detachEvent(this.dataNodes.toolbarEv),this.dataNodes.toolbarEv=null,this.conf.ofs_nodes.t.toolbarObj=!1,delete this.dataNodes.toolbar,delete this.dataNodes.toolbarObj,delete this.dataNodes.toolbarEv,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.attachRibbon=function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.dataNodes.ribbonObj=document.createElement("DIV"),this.dataNodes.ribbonObj.className="dhxcelltop_ribbon",this.base.insertBefore(this.dataNodes.ribbonObj,this.cont),this.dataNodes.ribbonObj.appendChild(document.createElement("DIV")),"object"==typeof a&&null!=a||(a={}),a.skin=this.conf.skin,a.parent=this.dataNodes.ribbonObj.firstChild,this.dataNodes.ribbon=new dhtmlXRibbon(a),this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.ribbonObj.style.display&&(this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px",this.dataNodes.ribbonObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.dataNodes.ribbon.setSizes())}),this.conf.ofs_nodes.t.ribbonObj=!0;var c=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){c.setSizes()}),this.setSizes(),a.parnt=null,a=null,this.dataNodes.ribbon}},dhtmlXCellTop.prototype.detachRibbon=function(){null!=this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj),this.dataNodes.ribbonObj=null,this.detachEvent(this.dataNodes.ribbonEv),this.dataNodes.ribbonEv=null,this.conf.ofs_nodes.t.ribbonObj=!1,delete this.dataNodes.ribbon,delete this.dataNodes.ribbonObj,delete this.dataNodes.ribbonEv,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.attachStatusBar=function(a){if(!this.dataNodes.sbObj)return void 0===a&&(a={}),this.dataNodes.sbObj=document.createElement("DIV"),this.dataNodes.sbObj.className="dhxcelltop_statusbar",null!=this.cont.nextSibling?this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling):this.base.appendChild(this.dataNodes.sbObj),this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+("string"==typeof a.text&&0<a.text.length?a.text:"&nbsp;")+"</div>","number"==typeof a.height&&(this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+"px"),this.dataNodes.sbObj.setText=function(c){this.childNodes[0].innerHTML=c},this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sbObj.onselectstart=function(c){return!1},this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.sbObj.style.display&&(this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px",this.dataNodes.sbObj.style.bottom=(null!=this.dataNodes.faObj?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px",this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.conf.ofs_nodes.b.sbObj=!0,this.setSizes(),this.dataNodes.sbObj},dhtmlXCellTop.prototype.detachStatusBar=function(){this.dataNodes.sbObj&&(this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null,this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj),this.dataNodes.sbObj=null,this.detachEvent(this.dataNodes.sbEv),this.dataNodes.sbEv=null,this.conf.ofs_nodes.b.sbObj=!1,delete this.dataNodes.sb,delete this.dataNodes.sbObj,delete this.dataNodes.sbEv,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")},dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")},dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")},dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")},dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")},dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")},dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")},dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")},dhtmlXCellTop.prototype._mtbShowHide=function(c,a){null!=this.dataNodes[c]&&(this.dataNodes[c].style.display=a,this.setSizes())},dhtmlXCellTop.prototype._mtbUnload=function(c,a){this.detachMenu(),this.detachToolbar(),this.detachStatusBar(),this.detachRibbon()},dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu},dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar},dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon},dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj},dhtmlXCellTop.prototype.progressOn=function(){if(!this.conf.progress){this.conf.progress=!0;var c=document.createElement("DIV");c.className="dhxcelltop_progress",this.base.appendChild(c);var a=document.createElement("DIV");if("material"==this.conf.skin&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge))a.className="dhxcelltop_progress_svg",a.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>';else(a=document.createElement("DIV")).className="dhxcelltop_progress_img";this.base.appendChild(a),c=a=null}},dhtmlXCellTop.prototype.progressOff=function(){if(this.conf.progress){for(var g={dhxcelltop_progress:!0,dhxcelltop_progress_img:!0,dhxcelltop_progress_svg:!0},e=0;e<this.base.childNodes.length;e++)void 0!==this.base.childNodes[e].className&&1==g[this.base.childNodes[e].className]&&(g[this.base.childNodes[e].className]=this.base.childNodes[e]);for(var c in g)1!=g[c]&&this.base.removeChild(g[c]),g[c]=null;this.conf.progress=!1,g=null}},dhtmlXCellTop.prototype.attachHeader=function(c,a){null==this.dataNodes.haObj&&("object"!=typeof c&&(c=document.getElementById(c)),this.dataNodes.haObj=document.createElement("DIV"),this.dataNodes.haObj.className="dhxcelltop_hdr",this.dataNodes.haObj.style.height=(a||c.offsetHeight)+"px",this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont),this.dataNodes.haObj.appendChild(c),c.style.visibility="visible",c=null,this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px",this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px",this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.conf.ofs_nodes.t.haObj=!0,this.setSizes())},dhtmlXCellTop.prototype.detachHeader=function(){if(this.dataNodes.haObj){for(;0<this.dataNodes.haObj.childNodes.length;)this.dataNodes.haObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.haObj.lastChild);this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj),this.dataNodes.haObj=null,this.detachEvent(this.dataNodes.haEv),this.dataNodes.haEv=null,this.conf.ofs_nodes.t.haObj=!1,delete this.dataNodes.haEv,delete this.dataNodes.haObj,this.conf.unloading||this.setSizes()}},dhtmlXCellTop.prototype.attachFooter=function(e,a){if(null==this.dataNodes.faObj){"object"!=typeof e&&(e=document.getElementById(e)),this.dataNodes.faObj=document.createElement("DIV"),this.dataNodes.faObj.className="dhxcelltop_ftr",this.dataNodes.faObj.style.height=(a||e.offsetHeight)+"px";var c=this.dataNodes.sbObj||this.cont;this.base.lastChild==c?this.base.appendChild(this.dataNodes.faObj):this.base.insertBefore(this.dataNodes.faObj,c.nextSibling),this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px",this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px",this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.dataNodes.faObj.appendChild(e),e.style.visibility="visible",c=e=null,this.conf.ofs_nodes.b.faObj=!0,this.setSizes()}},dhtmlXCellTop.prototype.detachFooter=function(){if(this.dataNodes.faObj){for(;0<this.dataNodes.faObj.childNodes.length;)this.dataNodes.faObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.faObj.lastChild);this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj),this.dataNodes.faObj=null,this.detachEvent(this.dataNodes.faEv),this.dataNodes.faEv=null,this.conf.ofs_nodes.b.faObj=!1,delete this.dataNodes.faEv,delete this.dataNodes.faObj,this.conf.unloading||this.setSizes()}},dhtmlXCalendarObject.prototype.lang="en",dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w",today:"Today",clear:"Clear"}},dhtmlXCalendarObject.prototype._buildMonthHdr=function(h){var c=this,g=function(l){return 1==String(l).length?"0"+String(l):l},a=function(l,m){return"<span class='dhtmlxcalendar_month_label_"+l+"'>"+m+"</span>"},e=String(this.langData[this.lang].hdrformat||"%F %Y").replace(/%[a-z]/gi,function(l){switch(l){case"%m":return a("month",g(h.getMonth()+1));case"%n":return a("month",h.getMonth()+1);case"%M":return a("month",c.langData[c.lang].monthesSNames[h.getMonth()]);case"%F":return a("month",c.langData[c.lang].monthesFNames[h.getMonth()]);case"%y":return a("year",g(h.getYear()%100));case"%Y":return a("year",h.getFullYear());case"%%":return"%";default:return l}});return c=g=a=null,e},dhtmlXCalendarObject.prototype.enableIframe=function(a){1==a?this._ifr||(this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcalendar_ifr",this._ifr.onload=function(){this.onload=null,this.contentWindow.document.open("text/html","replace"),this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")},this.base.parentNode.insertBefore(this._ifr,this.base),this._ifrSize()):this._ifr&&(this._ifr.parentNode.removeChild(this._ifr),this._ifr=null)},dhtmlXCalendarObject.prototype._ifrSize=function(){this._ifr&&(this._ifr.style.left=this.base.style.left,this._ifr.style.top=this.base.style.top,this._ifr.style.width=this.base.offsetWidth+"px",this._ifr.style.height=this.base.offsetHeight+"px")},dhtmlxCalendarObject=dhtmlXCalendarObject,dhtmlXCalendarObject.prototype._dateStrings=function(){var a=this.langData[this.lang];return{monthFullName:a.monthesFNames,monthShortName:a.monthesSNames,dayFullName:a.daysFNames,dayShortName:a.daysSNames}},dhtmlXCalendarObject.prototype._strToDate=function(c,a){return window.dhx4.str2date(c,a||this._dateFormat,this._dateStrings())},dhtmlXCalendarObject.prototype._dateToStr=function(c,a){return window.dhx4.date2str(c,a||this._dateFormat,this._dateStrings())},window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(c){var a=this;return this.leftCalendar=new dhtmlXCalendarObject(c),this.leftCalendar.hideTime(),this.rightCalendar=new dhtmlXCalendarObject(c),this.rightCalendar.hideTime(),this.leftCalendar.attachEvent("onClick",function(e){a._updateRange("rightCalendar",e,null),a._evOnClick(["left",e])}),this.rightCalendar.attachEvent("onClick",function(e){a._updateRange("leftCalendar",null,e),a._evOnClick(["right",e])}),this.leftCalendar.attachEvent("onBeforeChange",function(e){return a._evOnBeforeChange(["left",e])}),this.rightCalendar.attachEvent("onBeforeChange",function(e){return a._evOnBeforeChange(["right",e])}),this.show=function(){this.leftCalendar.show(),this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px",this.rightCalendar.show()},this.hide=function(){this.leftCalendar.hide(),this.rightCalendar.hide()},this.setDateFormat=function(e){this.leftCalendar.setDateFormat(e),this.rightCalendar.setDateFormat(e)},this.setDates=function(g,e){null!=g&&this.leftCalendar.setDate(g),null!=e&&this.rightCalendar.setDate(e),this._updateRange()},this._updateRange=function(e,h,g){3==arguments.length?("leftCalendar"==e?this.leftCalendar:this.rightCalendar).setSensitiveRange(h,g):(this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate()),this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null))},this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)},this.unload=function(){window.dhx4._eventable(this,"clear"),this.leftCalendar.unload(),this.rightCalendar.unload(),this.leftCalendar=this.rightCalendar=null,this._updateRange=null,this._evOnClick=null,this._evOnBeforeChange=null,this.show=null,this.hide=null,this.setDateFormat=null,this.setDates=null,this.getFormatedDate=null,this.unload=null,a=null},this._evOnClick=function(e){return this.callEvent("onClick",e)},this._evOnBeforeChange=function(e){return this.callEvent("onBeforeChange",e)},window.dhx4._eventable(this),this},dhtmlXCombo.prototype.setName=function(a){this.conf.form_name=a,this.base.childNodes[1].name=a,this.base.childNodes[2].name=a.replace(/(\[.*)?$/,"_new_value$1")},dhtmlXCombo.prototype.readonly=function(a){window.dhx4.s2b(a)?(this.base.firstChild.setAttribute("readOnly","true"),this.conf.ro_mode=!0):(this.base.firstChild.removeAttribute("readOnly"),this.conf.ro_mode=!1)},dhtmlXCombo.prototype.setPlaceholder=function(a){void 0!==a&&null!=a||(a=""),this.base.firstChild.setAttribute("placeholder",String(a))},dhtmlXCombo.prototype.setTemplate=function(e){for(var c in e)void 0!==this.conf.template[c]&&(this.conf.template[c]="header"==c?window.dhx4.s2b(e[c]):String(e[c]));for(var c in null!=e.columns?this._mcMakeTemplate(e.columns):this._mcDetachHeader(),this.t)this.t[c].obj.setText(this.t[c].item,this.t[c].item._conf.text);this._confirmSelect()},dhtmlXCombo.prototype.setSkin=function(a){a!=this.conf.skin&&(this.conf.skin=a,this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled"),this.list.className="dhxcombolist_"+this.conf.skin+(null!=this.hdr?" dhxcombolist_multicolumn":""),null!=this.hdr&&(this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"),this.conf.i_ofs="material"==a?26:23,this._adjustBase())},dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild},dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]},dhtmlXCombo.prototype.getList=function(){return this.list},dhtmlXCombo.prototype.getBase=function(){return this.base},dhtmlXCombo.prototype.getParent=function(){return this.DOMParent},dhtmlXCombo.prototype.forEachOption=function(a){for(var c=0;c<this.list.childNodes.length;c++)a.apply(window,[this._getOption(this.list.childNodes[c]._optId,c)])},dhtmlXCombo.prototype.setFocus=function(){this.conf.enabled&&this.base.firstChild.focus()},dhtmlXCombo.prototype.setFontSize=function(a,c){null!=a&&(this.base.firstChild.style.fontSize=a),null!=c&&(this.list.style.fontSize=c)},dhtmlXCombo.prototype.getOption=function(h){for(var l=null,e=null,g=0;g<this.list.childNodes.length;g++)if(null==l){var c=this.list.childNodes[g]._optId;this.t[c].obj.getValue(this.t[c].item)==h&&(l=c,e=g)}return null==l?null:this._getOption(l,e)},dhtmlXCombo.prototype.getOptionByIndex=function(a){return a<0?null:null==this.list.childNodes[a]?null:this._getOption(this.list.childNodes[a]._optId,a)},dhtmlXCombo.prototype.getOptionByLabel=function(h){for(var l=null,e=null,g=0;g<this.list.childNodes.length;g++)if(null==l){var c=this.list.childNodes[g]._optId;this.t[c].obj.getText(this.t[c].item,!0)==h&&(l=c,e=g)}return null==l?null:this._getOption(l,e)},dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)},dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")},dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.temp_selected||this.conf.last_selected,"value",null)},dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value},dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value},dhtmlXCombo.prototype.getIndexByValue=function(c){var a=this.getOption(c);return null!=a?a.index:-1},dhtmlXCombo.prototype.setComboText=function(a){1==this.conf.allow_free_text&&(this.unSelectOption(),this.conf.last_text=this.base.firstChild.value=a,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())},dhtmlXCombo.prototype.setComboValue=function(c){var a=this.getOption(c);null!=a?this.selectOption(a.index):(this.conf.last_value=c,this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="true")},dhtmlXCombo.prototype.selectOption=function(c,e,a){if(!(c<0||c>=this.list.childNodes.length)){var g=this.list.childNodes[c]._optId;this._setSelected(g,this._isListVisible(),!0),this._confirmSelect("script")}},dhtmlXCombo.prototype.unSelectOption=function(){null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null),this.base.firstChild.value="",0!=this.conf.f_mode&&this._filterOpts(!0),this._hideList(),this._updateTopImage(null),this._confirmSelect("script")},dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")},dhtmlXCombo.prototype.enable=function(a){a=void 0===a||window.dhx4.s2b(a),this.conf.enabled!=a&&((this.conf.enabled=a)?(this.base.className="dhxcombo_"+this.conf.skin,this.base.firstChild.removeAttribute("disabled")):(this._hideList(),this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled",this.base.firstChild.setAttribute("disabled","true")),this._updateTopImage(this.conf.last_selected))},dhtmlXCombo.prototype.disable=function(a){a=void 0===a||window.dhx4.s2b(a),this.enable(!a)},dhtmlXCombo.prototype.isEnabled=function(){return 1==this.conf.enabled},dhtmlXCombo.prototype.show=function(a){a=void 0===a||window.dhx4.s2b(a),this.base.style.display=1==a?"":"none"},dhtmlXCombo.prototype.hide=function(a){void 0===a&&(a=!0),this.show(!a)},dhtmlXCombo.prototype.isVisible=function(){return""==this.base.style.display},dhtmlXCombo.prototype.setFilterHandler=function(a){"function"==typeof a?(this.conf.f_func=a,this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):"string"==typeof a&&"function"==typeof window[a]?(this.conf.f_func=window[a],this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):this.conf.f_func=null},dhtmlXCombo.prototype.enableFilteringMode=function(g,c,a,e){1==g||"between"==g?(this.conf.f_mode=1==g?"start":"between",null!=c?(this.conf.f_url=c,this.conf.f_cache=window.dhx4.s2b(a),this.conf.f_dyn=window.dhx4.s2b(e)):(this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)):(this.conf.f_mode=!1,this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)},dhtmlXCombo.prototype.filter=function(e,a){for(var g=0;g<this.list.childNodes.length;g++){var c=e.apply(window,[this._getOption(this.list.childNodes[g]._optId,g)]);this.list.childNodes[g].style.display=!0===c?"":"none"}void 0!==a&&1!=a||this._showList(!0)},dhtmlXCombo.prototype.sort=function(e){for(var a=[],c=0;c<this.list.childNodes.length;c++){var g=this.list.childNodes[c]._optId;a.push([g,this._getOption(g,c)])}for("asc"==e||"desc"==e?(k=!0,a.sort(function(l,h){l=l[1].text_option.toLowerCase(),h=h[1].text_option.toLowerCase();var m="asc"==e?1:-1;return h<l?m:-1*m})):"function"!=typeof e&&"function"!=typeof window[e]||("function"==typeof window[e]&&(e=window[e]),a.sort(function(l,h){return e.apply(window,[l[1],h[1]])}));0<this.list.childNodes.length;)this.list.removeChild(this.list.lastChild);for(c=0;c<a.length;c++)this.list.appendChild(this.t[a[c][0]].item)},dhtmlXCombo.prototype.enableAutocomplete=function(a){a=void 0===a||window.dhx4.s2b(a),this.conf.f_ac=a},dhtmlXCombo.prototype.disableAutocomplete=function(a){a=void 0===a||window.dhx4.s2b(a),this.enableAutocomplete(!a)},dhtmlXCombo.prototype.allowFreeText=function(c,a){this.conf.allow_free_text=void 0===c||window.dhx4.s2b(c),this.conf.free_text_empty=void 0!==a&&window.dhx4.s2b(a)},dhtmlXCombo.prototype._checkForMatch=function(g){for(var a=window.dhx4.trim(this.base.firstChild.value).toLowerCase(),h=null,c=this.list.firstChild;null!=c;){if(""==c.style.display&&null!=c._optId)a==window.dhx4.trim(this.t[c._optId].obj.getText(c,!0)).toLowerCase()&&(h=c._optId,c=null);null!=c&&(c=c.nextSibling)}null==this.conf.last_match?null!=h?(this._setSelected(h,!0,!0),this.conf.last_match=h):"between"==this.conf.f_mode&&1!=g||(this._setSelected(null,!0,!0),this.conf.last_match=null):null!=h?h!=this.conf.last_match&&(this._setSelected(h,!0,!0),this.conf.last_match=h):(this._setSelected(null,!0,!0),this.conf.last_match=null)},dhtmlXCombo.prototype._selectRange=function(c,a){1==this.conf.combo_focus&&window.dhx4.selectTextRange(this.base.firstChild,c,a)},dhtmlXCombo.prototype.openSelect=function(){this._isListVisible()||this._showList()},dhtmlXCombo.prototype.closeAll=function(){this._hideList()},dhtmlXCombo.prototype._showList=function(a){if(0!=this._getListVisibleCount())if(this._isListVisible())this._checkListHeight();else{this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id),null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.zIndex=Number(this.list.style.zIndex)+1),this.list.style.visibility="hidden",this.list.style.display="",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.visibility=this.list.style.visibility,this.hdr.style.display=this.list.style.display);var c=null!=this.hdr&&1==this.conf.template.header?this.hdr.offsetHeight:0;this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px",this.list.style.top=window.dhx4.absTop(this.base)+c+this.base.offsetHeight-1+"px",this.list.style.left=window.dhx4.absLeft(this.base)+"px",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.width=this.list.style.width,this.hdr.style.left=this.list.style.left,this.hdr.style.top=parseInt(this.list.style.top)-c+"px"),this._checkListHeight(),this.list.style.visibility="visible",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.visibility="visible"),this.callEvent("onOpen",[])}else a&&this._isListVisible()&&this._hideList()},dhtmlXCombo.prototype._hideList=function(){this._isListVisible()&&(window.dhx4.zim.clear(this.conf.list_zi_id),this.list.style.display="none",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.display="none"),this.conf.clear_click=!1,this.callEvent("onClose",[]))},dhtmlXCombo.prototype._isListVisible=function(){return""==this.list.style.display},dhtmlXCombo.prototype._getListVisibleCount=function(){for(var a=0,c=0;c<this.list.childNodes.length;c++)a+=""==this.list.childNodes[c].style.display?1:0;return a},dhtmlXCombo.prototype._checkListHeight=function(){if(this._isListVisible()){if(null==this.conf.item_h){for(var r=this.list.firstChild;null!=r;)""==r.style.display?(this.conf.item_h=r.offsetHeight+(null!=this.hdr?-1:0),r=null):r=r.nextSibling;r=null}var u=window.dhx4.screenDim(),m=window.dhx4.absTop(this.base),c=this.base.offsetHeight,a=null!=this.hdr&&1==this.conf.template.header?this.hdr.offsetHeight:0,e=Math.max(0,Math.floor((m+a-u.top)/this.conf.item_h)),o=Math.max(0,Math.floor((u.bottom-(m+c+a))/this.conf.item_h)),v=this._getListVisibleCount();o<Math.min(this.conf.opts_count_min,v)&&o<e&&(o=null);var n=Math.min(null==o?e:o,this.conf.opts_count,v),g=n<v?n*this.conf.item_h+"px":"",l=this.conf.sp[this.conf.skin][null!=this.hdr&&1==this.conf.template.header?"hdr_ofs":"list_ofs"];this.list.style.height=g,this.list.style.top=(null==o?m-this.list.offsetHeight+l:m+c+a-l)+"px",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.top=(null==o?m-a-this.list.offsetHeight+l:m+c-l)+"px")}},dhtmlXCombo.prototype._scrollToItem=function(h){var g=this.t[h].item.offsetTop,e=g+this.t[h].item.offsetHeight,c=this.list.scrollTop,a=c+this.list.clientHeight;g<c?this.list.scrollTop=g+(null!=this.hdr&&1==this.conf.template.header?1:0):a<e&&(this.list.scrollTop=e-this.list.clientHeight+(null!=this.hdr&&1==this.conf.template.header?-this.conf.sp[this.conf.skin].scr_ofs:0))},dhtmlXCombo.prototype._setSelected=function(g,e,c,a){this.conf.temp_selected=null,c&&this._updateTopImage(g),null==g||this.conf.last_hover!=g?(null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),(this.conf.last_hover=null)==g&&this.callEvent("onSelectionChange",[])),null!=g&&(this.t[g].obj.setSelected(this.t[g].item,!0),this.conf.last_hover=g,1!=a&&(this.conf.temp_selected=g,this.callEvent("onSelectionChange",[])),"select"==this.conf.s_mode&&this.t[g].item==this.t[g].item.parentNode.lastChild&&this._subloadRequest(),e&&this._scrollToItem(g))):e&&this._scrollToItem(g)},dhtmlXCombo.prototype._subloadRequest=function(){if(null!=this.conf.f_url&&1==this.conf.f_dyn&&0==this.conf.f_dyn_end){var e="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length,a=this,c=function(h){a.conf.f_cache&&a.conf.f_cache_data[a.conf.f_mask].data.push(h.xmlDoc.responseXML);var g=a.list.childNodes.length;a.conf.f_loading=!0,a.load(h.xmlDoc.responseXML),a.conf.f_loading=!1,g==a.list.childNodes.length&&(a.conf.f_dyn_end=!0,a.conf.f_cache&&(a.conf.f_cache_data[a.conf.f_mask].dyn_end=!0)),c=a=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(this.conf.f_url,e,c):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(this.conf.f_url+(0<=String(this.conf.f_url).indexOf("?")?"&":"?")+e,c)}},dhtmlXCombo.prototype.addOption=function(l,m,c,a,g){var e=null;if(l instanceof Array){for(var h=0;h<l.length;h++)if(void 0!==l[h])if(l[h]instanceof Array)n=this._renderOption({value:l[h][0],text:l[h][1],css:l[h][2],img:l[h][3]}),null==e&&1==window.dhx4.s2b(l[h][4])&&(e=n);else{n=this._renderOption(l[h]);null==e&&1==window.dhx4.s2b(l[h].selected)&&(e=n)}}else{var n=this._renderOption({value:l,text:m,css:c,img:a});null==e&&1==window.dhx4.s2b(g)&&(e=n)}null!=e&&(this._setSelected(e,this._isListVisible(),!0),this._confirmSelect("onInit"))},dhtmlXCombo.prototype.updateOption=function(a,e,c,g){var h=this._getOptionId(a);null!=h&&(this.t[h].obj.update(this.t[h].item,{value:e,text:c,css:g}),this.conf.last_selected==h&&(this.conf.last_text=this.base.firstChild.value=this.t[h].obj.getText(this.t[h].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase()))},dhtmlXCombo.prototype.deleteOption=function(g){for(var c in this.t){this.t[c].obj.getValue(this.t[c].item)==g&&this._removeOption(c)}this._isListVisible()&&this._showList(!0)},dhtmlXCombo.prototype.clearAll=function(c){for(var e in c=void 0===c||window.dhx4.s2b(c),this.t)this._removeOption(e);this.conf.tm_hover&&window.clearTimeout(this.conf.tm_hover),this.conf.last_hover=null,this.conf.last_selected=null,this.list.scrollTop=0,1==c&&this._hideList()},dhtmlXCombo.prototype._renderOption=function(g){var h=window.dhx4.newId(),e=document.createElement("DIV");e._optId=h,e._tpl=this.conf.template,void 0===g.img&&void 0!==g.img_src&&(g.img=g.img_src,delete g.img_src),void 0===g.img_dis&&void 0!==g.img_src_dis&&(g.img_dis=g.img_src_dis,delete g.img_src_dis),g.img_path=this.conf.img_path,g.img_def=this.conf.img_def,g.img_def_dis=this.conf.img_def_dis,this.list.appendChild(e);var c=this._isListVisible()&&1==window.dhx4.isFF;if(1==c){this.list.scrollTop;this.list.scrollTop-=1}return null!=this.hdr&&(g.multicol=!0),this.t[e._optId]={obj:this.modes[this.conf.opts_type].render(e,g),item:e,conf:{type:this.conf.opts_type}},e=null,1==c&&(this.list.scrollTop+=1),h},dhtmlXCombo.prototype._removeOption=function(a){this.t[a].obj.destruct(this.t[a].item),this.t[a].obj=null,this.t[a].item.parentNode.removeChild(this.t[a].item),this.t[a].item=null,this.t[a].conf=null,this.t[a]=null,delete this.t[a],this.conf.last_hover==a&&(this.conf.last_hover=null),this.conf.last_selected==a&&(this.conf.last_selected=null,this._confirmSelect("onDelete"))},dhtmlXCombo.prototype._confirmSelect=function(e,a){var c=!1;if(void 0===a&&(a=!0),this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm),null!=this.conf.last_hover)c=c||this.conf.last_value!=this._getOptionValue(this.conf.last_hover),this.conf.last_match=this.conf.last_selected=this.conf.last_hover,this.conf.last_value=this._getOptionValue(this.conf.last_selected),this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="false";else{if(!(this.conf.allow_free_text||""==this.base.firstChild.value&&this.conf.allow_empty_value))return this._cancelSelect(!0),void this._updateTopImage(this.conf.last_selected);c=c||this.conf.last_text!=this.base.firstChild.value,this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.conf.last_text=this.base.firstChild.value,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_text,this.base.childNodes[2].value="true"}this.conf.f_ac&&"start"==this.conf.f_mode&&(this.conf.f_ac_text="","blur"!=e&&this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)),a&&this._hideList(),1==c&&"onInit"!=e&&"onDelete"!=e&&(this.callEvent("onSelectionChange",[]),this.callEvent("onChange",[this.conf.last_value,this.conf.last_text]))},dhtmlXCombo.prototype._cancelSelect=function(a){this._hideList(),1==a&&0==this.conf.allow_free_text&&1==this.conf.free_text_empty?(this.conf.f_server_last=this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.base.childNodes[1].value=this.conf.last_text=this.base.firstChild.value="",this.base.childNodes[2].value="false"):this.base.firstChild.value=this.conf.last_text,0!=this.conf.f_mode&&this._filterOpts(!0)},dhtmlXCombo.prototype._getOption=function(m,g){if(!this.t[m])return null;if(void 0===g&&(g=-1),g<0)for(var l=0;l<this.list.childNodes.length;l++)g<0&&this.list.childNodes[l]._optId==m&&(g=l);var h={value:this.t[m].obj.getValue(this.t[m].item),text:this.t[m].obj.getText(this.t[m].item),text_input:this.t[m].obj.getText(this.t[m].item,!0),text_option:this.t[m].obj.getText(this.t[m].item,null,!0),css:this.t[m].obj.getCss(this.t[m].item),selected:m==this.conf.last_selected,index:g};if("function"==typeof this.t[m].obj.getExtraData){var e=this.t[m].obj.getExtraData(this.t[m].item);for(var c in e)void 0===h[c]&&(h[c]=e[c])}return h},dhtmlXCombo.prototype._getOptionProp=function(g,e,c){if(null!=g){var a=this._getOption(g);if(null!=a)return a[e]}return c},dhtmlXCombo.prototype._getOptionId=function(c){for(var g=null,a=0;a<this.list.childNodes.length;a++)if(null==g){var e=this.list.childNodes[a]._optId;c==this.t[e].obj.getValue(this.t[e].item)&&(g=e)}return g},dhtmlXCombo.prototype._getOptionValue=function(a){return this._getOptionProp(a,"value",null)},dhtmlXCombo.prototype.setSize=function(a){this.conf.combo_width=parseInt(a)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),this.base.style.width=Math.max(0,this.conf.combo_width)+"px",this._adjustBase()},dhtmlXCombo.prototype._adjustBase=function(){this.base.firstChild.style.width=Math.max(0,this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0))+"px",this.base.firstChild.style.marginLeft=this.conf.combo_image?this.conf.i_ofs+"px":"0px"},dhtmlXCombo.prototype.setOptionWidth=function(a){this.conf.opts_width=parseInt(a)||null},dhtmlXCombo.prototype.setOptionIndex=function(e,a){if(!(isNaN(a)||a<0)){var g=this.getOption(e);if(null!=g&&a!=g.index){var c=this.list.childNodes[g.index];c.parentNode.removeChild(c),null!=this.list.childNodes[a]?this.list.insertBefore(c,this.list.childNodes[a]):this.list.appendChild(c),c=null}}},dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length},dhtmlXCombo.prototype._mcMakeTemplate=function(o){for(var l="",g="",m=this.conf.col_w=0;m<o.length;m++){var a=Number(parseInt(o[m].width)||50),e=o[m].css||"",n=0==m&&1==window.dhx4.isIE6?"_first":"";g+="<div class='dhxcombo_cell"+n+" "+e+"' style='width:"+a+"px;'><div class='dhxcombo_cell_text'>"+(o[m].option||"&nbsp;")+"</div></div>",l+="<div class='dhxcombo_hdrcell"+n+" "+e+"' style='width:"+a+"px;'><div class='dhxcombo_hdrcell_text'>"+(o[m].header||"&nbsp;")+"</div></div>",this.conf.col_w+=a+1}a=500;var c=document.createElement("DIV");c.style.position="absolute",c.style.top="10px",c.style.left=2*-a+"px",c.style.width=a+"px",c.style.height="50px",c.style.overflowY="scroll",c.innerHTML="<div>&nbsp;</div>",document.body.appendChild(c),this.conf.col_w+=a-c.firstChild.offsetWidth+10,c.parentNode.removeChild(c),c=null,this.conf.template.option=g,this._mcAttachHeader(l),this.list.className+=" dhxcombolist_multicolumn"},dhtmlXCombo.prototype._mcAttachHeader=function(a){null==this.hdr&&(this.hdr=document.createElement("DIV"),this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr",this.hdr.style.display="none",this.list.parentNode.insertBefore(this.hdr,this.list),"function"==typeof window.addEventListener?this.hdr.addEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.attachEvent("onmousedown",this._doOnListMouseDown),"checkbox"==this.conf.opts_type&&1==this.conf.combo_image&&(this.conf.combo_image=!1,null!=this.base.lastChild.className.match(/dhxcombo_top_image/)&&this.base.removeChild(this.base.lastChild),this._adjustBase())),this.hdr.innerHTML="<div class='dhxcombo_hdrtext'>"+a+"</div>"},dhtmlXCombo.prototype._mcDetachHeader=function(){null!=this.hdr&&("function"==typeof window.addEventListener?this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.detachEvent("onmousedown",this._doOnListMouseDown),this.hdr.parentNode.removeChild(this.hdr),this.hdr=null),this.conf.col_w=null,this.conf.item_h=null},dhtmlXCombo.prototype.modes={},dhtmlXCombo.prototype.doWithItem=function(a,m,h,e){var l=0<=a&&a<this.list.childNodes.length?this.list.childNodes[a]._optId:null;if(null==l)return null;if("function"!=typeof this.t[l].obj[m])return null;for(var g=[this.t[l].item],c=2;c<arguments.length;c++)g.push(arguments[c]);return this.t[l].obj[m].apply(this.t[l].obj,g)},dhtmlXCombo.prototype.modes.option={image:!1,html:!1,option_css:"dhxcombo_option_text",render:function(a,c){return a._conf={value:c.value,css:""},a.className="dhxcombo_option",a.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>",null!=c.css&&(a.lastChild.style.cssText=c.css,a._conf.css=c.css),this.setText(a,c.text),this},destruct:function(a){a._conf=null},update:function(a,c){a._conf.value=c.value,a._conf.css=c.css,a.lastChild.style.cssText=c.css,this.setText(a,c.text)},setText:function(e,g,c){var a="object"==typeof(e._conf.text=g)?window.dhx4.template(e._tpl.option,this.replaceHtml(e._conf.text,c),!0):window.dhx4.trim(this.replaceHtml(e._conf.text,c)||"");e.lastChild.innerHTML=0==a.length?"&nbsp;":a},getText:function(e,a,c){return window.dhx4.s2b(a)&&"object"==typeof e._conf.text?window.dhx4.template(e._tpl.input,e._conf.text,!0):window.dhx4.s2b(c)&&"object"==typeof e._conf.text?window.dhx4.template(e._tpl.option,e._conf.text,!0):e._conf.text},getValue:function(a){return a._conf.value},getCss:function(a){return a._conf.css},setSelected:function(a,c){a.className="dhxcombo_option"+(c?" dhxcombo_option_selected":"")},isSelected:function(a){return 0<=String(a.className).indexOf("dhxcombo_option_selected")},getExtraData:function(a){return{type:"option"}},replaceHtml:function(h,g){if(1==this.html)return h;if(void 0!==g&&null!=g||(g={}),"object"==typeof h){var e={};for(var c in h)e[c]=1==g[c]?h[c]:this.replaceHtml(h[c])}else e=(h||"").replace(/[\<\>\&\s]/g,function(a){switch(a){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case" ":return"&nbsp;"}return a});return e}},dhtmlXCombo.prototype.modes.checkbox={image:!0,html:!1,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(c,e){null==this.image_css_regexp&&(this.image_css_regexp=new RegExp(this.image_css.replace("#state#","\\d*"))),c._conf={value:e.value,css:"",checked:window.dhx4.s2b(e.checked)},c.className="dhxcombo_option";var a={};return 1==e.multicol?(e.text.checkbox="<div class='"+String(this.image_css).replace("#state#",c._conf.checked?"1":"0")+"'></div>&nbsp;",a.checkbox=!0,c.innerHTML="<div class='"+dhtmlXCombo.prototype.modes.option.option_css+"'></div>"):c.innerHTML="<div class='"+String(this.image_css).replace("#state#",c._conf.checked?"1":"0")+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(c.lastChild.style.cssText+=e.css,c._conf.css=e.css),this.setText(c,e.text,a),this},setChecked:function(c,e){c._conf.checked=window.dhx4.s2b(e);var a=String(this.image_css).replace("#state#",c._conf.checked?"1":"0");this._changeChbxCss(c.childNodes,a)},_changeChbxCss:function(a,c){for(var e=0;e<a.length;e++)null!=a[e].tagName&&null!=a[e].className&&null!=a[e].className.match(this.image_css_regexp)?a[e].className=c:0<a[e].childNodes.length&&this._changeChbxCss(a[e].childNodes,c)},isChecked:function(a){return 1==a._conf.checked},getExtraData:function(a){return{type:"checkbox",checked:a._conf.checked}},optionClick:function(h,g,l){for(var e=!0,c=g.target||g.srcElement;1==e&&null!=c&&c!=h&&null!=c.className;)if(null!=c.className.match(this.image_css_regexp)){var a=[h._conf.value,!h._conf.checked];!0===l.callEvent("onBeforeCheck",a)&&(this.setChecked(h,!this.isChecked(h)),l.callEvent("onCheck",a)),e=!1,a=null}else c=c.parentNode;return c=l=h=null,e},getTopImage:function(c,a){return""},topImageClick:function(a,c){return!0}},dhtmlXComboExtend("checkbox","option"),dhtmlXCombo.prototype.setChecked=function(a,c){this.doWithItem(a,"setChecked",c)},dhtmlXCombo.prototype.getChecked=function(a){for(var c=[],e=0;e<this.list.childNodes.length;e++)this.isChecked(e)&&c.push(this._getOptionProp(this.list.childNodes[e]._optId,"value",""));return c},dhtmlXCombo.prototype.isChecked=function(a){return this.doWithItem(a,"isChecked")},dhtmlXCombo.prototype.modes.image={image:!0,html:!1,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(a,c){return a._conf={value:c.value,css:""},a.className="dhxcombo_option",a.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",null!=c.css&&(a.lastChild.style.cssText+=c.css,a._conf.css=c.css),this.setText(a,c.text),this.setImage(a,c.img,c.img_dis,c.img_path,c.img_def,c.img_def_dis),this},update:function(a,c){a._conf.value=c.value,a._conf.css=c.css,a.lastChild.style.cssText=c.css,this.setText(a,c.text),this.setImage(a,c.img,c.img_dis,c.img_path,c.img_def,c.img_def_dis)},setImage:function(e,a,h,l,g,c){a=null!=a&&0<a.length?l+a:null!=g&&0<g.length?l+g:null,h=null!=h&&0<h.length?l+h:null!=c&&0<c.length?l+c:1==c?a:null,e._conf.img=a,e._conf.img_dis=h,e.firstChild.style.backgroundImage=null!=a?"url("+a+")":"none"},getExtraData:function(a){return{type:"image"}},getTopImage:function(g,e){var c=e?"img":"img_dis";return null!=g&&null!=g._conf[c]?"<div class='"+this.image_css+"' style='background-image:url("+g._conf[c]+");'></div>":""}},dhtmlXComboExtend("image","option"),dhtmlXCombo.prototype.setDefaultImage=function(a,c){null!=a&&(this.conf.img_def=a),null!=c&&(this.conf.img_def_dis=c)},dhtmlXCombo.prototype.setImagePath=function(a){this.conf.img_path=a},dhtmlXColorPicker.prototype.linkTo=function(c,e,g){var a;return 1==arguments.length&&(e=g=c),c=c||null,g=g||null,"string"==typeof e&&(e=document.getElementById(e)),(a=this._addNode(e,c,g))&&this._attachEventsToNode(a),a},dhtmlXColorPicker.prototype._isBaseNode=function(a){return a==this.base||a.parentElement!=document.body&&(!!a.parentElement&&this._isBaseNode(a.parentElement))},dhtmlXColorPicker.prototype._hasInput=function(e){var c,a,g=!1;for(a=this._nodes.length,c=0;c<a;c++)if(this._nodes[c].valueCont==e){g=!0;break}return g},dhtmlXColorPicker.prototype._findNodesByArray=function(h){var e,a,c;for(a=h.length,e=0;e<a;e++)(c="string"==typeof h[e]?document.getElementById(h[e]):h[e])&&this._addNode(c)},dhtmlXColorPicker.prototype._addNode=function(h,m,l){var c,g,e,a;return c="string"==typeof h?document.getElementById(h):h,"string"==typeof m&&(m=document.getElementById(m)),"string"==typeof l&&(l=document.getElementById(l)),c?(dhx4.s2b(c.getAttribute("colorbox"))&&((g=document.createElement("div")).style.width=c.offsetWidth+"px",g.style.height=c.offsetHeight+"px",c.style.width=c.offsetWidth-(c.offsetHeight+8)+"px",c.parentNode.insertBefore(g,c),g.style.position="relative",e=document.createElement("div"),g.appendChild(c),g.appendChild(e),e.className="dhxcp_colorBox",c.className+=" dhxcp_colorInput",e.style.width=e.style.height=c.offsetHeight+"px"),a={node:c,valueColor:null!=m?m:e||c,valueCont:null!=l?l:c,conf:{customColors:null!=c.getAttribute("customcolors")?dhx4.s2b(c.getAttribute("customcolors")):null,selectedColor:c.getAttribute("selectedcolor")}},this._nodes.push(a),this.activeNode||(this.activeNode=a),a):null},dhtmlXColorPicker.prototype.getNode=function(e){var a=null,c=null;return null!=(a="string"==typeof e?document.getElementById(e):e).tagName&&(c=this._getNodeByElement(a)),c},dhtmlXColorPicker.prototype._getNodeByElement=function(e){var c,a,g=null;for(a=this._nodes.length,c=0;c<a;c++)this._nodes[c].node==e&&(g=this._nodes[c]);return g},dhtmlXColorPicker.prototype._getNodeByValueCont=function(e){var c,a,g=null;for(a=this._nodes.length,c=0;c<a;c++)this._nodes[c].valueCont&&this._nodes[c].valueCont==e&&(g=this._nodes[c]);return g},dhtmlXColorPicker.prototype.initMemoryColors=function(){var c=this;this._controllerNodes.memory_block.innerHTML="<div class='dhxcp_memory_button_cont'><button class='dhxcp_save_to_memory'><div class='dhxcp_label_bm'>"+this.i18n[this.conf.lang].btnAddColor+"</div></button></div><div class='dhxcp_memory_els_cont'><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a></div>",this.memory=new this.Memory(this._controllerNodes.memory_block.childNodes[1]),this.memory.onSelect=this._onSelectMemoryEl,this.memory.onSave=function(g){var e=c.colorAIP.rgb2hex({r:g.red,g:g.green,b:g.blue});c.callEvent("onSaveColor",[e])};var a=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild,"function"==typeof window.addEventListener?a.addEventListener("click",this.saveColor,!1):a.attachEvent("onclick",this.saveColor)},dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(n,m,c){var a,g,e;a=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*n/359)+this.configColorArea.minX,g=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-c)/100)+this.configColorArea.minY,e=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-m)/100)+this.configColorArea.minY,this._setColorAreaXY(a,g),this._setContrastY(e)},dhtmlXColorPicker.prototype._parseColor=function(e){if(e instanceof Array)var c={r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2])};else if("string"==typeof e)if(e=e.replace(/\s/g,""),/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(e)){var a=e.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i);c={r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3])}}else c=this.colorAIP.hex2rgb(e);return c},dhtmlXColorPicker.prototype.setColor=function(l){var c=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),e=this._parseColor(l),h=e instanceof Object;if(!(h=(h=(h=h&&0<=e.r&&e.r<=255)&&0<=e.g&&e.g<=255)&&0<=e.b&&e.b<=255))return c;var g=this.colorAIP.rgb2hex({r:e.r,g:e.g,b:e.b});if(g==c)return c;this.value.red=e.r,this.value.green=e.g,this.value.blue=e.b;var a=this.colorAIP.rgb2hsl(e.r/255,e.g/255,e.b/255);return this.value.hue=Math.round(a.h),this.value.sat=Math.round(100*a.s),this.value.lum=Math.round(100*a.l),this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum),this._refreshContrast(),this._refreshInputValues(),this._refreshColorValue(),g},dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]},dhtmlXColorPicker.prototype._attachEventsToNode=function(a){"function"==typeof window.addEventListener?a.node.addEventListener("click",this._doOnClickByNode,!1):a.node.attachEvent("onclick",this._doOnClickByNode),a.valueCont&&"input"==a.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(a.valueCont.addEventListener("focus",this._doOnFocusByInput,!1),a.valueCont.addEventListener("blur",this._doOnBlurByInput,!1)):(a.valueCont.attachEvent("onfocus",this._doOnFocusByInput),a.valueCont.attachEvent("onblur",this._doOnBlurByInput)))},dhtmlXColorPicker.prototype._detachEventsFromNode=function(a){"function"==typeof window.addEventListener?a.node.removeEventListener("click",this._doOnClickByNode,!1):a.node.detachEvent("onclick",this._doOnClickByNode),a.valueCont&&"input"==a.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(a.valueCont.removeEventListener("focus",this._doOnFocusByInput,!1),a.valueCont.removeEventListener("blur",this._doOnBlurByInput,!1)):(a.valueCont.detachEvent("onfocus",this._doOnFocusByInput),a.valueCont.detachEvent("onblur",this._doOnBlurByInput)))},dhtmlXColorPicker.prototype.show=function(c){var a=!1;null!=c&&(this.activeNode=this.getNode(c)||this.activeNode),this.activeNode&&this.activeNode.valueCont&&this.activeNode.valueCont.value&&this.setColor(this.activeNode.valueCont.value),this.activeNode?(a=null!=this.activeNode.conf.customColors?this.activeNode.conf.customColors:this.conf.customColors,this.setColor(this.activeNode.conf.selectedColor)):a=this.conf.customColors,a?this.showMemory():this.hideMemory(),this.base._dhx_remove?(this.base.firstChild.style.zIndex=dhx4.zim.reserve(this.conf.cp_id),this.base.style.visibility="hidden",document.body.firstChild?document.body.insertBefore(this.base,document.body.firstChild):document.body.appendChild(this.base),this._refreshPosition(),this.base.style.visibility="visible","function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._doOnClickByBody,!1):document.body.attachEvent("onmousedown",this._doOnClickByBody)):this.base.appendChild(this._globalNode),this._controllerNodes.fr_cover&&this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode),this.callEvent("onShow",[this.activeNode?this.activeNode.node:null])},dhtmlXColorPicker.prototype.setPosition=function(c,h){var g=null,a=parseInt(c),e=parseInt(h);isNaN(a)&&(g={right:"right",bottom:"bottom"}[c.toLowerCase()]?c:null),this.base._dhx_remove?null==g||(this.conf.position=g,this._refreshPosition(g)):isNaN(a)||isNaN(e)||(this._globalNode.style.left=a+"px",this._globalNode.style.top=e+"px",this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top))},dhtmlXColorPicker.prototype._initListenerInput=function(){var a=this;this._inputListenerId=this._inputListenerId||setInterval(function(){a._refreshValueByInput()},70)},dhtmlXColorPicker.prototype._removeListenerInput=function(){this._inputListenerId&&(clearInterval(this._inputListenerId),this._inputListenerId=null)},dhtmlXColorPicker.prototype._refreshValueByInput=function(){var c=this.activeNode.valueCont.value,a=this.getSelectedColor()[0];this._inputListenerId&&/^#[\da-f]{6}$/i.test(c)&&c!=a&&(this.setColor(c),this.callEvent("onSelect",[c,this.activeNode.node]))},dhtmlXColorPicker.prototype._refreshPosition=function(c){if(null!=this.activeNode){var n=dhx4.absTop(this.activeNode.node),a=dhx4.absLeft(this.activeNode.node),g=dhx4.screenDim(),e=this._globalNode.offsetWidth,h=this._globalNode.offsetHeight,m=0;switch(c=c||this.conf.position){case"bottom":m=n+this.activeNode.node.offsetHeight+this.conf.indent;(l=a)+e>g.left+g.right&&(l=a+this.activeNode.node.offsetWidth-e),l<g.left&&(l=a),m+h>g.top+g.bottom&&(m=n-h-this.conf.indent),m-g.top<0&&(m=g.top+this.conf.indent),this._globalNode.style.top=m+"px",this._globalNode.style.left=l+"px";break;default:var l=a+this.activeNode.node.offsetWidth+this.conf.indent;m=n,"right"==c&&(l+e>g.left+g.right&&(l=a-e-this.conf.indent),l<g.left&&(l=a+this.activeNode.node.offsetWidth+this.conf.indent)),g.bottom-(m+h)<=0&&(m=n+this.activeNode.node.offsetHeight-h),m-g.top<0&&(m=g.top+this.conf.indent),this._globalNode.style.left=l+"px",this._globalNode.style.top=m+"px"}this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top)}},dhtmlXColorPicker.prototype.isVisible=function(){return this.base._dhx_remove?this.base.parentNode==document.body:this._globalNode.parentNode==this.base},dhtmlXColorPicker.prototype.hide=function(){if(this.base._dhx_remove)this.base.parentNode&&(this.base.parentNode.removeChild(this.base),dhx4.zim.clear(this.conf.cp_id),"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._doOnClickByBody,!1):document.body.detachEvent("onmousedown",this._doOnClickByBody));else{if(0==this.isVisible())return;this.base.removeChild(this._globalNode)}this._controllerNodes.fr_cover&&this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),null!=this.callEvent&&this.callEvent("onHide",[this.activeNode?this.activeNode.node:null])},dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119},dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0},dhtmlXColorPicker.prototype.i18n={en:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Save the color",btnSelect:"Select",btnCancel:"Cancel"}},dhtmlXColorPicker.prototype.loadUserLanguage=function(a){"function"==typeof this._mergeLangModules&&this._mergeLangModules(),this.conf.lang=a,this._refreshLanguage()},dhtmlXColorPicker.prototype._refreshLanguage=function(){var a,c=this.i18n[this.conf.lang];for(a in c)this._labelNodes[a]&&(this._labelNodes[a].innerHTML=c[a])},dhtmlXColorPicker.prototype._setColorAreaXY=function(a,e){var c=this.configColorArea;a=parseInt(a),c.minX>a?this.conf.x=c.minX:a>c.maxX?this.conf.x=c.maxX:isNaN(a)||(this.conf.x=a),e=parseInt(e),c.minY>e?this.conf.y=c.minY:e>c.maxY?this.conf.y=c.maxY:isNaN(e)||(this.conf.y=e),this._refreshLines()},dhtmlXColorPicker.prototype._setColorByXYC=function(c){c=c||!1,this.value.hue=Math.round(359*(this.conf.x-this.configColorArea.minX)/(this.configColorArea.maxX-this.configColorArea.minX)),this.value.lum=Math.round(100-100*(this.conf.y-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY)),this.value.sat=Math.round(100-100*(this.conf.c-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));var a=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/100,this.value.lum/100);this.value.red=Math.round(255*a.r),this.value.green=Math.round(255*a.g),this.value.blue=Math.round(255*a.b),c||this._refreshContrast(),this._refreshInputValues(),this._refreshColorValue()},dhtmlXColorPicker.prototype._setContrastY=function(c){var a=this.configColorArea;c=parseInt(c),isNaN(c)||(this.conf.c=Math.min(Math.max(a.minY,c),a.maxY)),this._refreshContrastLine()},dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue,this._controllerNodes.sat.value=this.value.sat,this._controllerNodes.lum.value=this.value.lum,this._controllerNodes.red.value=this.value.red,this._controllerNodes.green.value=this.value.green,this._controllerNodes.blue.value=this.value.blue},dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor="rgb("+[this.value.red,this.value.green,this.value.blue].join(", ")+")";var a=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=a,this.callEvent("onChange",[a])},dhtmlXColorPicker.prototype._refreshContrast=function(){var g=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100),h=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100),e=this._checkIeVersion();if(e&&e<=9){var m=this._controllerNodes.contrastArea.firstChild;m==this._controllerNodes.contrast_line&&((m=document.createElement("div")).className+="dhxcp_ie_gradient",this._controllerNodes.contrastArea.appendChild(m),this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line));var c=this.colorAIP.rgb2hex({r:Math.round(255*g.r),g:Math.round(255*g.g),b:Math.round(255*g.b)}),a=this.colorAIP.rgb2hex({r:Math.round(255*h.r),g:Math.round(255*h.g),b:Math.round(255*h.b)});m.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+a+"', endColorstr='"+c+"', GradientType=0)"}else{g=[Math.round(255*g.r),Math.round(255*g.g),Math.round(255*g.b)];var l="linear-gradient(rgb("+(h=[Math.round(255*h.r),Math.round(255*h.g),Math.round(255*h.b)]).join(",")+"), rgb("+g.join(",")+"))";1==window.dhx4.isKHTML&&null!=navigator.userAgent.match(/Windows/gi)&&(l="-webkit-"+l),this._controllerNodes.contrastArea.style.backgroundImage=l}},dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.conf.x+"px",this._controllerNodes.h_line.style.top=this.conf.y+"px"},dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.conf.c+"px"},dhtmlXColorPicker.prototype._getOffsetPosition=function(h,a){var c={x:NaN,y:NaN},g=h.target||h.srcElement;return g==a?(c.x=null!=h.offsetX?h.offsetX:h.layerX,c.y=null!=h.offsetY?h.offsetY:h.layerY):g==this._controllerNodes.v_line?c.y=null!=h.offsetY?h.offsetY:h.layerY:c.x=null!=h.offsetX?h.offsetX:h.layerX,c},dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(c){var a=c.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);return null!=a?{r:parseInt("0x"+a[2]),g:parseInt("0x"+a[3]),b:parseInt("0x"+a[4])}:null},rgb2hex:function(h){var e=parseInt(h.r),c=parseInt(h.g),a=parseInt(h.b);return c=c||0,a=a||0,"#"+((e=e||0)?e<16?"0"+e.toString(16):e.toString(16):"00")+(c?c<16?"0"+c.toString(16):c.toString(16):"00")+(a?a<16?"0"+a.toString(16):a.toString(16):"00")},rgb2hsl:function(o,n,e){var m,c,a=Math.max(o,n,e),h=Math.min(o,n,e);return a==h?m=0:a==o?(m=60*(n-e)/(a-h),n<e&&(m+=360)):m=a==n?60*(e-o)/(a-h)+120:60*(o-n)/(a-h)+240,{h:m,s:0==(c=.5*(a+h))||a==h?0:c<=.5?.5*(a-h)/c:.5*(a-h)/(1-c),l:c}},hsl2rgb:function(o,e,m){var h,l,n,c=[],a=[];l=2*m-(h=m<=.5?m*(1+e):m+e-m*e),n=o/360,c.push(n+1/3),c.push(n),c.push(n-1/3);for(var g=0;g<3;g++)c[g]<0?c[g]+=1:1<c[g]&&(c[g]-=1),c[g]<1/6?a.push(l+6*(h-l)*c[g]):c[g]<.5?a.push(h):c[g]<2/3?a.push(l+(h-l)*(2/3-c[g])*6):a.push(l);return{r:a[0],g:a[1],b:a[2]}}},dhtmlXColorPicker.prototype._checkIeVersion=function(){var c=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);return c&&c[2]?parseInt(c[2]):null},dhtmlXColorPicker.prototype.setCustomColors=function(){var g,e,m,c,h,a;for(null==this.memory&&(this.initMemoryColors(),this.conf.customColors=!0),e=arguments.length,g=0;g<e;g++)if(arguments[g]instanceof Array)m=this._rgb2value(arguments[g][0],arguments[g][1],arguments[g][2]),this.memory.setValue(m,null,!1);else if("string"==typeof arguments[g]){if((c=arguments[g].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i))instanceof Array){m=this._rgb2value(c[1],c[2],c[3]),this.memory.setValue(m,null,!1);continue}if((c=arguments[g].match(/(#[\da-f]{6})/gi))instanceof Array)for(a=c.length,h=0;h<a;h++)m=this._hex2value(c[h]),this.memory.setValue(m,null,!1)}},dhtmlXColorPicker.prototype.getCustomColors=function(){var c=[];if(null!=this.memory&&1==this.conf.customColors)for(var e=0;e<this.memory.controllers.length;e++){var a=this.memory.controllers[e].value;c.push(this.colorAIP.rgb2hex({r:a.red,g:a.green,b:a.blue}))}return c},dhtmlXColorPicker.prototype._rgb2value=function(h,e,a){var c=this.colorAIP.rgb2hsl(h/255,e/255,a/255);return{red:h,green:e,blue:a,hue:Math.round(c.h),sat:Math.round(100*c.s),lum:Math.round(100*c.l)}},dhtmlXColorPicker.prototype._hex2value=function(e){var c,a;return c=this.colorAIP.hex2rgb(e),a=this.colorAIP.rgb2hsl(c.r/255,c.g/255,c.b/255),{red:c.r,green:c.g,blue:c.b,hue:Math.round(a.h),sat:Math.round(100*a.s),lum:Math.round(100*a.l)}},dhtmlXColorPicker.prototype.showMemory=function(){null==this.memory&&this.initMemoryColors(),this._globalNode.className.match(/dhxcp_add_memory/)||(this._globalNode.className+=" dhxcp_add_memory"),this.conf.customColors=!0},dhtmlXColorPicker.prototype.hideMemory=function(){null!=this.memory&&(this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,"")),this.conf.customColors=!1},dhtmlXColorPicker.prototype.setSkin=function(h){if(1==this._skinCollection[h]){var g="dhtmlxcp_"+(this.skin||"dummy");if(this.base.className=this.base.className.replace(new RegExp(g),""),this.base.className+=" dhtmlxcp_"+h,this.skin=h,"material"==this.skin){var e={labelHue:"H",labelSat:"S",labelLum:"L",labelRed:"R",labelGreen:"G",labelBlue:"B"};for(var c in e)this.i18n.en[c]=e[c]}null!=this.base.className.match(/dhxcp_shadow/)||dhx4.isIE6||dhx4.isIE7||dhx4.isIE8||(this.base.className+=" dhxcp_shadow")}},dhtmlXColorPicker.prototype.hideOnSelect=function(a){a=dhx4.s2b(a),this.conf.hideOnSelect=a},dhtmlXColorPicker.prototype._indexOf=function(a,g){var e,h=-1;for(e=a.length;0<=e;e--)if(a[e]==g){h=e;break}return h},dhtmlXColorPicker.prototype.destructMemory=function(){if(null!=this.memory){this.hideMemory();var a=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null,"function"==typeof window.addEventListener?a.removeEventListener("click",this.saveColor,!1):a.detachEvent("onclick",this.saveColor),this.memory.remove(),this._controllerNodes.memory_block.innerHTML="",this.memory=null}},dhtmlXColorPicker.prototype.Memory=function(e){var c=this,a=null,g={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var l=this!=window?this:event.srcElement,h=h||l.dhxpc_memory;null!=a&&c.unSelect(),(a=h).domElement.className+=" dhxcp_memory_el_select","function"==typeof c.onSelect&&c.onSelect(h)},this.onSelect=null,this.onSave=null,this._createMemoryController=function(h){var l={domElement:h,value:dhx4._copyObj(g)};return h.dhxpc_memory=l,"function"==typeof window.addEventListener?h.addEventListener("click",c.select,!1):h.attachEvent("onclick",c.select),l},this._findMemoryControllers=function(r){var m,h,n=r.getElementsByTagName("a"),o=[];for(h=n.length,m=0;m<h;m++)o.push(this._createMemoryController(n[m]));return o},this.controllers=this._findMemoryControllers(e),this.unSelect=function(){a&&(a.domElement.className=a.domElement.className.replace(/\s.*$/i,"")),a=null},this.setActiveNext=function(){var h,m=null;return null==a?a=this.controllers[0]:(m=this.getIndex(a),h=this.controllers.length,this.unSelect(),a=m+1<h?this.controllers[m+1]:this.controllers[0]),a.domElement.className+=" dhxcp_memory_el_next",a},this.setValue=function(l,h,m){null==(a=h||a)&&(a=this.controllers[0]),a.value.red=l.red,a.value.blue=l.blue,a.value.green=l.green,a.value.hue=l.hue,a.value.sat=l.sat,a.value.lum=l.lum,a.domElement.style.backgroundColor="rgb("+[l.red,l.green,l.blue].join(", ")+")",this.setActiveNext(),0!=m&&"function"==typeof this.onSave&&this.onSave(l)},this.clean=function(){for(var n,h=this.controllers.length,m=0;m<h;m++)(n=this.controllers[m]).value=dhx4._copyObj(g),n.domElement.style.backgroundColor="rgb("+[g.red,g.green,g.blue].join(", ")+")";this.unSelect(),a=this.controllers[0]},this.getIndex=function(n){var m,h,o=-1;for(h=this.controllers.length,m=0;m<h;m++)if(this.controllers[m]==n){o=m;break}return o},this.remove=function(){var m,h;for(h=this.controllers.length,m=0;m<h;m++)"function"==typeof window.addEventListener?this.controllers[m].domElement.removeEventListener("click",this.select,!1):this.controllers[m].domElement.detachEvent("onclick",this.select),delete this.controllers[m].domElement.dhxpc_memory;delete this.onSelect,delete this.controllers,delete this.onSave}},window.dhx4.isIE6&&(dhtmlXColorPicker.prototype._cpInitFRM=function(){var a;this._controllerNodes.fr_cover||((a=document.createElement("IFRAME")).className="dhxcp_frm",a.border=0,a.frameBorder=0,this._controllerNodes.fr_cover=a),this.base._dhx_remove||this.base.insertBefore(a,this._globalNode)}),dhtmlXSlider.prototype._setOrient=function(a){a=a||!1,/\s?dhxsl_cont_hr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_hr/i,"")),/\s?dhxsl_cont_vr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_vr/i,"")),this._nodes.cont.className+=a?" dhxsl_cont_vr":" dhxsl_cont_hr"},dhtmlXSlider.prototype._getTouchCoord=function(c){var a=(null!=c.type.match(/mouse/)?"client":"page")+(1==this.conf.vertical?"Y":"X");return void 0!==c[a]&&0!=c[a]?c[a]:null!=c.touches&&null!=c.touches[0]&&c.touches[0][a]||0},dhtmlXSlider.prototype._attachEvents=function(a){"function"==typeof window.addEventListener?(a.runner.addEventListener("mousedown",this._initMover,!1),a.runner.addEventListener("touchstart",this._initMover,!1),a.cont.addEventListener("mousedown",this._doOnSetValue,!1),a.cont.addEventListener("touchstart",this._doOnSetValue,!1),a.runner2&&(a.runner2.addEventListener("mousedown",this._initMover,!1),a.runner2.addEventListener("touchstart",this._initMover,!1))):(a.runner.attachEvent("onmousedown",this._initMover),a.cont.attachEvent("onmousedown",this._doOnSetValue),a.runner2&&a.runner2.attachEvent("onmousedown",this._initMover))},dhtmlXSlider.prototype._detachEvents=function(a){"function"==typeof window.addEventListener?(a.runner.removeEventListener("mousedown",this._initMover,!1),a.runner.removeEventListener("touchstart",this._initMover,!1),a.cont.removeEventListener("mousedown",this._doOnSetValue,!1),a.cont.removeEventListener("touchstart",this._doOnSetValue,!1),a.runner2&&(a.runner2.removeEventListener("mousedown",this._initMover,!1),a.runner2.removeEventListener("touchstart",this._initMover,!1))):(a.runner.detachEvent("onmousedown",this._initMover),a.cont.detachEvent("onmousedown",this._doOnSetValue),a.runner2&&a.runner2.detachEvent("onmousedown",this._initMover))},dhtmlXSlider.prototype._mergeConfig=function(c){for(var a in c)switch(a.toLowerCase()){case"min":case"max":case"size":case"step":case"value":case"inverse":this.conf[a]=c[a];break;case"tooltip":case"visible":case"vertical":case"disabled":case"range":case"bg":this.conf[a]=dhx4.s2b(c[a]);break;case"bg_mode":this.conf[a]={left:"left",right:"right"}[c[a]]||"left";break;case"parent":continue;case"skin":this.conf[a]=1==this._skinCollection[c[a]]?c[a]:null;break;default:this.conf[a]=c[a]}},dhtmlXSlider.prototype._readAttFormNode=function(g){var e,c,m=g.attributes,a=m.length,h={};for(e=0;e<a;e++)switch((c=m[e]).name.toLowerCase()){case"size":case"min":case"max":case"value":case"step":h[c.name]=Number(c.value);break;case"skin":h[c.name]=c.value;break;case"vertical":case"disabled":case"visible":case"range":case"bg":h[c.name]=dhx4.s2b(c.value);break;case"linkto":h[c.name]=c.value;break;case"tooltip":h[c.name]=dhx4.s2b(c.value);break;case"bg_mode":h[c.name]={left:"left",right:"right"}[c.value]||"left"}return h},dhtmlXSlider.prototype._renderArgumets=function(a){var e,c,g={};for(c=a.length,e=0;e<c;e++)switch(e){case 0:g.parent=a[e];break;case 1:g.size=a[e];break;case 2:g.skin=a[e];break;case 3:g.vertical=a[e];break;case 4:g.min=a[e];break;case 5:g.max=a[e];break;case 6:g.value=a[e];break;case 7:g.step=a[e]}return g},dhtmlXSlider.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0},dhtmlXSlider.prototype._indexOf=function(a,g){var e,h=-1;for(e=a.length;0<=e;e--)if(a[e]==g){h=e;break}return h},dhtmlXSlider.prototype._refreshRunner=function(h){var g=1==this.conf.vertical?{x:"top",y:"left",ofs_w:"offsetHeight",ofs_h:"offsetWidth"}:{x:"left",y:"top",ofs_w:"offsetWidth",ofs_h:"offsetHeight"},a=this._nodes.cont[g.ofs_w]-this._nodes.runner[g.ofs_w],e=this._nodes.runner,c=this._nodes.runner2;if(null==h||0==h){var l=this._getCoord(a,this.conf.value instanceof Array?this.conf.value[0]:this.conf.value);e.style[g.x]=l+this.conf.border+"px",e.style[g.y]=Math.round((this._nodes.cont[g.ofs_h]-e[g.ofs_h])/2)+"px"}if(1==this.conf.range&&(null==h||1==h)){l=this._getCoord(a,this.conf.value[1]);c.style[g.x]=l+this.conf.border+"px",c.style[g.y]=Math.round((this._nodes.cont[g.ofs_h]-e[g.ofs_h])/2)+"px"}1==this.conf.range&&(e.style[g.x]==c.style[g.x]&&this.conf.value[1]==this.conf.max?2!=e.style.zIndex&&(e.style.zIndex=2):2==e.style.zIndex&&(e.style.zIndex=1)),e=c=null,this._refreshBG()},dhtmlXSlider.prototype._setValueByCoord=function(g){var e,c,a=dhx4.absLeft(this._nodes.cont),h=dhx4.absTop(this._nodes.cont);c=this.conf.vertical?(g.y-h-this._nodes.runner.offsetHeight/2)/(this._nodes.cont.offsetHeight-this._nodes.runner.offsetHeight):(g.x-a-this._nodes.runner.offsetWidth/2)/(this._nodes.cont.offsetWidth-this._nodes.runner.offsetWidth),e=(this.conf.max-this.conf.min)*c+this.conf.min,this.setValue(e,!0)},dhtmlXSlider.prototype._getCoord=function(a,g){var c=((this.conf.inverse?this._inverseValue(g):g)-this.conf.min)/(this.conf.max-this.conf.min);return Math.round(a*c)},dhtmlXSlider.prototype._normalize=function(g,e,a){g=Number(g),g=Math.round(g/this.conf.step)*this.conf.step;var c=Math.pow(10,this.conf.decimals);return g=Math.round(g*c)/c,g=Math.max(e,Math.min(a,g))},dhtmlXSlider.prototype._normalizeRange=function(e,c,a){return e[1]<e[0]&&(e[1]=e[0]),e[0]=this._normalize(e[0],c,Math.min(a,e[1])),e[1]=this._normalize(e[1],Math.max(c,e[0]),a),e},dhtmlXSlider.prototype._refreshBG=function(){if(1==this.conf.bg){var g=this._nodes.track.firstChild,e=this._nodes.runner,a=e.nextSibling,c=1==this.conf.vertical?{x:"top",w:"height",ofs:"offsetHeight"}:{x:"left",w:"width",ofs:"offsetWidth"};if(1==this.conf.range)g.style[c.x]=Math.floor(parseInt(e.style[c.x])+e[c.ofs]/2)+"px",g.style[c.w]=Math.max(Math.floor(parseInt(a.style[c.x])+a[c.ofs]/2)-parseInt(g.style[c.x]),0)+"px";else{var h=1==this.conf.inverse?{left:"right",right:"left"}[this.conf.bg_mode]:this.conf.bg_mode;g.style[c.x]=("left"==h?"0":Math.floor(parseInt(e.style[c.x])+e[c.ofs]/2))+"px",g.style[c.w]=("left"==h?Math.floor(parseInt(e.style[c.x])+e[c.ofs]/2):this._nodes.track[c.ofs]-parseInt(g.style[c.x]))+"px"}g=e=a=null}},dhtmlXSlider.prototype._attachNode=function(e,a){this._detachNode(a);var c=e.tagName.toLowerCase();if(c){switch(this._attachedNode["node_"+a]=e,c){case"input":case"select":"function"==typeof window.addEventListener?(e.addEventListener("change",this._doOnChangeInput,!1),e.addEventListener("keydown",this._doOnKeyDown,!1)):(e.attachEvent("onchange",this._doOnChangeInput),e.attachEvent("onkeydown",this._doOnKeyDown)),this._attachedNode.setValue=function(m,g,l){var h=m instanceof Array?m[l||0]:m;this["node_"+(l||0)].value=dhtmlXSlider.prototype._atatchedNodeFixDec(h,g)};break;default:this._attachedNode.setValue=function(m,g,l){var h=m instanceof Array?m[l||0]:m;this["node_"+(l||0)].innerHTML=dhtmlXSlider.prototype._atatchedNodeFixDec(h,g)}}this._attachedNode.setValue(this.conf.value,this.conf.decimals,a)}},dhtmlXSlider.prototype._detachNode=function(a){var e=this._attachedNode["node_"+a];if(e){switch(e.tagName){case"input":case"select":"function"==typeof window.addEventListener?(e.removeEventListener("change",this._doOnChangeInput,!1),e.removeEventListener("keydown",this._doOnChangeInput,!1)):(e.detachEvent("change",this._doOnChangeInput),e.detachEvent("keydown",this._doOnChangeInput))}delete this._attachedNode["node_"+a],delete this._attachedNode.setValue,e=null}},dhtmlXSlider.prototype._atatchedNodeFixDec=function(g,a){if(g=String(g),0<a){var c=g.match(/\.\d{1,}$/);null!=c&&(a=Math.max(a-c[0].length+1)),g+=g.indexOf(".")<0?".":"";for(var e=0;e<a;e++)g+="0"}return g},dhtmlXSlider.prototype._detectDecimals=function(){var a=this.conf.step.toString().match(/\.(\d*)$/);this.conf.decimals=null!=a?a[1].length:0},dhtmlXSlider.prototype.setSize=function(a){isNaN(a)||(this.conf.vertical?(this._nodes.cont.style.width&&delete this._nodes.cont.style.width,this._nodes.cont.style.height=a-this.conf.margin+"px"):(this._nodes.cont.style.height&&delete this._nodes.cont.style.height,this._nodes.cont.style.width=a-this.conf.margin+"px"),this._refreshRunner())},dhtmlXSlider.prototype.setSkin=function(h){h=h.toLowerCase();var e,a,c=-1,g="dhtmlxslider";if((e=this.base.className.match(/\S\w+/gi))instanceof Array){for(a in this._skinCollection){if(-1!=c)break;c=this._indexOf(e,g+"_"+a)}c=-1==c?e.length:c}else e=[],c=0;e[c]=g+"_"+h,this.base.className=e.join(" "),this.conf.skin=h,this._nodes&&this._refreshRunner()},dhtmlXSlider.prototype.setValue=function(g,h){h=h||!1;var c=null;if(1==this.conf.range?(null!=this._r_actv&&(c=this._r_actv==this._nodes.runner?0:1),g=this._normalizeRange(g,this.conf.min,this.conf.max),this.conf.value[0]!=g[0]||this.conf.value[1]!=g[1]):(g=this._normalize(g,this.conf.min,this.conf.max),this.conf.value!=g),!0&&(this.conf.value=g,this._refreshRunner(c),this._refreshTooltip(),h)){var a=[g,this];1==this.conf.range&&(null!=this._r_actv?a.push(this._r_actv==this._nodes.runner?0:1):null!=this.conf.init_index&&a.push(this.conf.init_index.valueOf())),this.callEvent("onChange",a)}"function"==typeof this._attachedNode.setValue&&(null==c&&(c=this.conf.init_index),this._attachedNode.setValue(this.conf.value,this.conf.decimals,c))},dhtmlXSlider.prototype.getValue=function(){return 1==this.conf.range?[this.conf.value[0].valueOf(),this.conf.value[1].valueOf()]:this.conf.value.valueOf()},dhtmlXSlider.prototype._inverseValue=function(a){return this.conf.max+this.conf.min-a},dhtmlXSlider.prototype.disable=function(h){if(h=0!=h){for(var c in this._nodes)if("cont"!=c){var e="runner2"==c?"runner":c;null!=this._nodes[c]&&(new RegExp("\\s?dhxsl_"+e+"_dis","i").test(this._nodes[c].className)||(this._nodes[c].className+=" dhxsl_"+e+"_dis"))}this.conf.disabled=!0}else this.enable()},dhtmlXSlider.prototype.enable=function(){var g;for(var c in this._nodes)if("cont"!=c){var e="runner2"==c?"runner":c;null!=this._nodes[c]&&(g=new RegExp("\\s?dhxsl_"+e+"_dis","i")).test(this._nodes[c].className)&&(this._nodes[c].className=this._nodes[c].className.replace(g,""))}this.conf.disabled=!1},dhtmlXSlider.prototype.isEnabled=function(){return!this.conf.disabled},dhtmlXSlider.prototype.disableTooltip=function(){this._nodes.cont.removeAttribute("title"),this.conf.tooltip=!1},dhtmlXSlider.prototype.enableTooltip=function(a){(a=void 0===a||dhx4.s2b(a))?(this.conf.tooltip=!0,this._refreshTooltip()):this.disableTooltip()},dhtmlXSlider.prototype.setMax=function(a){!isNaN(a)&&this.conf.min<a&&(this.conf.max=a,this.setValue(this.conf.value))},dhtmlXSlider.prototype.getMax=function(){return this.conf.max},dhtmlXSlider.prototype.setMin=function(a){!isNaN(a)&&this.conf.max>a&&(this.conf.min=a,this.setValue(this.conf.value))},dhtmlXSlider.prototype.getMin=function(){return this.conf.min},dhtmlXSlider.prototype.setStep=function(a){var c=this.conf.max-this.conf.min;!isNaN(a)&&a<c&&(this.conf.step=a,this._detectDecimals(),this.setValue(this.conf.value))},dhtmlXSlider.prototype.getStep=function(){return this.conf.step},dhtmlXSlider.prototype.show=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_hidden/i,"")),this.conf.visible=!0},dhtmlXSlider.prototype.hide=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)||(this._nodes.cont.className+=" dhxsl_hidden"),this.conf.visible=!1},dhtmlXSlider.prototype.isVisible=function(){return this.conf.visible},dhtmlXSlider.prototype.linkTo=function(a){a instanceof Array||(a=[a]);for(var c=0;c<a.length&&c<2;c++)null!=a[c]&&("string"==typeof a[c]&&(a[c]=document.getElementById(a[c])),this._attachNode(a[c],c))},dhtmlXSlider.prototype._refreshTooltip=function(){1==this.conf.tooltip&&(this.conf.value instanceof Array?this._nodes.cont.title=this.conf.value.join(", "):this._nodes.cont.title=this.conf.value)},dhtmlXSlider.prototype.getRunnerIndex=function(){return null==this._r_actv?-1:this._r_actv==this._nodes.runner?0:1},dhtmlXPopup.prototype.attachObject=function(a){return this._attachNode("object",{obj:a})},dhtmlXPopup.prototype._attach_init_object=function(a){this._nodeObj="string"==typeof a.obj?document.getElementById(a.obj):a.obj,a.obj=null,document.getElementById(this._nodeId).appendChild(this._nodeObj),this._nodeObj.style.display="",this._nodeObj.style.visibility="visible"},dhtmlXPopup.prototype.attachHTML=function(a){return this._attachNode("html",{html:a})},dhtmlXPopup.prototype._attach_init_html=function(a){document.getElementById(this._nodeId).innerHTML=a.html,this._nodeObj={text:a.html}},dhtmlXPopup.prototype.attachForm=function(c,a){return this._attachNode("form",{struct:c,width:a})},dhtmlXPopup.prototype._attach_init_form=function(c){var a=this;this._nodeObj=new dhtmlXForm(this._nodeId,c.struct),this._nodeObj.setSkin(this.conf.skin),this._nodeObj.attachEvent("_onBeforeEditorAccess",function(){a._clearClick=!0}),null!=this.conf.editorEv&&0==this.checkEvent(this.conf.editorEv)&&(this.conf.editorEv=null),null!=dhtmlXForm.prototype.items.editor&&null==this.conf.editorEv&&(this.conf.editorEv=this.attachEvent("onShow",function(){var h=dhtmlXForm.prototype.items.editor.editor;for(var e in h){for(var l=h[e].base,g=!1;null!=l;)l==this.p?(g=!0,l=null):l=l.parentNode;l=null,1==g&&(h[e].cell.conf.cells_cont=null,h[e].setSizes())}h=null,this.detachEvent(this.conf.editorEv),this.conf.editorEv=null}),null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(this.conf.editorEv))},dhtmlXPopup.prototype.attachCalendar=function(a){return this._attachNode("calendar",a||{})},dhtmlXPopup.prototype._attach_init_calendar=function(a){1==a.double?(this._nodeObj=new dhtmlXDoubleCalendarObject(this._nodeId),this._nodeObj.leftCalendar.setSkin(this.conf.skin),this._nodeObj.rightCalendar.setSkin(this.conf.skin)):(this._nodeObj=new dhtmlXCalendarObject(this._nodeId),this._nodeObj.setSkin(this.conf.skin)),this._nodeObj.show()},dhtmlXPopup.prototype.attachGrid=function(c,a){return this._attachNode("grid",{width:c||400,height:a||200})},dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId),this._nodeObj.setSkin(this.conf.skin)},dhtmlXPopup.prototype.attachTree=function(e,c,a){return this._attachNode("tree",{width:e||400,height:c||200,rootId:a||0})},dhtmlXPopup.prototype._attach_init_tree=function(a){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",a.rootId)},dhtmlXPopup.prototype.attachLayout=function(c,a,e){return this._attachNode("layout",{width:c||400,height:a||200,pattern:e||"3L"})},dhtmlXPopup.prototype._attach_init_layout=function(a){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,a.pattern,this.conf.skin)},dhtmlXPopup.prototype.attachAccordion=function(e,a,c){return this._attachNode("accordion",{width:e||400,height:a||200,conf:c||{}})},dhtmlXPopup.prototype._attach_init_accordion=function(a){a.conf.parent=this._nodeId,a.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXAccordion(a.conf)},dhtmlXPopup.prototype.attachTabbar=function(e,a,c){return"string"==typeof c?c={mode:c}:"object"==typeof c&&null!=c||(c={}),this._attachNode("tabbar",{width:e||400,height:a||200,conf:c})},dhtmlXPopup.prototype._attach_init_tabbar=function(a){a.conf.parent=this._nodeId,a.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXTabBar(a.conf)},dhtmlXPopup.prototype.attachSidebar=function(e,a,c){return null==c&&(c={}),this._attachNode("sidebar",{width:e||400,height:a||200,conf:c})},dhtmlXPopup.prototype._attach_init_sidebar=function(a){a.conf.parent=this._nodeId,a.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXSideBar(a.conf)},dhtmlXPopup.prototype.attachEditor=function(e,a,c){return this._attachNode("editor",{width:e||400,height:a||200,conf:c||{}})},dhtmlXPopup.prototype._attach_init_editor=function(c){document.getElementById(this._nodeId).className="dhxeditor_"+this.conf.skin,c.conf.parent=this._nodeId,null==c.conf.skin&&(c.conf.skin=this.conf.skin),this._nodeObj=new dhtmlXEditor(c.conf);var a=this.attachEvent("onShow",function(){this._nodeObj instanceof window.dhtmlXEditor&&this._nodeObj.setSizes()});null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(a)},dhtmlXPopup.prototype.attachColorPicker=function(a){return"object"==typeof a&&null!=a||(a={}),this._attachNode("colorpicker",{conf:a})},dhtmlXPopup.prototype._attach_init_colorpicker=function(a){a.conf.skin=this.conf.skin,a.conf.parent=this._nodeId,this._nodeObj=new dhtmlXColorPicker(a.conf)},dhtmlXPopup.prototype.attachCarousel=function(e,a,c){return null==c&&(c={}),this._attachNode("carousel",{width:e||400,height:a||300,conf:c})},dhtmlXPopup.prototype._attach_init_carousel=function(a){a.conf.parent=this._nodeId,a.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXCarousel(a.conf)},dhtmlXPopup.prototype.attachTreeView=function(e,a,c){return null==c&&(c={}),this._attachNode("treeview",{width:e||400,height:a||300,conf:c})},dhtmlXPopup.prototype._attach_init_treeview=function(a){a.conf.parent=this._nodeId,a.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXTreeView(a.conf),this._nodeObj.base.className+=" dhxtreeview_with_border";var c=this.attachEvent("onShow",function(){this._nodeObj instanceof window.dhtmlXTreeView&&this._nodeObj.setSizes()});null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(c)},dhtmlXPopup.prototype.setDimension=function(a,c){if(null!=this._nodeId&&(null!=a||null!=c)){var e=document.getElementById(this._nodeId);null!=a&&(e.style.width=a+"px"),null!=c&&(e.style.height=c+"px"),this._repaint(),null!=this._nodeObj&&"function"==typeof this._nodeObj.setSizes&&this._nodeObj.setSizes(),e=null}},dhtmlXMenuObject.prototype._init=function(){1!=this._isInited&&(this.conf.dload?(this._dhxdataload.onBeforeXLS=function(){var e={params:{}};for(var c in this.conf.dload_params)e.params[c]=this.conf.dload_params[c];return e},this.loadStruct(this.conf.dload_url)):(this._initTopLevelMenu(),this._isInited=!0))},dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(l){var g=0;for(var c in this.itemPull){var e=this.itemPull[c].parent,h=this.itemPull[c].type;null!=this.idPull[c]&&(e!=l||"item"!=h&&"radio"!=h&&"checkbox"!=h||"none"==this.idPull[c].style.display||g++)}return g},dhtmlXMenuObject.prototype._redefineComplexState=function(c){if(this.idPrefix+this.topId!=c&&null!=this.idPull["polygon_"+c]&&null!=this.idPull[c]){var a=this._countVisiblePolygonItems(c);0<a&&!this.itemPull[c].complex&&this._updateItemComplexState(c,!0,!1),0==a&&this.itemPull[c].complex&&this._updateItemComplexState(c,!1,!1)}},dhtmlXMenuObject.prototype._updateItemComplexState=function(h,e,g){if(this.conf.context||"TopLevel"!=this._getItemLevelType(h.replace(this.idPrefix,""))){if(null!=this.idPull[h]&&null!=this.itemPull[h]&&(this.itemPull[h].complex=e,h!=this.idPrefix+this.topId)){var a=null,c=this.idPull[h].childNodes[this.conf.rtl?0:2];if(c.childNodes[0]&&0===String(c.childNodes[0].className).search("complex_arrow")&&(a=c.childNodes[0]),this.itemPull[h].complex){if(null==a){for((a=document.createElement("DIV")).className="complex_arrow",a.id="arrow_"+h;0<c.childNodes.length;)c.removeChild(c.childNodes[0]);c.appendChild(a)}this.conf.dload&&"get"==this.itemPull[h].loaded&&this.conf.dload_icon?"complex_arrow_loading"!=a.className&&(a.className="complex_arrow_loading"):a.className="complex_arrow"}else this.itemPull[h].complex||null==a||(c.removeChild(a),null!=this.itemPull[h].hotkey_backup&&this.setHotKey&&this.setHotKey(h.replace(this.idPrefix,""),this.itemPull[h].hotkey_backup))}}else this.itemPull[h].complex=e},dhtmlXMenuObject.prototype._getItemLevelType=function(a){return this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"},dhtmlXMenuObject.prototype.setIconsPath=function(a){this.conf.icons_path=a},dhtmlXMenuObject.prototype._updateItemImage=function(g,h){g=this.idPrefix+g;var o=this.itemPull[g].type;if("checkbox"!=o&&"radio"!=o){var l=this.itemPull[g].parent==this.idPrefix+this.topId&&!this.conf.context,m=null;if(l)for(var a=0;a<this.idPull[g].childNodes.length;a++)(null==m&&"dhtmlxMenu_TopLevel_Item_Icon"==(this.idPull[g].childNodes[a].className||"")||"i"==(this.idPull[g].childNodes[a].tagName||"").toLowerCase())&&(m=this.idPull[g].childNodes[a]);else{try{m=this.idPull[g].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(n){}(null==m||void 0===m.className||"sub_icon"!=m.className&&"i"!=m.tagName.toLowerCase())&&(m=null)}var s=this.itemPull[g]["enabled"==this.itemPull[g].state?"imgen":"imgdis"];if(0<s.length)if(null!=m)1==this.conf.icons_css?m.className=this.conf.icons_path+s:m.src=this.conf.icons_path+s;else if(l){if(1==this.conf.icons_css)(m=document.createElement("i")).className=this.conf.icons_path+s;else(m=document.createElement("IMG")).className="dhtmlxMenu_TopLevel_Item_Icon",m.src=this.conf.icons_path+s,m.border="0",m.id="image_"+g;!this.conf.rtl&&0<this.idPull[g].childNodes.length?this.idPull[g].insertBefore(m,this.idPull[g].childNodes[0]):this.idPull[g].appendChild(m)}else if(1==this.conf.icons_css){(r=this.idPull[g].childNodes[this.conf.rtl?2:0]).innerHTML="<i class='"+this.conf.icons_path+s+"'></i>"}else{(m=document.createElement("IMG")).className="sub_icon",m.src=this.conf.icons_path+s,m.border="0",m.id="image_"+g;for(var r=this.idPull[g].childNodes[this.conf.rtl?2:0];0<r.childNodes.length;)r.removeChild(r.childNodes[0]);r.appendChild(m)}else if(null!=m)if(l)m.parentNode.removeChild(m),m=null;else{var c=m.parentNode;c.removeChild(m),c.innerHTML="&nbsp;",c=m=null}}},dhtmlXMenuObject.prototype._getAllParents=function(l){var e=new Array;for(var c in this.itemPull)if(this.itemPull[c].parent==l&&(e[e.length]=this.itemPull[c].id,this.itemPull[c].complex))for(var g=this._getAllParents(this.itemPull[c].id),h=0;h<g.length;h++)e[e.length]=g[h];return e},dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this.conf.v_enabled){var a=window.dhx4.screenDim();this.conf.v.x1=a.left,this.conf.v.x2=a.right,this.conf.v.y1=a.top,this.conf.v.y2=a.bottom}},dhtmlXMenuObject.prototype.getItemPosition=function(h){h=this.idPrefix+h;var g=-1;if(null==this.itemPull[h])return g;for(var a=this.itemPull[h].parent,e=null!=this.idPull["polygon_"+a]?this.idPull["polygon_"+a].tbd:this.cont,c=0;c<e.childNodes.length;c++)e.childNodes[c]!=this.idPull["separator_"+h]&&e.childNodes[c]!=this.idPull[h]||(g=c);return g},dhtmlXMenuObject.prototype.setItemPosition=function(m,l){if(m=this.idPrefix+m,null!=this.idPull[m]){var c=this.itemPull[m].parent==this.idPrefix+this.topId,a=this.idPull[m],g=this.getItemPosition(m.replace(this.idPrefix,"")),e=this.itemPull[m].parent,h=null!=this.idPull["polygon_"+e]?this.idPull["polygon_"+e].tbd:this.cont;h.removeChild(h.childNodes[g]),l<0&&(l=0),c&&l<1&&(l=1),l<h.childNodes.length?h.insertBefore(a,h.childNodes[l]):h.appendChild(a)}},dhtmlXMenuObject.prototype.getParentId=function(a){return a=this.idPrefix+a,null==this.itemPull[a]?null:(null!=this.itemPull[a].parent?this.itemPull[a].parent:this.topId).replace(this.idPrefix,"")},dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()},dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0),this._isInited=!1,this.idPrefix=this._genStr(12)+"_",this.itemPull={}},void 0===dhtmlXMenuObject.prototype.liveInst&&(dhtmlXMenuObject.prototype.liveInst={}),dhtmlXMenuObject.prototype.setIconset=function(a){this.conf.icons_css="awesome"==a},dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(g,c){var a=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var e=0;e<a.length;e++)a[e]!=g&&this._hidePolygon(a[e]),null!=this.idPull[a[e]]&&a[e]!=g&&(this.idPull[a[e]].className=this.idPull[a[e]].className.replace(/Selected/g,"Normal"));"enabled"==this.itemPull[this.idPrefix+g].state&&(this.idPull[this.idPrefix+g].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+g,"parent"),this.conf.selected="win"==this.conf.mode?-1!=this.conf.selected?g:this.conf.selected:g,this.itemPull[this.idPrefix+g].complex&&-1!=this.conf.selected&&this._showPolygon(this.idPrefix+g,this.conf.dir_toplv))},dhtmlXMenuObject.prototype._initTopLevelMenu=function(){if(this.conf.dir_toplv="bottom",this.conf.dir_sublv=this.conf.rtl?"left":"right",this.conf.context)this.idPull[this.idPrefix+this.topId]=new Array(0,0),this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var a=this._getMenuNodes(this.idPrefix+this.topId),c=0;c<a.length;c++)"item"==this.itemPull[a[c]].type&&this._renderToplevelItem(a[c],null),"separator"==this.itemPull[a[c]].type&&this._renderSeparator(a[c],null)},dhtmlXMenuObject.prototype._renderToplevelItem=function(o,n){var l=this,a=document.createElement("DIV");if(a.id=o,"enabled"==this.itemPull[o].state&&null!=this.itemPull[o].cssNormal?a.className=this.itemPull[o].cssNormal:a.className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[o].state?"Normal":"Disabled"),""!=this.itemPull[o].title){var h=document.createElement("DIV");h.className="top_level_text",h.innerHTML=this.itemPull[o].title,a.appendChild(h)}if(0<this.itemPull[o].tip.length&&(a.title=this.itemPull[o].tip),""!=this.itemPull[o].imgen||""!=this.itemPull[o].imgdis){var g=this.itemPull[o]["enabled"==this.itemPull[o].state?"imgen":"imgdis"];if(g)if(1==this.conf.icons_css){var e=document.createElement("i");e.className=this.conf.icons_path+g,0<a.childNodes.length&&!this.conf.rtl?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}else{var c=document.createElement("IMG");c.border="0",c.id="image_"+o,c.src=this.conf.icons_path+g,c.className="dhtmlxMenu_TopLevel_Item_Icon",0<a.childNodes.length&&!this.conf.rtl?a.insertBefore(c,a.childNodes[0]):a.appendChild(c)}}a.onselectstart=function(m){return(m=m||event).preventDefault?m.preventDefault():m.returnValue=!1,!1},a.oncontextmenu=function(m){return(m=m||event).preventDefault?m.preventDefault():m.returnValue=!1,!1},this.cont||(this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className="right"==this.conf.align?"align_right":"align_left",this.base.appendChild(this.cont)),null!=n&&(++n<0&&(n=0),n>this.cont.childNodes.length-1&&(n=null)),null!=n?this.cont.insertBefore(a,this.cont.childNodes[n]):this.cont.appendChild(a),this.idPull[a.id]=a,this.itemPull[o].complex&&!this.conf.dload&&this._addSubMenuPolygon(this.itemPull[o].id,this.itemPull[o].id),a.onmouseover=function(){"web"==l.conf.mode&&window.clearTimeout(l.conf.tm_handler);var m=l._getSubItemToDeselectByPolygon("parent");l._removeSubItemFromSelected(-1,-1);for(var s=0;s<m.length;s++)m[s]!=this.id&&l._hidePolygon(m[s]),null!=l.idPull[m[s]]&&m[s]!=this.id&&(null!=l.itemPull[m[s]].cssNormal?l.idPull[m[s]].className=l.itemPull[m[s]].cssNormal:("sub_item_selected"==l.idPull[m[s]].className&&(l.idPull[m[s]].className="sub_item"),l.idPull[m[s]].className=l.idPull[m[s]].className.replace(/Selected/g,"Normal")));if("enabled"==l.itemPull[this.id].state){if(this.className="dhtmlxMenu_"+l.conf.skin+"_TopLevel_Item_Selected",l._addSubItemToSelected(this.id,"parent"),l.conf.selected="win"==l.conf.mode?-1!=l.conf.selected?this.id:l.conf.selected:this.id,l.conf.dload){if("no"==l.itemPull[this.id].loaded){this._dynLoadTM=(new Date).getTime(),l.itemPull[this.id].loaded="get";var u=this.id.replace(l.idPrefix,"");l._dhxdataload.onBeforeXLS=function(){var w={params:{}};for(var v in w.params[this.conf.dload_pid]=u,this.conf.dload_params)w.params[v]=this.conf.dload_params[v];return w},l.loadStruct(l.conf.dload_url)}l.conf.top_mode&&"web"==l.conf.mode&&!l.conf.context&&(this._mouseOver=!0)}if((!l.conf.dload||l.conf.dload&&(!l.itemPull[this.id].loaded||"yes"==l.itemPull[this.id].loaded))&&l.itemPull[this.id].complex&&-1!=l.conf.selected)if(l.conf.top_mode&&"web"==l.conf.mode&&!l.conf.context){this._mouseOver=!0;var r=this.id;this._menuOpenTM=window.setTimeout(function(){l._showPolygon(r,l.conf.dir_toplv)},l.conf.top_tmtime)}else l._showPolygon(this.id,l.conf.dir_toplv)}l._doOnTouchMenu(this.id.replace(l.idPrefix,""))},a.onmouseout=function(){l.itemPull[this.id].complex&&-1!=l.conf.selected||"enabled"!=l.itemPull[this.id].state||(null!=l.itemPull[this.id].cssNormal?a.className=l.itemPull[this.id].cssNormal:a.className="dhtmlxMenu_"+l.conf.skin+"_TopLevel_Item_Normal"),"web"==l.conf.mode&&(window.clearTimeout(l.conf.tm_handler),l.conf.tm_handler=window.setTimeout(function(){l._clearAndHide()},l.conf.tm_sec,"JavaScript")),l.conf.top_mode&&"web"==l.conf.mode&&!l.conf.context&&(this._mouseOver=!1,window.clearTimeout(this._menuOpenTM))},a.onclick=function(v){if("web"==l.conf.mode&&window.clearTimeout(l.conf.tm_handler),"web"==l.conf.mode||"disabled"!=l.itemPull[this.id].state){if((v=v||event).cancelBubble=!0,v.preventDefault?v.preventDefault():v.returnValue=!1,"win"==l.conf.mode&&l.itemPull[this.id].complex){if(l.conf.selected==this.id)var u=!(l.conf.selected=-1);else{l.conf.selected=this.id;u=!0}u?l._showPolygon(this.id,l.conf.dir_toplv):l._hidePolygon(this.id)}var m=l.itemPull[this.id].complex?"c":"-",w="enabled"!=l.itemPull[this.id].state?"d":"-",r={ctrl:v.ctrlKey,alt:v.altKey,shift:v.shiftKey};return l._doOnClick(this.id.replace(l.idPrefix,""),m+w+"t",r),!1}},"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addSubMenuPolygon=function(l,h){this._renderSublevelPolygon(l,h);var a=this._getMenuNodes(h);for(e=0;e<a.length;e++)"separator"==this.itemPull[a[e]].type?this._renderSeparator(a[e],null):this._renderSublevelItem(a[e],null);if(l==h);else;for(var e=0;e<a.length;e++)this.itemPull[a[e]].complex&&this._addSubMenuPolygon(l,this.itemPull[a[e]].id)},dhtmlXMenuObject.prototype._renderSublevelPolygon=function(h,g){var c=document.createElement("DIV");c.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Polygon "+(this.conf.rtl?"dir_right":""),c.dir="ltr",c.oncontextmenu=function(l){return(l=l||event).preventDefault?l.preventDefault():l.returnValue=!1,!(l.cancelBubble=!0)},c.id="polygon_"+g,c.onclick=function(l){(l=l||event).cancelBubble=!0},c.style.display="none",document.body.insertBefore(c,document.body.firstChild),c.innerHTML='<div style="position:relative;"></div><div style="position: relative; overflow:hidden;"></div><div style="position:relative;"></div>';var e=document.createElement("TABLE");e.className="dhtmlxMebu_SubLevelArea_Tbl",e.cellSpacing=0,e.cellPadding=0,e.border=0;var a=document.createElement("TBODY");return e.appendChild(a),c.childNodes[1].appendChild(e),c.tbl=e,c.tbd=a,this.idPull[c.id]=c,null!=this.sxDacProc&&(this.idPull["sxDac_"+g]=new this.sxDacProc(c,c.className),window.dhx4.isIE?(this.idPull["sxDac_"+g]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+g]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+g]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+g]._setCustomCycle(this.dacCycles))),c},dhtmlXMenuObject.prototype._renderSublevelItem=function(a,r){var n=this,o=document.createElement("TR");o.className="enabled"==this.itemPull[a].state?"sub_item":"sub_item_dis";var m=document.createElement("TD");m.className="sub_item_icon";var w=this.itemPull[a].type,s=this.itemPull[a]["enabled"==this.itemPull[a].state?"imgen":"imgdis"];if(""!=s){var h;if("checkbox"==w||"radio"==w)(h=document.createElement("DIV")).id="image_"+this.itemPull[a].id,h.className="sub_icon "+s,m.appendChild(h);if("checkbox"!=w&&"radio"!=w)if(1==this.conf.icons_css)m.innerHTML="<i class='"+this.conf.icons_path+s+"'></i>";else(h=document.createElement("IMG")).id="image_"+this.itemPull[a].id,h.className="sub_icon",h.src=this.conf.icons_path+s,m.appendChild(h)}else m.innerHTML="&nbsp;";var l=document.createElement("TD");if(l.className="sub_item_text",""!=this.itemPull[a].title){var v=document.createElement("DIV");v.className="sub_item_text",v.innerHTML=this.itemPull[a].title,l.appendChild(v)}else l.innerHTML="&nbsp;";var g=document.createElement("TD");if(g.className="sub_item_hk",this.itemPull[a].complex){var c=document.createElement("DIV");c.className="complex_arrow",c.id="arrow_"+this.itemPull[a].id,g.appendChild(c)}else if(0<this.itemPull[a].hotkey.length&&!this.itemPull[a].complex){var e=document.createElement("DIV");e.className="sub_item_hk",e.innerHTML=this.itemPull[a].hotkey,g.appendChild(e)}else g.innerHTML="&nbsp;";o.appendChild(this.conf.rtl?g:m),o.appendChild(l),o.appendChild(this.conf.rtl?m:g),o.id=this.itemPull[a].id,o.parent=this.itemPull[a].parent,0<this.itemPull[a].tip.length&&(o.title=this.itemPull[a].tip),o.onselectstart=function(x){return(x=x||event).preventDefault?x.preventDefault():x.returnValue=!1,!1},o.onmouseover=function(x){n.conf.hide_tm[this.id]&&window.clearTimeout(n.conf.hide_tm[this.id]),"web"==n.conf.mode&&window.clearTimeout(n.conf.tm_handler),this._visible||n._redistribSubLevelSelection(this.id,this.parent),this._visible=!0},o.onmouseout=function(){"web"==n.conf.mode&&(n.conf.tm_handler&&window.clearTimeout(n.conf.tm_handler),n.conf.tm_handler=window.setTimeout(function(){n&&n._clearAndHide&&n._clearAndHide()},n.conf.tm_sec,"JavaScript"));var x=this;n.conf.hide_tm[this.id]&&window.clearTimeout(n.conf.hide_tm[this.id]),n.conf.hide_tm[this.id]=window.setTimeout(function(){x._visible=!1},50)},o.onclick=function(y){if(n.checkEvent("onClick")||!n.itemPull[this.id].complex){(y=y||event).cancelBubble=!0,y.preventDefault?y.preventDefault():y.returnValue=!1,tc=n.itemPull[this.id].complex?"c":"-",td="enabled"==n.itemPull[this.id].state?"-":"d";var x={ctrl:y.ctrlKey,alt:y.altKey,shift:y.shiftKey};switch(n.itemPull[this.id].type){case"checkbox":n._checkboxOnClickHandler(this.id.replace(n.idPrefix,""),tc+td+"n",x);break;case"radio":n._radioOnClickHandler(this.id.replace(n.idPrefix,""),tc+td+"n",x);break;case"item":n._doOnClick(this.id.replace(n.idPrefix,""),tc+td+"n",x)}return!1}};var u=this.idPull["polygon_"+this.itemPull[a].parent];null!=r&&(++r<0&&(r=0),r>u.tbd.childNodes.length-1&&(r=null)),null!=r&&null!=u.tbd.childNodes[r]?u.tbd.insertBefore(o,u.tbd.childNodes[r]):u.tbd.appendChild(o),this.idPull[o.id]=o},dhtmlXMenuObject.prototype._renderSeparator=function(c,m){var a=this.conf.context?"SubLevelArea":this.itemPull[c].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if("TopLevel"!=a||!this.conf.context){var h=this;if("TopLevel"!=a){var l=document.createElement("TR");l.className="sub_sep";var e=document.createElement("TD");e.colSpan="3",l.appendChild(e)}var g=document.createElement("DIV");if(g.id="separator_"+c,g.className="TopLevel"==a?"top_sep":"sub_sep",g.onselectstart=function(r){(r=r||event).preventDefault?r.preventDefault():r.returnValue=!1},g.onclick=function(s){(s=s||event).cancelBubble=!0;var r={ctrl:s.ctrlKey,alt:s.altKey,shift:s.shiftKey};h._doOnClick(this.id.replace("separator_"+h.idPrefix,""),"--s",r)},"TopLevel"==a){if(null!=m)++m<0&&(m=0),null!=this.cont.childNodes[m]?this.cont.insertBefore(g,this.cont.childNodes[m]):this.cont.appendChild(g);else{var o=this.cont.childNodes[this.cont.childNodes.length-1];-1==String(o).search("TopLevel_Text")?this.cont.appendChild(g):this.cont.insertBefore(g,o)}this.idPull[g.id]=g}else{var n=this.idPull["polygon_"+this.itemPull[c].parent];null!=m&&(++m<0&&(m=0),m>n.tbd.childNodes.length-1&&(m=null)),null!=m&&null!=n.tbd.childNodes[m]?n.tbd.insertBefore(l,n.tbd.childNodes[m]):n.tbd.appendChild(l),e.appendChild(g),this.idPull[g.id]=l}}},dhtmlXMenuObject.prototype.addNewSeparator=function(a,c){c=this.idPrefix+(null!=c?c:this._genStr(24));var e=this.idPrefix+this.getParentId(a);this._addItemIntoGlobalStrorage(c,e,"","separator",!1,"",""),this._renderSeparator(c,this.getItemPosition(a))},dhtmlXMenuObject.prototype._initObj=function(s,u,m){s instanceof Array||(null!=(m=s.parentId)&&0!==String(m).indexOf(this.idPrefix)&&(m=this.idPrefix+String(m)),s=s.items);for(var e=0;e<s.length;e++){void 0!==s[e].id&&null!=s[e].id||(s[e].id=this._genStr(24)),null==s[e].text&&(s[e].text=""),0!==String(s[e].id).indexOf(this.idPrefix)&&(s[e].id=this.idPrefix+String(s[e].id));var g={type:"item",tip:"",hotkey:"",state:"enabled",imgen:"",imgdis:""};for(var v in g)void 0===s[e][v]&&(s[e][v]=g[v]);if(""==s[e].imgen&&null!=s[e].img&&(s[e].imgen=s[e].img),""==s[e].imgdis&&null!=s[e].img_disabled&&(s[e].imgdis=s[e].img_disabled),null==s[e].title&&null!=s[e].text&&(s[e].title=s[e].text),null!=s[e].href&&(null!=s[e].href.link&&(s[e].href_link=s[e].href.link),null!=s[e].href.target&&(s[e].href_target=s[e].href.target)),null!=s[e].userdata)for(var v in s[e].userdata)this.userData[s[e].id+"_"+v]=s[e].userdata[v];void 0!==s[e].enabled&&0==window.dhx4.s2b(s[e].enabled)?s[e].state="disabled":void 0!==s[e].disabled&&1==window.dhx4.s2b(s[e].disabled)&&(s[e].state="disabled"),void 0===s[e].parent&&(s[e].parent=null!=m?m:this.idPrefix+this.topId),"checkbox"==s[e].type&&(s[e].checked=window.dhx4.s2b(s[e].checked),s[e].imgen=s[e].imgdis="chbx_"+(s[e].checked?"1":"0")),"radio"==s[e].type&&(s[e].checked=window.dhx4.s2b(s[e].checked),s[e].imgen=s[e].imgdis="rdbt_"+(s[e].checked?"1":"0"),void 0!==s[e].group&&null!=s[e].group||(s[e].group=this._genStr(24)),null==this.radio[s[e].group]&&(this.radio[s[e].group]=[]),this.radio[s[e].group].push(s[e].id)),this.itemPull[s[e].id]=s[e],null!=s[e].items&&0<s[e].items.length?(this.itemPull[s[e].id].complex=!0,this._initObj(s[e].items,!0,s[e].id)):this.conf.dload&&1==s[e].complex&&(this.itemPull[s[e].id].loaded="no"),this.itemPull[s[e].id].items=null}if(!0!==u)if(1==this.conf.dload)if(null==m)this._initTopLevelMenu();else{if(this._addSubMenuPolygon(m,m),this.conf.selected==m){var r=this.itemPull[m].parent==this.idPrefix+this.topId,c=r&&!this.conf.context?this.conf.dir_toplv:this.conf.dir_sublv,h=!1;if(r&&this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context){var w=this.idPull[m];if(1==w._mouseOver){var l=this.conf.top_tmtime-((new Date).getTime()-w._dynLoadTM);if(1<l){var o=m,n=this;w._menuOpenTM=window.setTimeout(function(){n._showPolygon(o,c),n=o=null},l),h=!0}}}h||this._showPolygon(m,c)}this.itemPull[m].loaded="yes",1==this.conf.dload_icon&&this._updateLoaderIcon(m,!1)}else this._init()},dhtmlXMenuObject.prototype._xmlToJson=function(h,g){var m=[];if(null==g){var n=h.getElementsByTagName(this.conf.tags.root);if(null==n||null!=n&&0==n.length)return{items:[]};n=n[0]}else n=h;null!=n.getAttribute("parentId")&&(g=this.idPrefix+n.getAttribute("parentId"));for(var c=0;c<n.childNodes.length;c++)if(void 0!==n.childNodes[c].tagName&&String(n.childNodes[c].tagName).toLowerCase()==this.conf.tags.item){var a=n.childNodes[c],u={id:this.idPrefix+(a.getAttribute("id")||this._genStr(24)),title:a.getAttribute("text")||"",imgen:a.getAttribute("img")||"",imgdis:a.getAttribute("imgdis")||"",tip:"",hotkey:"",type:a.getAttribute("type")||"item"};if(null!=a.getAttribute("cssNormal")&&(u.cssNormal=a.getAttribute("cssNormal")),"checkbox"==u.type&&(u.checked=a.getAttribute("checked")),"radio"==u.type&&(u.checked=a.getAttribute("checked"),u.group=a.getAttribute("group")),u.state="enabled",null!=a.getAttribute("enabled")&&0==window.dhx4.s2b(a.getAttribute("enabled"))?u.state="disabled":null!=a.getAttribute("disabled")&&1==window.dhx4.s2b(a.getAttribute("disabled"))&&(u.state="disabled"),u.parent=null!=g?g:this.idPrefix+this.topId,this.conf.dload)u.complex=null!=a.getAttribute("complex"),u.complex&&(u.loaded="no");else{var e=this._xmlToJson(a,u.id);u.items=e.items,u.complex=0<u.items.length}for(var o=0;o<a.childNodes.length;o++)if(void 0!==a.childNodes[o].tagName){var s=String(a.childNodes[o].tagName||"").toLowerCase();if(s==this.conf.tags.userdata){var l=a.childNodes[o];null!=l.getAttribute("name")&&(this.userData[u.id+"_"+l.getAttribute("name")]=null!=l.firstChild&&null!=l.firstChild.nodeValue?l.firstChild.nodeValue:"")}s==this.conf.tags.text_ext&&(u.title=a.childNodes[o].firstChild.nodeValue),s==this.conf.tags.tooltip&&(u.tip=a.childNodes[o].firstChild.nodeValue),s==this.conf.tags.hotkey&&(u.hotkey=a.childNodes[o].firstChild.nodeValue),s==this.conf.tags.href&&"item"==u.type&&(u.href_link=a.childNodes[o].firstChild.nodeValue,null!=a.childNodes[o].getAttribute("target")&&(u.href_target=a.childNodes[o].getAttribute("target")))}m.push(u)}return a={parentId:g,items:m}},dhtmlXMenuObject.prototype.enableDynamicLoading=function(a,c){this.conf.dload=!0,this.conf.dload_url=a,this.conf.dload_sign=-1==String(this.conf.dload_url).search(/\?/)?"?":"&",this.conf.dload_icon=c,this._init()},dhtmlXMenuObject.prototype._updateLoaderIcon=function(g,e){if(null!=this.idPull[g]&&!(0<=String(this.idPull[g].className).search("TopLevel_Item"))){var c=this.conf.rtl?0:2;if(this.idPull[g].childNodes[c]&&this.idPull[g].childNodes[c].childNodes[0]){var a=this.idPull[g].childNodes[c].childNodes[0];0===String(a.className).search("complex_arrow")&&(a.className="complex_arrow"+(e?"_loading":""))}}},dhtmlXMenuObject.prototype.addNewSibling=function(g,h,a,c,e,n){var m=this.idPrefix+(null!=h?h:this._genStr(24)),l=this.idPrefix+(null!=g?this.getParentId(g):this.topId);this._addItemIntoGlobalStrorage(m,l,a,"item",c,e,n),l!=this.idPrefix+this.topId||this.conf.context?this._renderSublevelItem(m,this.getItemPosition(g)):this._renderToplevelItem(m,this.getItemPosition(g))},dhtmlXMenuObject.prototype.addNewChild=function(m,l,g,a,c,e,h){if(null==m){if(!this.conf.context)return this.addNewSibling(m,g,a,c,e,h),void(null!=l&&this.setItemPosition(g,l));m=this.topId}g=this.idPrefix+(null!=g?g:this._genStr(24)),this.setHotKey&&this.setHotKey(m,""),m=this.idPrefix+m,this._addItemIntoGlobalStrorage(g,m,a,"item",c,e,h),null==this.idPull["polygon_"+m]&&this._renderSublevelPolygon(m,m),this._renderSublevelItem(g,l-1),this._redefineComplexState(m)},dhtmlXMenuObject.prototype.removeItem=function(g,l,h){l||(g=this.idPrefix+g);var m=null;if(g!=this.idPrefix+this.topId){if(null==this.itemPull[g])return;this.idPull["polygon_"+g]&&this.idPull["polygon_"+g]._tmShow&&window.clearTimeout(this.idPull["polygon_"+g]._tmShow);var u=this.itemPull[g].type;if("separator"==u){var s=this.idPull["separator_"+g];this.itemPull[g].parent==this.idPrefix+this.topId?(s.onclick=null,s.onselectstart=null,s.id=null):(s.childNodes[0].childNodes[0].onclick=null,s.childNodes[0].childNodes[0].onselectstart=null,s.childNodes[0].childNodes[0].id=null,s.childNodes[0].removeChild(s.childNodes[0].childNodes[0]),s.removeChild(s.childNodes[0])),s.parentNode.removeChild(s),this.idPull["separator_"+g]=null,this.itemPull[g]=null,delete this.idPull["separator_"+g],delete this.itemPull[g],s=null}else{for(m=this.itemPull[g].parent,(s=this.idPull[g]).onclick=null,s.oncontextmenu=null,s.onmouseover=null,s.onmouseout=null,s.onselectstart=null,s.id=null;0<s.childNodes.length;)s.removeChild(s.childNodes[0]);s.parentNode.removeChild(s),this.idPull[g]=null,this.itemPull[g]=null,delete this.idPull[g],delete this.itemPull[g],s=null}u=null}for(var o in this.itemPull)this.itemPull[o].parent==g&&this.removeItem(o,!0,!0);var r=new Array(g);null==m||h||null!=this.idPull["polygon_"+m]&&0==this.idPull["polygon_"+m].tbd.childNodes.length&&(r.push(m),this._updateItemComplexState(m,!1,!1));for(var c=0;c<r.length;c++)if(this.idPull["polygon_"+r[c]]){var e=this.idPull["polygon_"+r[c]];if(e.onclick=null,e.oncontextmenu=null,e.tbl.removeChild(e.tbd),e.tbd=null,e.childNodes[1].removeChild(e.tbl),e.tbl=null,e.id=null,e.parentNode.removeChild(e),e=null,window.dhx4.isIE6){var n="polygon_"+r[c]+"_ie6cover";null!=this.idPull[n]&&(document.body.removeChild(this.idPull[n]),delete this.idPull[n])}null!=this.idPull["arrowup_"+g]&&this._removeArrow&&this._removeArrow("arrowup_"+g),null!=this.idPull["arrowdown_"+g]&&this._removeArrow&&this._removeArrow("arrowdown_"+g),this.idPull["polygon_"+r[c]]=null,delete this.idPull["polygon_"+r[c]]}r=null,"dhx_terrace"==this.conf.skin&&1==arguments.length&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(n,a,e,m,g,c,l){var h={id:n,title:e,imgen:null!=c?c:"",imgdis:null!=l?l:"",type:m,state:1==g?"disabled":"enabled",parent:a,complex:!1,hotkey:"",tip:""};this.itemPull[h.id]=h},dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.conf.context=!0,1==this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+this.conf.skin+"_Middle",""),this.base._autoSkinUpdate=!1),null!=this.conf.ctx_baseid&&this.addContextZone(this.conf.ctx_baseid)},dhtmlXMenuObject.prototype.addContextZone=function(c){if(c==document.body){c="document.body."+this.idPrefix;var g=document.body}else if("string"==typeof c)g=document.getElementById(c);else g=c;var l=!1;for(var e in this.conf.ctx_zones)l=l||e==c||this.conf.ctx_zones[e]==g;if(1==l)return!1;this.conf.ctx_zones[c]=g;var h=this;window.dhx4.isOpera?(this.operaContext=function(a){h._doOnContextMenuOpera(a,h)},g.addEventListener("mouseup",this.operaContext,!1)):(null==g.oncontextmenu||g._oldContextMenuHandler||(g._oldContextMenuHandler=g.oncontextmenu),g.oncontextmenu=function(m){for(var a in dhtmlXMenuObject.prototype.liveInst)a!=h.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[a].context&&dhtmlXMenuObject.prototype.liveInst[a]._hideContextMenu();return(m=m||event).cancelBubble=!0,m.preventDefault?m.preventDefault():m.returnValue=!1,h._doOnContextBeforeCall(m,this),!1})},dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(g,a){for(var c in dhtmlXMenuObject.prototype.liveInst)c!=a.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[c].context&&dhtmlXMenuObject.prototype.liveInst[c]._hideContextMenu();return g.cancelBubble=!0,g.preventDefault?g.preventDefault():g.returnValue=!1,0==g.button&&1==g.ctrlKey&&a._doOnContextBeforeCall(g,this),!1},dhtmlXMenuObject.prototype.removeContextZone=function(a){if(!this.isContextZone(a))return!1;a==document.body&&(a="document.body."+this.idPrefix);var c=this.conf.ctx_zones[a];window.dhx4.isOpera?c.removeEventListener("mouseup",this.operaContext,!1):(c.oncontextmenu=null!=c._oldContextMenuHandler?c._oldContextMenuHandler:null,c._oldContextMenuHandler=null);try{this.conf.ctx_zones[a]=null,delete this.conf.ctx_zones[a]}catch(g){}return!0},dhtmlXMenuObject.prototype.isContextZone=function(a){if(a==document.body&&null!=this.conf.ctx_zones["document.body."+this.idPrefix])return!0;var c=!1;return null!=this.conf.ctx_zones[a]&&this.conf.ctx_zones[a]==document.getElementById(a)&&(c=!0),c},dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return null!=this.idPull["polygon_"+this.idPrefix+this.topId]&&""==this.idPull["polygon_"+this.idPrefix+this.topId].style.display},dhtmlXMenuObject.prototype._showContextMenu=function(c,e,a){if(this._clearAndHide(),null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;window.clearTimeout(this.conf.tm_handler),this.idPull[this.idPrefix+this.topId]=new Array(c,e),this._showPolygon(this.idPrefix+this.topId,"bottom"),this.callEvent("onContextMenu",[a])},dhtmlXMenuObject.prototype._hideContextMenu=function(){if(null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;this._clearAndHide(),this._hidePolygon(this.idPrefix+this.topId)},dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(l,n){if(this.conf.ctx_zoneid=n.id,this._clearAndHide(),this._hideContextMenu(),1==window.dhx4.isChrome||1==window.dhx4.isEdge||1==window.dhx4.isOpera||1==window.dhx4.isIE11)var m=window.dhx4.absLeft(l.target)+l.offsetX,h=window.dhx4.absTop(l.target)+l.offsetY;else if(1==window.dhx4.isIE6||1==window.dhx4.isIE7||1==window.dhx4.isIE)m=window.dhx4.absLeft(l.srcElement)+l.x||0,h=window.dhx4.absTop(l.srcElement)+l.y||0;else{var g=l.srcElement||l.target,c=window.dhx4.isIE||window.dhx4.isKHTML?l.offsetX:l.layerX,a=window.dhx4.isIE||window.dhx4.isKHTML?l.offsetY:l.layerY;m=window.dhx4.absLeft(g)+c,h=window.dhx4.absTop(g)+a}this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[n.id,l])&&this.conf.ctx_autoshow&&(this._showContextMenu(m,h,n.id),this.callEvent("onAfterContextMenu",[n.id,l])):this.conf.ctx_autoshow&&(this._showContextMenu(m,h,n.id),this.callEvent("onAfterContextMenu",[n.id]))},dhtmlXMenuObject.prototype.showContextMenu=function(a,c){this._showContextMenu(a,c,!1)},dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()},dhtmlXMenuObject.prototype.setAutoShowMode=function(a){this.conf.ctx_autoshow=1==a},dhtmlXMenuObject.prototype.setAutoHideMode=function(a){this.conf.ctx_autohide=1==a},dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(a){this.conf.ctx_hideall=1==a},dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.conf.ctx_hideall},dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var e in this.itemPull)if(this.itemPull[e].parent==this.idPrefix+this.topId&&null!=this.idPull[e]){var h=!1,g=!1;for(var c in this.idPull[e].parentNode.firstChild==this.idPull[e]&&(h=!0),this.idPull[e].parentNode.lastChild==this.idPull[e]&&(g=!0),this.itemPull)"separator"==this.itemPull[c].type&&this.itemPull[c].parent==this.idPrefix+this.topId&&(this.idPull[e].nextSibling==this.idPull["separator_"+c]&&(g=!0),this.idPull[e].previousSibling==this.idPull["separator_"+c]&&(h=!0));this.idPull[e].style.borderLeftWidth=h?"1px":"0px",this.idPull[e].style.borderTopLeftRadius=this.idPull[e].style.borderBottomLeftRadius=h?"3px":"0px",this.idPull[e].style.borderTopRightRadius=this.idPull[e].style.borderBottomRightRadius=g?"3px":"0px",this.idPull[e]._bl=h,this.idPull[e]._br=g}},dhtmlXMenuObject.prototype._improveTerraceButton=function(c,a){a?(this.idPull[c].style.borderBottomLeftRadius=this.idPull[c]._bl?"3px":"0px",this.idPull[c].style.borderBottomRightRadius=this.idPull[c]._br?"3px":"0px"):(this.idPull[c].style.borderBottomLeftRadius="0px",this.idPull[c].style.borderBottomRightRadius="0px")},void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_menu=function(h,c,g,a,e){return void 0!==e?h=e:((h=document.createElement("DIV")).className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders"),h.appendChild(document.createElement("DIV"))),this.cell.insertBefore(h,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),this.conf.ofs_nodes.t.menu=!0,this._updateIdx(),h},dhtmlXCellObject.prototype.attachMenu=function(a){if(!this.dataNodes.menu)return this.callEvent("_onBeforeContentAttach",["menu"]),void 0===a&&(a={}),void 0===a.skin&&(a.skin=this.conf.skin),a.parent=this._attachObject("menu").firstChild,this.dataNodes.menu=new dhtmlXMenuObject(a),this._adjustCont(this._idd),a.parent=null,a=null,this.callEvent("_onContentAttach",[]),this.dataNodes.menu},dhtmlXCellObject.prototype.detachMenu=function(){this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,delete this.dataNodes.menu,this._detachObject("menu"))},dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")},dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")},dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu}),dhtmlXMenuObject.prototype.setItemEnabled=function(a){this._changeItemState(a,"enabled",this._getItemLevelType(a))},dhtmlXMenuObject.prototype.setItemDisabled=function(a){this._changeItemState(a,"disabled",this._getItemLevelType(a))},dhtmlXMenuObject.prototype.isItemEnabled=function(a){return null!=this.itemPull[this.idPrefix+a]&&"enabled"==this.itemPull[this.idPrefix+a].state},dhtmlXMenuObject.prototype._changeItemState=function(h,g,c){var a=this.idPrefix+h;return null!=this.itemPull[a]&&null!=this.idPull[a]&&this.itemPull[a].state!=g&&(this.itemPull[a].state=g,this.itemPull[a].parent!=this.idPrefix+this.topId||this.conf.context?this.idPull[a].className="sub_item"+("enabled"==this.itemPull[a].state?"":"_dis"):this.idPull[a].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[a].state?"Normal":"Disabled"),this._updateItemComplexState(this.idPrefix+h,this.itemPull[this.idPrefix+h].complex,!1),this._updateItemImage(h,c),this.idPrefix+this.conf.last_click==a&&"TopLevel"!=c&&this._redistribSubLevelSelection(a,this.itemPull[a].parent),"TopLevel"==c&&this.conf.context),!1},dhtmlXMenuObject.prototype.getItemText=function(a){return null!=this.itemPull[this.idPrefix+a]?this.itemPull[this.idPrefix+a].title:""},dhtmlXMenuObject.prototype.setItemText=function(l,h){if(l=this.idPrefix+l,null!=this.itemPull[l]&&null!=this.idPull[l])if(this._clearAndHide(),this.itemPull[l].title=h,this.itemPull[l].parent!=this.idPrefix+this.topId||this.conf.context){for(g=null,a=0;a<this.idPull[l].childNodes[1].childNodes.length;a++)"sub_item_text"==String(this.idPull[l].childNodes[1].childNodes[a].className||"")&&(g=this.idPull[l].childNodes[1].childNodes[a]);""==String(this.itemPull[l].title).length||null==this.itemPull[l].title?g&&(g.parentNode.removeChild(g),g=null,this.idPull[l].childNodes[1].innerHTML="&nbsp;"):(g||((g=document.createElement("DIV")).className="sub_item_text",this.idPull[l].childNodes[1].innerHTML="",this.idPull[l].childNodes[1].appendChild(g)),g.innerHTML=this.itemPull[l].title)}else{for(var g=null,a=0;a<this.idPull[l].childNodes.length;a++)try{"top_level_text"==this.idPull[l].childNodes[a].className&&(g=this.idPull[l].childNodes[a])}catch(c){}""==String(this.itemPull[l].title).length||null==this.itemPull[l].title?null!=g&&g.parentNode.removeChild(g):(g||((g=document.createElement("DIV")).className="top_level_text",this.conf.rtl&&0<this.idPull[l].childNodes.length?this.idPull[l].insertBefore(g,this.idPull[l].childNodes[0]):this.idPull[l].appendChild(g)),g.innerHTML=this.itemPull[l].title)}},dhtmlXMenuObject.prototype.loadFromHTML=function(e,l,g){var c=this.conf.tags.item;this.conf.tags.item="div";var h="string"==typeof e?document.getElementById(e):e,a=this._xmlToJson(h,this.idPrefix+this.topId);this._initObj(a),this.conf.tags.item=c,l&&h.parentNode.removeChild(h),h=objOd=null,null!=onload&&("function"==typeof g?g():"function"==typeof window[g]&&window[g]())},dhtmlXMenuObject.prototype.hideItem=function(a){this._changeItemVisible(a,!1)},dhtmlXMenuObject.prototype.showItem=function(a){this._changeItemVisible(a,!0)},dhtmlXMenuObject.prototype.isItemHidden=function(c){var a=null;return null!=this.idPull[this.idPrefix+c]&&(a="none"==this.idPull[this.idPrefix+c].style.display),a},dhtmlXMenuObject.prototype._changeItemVisible=function(e,c){var a=this.idPrefix+e;null!=this.itemPull[a]&&("separator"==this.itemPull[a].type&&(a="separator_"+a),null!=this.idPull[a]&&(this.idPull[a].style.display=c?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+e].parent)))},dhtmlXMenuObject.prototype.setUserData=function(e,a,c){this.userData[this.idPrefix+e+"_"+a]=c},dhtmlXMenuObject.prototype.getUserData=function(c,a){return null!=this.userData[this.idPrefix+c+"_"+a]?this.userData[this.idPrefix+c+"_"+a]:null},dhtmlXMenuObject.prototype.setOpenMode=function(a){this.conf.mode="win"==a?"win":"web"},dhtmlXMenuObject.prototype.setWebModeTimeout=function(a){this.conf.tm_sec=isNaN(a)?400:a},dhtmlXMenuObject.prototype.getItemImage=function(c){var a=new Array(null,null);return c=this.idPrefix+c,"item"==this.itemPull[c].type&&(a[0]=this.itemPull[c].imgen,a[1]=this.itemPull[c].imgdis),a},dhtmlXMenuObject.prototype.setItemImage=function(e,a,c){"item"==this.itemPull[this.idPrefix+e].type&&(this.itemPull[this.idPrefix+e].imgen=a,this.itemPull[this.idPrefix+e].imgdis=c,this._updateItemImage(e,this._getItemLevelType(e)))},dhtmlXMenuObject.prototype.clearItemImage=function(a){this.setItemImage(a,"","")},dhtmlXMenuObject.prototype.setVisibleArea=function(c,a,g,e){this.conf.v_enabled=!0,this.conf.v.x1=c,this.conf.v.x2=a,this.conf.v.y1=g,this.conf.v.y2=e},dhtmlXMenuObject.prototype.setTooltip=function(c,a){c=this.idPrefix+c,null!=this.itemPull[c]&&null!=this.idPull[c]&&(this.idPull[c].title=0<a.length?a:null,this.itemPull[c].tip=a)},dhtmlXMenuObject.prototype.getTooltip=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].tip},dhtmlXMenuObject.prototype.setTopText=function(a){this.conf.context||(null==this._topText&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.rtl?"left":"left"==this.conf.align?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=a)},dhtmlXMenuObject.prototype.setAlign=function(a){this.conf.align!=a&&("left"!=a&&"right"!=a||(this.conf.align=a,this.cont&&(this.cont.className="right"==this.conf.align?"align_right":"align_left"),null!=this._topText&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+("left"==this.conf.align?"right":"left"))))},dhtmlXMenuObject.prototype.setHref=function(e,a,c){null!=this.itemPull[this.idPrefix+e]&&(this.itemPull[this.idPrefix+e].href_link=a,null!=c&&(this.itemPull[this.idPrefix+e].href_target=c))},dhtmlXMenuObject.prototype.clearHref=function(a){null!=this.itemPull[this.idPrefix+a]&&(delete this.itemPull[this.idPrefix+a].href_link,delete this.itemPull[this.idPrefix+a].href_target)},dhtmlXMenuObject.prototype.getCircuit=function(c){for(var a=new Array(c);this.getParentId(c)!=this.topId;)c=this.getParentId(c),a[a.length]=c;return a.reverse()},dhtmlXMenuObject.prototype._getCheckboxState=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].checked},dhtmlXMenuObject.prototype._setCheckboxState=function(c,a){null!=this.itemPull[this.idPrefix+c]&&(this.itemPull[this.idPrefix+c].checked=a)},dhtmlXMenuObject.prototype._updateCheckboxImage=function(c){if(null!=this.idPull[this.idPrefix+c]){this.itemPull[this.idPrefix+c].imgen="chbx_"+(this._getCheckboxState(c)?"1":"0"),this.itemPull[this.idPrefix+c].imgdis=this.itemPull[this.idPrefix+c].imgen;try{this.idPull[this.idPrefix+c].childNodes[this.conf.rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+c].imgen}catch(a){}}},dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(g,a,c){if("d"!=a.charAt(1)&&null!=this.itemPull[this.idPrefix+g]){var e=this._getCheckboxState(g);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[g,e,this.conf.ctx_zoneid,c])&&this.setCheckboxState(g,!e):this.setCheckboxState(g,!e),this.checkEvent("onClick")&&this.callEvent("onClick",[g])}},dhtmlXMenuObject.prototype.setCheckboxState=function(c,a){this._setCheckboxState(c,a),this._updateCheckboxImage(c)},dhtmlXMenuObject.prototype.getCheckboxState=function(a){return this._getCheckboxState(a)},dhtmlXMenuObject.prototype.addCheckbox=function(n,g,o,r,s,a,h){if(this.conf.context&&g==this.topId);else{if(null==this.itemPull[this.idPrefix+g])return;if("child"==n&&"item"!=this.itemPull[this.idPrefix+g].type)return}var l="chbx_"+(a?"1":"0"),e=l;if("sibling"==n){var c=this.idPrefix+(null!=r?r:this._genStr(24)),m=this.idPrefix+this.getParentId(g);this._addItemIntoGlobalStrorage(c,m,s,"checkbox",h,l,e),this.itemPull[c].checked=a,this._renderSublevelItem(c,this.getItemPosition(g))}else{c=this.idPrefix+(null!=r?r:this._genStr(24)),m=this.idPrefix+g;this._addItemIntoGlobalStrorage(c,m,s,"checkbox",h,l,e),this.itemPull[c].checked=a,null==this.idPull["polygon_"+m]&&this._renderSublevelPolygon(m,m),this._renderSublevelItem(c,o-1),this._redefineComplexState(m)}},dhtmlXMenuObject.prototype.setHotKey=function(m,a){if(m=this.idPrefix+m,null!=this.itemPull[m]&&null!=this.idPull[m]&&(this.itemPull[m].parent!=this.idPrefix+this.topId||this.conf.context)&&!this.itemPull[m].complex){var c=this.itemPull[m].type;if("item"==c||"checkbox"==c||"radio"==c){var l=null;try{"sub_item_hk"==this.idPull[m].childNodes[this.conf.rtl?0:2].childNodes[0].className&&(l=this.idPull[m].childNodes[this.conf.rtl?0:2].childNodes[0])}catch(h){}if(0==a.length)this.itemPull[m].hotkey_backup=this.itemPull[m].hotkey,this.itemPull[m].hotkey="",null!=l&&l.parentNode.removeChild(l);else{if(this.itemPull[m].hotkey=a,(this.itemPull[m].hotkey_backup=null)==l){(l=document.createElement("DIV")).className="sub_item_hk";for(var g=this.idPull[m].childNodes[this.conf.rtl?0:2];0<g.childNodes.length;)g.removeChild(g.childNodes[0]);g.appendChild(l)}l.innerHTML=a}}}},dhtmlXMenuObject.prototype.getHotKey=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].hotkey},dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(a){for(var e=this._getSubItemToDeselectByPolygon(a),c=0;c<this.conf.opened_poly.length;c++)this.conf.opened_poly[c]!=a&&this._hidePolygon(this.conf.opened_poly[c]);for(c=0;c<e.length;c++)null!=this.idPull[e[c]]&&"enabled"==this.itemPull[e[c]].state&&(this.idPull[e[c]].className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Item_Normal")},dhtmlXMenuObject.prototype._checkArrowsState=function(g){var c=this.idPull["polygon_"+g].childNodes[1],e=this.idPull["arrowup_"+g],a=this.idPull["arrowdown_"+g];0==c.scrollTop?e.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp_Disabled":e.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp"+(e.over?"_Over":""),c.scrollTop+c.offsetHeight<c.scrollHeight?a.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown"+(a.over?"_Over":""):a.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown_Disabled",c=e=a=null},dhtmlXMenuObject.prototype._addUpArrow=function(g){var c=this,e=document.createElement("DIV");e.pId=this.idPrefix+g,e.id="arrowup_"+this.idPrefix+g,e.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp",e.over=!1,e.onselectstart=function(h){return(h=h||event).preventDefault?h.preventDefault():h.returnValue=!1,!1},e.oncontextmenu=function(h){return(h=h||event).preventDefault?h.preventDefault():h.returnValue=!1,!1},e.onmouseover=function(){"web"==c.conf.mode&&window.clearTimeout(c.conf.tm_handler),c._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,c._canScrollUp=!0,c._doScrollUp(this.pId,!0))},e.onmouseout=function(){"web"==c.conf.mode&&(window.clearTimeout(c.conf.tm_handler),c.conf.tm_handler=window.setTimeout(function(){c._clearAndHide()},c.conf.tm_sec,"JavaScript")),this.over=!1,c._canScrollUp=!1,this.className!="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(c.conf.of_utm))},e.onclick=function(h){return(h=h||event).preventDefault?h.preventDefault():h.returnValue=!1,!(h.cancelBubble=!0)};var a=this.idPull["polygon_"+this.idPrefix+g];a.childNodes[0].appendChild(e),this.idPull[e.id]=e,a=e=null},dhtmlXMenuObject.prototype._addDownArrow=function(g){var c=this,e=document.createElement("DIV");e.pId=this.idPrefix+g,e.id="arrowdown_"+this.idPrefix+g,e.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown",e.over=!1,e.onselectstart=function(h){return(h=h||event).preventDefault?h.preventDefault():h.returnValue=!1,!1},e.oncontextmenu=function(h){return(h=h||event).preventDefault?h.preventDefault():h.returnValue=!1,!1},e.onmouseover=function(){"web"==c.conf.mode&&window.clearTimeout(c.conf.tm_handler),c._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,c._canScrollDown=!0,c._doScrollDown(this.pId,!0))},e.onmouseout=function(){"web"==c.conf.mode&&(window.clearTimeout(c.conf.tm_handler),c.conf.tm_handler=window.setTimeout(function(){c._clearAndHide()},c.conf.tm_sec,"JavaScript")),this.over=!1,c._canScrollDown=!1,this.className!="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(c.conf.of_dtm))},e.onclick=function(h){return(h=h||event).preventDefault?h.preventDefault():h.returnValue=!1,!(h.cancelBubble=!0)};var a=this.idPull["polygon_"+this.idPrefix+g];a.childNodes[2].appendChild(e),this.idPull[e.id]=e,a=e=null},dhtmlXMenuObject.prototype._removeUpArrow=function(c){var a="arrowup_"+this.idPrefix+c;this._removeArrow(a)},dhtmlXMenuObject.prototype._removeDownArrow=function(c){var a="arrowdown_"+this.idPrefix+c;this._removeArrow(a)},dhtmlXMenuObject.prototype._removeArrow=function(a){var c=this.idPull[a];c.onselectstart=null,c.oncontextmenu=null,c.onmouseover=null,c.onmouseout=null,c.onclick=null,c.parentNode&&c.parentNode.removeChild(c),c=null,this.idPull[a]=null;try{delete this.idPull[a]}catch(g){}},dhtmlXMenuObject.prototype._isArrowExists=function(a){return null!=this.idPull["arrowup_"+a]&&null!=this.idPull["arrowdown_"+a]},dhtmlXMenuObject.prototype._doScrollUp=function(l,g){var a=this.idPull["polygon_"+l].childNodes[1];if(this._canScrollUp&&0<a.scrollTop){var e=!1,h=a.scrollTop-this.conf.of_ustep;if(h<0&&(e=!0,h=0),a.scrollTop=h,e)g=!0;else{var c=this;this.conf.of_utm=window.setTimeout(function(){c._doScrollUp(l,!1),c=null},this.conf.of_utime)}}else this._canScrollUp=!1,this._checkArrowsState(l);g&&this._checkArrowsState(l)},dhtmlXMenuObject.prototype._doScrollDown=function(l,g){var a=this.idPull["polygon_"+l].childNodes[1];if(this._canScrollDown&&a.scrollTop+a.offsetHeight<=a.scrollHeight){var e=!1,h=a.scrollTop+this.conf.of_dstep;if(h+a.offsetHeight>=a.scrollHeight&&(e=!0,h=a.scrollHeight-a.offsetHeight),a.scrollTop=h,e)g=!0;else{var c=this;this.conf.of_dtm=window.setTimeout(function(){c._doScrollDown(l,!1),c=null},this.conf.of_dtime)}}else this._canScrollDown=!1,this._checkArrowsState(l);g&&this._checkArrowsState(l)},dhtmlXMenuObject.prototype._countPolygonItems=function(l){var g=0;for(var c in this.itemPull){var e=this.itemPull[c].parent,h=this.itemPull[c].type;e!=this.idPrefix+l||"item"!=h&&"radio"!=h&&"checkbox"!=h||g++}return g},dhtmlXMenuObject.prototype.setOverflowHeight=function(g){if("auto"===g)return this.conf.overflow_limit=0,void(this.conf.auto_overflow=!0);if(!(0==this.conf.overflow_limit&&g<=0))if(this._clearAndHide(),0<=this.conf.overflow_limit&&0<g)this.conf.overflow_limit=g;else if(0<this.conf.overflow_limit&&g<=0){for(var e in this.itemPull)if(this._isArrowExists(e)){var c=String(e).replace(this.idPrefix,"");this._removeUpArrow(c),this._removeDownArrow(c),this.idPull["polygon_"+e].childNodes[1].style.height=""}this.conf.overflow_limit=0}else;},dhtmlXMenuObject.prototype._getRadioImgObj=function(g){try{var a=this.idPull[this.idPrefix+g].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(c){a=null}return a},dhtmlXMenuObject.prototype._setRadioState=function(g,e){var c=this._getRadioImgObj(g);if(null!=c){var a=this.itemPull[this.idPrefix+g];a.checked=e,a.imgen="rdbt_"+(a.checked?"1":"0"),a.imgdis=a.imgen,c.className="sub_icon "+a.imgen}},dhtmlXMenuObject.prototype._radioOnClickHandler=function(g,a,c){if("d"!=a.charAt(1)&&null!=this.itemPull[this.idPrefix+g].group){var e=this.itemPull[this.idPrefix+g].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[e,this.getRadioChecked(e),g,this.conf.ctx_zoneid,c])&&this.setRadioChecked(e,g):this.setRadioChecked(e,g),this.checkEvent("onClick")&&this.callEvent("onClick",[g])}},dhtmlXMenuObject.prototype.getRadioChecked=function(g){for(var l=null,e=0;e<this.radio[g].length;e++){var h=this.radio[g][e].replace(this.idPrefix,""),a=this._getRadioImgObj(h);if(null!=a)null!=a.className.match(/rdbt_1$/gi)&&(l=h)}return l},dhtmlXMenuObject.prototype.setRadioChecked=function(c,g){if(null!=this.radio[c])for(var a=0;a<this.radio[c].length;a++){var e=this.radio[c][a].replace(this.idPrefix,"");this._setRadioState(e,e==g)}},dhtmlXMenuObject.prototype.addRadioButton=function(o,h,r,s,u,v,a,l){if(this.conf.context&&h==this.topId);else{if(null==this.itemPull[this.idPrefix+h])return;if("child"==o&&"item"!=this.itemPull[this.idPrefix+h].type)return}var e=this.idPrefix+(null!=s?s:this._genStr(24)),m="rdbt_"+(a?"1":"0"),c=m;if("sibling"==o){var n=this.idPrefix+this.getParentId(h);this._addItemIntoGlobalStrorage(e,n,u,"radio",l,m,c),this._renderSublevelItem(e,this.getItemPosition(h))}else{n=this.idPrefix+h;this._addItemIntoGlobalStrorage(e,n,u,"radio",l,m,c),null==this.idPull["polygon_"+n]&&this._renderSublevelPolygon(n,n),this._renderSublevelItem(e,r-1),this._redefineComplexState(n)}var g=null!=v?v:this._genStr(24);this.itemPull[e].group=g,null==this.radio[g]&&(this.radio[g]=new Array),this.radio[g][this.radio[g].length]=e,1==a&&this.setRadioChecked(g,String(e).replace(this.idPrefix,""))},dhtmlXMenuObject.prototype.serialize=function(){return"<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>"},dhtmlXMenuObject.prototype._readLevel=function(g){var h="";for(var o in this.itemPull)if(this.itemPull[o].parent==g){var c="",e="",s="",n=String(this.itemPull[o].id).replace(this.idPrefix,""),m="",r=""!=this.itemPull[o].title?' text="'+this.itemPull[o].title+'"':"",l="";"item"==this.itemPull[o].type&&(""!=this.itemPull[o].imgen&&(c=' img="'+this.itemPull[o].imgen+'"'),""!=this.itemPull[o].imgdis&&(e=' imgdis="'+this.itemPull[o].imgdis+'"'),""!=this.itemPull[o].hotkey&&(s="<hotkey>"+this.itemPull[o].hotkey+"</hotkey>")),"separator"==this.itemPull[o].type?m=' type="separator"':"disabled"==this.itemPull[o].state&&(l=' enabled="false"'),"checkbox"==this.itemPull[o].type&&(m=' type="checkbox"'+(this.itemPull[o].checked?' checked="true"':"")),"radio"==this.itemPull[o].type&&(m=' type="radio" group="'+this.itemPull[o].group+'" '+(this.itemPull[o].checked?' checked="true"':"")),h+="<item id='"+n+"'"+r+m+c+e+l+">",h+=s,this.itemPull[o].complex&&(h+=this._readLevel(o)),h+="</item>"}return h},dhtmlXMenuObject.prototype.enableEffect=function(e,h,g){for(var c in this._menuEffect=("opacity"==e||"slide"==e||"slide+"==e)&&e,this._pOpStyleIE=0<=navigator.userAgent.search(/MSIE\s[678]\.0/gi),this.idPull)0===c.search(/polygon/)&&(this._pOpacityApply(c,this._pOpStyleIE?100:1),this.idPull[c].style.height="");this._pOpMax=(void 0===h?100:h)/(this._pOpStyleIE?1:100),this._pOpStyleName=this._pOpStyleIE?"filter":"opacity",this._pOpStyleValue=this._pOpStyleIE?"progid:DXImageTransform.Microsoft.Alpha(Opacity=#)":"#",this._pSlSteps=this._pOpStyleIE?10:20,this._pSlTMTimeMax=g||50},dhtmlXMenuObject.prototype._showPolygonEffect=function(a){this._pShowHide(a,!0)},dhtmlXMenuObject.prototype._hidePolygonEffect=function(a){this._pShowHide(a,!1)},dhtmlXMenuObject.prototype._pOpacityApply=function(a,c){this.idPull[a].style[this._pOpStyleName]=String(this._pOpStyleValue).replace("#",c||this.idPull[a]._op)},dhtmlXMenuObject.prototype._pShowHide=function(a,c){if(this.idPull){if(null!=this.idPull[a]._tmShow){if(0<this.idPull[a]._step_h&&1==c||this.idPull[a]._step_h<0&&0==c)return;window.clearTimeout(this.idPull[a]._tmShow),this.idPull[a]._tmShow=null,this.idPull[a]._max_h=null}if(0!=c||"hidden"!=this.idPull[a].style.visibility&&"none"!=this.idPull[a].style.display){if(1==c&&"none"==this.idPull[a].style.display&&(this.idPull[a].style.visibility="hidden",this.idPull[a].style.display=""),null==this.idPull[a]._max_h){if(this.idPull[a]._max_h=parseInt(this.idPull[a].offsetHeight),this.idPull[a]._h=1==c?0:this.idPull[a]._max_h,this.idPull[a]._step_h=Math.round(this.idPull[a]._max_h/this._pSlSteps)*(1==c?1:-1),0==this.idPull[a]._step_h)return;this.idPull[a]._step_tm=Math.round(this._pSlTMTimeMax/this._pSlSteps),"slide+"==this._menuEffect||"opacity"==this._menuEffect?(this.idPull[a].op_tm=this.idPull[a]._step_tm,this.idPull[a].op_step=this._pOpMax/this._pSlSteps*(1==c?1:-1),this._pOpStyleIE&&(this.idPull[a].op_step=Math.round(this.idPull[a].op_step)),this.idPull[a]._op=1==c?0:this._pOpMax):this.idPull[a]._op=this._pOpStyleIE?100:1,this._pOpacityApply(a),0===this._menuEffect.search(/slide/)&&(this.idPull[a].style.height="0px"),this.idPull[a].style.visibility="visible"}this._pEffectSet(a,this.idPull[a]._h+this.idPull[a]._step_h)}}},dhtmlXMenuObject.prototype._pEffectSet=function(e,c){if(this.idPull)if(this.idPull[e]._tmShow&&window.clearTimeout(this.idPull[e]._tmShow),this.idPull[e]._h=Math.max(0,Math.min(c,this.idPull[e]._max_h)),0===this._menuEffect.search(/slide/)&&(this.idPull[e].style.height=this.idPull[e]._h+"px"),c+=this.idPull[e]._step_h,"slide+"!=this._menuEffect&&"opacity"!=this._menuEffect||(this.idPull[e]._op=Math.max(0,Math.min(this._pOpMax,this.idPull[e]._op+this.idPull[e].op_step)),this._pOpacityApply(e)),0<this.idPull[e]._step_h&&c<=this.idPull[e]._max_h||this.idPull[e]._step_h<0&&0<=c){var a=this;this.idPull[e]._tmShow=window.setTimeout(function(){a._pEffectSet(e,c)},this.idPull[e]._step_tm)}else 0===this._menuEffect.search(/slide/)&&(this.idPull[e].style.height=""),this.idPull[e]._step_h<0&&(this.idPull[e].style.visibility="hidden"),"slide+"!=this._menuEffect&&"opacity"!=this._menuEffect||(this.idPull[e]._op=this.idPull[e]._step_h<0?this._pOpStyleIE?100:1:this._pOpMax,this._pOpacityApply(e)),this.idPull[e]._tmShow=null,this.idPull[e]._h=null,this.idPull[e]._max_h=null,this.idPull[e]._step_tm=null},dhtmlXRibbon.prototype.setSizes=function(){null!=this._tabbar&&"function"==typeof this.setSizes&&this._tabbar.setSizes()},dhtmlXRibbon.prototype._renderData=function(c){var a=this._base.firstChild;null!=c&&(this.conf.icons_path=c.icons_path||this.conf.icons_path,this.conf.icons_css="awesome"==c.iconset,c.tabs instanceof Array?(this._base.className=this._base.className.replace(/\s?dhxrb_without_tabbar/i,""),a.className="dhxrb_with_tabbar",this._tabbar=new dhtmlXTabBar(a),this._attachEventTabbar(),this._tabbar.setSkin(this.conf.skin),null!=this.conf.arrows_mode&&this._tabbar.setArrowsMode(this.conf.arrows_mode),this.childIds=this._appendTabs(c.tabs)):c.items instanceof Array&&(/\s?dhxrb_without_tabbar/i.test(this._base.className)||(this._base.className+=" dhxrb_without_tabbar"),/\s?dhxrb_background_area/i.test(a.className)&&(a.className="dhxrb_background_area"),a.innerHTML="<div class='dhxrb_g_area'></div>",this.childIds=this._appendBlocks(c.items,a.firstChild)),this.callEvent("_onHeightChanged",[]))},dhtmlXRibbon.prototype._xmlToJson=function(c){var a=c.lastChild||null,g={},e=[];return a&&"ribbon"==a.tagName&&(e=this._convertXmlNodeListIntoObject(a.childNodes)),e[0]&&e[0].type&&"block"==e[0].type.toLowerCase()?g.items=e:g.tabs=e,g},dhtmlXRibbon.prototype._convertXmlNodeListIntoObject=function(c){var e,a,g,h=[];for(a=c.length,e=0;e<a;e++)(g=this._covertXmlNodeToObject(c[e]))&&h.push(g);return h},dhtmlXRibbon.prototype._covertXmlNodeToObject=function(g){if(!g||!g.tagName||"item"!=g.tagName.toLowerCase()&&"tab"!=g.tagName.toLowerCase())return null;var e,a,c=g.attributes,h={};for(a=c.length,e=0;e<a;e++)switch(c[e].name){case"isbig":h.isbig=dhx4.s2b(c[e].value);break;case"state":h.state=dhx4.s2b(c[e].value);break;default:h[c[e].name]=c[e].value}return g.childNodes.length&&("buttonCombo"==g.getAttribute("type")||"buttonSelect"==g.getAttribute("type")?h.data=g:"tab"==g.tagName.toLowerCase()?h.items=this._convertXmlNodeListIntoObject(g.childNodes):h.list=this._convertXmlNodeListIntoObject(g.childNodes)),h},dhtmlXRibbon.prototype._appendTabs=function(h){var c,a,e,g=[];for(a=h.length,c=0;c<a;c++)e=this._addTab(h[c]),h[c].items instanceof Array&&(e.childIds=this._appendBlocks(h[c].items,e.base,e)),g.push(e.id);return g},dhtmlXRibbon.prototype._addTab=function(e){var a,c={conf:{active:!1,text:"",width:null,position:null,disable:!1},base:document.createElement("div"),type:"tab",childIds:[]};for(a in e)"items"!=a&&(c.conf[a]=e[a]);for(e.id?c.id=e.id:c.id=dhx4.newId();this._items[c.id];)c.id=dhx4.newId();return this._tabbar.addTab(c.id,c.conf.text,c.conf.width,c.conf.position,c.conf.active),c.base.className="dhxrb_g_area",c.base._dhx_ribbonId=c.id,this.tabs(c.id).attachObject(c.base),this._changeApiForTab(this.tabs(c.id)),this._items[c.id]=c},dhtmlXRibbon.prototype._changeApiForTab=function(c){var a;for(a in this._tabOriginalApi)this._tabOriginalApi[a]=this._tabOriginalApi[a]||c[a],c[a]=this._tabCustomApi[a]},dhtmlXRibbon.prototype._tabOriginalApi={enable:null,disable:null,close:null},dhtmlXRibbon.prototype._appendBlocks=function(a,s,e){var m,g,n,h,o,c,r=[];for(e=e||null,g=a.length,m=0;m<g;m++)if("object"==typeof a[m]&&"block"==a[m].type){if(n=this._addBlock(a[m],s),a[m].list&&a[m].list instanceof Array)for(o=(h=a[m].list).length,c=0;c<o;c++)this._addItem(n.id,null,null,h[c]);null!=e&&(n.parentId=e.id),n.conf.disable&&this.disable(n.id),r.push(n.id)}return r},dhtmlXRibbon.prototype._addBlock=function(h,g){var m,c;for(c in m={conf:{text:"",text_pos:"bottom",type:"block",mode:"cols",disable:!1},type:"block",childIds:[],base:document.createElement("div"),contForItems:document.createElement("div"),contForText:document.createElement("div")},h)"list"!=c&&"type"!=c&&"id"!=c&&(m.conf[c]=h[c]);for(h.id?m.id=h.id:m.id=dhx4.newId();this._items[m.id];)m.id=dhx4.newId();return m.base.className="dhxrb_block_base",g.appendChild(m.base),m.contForItems.className="dhxrb_block_items",m.contForText.className="dhxrb_block_label",m.base.appendChild(m.contForItems),m.conf.text&&(m.contForText.innerHTML=m.conf.text,"top"==m.conf.text_pos?m.base.insertBefore(m.contForText,m.contForItems):m.base.appendChild(m.contForText)),m.base._dhx_ribbonId=m.id,this._items[m.id]=m},dhtmlXRibbon.prototype._addItem=function(e,c,o,m){var a,l,g,h=this._items[e],s=null,n=this;if("newLevel"!=m.type&&!this.items[m.type])return null;if("newLevel"==m.type?this._addNewLevel(h):"group"==h.type?((a=document.createElement("div")).className="dhxrb_in_group",h.base.appendChild(a)):m.isbig?((a=document.createElement("div")).className="dhxrb_big_button",h.contForItems.appendChild(a)):(l=this._getContainerForSmallItem(h),(a=document.createElement("div")).className="rows"==h.conf.mode?"dhxrb_in_row":"dhxrb_3rows_button",l.appendChild(a)),a){for(var r in this._attachEventForItem(a),g={icons_path:m.icons_path||this.conf.icons_path,icons_css:this.conf.icons_css,skin:this.conf.skin},m)g[r]=m[r];for(g.id||(g.id=dhx4.newId());this._items[g.id];)g.id=dhx4.newId();s=this.items[g.type]&&this.items[g.type].render?this.items[g.type].render(a,g):null}return null!=s&&((this._items[s.id]=s).parentId=h.id,h.childIds.push(s.id),a._dhx_ribbonId=s.id,g.onclick&&"function"==typeof g.onclick&&(this._eventHandlers[s.id]=this._eventHandlers[s.id]||{},this._eventHandlers[s.id].onclick=g.onclick),s.callEvent=function(){n.callEvent.apply(n,arguments)},s._callHandler=function(){n._callHandler.apply(n,arguments)},this.items[g.type]&&"function"==typeof this.items[g.type].callAfterInit&&this.items[g.type].callAfterInit.apply(this,[s])),s},dhtmlXRibbon.prototype._callHandler=function(c,a){this._eventHandlers[c]&&this._eventHandlers[c].onclick&&this._eventHandlers[c].onclick.apply(this,a)},dhtmlXRibbon.prototype.items={},dhtmlXRibbon.prototype.items.button={render:function(c,a){var g,h;for(g in h={base:c,id:a.id,type:a.type,conf:{text:"",text_pos:a.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:a.skin,icons_css:a.icons_css}},a)"id"!=g&&"onclick"!=g&&"type"!=g&&(h.conf[g]=a[g]);if(1==h.conf.icons_css)var e="<i class='"+h.conf.icons_path+(h.conf.img||"")+"'></i>";else e="<img class='dhxrb_image"+(h.conf.img?"'":" dhxrb_invisible'")+" src='"+(h.conf.img?h.conf.icons_path+h.conf.img:"")+"' />";return c.innerHTML=e+"<div class='dhxrb_label_button'>"+h.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(h),h.conf.disable&&this.disable(h),h},getText:function(a){return a.conf.text},setText:function(c,e){var a=c.base.childNodes[1];c.conf.text=e,a.innerHTML=e},setImage:function(c,a){c.conf.img=a,0==c.conf.disable&&(c.base.childNodes[0][c.conf.icons_css?"className":"src"]=c.conf.icons_path+c.conf.img)},setImageDis:function(c,a){c.conf.imgdis=a,1==c.conf.disable&&(c.base.childNodes[0][c.conf.icons_css?"className":"src"]=c.conf.icons_path+c.conf.imgdis)},mousedown:function(a,g,c){return!0},click:function(a,g,c){return 0!=c.button||(g._callHandler(a.id,[a.id]),a.callEvent("onClick",[a.id])),!1},disable:function(c){var e=c.base.childNodes[0],a=c.base.childNodes[1];return c.conf.imgdis&&(e[c.conf.icons_css?"className":"src"]=c.conf.icons_path+c.conf.imgdis,/\s?dhxrb_invisible/i.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_invisible/i,""))),/\s?dhxrb_disable_text_style/i.test(a.className)||(a.className+=" dhxrb_disable_text_style"),!0},enable:function(c){var e=c.base.childNodes[0],a=c.base.childNodes[1];return c.conf.img?e[c.conf.icons_css?"className":"src"]=c.conf.icons_path+c.conf.img:/\s?dhxrb_invisible/i.test(e.className)||(e.className+=" dhxrb_invisible"),/\s?dhxrb_disable_text_style/i.test(a.className)&&(a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0}},dhtmlXRibbon.prototype.items.buttonTwoState={click:function(a,g,c){return!1},afterRender:function(a){a.conf.state&&this.setState(a,a.conf.state)},mouseover:function(a){return/dhxrb_highlight0/.test(a.base.className)||(a.base.className+=" dhxrb_highlight0"),!1},mouseout:function(a){return/dhxrb_highlight0/.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_highlight0/,"")),!1},mousedown:function(a,g,c){return g._callHandler(a.id,[a.id,!a.conf.state]),this.setState(a,!a.conf.state,!0),!1},mouseup:function(a){return!1},setState:function(a,c,e){e=e||!1,(c=dhx4.s2b(c))?/dhxrb_highlight1/.test(a.base.className)||(a.base.className+=" dhxrb_highlight1"):/dhxrb_highlight1/.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,"")),a.conf.state=c,e&&a.callEvent("onStateChange",[a.id,a.conf.state])},getState:function(a){return 1==a.conf.state}},dhtmlXRibbon.prototype.items.buttonSegment={click:function(a,g,c){return!1},mousedown:function(a,g,c){return this.setState(a,g,!0),!1},callAfterInit:function(a){(a.conf.state||null==dhtmlXRibbon.prototype.items.buttonSegment._getSelectedNeighbor(a,this))&&(a.conf.state&&(a.conf.state=!1),dhtmlXRibbon.prototype.items.buttonSegment.setState(a,this,!1))},afterRender:function(){},setState:function(a,h,g){g=g||!1;var e=null;0==dhx4.s2b(a.conf.state)&&(null!=(e=this._getSelectedNeighbor(a,h))&&this._unSelect(e),/dhxrb_highlight1/.test(a.base.className)||(a.base.className+=" dhxrb_highlight1"),a.conf.state=!0,g&&(h._callHandler(a.id,[a.id,e?e.id:null]),h.callEvent("onStateChange",[a.id,e?e.id:null])))},remove:function(e,m){var g,h=dhx4.s2b(e.conf.state),l=null,a=0,c=m._items[e.parentId];if(h){for(;c.childIds[a]&&null==l;)"buttonSegment"==(g=m._items[c.childIds[a]]).type&&g!=e&&(l=g),a++;l&&this.setState(l,m)}},_unSelect:function(a){dhx4.s2b(a.conf.state)&&(/dhxrb_highlight1/.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,"")),a.conf.state=!1)},_getSelectedNeighbor:function(g,n){var c,a,m,e=n._items[g.parentId],h=null;for(a=e.childIds.length,c=0;c<a;c++)if("buttonSegment"==(m=n._items[e.childIds[c]]).type&&m.conf.state){h=m;break}return h}},dhtmlXRibbon.prototype.items.buttonSelect={itemCollection:[],_isAttachedEventInWindow:!1,afterRender:function(c){var a=c.base.childNodes[1];a.innerHTML+="<span class='dhxrb_arrow'>&nbsp;</span>",c.menu=null,this.itemCollection.push(c),this._attachEventToWindow(),a=null},setText:function(a,e){var c=a.base.childNodes[1].lastChild;a.conf.text=e,a.base.childNodes[1].innerHTML=e,a.base.childNodes[1].appendChild(c)},setOptionText:function(a,e,c){null!=a.menu?a.menu.setItemText(e,c):this._loopThroughItems(a.conf.items,e,c,!1)},getOptionText:function(a,c){return null!=a.menu?a.menu.getItemText(c):this._loopThroughItems(a.conf.items,c,null,!0)},_loopThroughItems:function(a,l,h,g){for(var e=0;e<a.length;e++){if(a[e].id==l)return 1!=g?(a[e].text=h,!0):a[e].text;if(null!=a[e].items){var c=this._loopThroughItems(a[e].items,l,h,g);if(null!=c)return c}}return null},_attachEventToWindow:function(){0==this._isAttachedEventInWindow&&("function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._hideAllMenus,!1):document.body.attachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!0)},_detachEventFromWindow:function(){"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._hideAllMenus,!1):document.body.detachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!1},_hideAllMenus:function(l){for(var g=(l=l||event).target||l.srcElement,a=!0;null!=g&&1==a;)null!=g.className&&/SubLevelArea_Polygon/i.test(g.className)?a=!1:g=g.parentNode;if(0!=a){var c=dhtmlXRibbon.prototype.items.buttonSelect.itemCollection;for(var n in c){var h=c[n];h.menu instanceof dhtmlXMenuObject&&(h._skipHiding?h._skipHiding=!1:dhtmlXRibbon.prototype.items.buttonSelect.hideMenu(h))}}},mousedown:function(a,g,c){return a._skipHiding=!0,this.showMenu(a),!1},mouseup:function(a){return!1},click:function(){},setState:function(){},showMenu:function(c){var a=dhx4.absLeft(c.base),e=dhx4.absTop(c.base)+c.base.offsetHeight;c.menu instanceof dhtmlXMenuObject?c.menu.showContextMenu(a,e):(c.menu=new dhtmlXMenuObject({parent:c.base,icons_path:c.conf.icons_path,context:!0,items:c.conf.items,skin:c.conf.skin}),c.conf.data&&(c.menu.loadStruct(c.conf.data),delete c.conf.data),c.menu.setAutoHideMode(!1),c.menu.attachEvent("onHide",function(g){null==g&&dhtmlXRibbon.prototype.items.buttonSelect._doOnHideMenu(c)}),c.menu.attachEvent("onShow",function(g){null==g&&dhtmlXRibbon.prototype.items.buttonSelect._doOnShowMenu(c)}),c.menu.attachEvent("onClick",function(g){c.callEvent("onClick",[g,c.id])}),c.base.oncontextmenu=function(){return!1},dhtmlXRibbon.prototype.items.buttonSelect.showMenu(c))},hideMenu:function(a){a.menu instanceof dhtmlXMenuObject&&a.menu.hideContextMenu()},remove:function(c){var e;c.menu instanceof dhtmlXMenuObject&&(c.menu.unload(),c.menu=null),c.base.oncontextmenu=null,-1!=(e=dhtmlXRibbon.prototype._indexOf(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection,c))&&dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.splice(e,1),0==dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.length&&this._detachEventFromWindow()},setSkin:function(a,c){a.menu instanceof dhtmlXMenuObject&&a.menu.setSkin(c)},_doOnHideMenu:function(a){a._skipHiding?a._skipHiding=!1:/dhxrb_highlight1/.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,""))},_doOnShowMenu:function(a){/dhxrb_highlight1/.test(a.base.className)||(a.base.className+=" dhxrb_highlight1")}},dhtmlXRibbon.prototype.items.group={render:function(c,a){var e,g;for(e in g={base:c,id:a.id,type:a.type,conf:{disable:!1,skin:a.skin},childIds:[]},c.className="dhxrb_group",a)"id"!=e&&"onclick"!=e&&"type"!=e&&(g.conf[e]=a[e]);return g},callAfterInit:function(h){this._detachEventFromItem(h.base);var g,a,n,e,m=h.conf.list;for(a=m?m.length:0,g=0;g<a;g++)null!=(n=this._addItem(h.id,null,null,m[g]))&&(!(e=n.base.childNodes[1])||e.innerHTML||/\s?dhxrb_label_hide/i.test(e.className)||(e.className+=" dhxrb_label_hide"));dhtmlXRibbon.prototype.items.group.normalize(h),h.conf.disable&&this.disable(h.id),m=void 0},normalize:function(n){for(var g,m,a=n.base.children,e=a.length,c=!1,o=0,h=0;h<e;h++)if(/dhxrb_separator_group/i.test(a[h].className)||!/dhxrb_item_hide/i.test(a[h].className)){if(Math.ceil((h-o)/2)-Math.floor((h-o)/2)==0){if(/dhxrb_separator_group/i.test(a[h].className)){a[h].parentNode.removeChild(a[h]),c=!0;break}}else if(!/dhxrb_separator_group/i.test(a[h].className)){(g=document.createElement("div")).className="dhxrb_separator_groupp",n.base.insertBefore(g,a[h]),c=!0;break}}else o++;c?this.normalize(n):(m=n.base.lastChild)&&/dhxrb_separator_group/i.test(m.className)&&m.parentNode.removeChild(m)},hideChild:function(c,g){var a=dhtmlXRibbon.prototype._indexOf(c.base.children,g.base);if(0==a)a++;else{if(-1==a)return;a--}var e=c.base.children[a];e&&/dhxrb_separator_group/i.test(e.className)&&e.parentNode.removeChild(e)},showChild:function(a){this.normalize(a)}},dhtmlXRibbon.prototype.items.input={render:function(c,a){var e,g;for(e in g={base:c,id:a.id,type:a.type,conf:{text:"",text_pos:a.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:a.skin,value:""}},a)"id"!=e&&"onclick"!=e&&"type"!=e&&(g.conf[e]=a[e]);return c.innerHTML="<input type='text' class='dhxrb_input'><div class='dhxrb_label_button'>"+g.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(g),g.conf.disable&&this.disable(g),g.conf.width&&this.setWidth(g,g.conf.width),g.conf.value&&this.setValue(g,g.conf.value),g},callAfterInit:function(c){var a=c.base.childNodes[0];this._detachEventFromItem(c.base),this._attachEventsToInput(a)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,change:function(c){var a=c.base.childNodes[0];c.conf.value=a.value},keydown:function(c,h,g){if(13==g.keyCode){var a=c.base.childNodes[0];c.conf.value=a.value,h.callEvent("onEnter",[c.id,c.conf.value])}},remove:function(c,e){var a=c.base.childNodes[0];e._detachEventsFromInput(a)},getValue:function(c){var e,a=c.base.childNodes[0];return e=a.value,a=void 0,e},setValue:function(c,e){c.base.childNodes[0].value=e,c.conf.value=e},setWidth:function(c,e){c.base.childNodes[0].style.width=parseInt(e)+"px"},disable:function(e){var c=e.base.childNodes[0],a=e.base.childNodes[1];return c.disabled=!0,/\s?dhxrb_disable_text_style/i.test(a.className)||(a.className+=" dhxrb_disable_text_style"),!0},enable:function(e){var c=e.base.childNodes[0],a=e.base.childNodes[1];return c.disabled=!1,/\s?dhxrb_disable_text_style/i.test(a.className)&&(a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},getInput:function(a){return a.base.childNodes[0]}},dhtmlXRibbon.prototype.getInput=function(c){var a=this._items[c];return null==a||"input"!=a.type?null:this.items[a.type].getInput(a)},dhtmlXRibbon.prototype.items.checkbox={render:function(c,a){var e,g;for(e in g={base:c,id:a.id,type:a.type,conf:{text:"",text_pos:a.isbig?"bottom":"right",disable:!1,checked:!1}},a)"id"!=e&&"onclick"!=e&&"type"!=e&&(g.conf[e]=a[e]);return c.innerHTML="<div class='dhxrb_checkbox'></div><div class='dhxrb_label_checkbox'>"+g.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(g),g.conf.checked&&this.check(g),g},callAfterInit:function(a){a.conf.disable&&this.disable(a.id)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,mousedown:function(a){return!1},mouseup:function(a){return!1},click:function(a,g,c){if(0!=c.button)return!1;"checkbox"==a.type&&(a.conf.checked?this.uncheck(a,!0):this.check(a,!0))},check:function(a,c){c=c||!1,"checkbox"==a.type&&(a.conf.checked=!0,/\s?dhxrb_checked/i.test(a.base.className)||(a.base.className+=" dhxrb_checked"),c&&a.callEvent("onCheck",[a.id,a.conf.checked]))},uncheck:function(a,c){c=c||!1,"checkbox"==a.type&&(a.conf.checked=!1,/\s?dhxrb_checked/i.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_checked/i,"")),c&&a.callEvent("onCheck",[a.id,a.conf.checked]))},isChecked:function(a){return"checkbox"==a.type&&1==a.conf.checked},disable:function(a){return!0},enable:function(a){return!0}},dhtmlXRibbon.prototype.items.text={render:function(a,g){var e={base:a,id:g.id,type:g.type,conf:{text:""}};for(var c in g)"id"!=c&&"type"!=c&&(e.conf[c]=g[c]);return a.innerHTML="<div class='dhxrb_item_text'>"+e.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(e),e},callAfterInit:function(a){this._detachEventFromItem(a.base)},getText:function(a){return a.conf.text},setText:function(a,c){a.conf.text=c,a.base.firstChild.innerHTML=a.conf.text}},dhtmlXRibbon.prototype.items.buttonCombo={render:function(a,c){var e,g,h={};for(e in g={base:a,id:c.id,type:c.type,conf:{text:"",text_pos:"right",width:140,skin:c.skin,callEvent:!0,mode:c.comboType,image_path:c.comboImagePath,default_image:c.comboDefaultImage,default_image_dis:c.comboDefaultImageDis}},c)"id"!=e&&"onclick"!=e&&"type"!=e&&(g.conf[e]=c[e]);for(e in g.conf)"text"!=e&&"text_pos"!=e&&"disable"!=e&&"data"!=e&&(h[e]=g.conf[e]);return g.base.className+=" dhxrb_buttoncombo_cont",g.base.innerHTML="<div class='dhxrb_buttoncombo'></div><div class='dhxrb_label_button'>"+g.conf.text+"</div>",h.parent=g.base.firstChild,g.combo=new dhtmlXCombo(h),g.combo.setSkin(h.skin),g.combo.attachEvent("onChange",function(l,m){g._callHandler(g.id,[l,m]),1==g.conf.callEvent&&g.callEvent("onSelectOption",[g.id,l,m]),g.conf.callEvent=!0}),g.conf.data&&(g.combo.load(g.conf.data),delete g.conf.data),"function"==typeof this.afterRender&&this.afterRender(g),g.conf.disable&&this.disable(g),g},callAfterInit:function(a){this._detachEventFromItem(a.base)},disable:function(c){var a=c.base.lastChild;return c.combo instanceof dhtmlXCombo&&c.combo.disable(),/\s?dhxrb_disable_text_style/i.test(a.className)||(a.className+=" dhxrb_disable_text_style"),!0},enable:function(c){var a=c.base.lastChild;return c.combo instanceof dhtmlXCombo&&c.combo.enable(),/\s?dhxrb_disable_text_style/i.test(a.className)&&(a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(a){a.combo instanceof dhtmlXCombo&&(a.combo.unload(),a.combo=null)},getValue:function(a){var c=null;return a.combo instanceof dhtmlXCombo&&(c=a.combo.getSelectedValue()),c},setValue:function(a,c,e){a.combo instanceof dhtmlXCombo&&(a.conf.callEvent=e,a.combo.setComboValue(c),a.conf.callEvent=!0)},setSkin:function(a,c){a.combo instanceof dhtmlXCombo&&a.combo.setSkin(c)}},dhtmlXRibbon.prototype.items.slider={render:function(a,h){var e,g,c={};for(e in g={base:a,id:h.id,type:h.type,conf:{text:"",text_pos:"right",size:150,vertical:!1,min:0,max:99,value:0,step:1,margin:10,disabled:!1,enableTooltip:!1}},h)"id"!=e&&"onclick"!=e&&"type"!=e&&(g.conf[e]=h[e]);for(e in g.conf)"text"!=e&&"text_pos"!=e&&"isbig"!=e&&(c[e]=g.conf[e]);return g.base.innerHTML="<center><div class='dhxrb_slider'></div></center><div class='dhxrb_label_button'>"+g.conf.text+"</div>",c.parent=g.base.firstChild.firstChild,g.slider=new dhtmlXSlider(c),"function"==typeof this.afterRender&&this.afterRender(g),g.conf.disable&&this.disable(g),g.slider.attachEvent("onChange",function(l){g._callHandler(g.id,[l]),g.callEvent("onValueChange",[g.id,l])}),g},callAfterInit:function(a){this._detachEventFromItem(a.base)},setSkin:function(a,c){a.slider instanceof dhtmlXSlider&&a.slider.setSkin(c)},disable:function(c){var a=c.base.childNodes[1];return c.slider instanceof dhtmlXSlider&&c.slider.disable(),/\s?dhxrb_disable_text_style/i.test(a.className)||(a.className+=" dhxrb_disable_text_style"),!0},enable:function(c){var a=c.base.childNodes[1];return c.slider instanceof dhtmlXSlider&&c.slider.enable(),/\s?dhxrb_disable_text_style/i.test(a.className)&&(a.className=a.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(a){a.slider instanceof dhtmlXSlider&&(a.slider.unload(),a.slider=null)},getValue:function(a){var c=null;return a.slider instanceof dhtmlXSlider&&(c=a.slider.getValue()),c},setValue:function(a,c){a.slider instanceof dhtmlXSlider&&a.slider.setValue(c)}},dhtmlXRibbon.prototype.items._extends=function(e,c){var a;for(a in c)e[a]=e[a]||c[a];return e},dhtmlXRibbon.prototype._addNewLevel=function(e){var c,a;"rows"==e.conf.mode?((c=e.contForItems.lastChild)&&/dhxrb_block_rows/i.test(c.className)&&c.childNodes.length<3||((c=document.createElement("div")).className="dhxrb_block_rows",e.contForItems.appendChild(c)),(a=document.createElement("div")).className="dhxrb_block_row",c.appendChild(a)):((a=document.createElement("div")).className="dhxrb_3rows_block",e.contForItems.appendChild(a))},dhtmlXRibbon.prototype._attachEventForItem=function(a){"function"==typeof window.addEventListener?(a.addEventListener("mouseover",this._doOnHighlight0,!1),a.addEventListener("mouseout",this._doOffHighlight0,!1),a.addEventListener("mousedown",this._doOnHighlight1,!1),a.addEventListener("mouseup",this._doOffHighlight1,!1),a.addEventListener("click",this._doOnClick,!1)):(a.attachEvent("onmouseover",this._doOnHighlight0),a.attachEvent("onmouseout",this._doOffHighlight0),a.attachEvent("onmousedown",this._doOnHighlight1),a.attachEvent("onmouseup",this._doOffHighlight1),a.attachEvent("onclick",this._doOnClick))},dhtmlXRibbon.prototype._detachEventFromItem=function(a){"function"==typeof window.addEventListener?(a.removeEventListener("mouseover",this._doOnHighlight0,!1),a.removeEventListener("mouseout",this._doOffHighlight0,!1),a.removeEventListener("mousedown",this._doOnHighlight1,!1),a.removeEventListener("mouseup",this._doOffHighlight1,!1),a.removeEventListener("click",this._doOnClick,!1)):(a.detachEvent("onmouseover",this._doOnHighlight0),a.detachEvent("onmouseout",this._doOffHighlight0),a.detachEvent("onmousedown",this._doOnHighlight1),a.detachEvent("onmouseup",this._doOffHighlight1),a.detachEvent("onclick",this._doOnClick))},dhtmlXRibbon.prototype._attachEventsToInput=function(a){"function"==typeof window.addEventListener?(a.addEventListener("focus",this._doOnFocus,!1),a.addEventListener("blur",this._doOnBlur,!1),a.addEventListener("change",this._doOnChange,!1),a.addEventListener("keydown",this._doOnKeydown,!1)):(a.attachEvent("onfocus",this._doOnFocus),a.attachEvent("onblur",this._doOnBlur),a.attachEvent("onchange",this._doOnChange),a.attachEvent("onkeydown",this._doOnKeydown))},dhtmlXRibbon.prototype._detachEventsFromInput=function(a){"function"==typeof window.addEventListener?(a.removeEventListener("focus",this._doOnFocus,!1),a.removeEventListener("blur",this._doOnBlur,!1),a.removeEventListener("change",this._doOnChange,!1),a.removeEventListener("keydown",this._doOnKeydown,!1)):(a.detachEvent("onfocus",this._doOnFocus),a.detachEvent("onblur",this._doOnBlur),a.detachEvent("onchange",this._doOnChange),a.detachEvent("onkeydown",this._doOnKeydown))},dhtmlXRibbon.prototype._getContainerForSmallItem=function(e){var c=e.contForItems.lastChild,a=null;return"rows"==e.conf.mode?c&&/\s?dhxrb_block_rows/i.test(c.className)?(a=c.lastChild)||((a=document.createElement("div")).className="dhxrb_block_row",c.appendChild(a)):((c=document.createElement("div")).className="dhxrb_block_rows",e.contForItems.appendChild(c),(a=document.createElement("div")).className="dhxrb_block_row",c.appendChild(a)):c&&/dhxrb_3rows_block/i.test(c.className)&&c.childNodes.length<3?a=c:((a=document.createElement("div")).className="dhxrb_3rows_block",e.contForItems.appendChild(a)),a},dhtmlXRibbon.prototype._findItemByNode=function(a){for(;a&&!a._dhx_ribbonId;)a=a.parentNode;return a},dhtmlXRibbon.prototype._indexOf=function(a,g){var e,c;for(c=a.length,e=0;e<c;e++)if(a[e]==g)return e;return-1},dhtmlXRibbon.prototype._removeItem=function(e){var a,g,c=this._items[e.parentId];"group"!=e.type?(delete this._items[e.id],a=e.base.parentNode,this._detachEventFromItem(e.base),a.removeChild(e.base),"block"==c.type?a!=c.contForItems&&0==a.childNodes.length&&a.parentNode.removeChild(a):"group"==c.type&&dhtmlXRibbon.prototype.items.group.normalize(c),-1!=(g=this._indexOf(c.childIds,e.id))&&c.childIds.splice(g,1),this.items[e.type]&&"function"==typeof this.items[e.type].remove&&this.items[e.type].remove(e,this)):this._removeGroup(e)},dhtmlXRibbon.prototype._removeGroup=function(g){for(var l,c=[],e=this._items[g.parentId],a=g.base.parentNode,h=0;h<g.childIds.length;h++)c.push(this._items[g.childIds[h]]);for(h=0;h<c.length;h++)this._removeItem(c[h]);delete this._items[g.id],g.base.parentNode&&a.removeChild(g.base),0==a.childNodes.length&&a.parentNode.removeChild(a),-1!=(l=this._indexOf(e.childIds,g.id))&&e.childIds.splice(l,1),this.items[g.type]&&"function"==typeof this.items[g.type].remove&&this.items[g.type].remove(g)},dhtmlXRibbon.prototype._removeBlock=function(h){for(var g,c,a=[],e=0;e<h.childIds.length;e++)a.push(this._items[h.childIds[e]]);for(e=0;e<a.length;e++)this._removeItem(a[e]);delete this._items[h.id],h.base.parentNode.removeChild(h.base),c=h.parentId?this._items[h.parentId]:this,-1!=(g=this._indexOf(c.childIds,h.id))&&c.childIds.splice(g,1)},dhtmlXRibbon.prototype._removeTab=function(c,a){for(var g,h=[],e=0;e<c.childIds.length;e++)h.push(this._items[c.childIds[e]]);for(e=0;e<h.length;e++)this._removeBlock(h[e]);delete this._items[c.id],-1!=(g=this._indexOf(this.childIds,c.id))&&this.childIds.splice(g,1)},dhtmlXRibbon.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0},dhtmlXRibbon.prototype._setSkinForItems=function(e){var a,c;for(a in this._items)(c=this._items[a]).conf.skin=e,dhtmlXRibbon.prototype.items[c.type]&&"function"==typeof dhtmlXRibbon.prototype.items[c.type].setSkin&&dhtmlXRibbon.prototype.items[c.type].setSkin(c,e);a=c=void 0},dhtmlXRibbon.prototype._setBlockText=function(a,c){a.conf.text=c,!(a.contForText.innerHTML=c)&&0!=c&&a.contForText.parentNode?a.contForText.parentNode.removeChild(a.contForText):a.contForText.parentNode||("top"==a.conf.text_pos?a.base.insertBefore(a.contForText,a.contForItems):a.base.appendChild(a.contForText))},dhtmlXRibbon.prototype.hide=function(e){var c=this._items[e];if((!this.items[c.type]||"function"!=typeof this.items[c.type].hide||1==this.items[c.type].hide(c))&&"tab"!=c.type){/\s?dhxrb_item_hide/i.test(c.base.className)||(c.base.className+=" dhxrb_item_hide");var a=this._items[c.parentId];a&&this.items[a.type]&&"function"==typeof this.items[a.type].hideChild&&this.items[a.type].hideChild(a,c)}},dhtmlXRibbon.prototype.show=function(e){var c=this._items[e];if((!this.items[c.type]||"function"!=typeof this.items[c.type].show||1==this.items[c.type].show(c))&&"tab"!=c.type){/\s?dhxrb_item_hide/i.test(c.base.className)&&(c.base.className=c.base.className.replace(/\s?dhxrb_item_hide/i,""));var a=this._items[c.parentId];a&&this.items[a.type]&&"function"==typeof this.items[a.type].showChild&&this.items[a.type].showChild(a,c)}},dhtmlXRibbon.prototype.check=function(e,c){c=dhx4.s2b(c);var a=this._items[e];a&&!a.conf.checked&&"function"==typeof this.items[a.type].check&&(this.items[a.type].check(a),c&&this.callEvent("onCheck",[a.id,a.conf.checked]))},dhtmlXRibbon.prototype.uncheck=function(e,c){c=dhx4.s2b(c);var a=this._items[e];a&&a.conf.checked&&"function"==typeof this.items[a.type].uncheck&&(this.items[a.type].uncheck(a),c&&this.callEvent("onCheck",[a.id,a.conf.checked]))},dhtmlXRibbon.prototype.isChecked=function(c){var a=this._items[c];if(a&&"function"==typeof this.items[a.type].isChecked)return this.items[a.type].isChecked(a)},dhtmlXRibbon.prototype.disable=function(g,a){var c=this._items[g];if((!this.items[c.type]||"function"!=typeof this.items[c.type].disable||1==this.items[c.type].disable(c))&&"tab"!=c.type){if("block"==c.type||"group"==c.type)for(var e=0;e<c.childIds.length;e++)this.disable(c.childIds[e]);/\s?dhxrb_item_disable/i.test(c.base.className)||(c.base.className+=" dhxrb_item_disable"),null!=c.base.className.match(/dhxrb_highlight/gi)&&("buttonTwoState"==c.type?c.base.className=c.base.className.replace(/\s*dhxrb_highlight0/gi,""):c.base.className=c.base.className.replace(/\s*dhxrb_highlight\d/gi,"")),c.conf.disable=!0}},dhtmlXRibbon.prototype.enable=function(e,a){var c=this._items[e];if((!this.items[c.type]||"function"!=typeof this.items[c.type].enable||1==this.items[c.type].enable(c))&&"tab"!=c.type){if("block"==c.type||"group"==c.type)for(q=0;q<c.childIds.length;q++)this.enable(c.childIds[q]);/\s?dhxrb_item_disable/i.test(c.base.className)&&(c.base.className=c.base.className.replace(/\s?dhxrb_item_disable/i,"")),c.conf.disable=!1}},dhtmlXRibbon.prototype.isEnabled=function(c){var a=this._items[c];return this.items[a.type]&&"function"==typeof this.items[a.type].isEnabled?this.items[a.type].isEnabled(a):"tab"==a.type?void 0:1!=a.conf.disable},dhtmlXRibbon.prototype.isVisible=function(c){var a=this._items[c];return this.items[a.type]&&"function"==typeof this.items[a.type].isVisible?this.items[a.type].isVisible(a):"tab"==a.type?void 0:!/\s?dhxrb_item_hide/i.test(a.base.className)},dhtmlXRibbon.prototype.setItemState=function(g,c,e){c=dhx4.s2b(c),e=dhx4.s2b(e);var a=this._items[g];if(a&&"function"==typeof this.items[a.type].setState)switch(a.type){case"buttonSegment":this.items[a.type].setState(a,this,e);break;default:this.items[a.type].setState(a,c,e)}},dhtmlXRibbon.prototype.getItemState=function(c){var a=this._items[c];if(a&&"function"==typeof this.items[a.type].getState)switch(a.type){case"buttonTwoState":case"buttonSegment":return this.items[a.type].getState(a)}return null},dhtmlXRibbon.prototype.setIconPath=function(a){this.conf.icons_path=a},dhtmlXRibbon.prototype.setIconset=function(a){this.conf.icons_css="awesome"==a},dhtmlXRibbon.prototype.removeItem=function(c){var a=this._items[c];if(null!=a)switch(a.type){case"tab":break;case"block":this._removeBlock(a);break;case"group":this._removeGroup(a);break;default:this._removeItem(a)}},dhtmlXRibbon.prototype.setSkin=function(h){if(h="string"==typeof h?h.toLowerCase():"",1==this._skinCollection[h]){var e,a,c=-1,g="dhtmlxribbon";if((e=this._base.className.match(/\S\w+/gi))instanceof Array){for(a in this._skinCollection){if(-1!=c)break;c=this._indexOf(e,g+"_"+a)}c=-1==c?e.length:c}else e=[],c=0;e[c]=g+"_"+h,this._base.className=e.join(" "),this.conf.skin=h,null!=this._tabbar&&this._tabbar.setSkin(h),this._setSkinForItems(h)}},dhtmlXRibbon.prototype.tabs=function(a){return this._tabbar instanceof dhtmlXTabBar?this._tabbar.tabs(a):void 0},dhtmlXRibbon.prototype.getItemType=function(c){var a=this._items[c];return a?a.type:void 0},dhtmlXRibbon.prototype.getValue=function(e){var a=this._items[e],c=void 0;return a&&this.items[a.type]&&"function"==typeof this.items[a.type].getValue&&(c=this.items[a.type].getValue(a)),c},dhtmlXRibbon.prototype.setValue=function(g,c,e){var a=this._items[g];e=!1!==e,a&&this.items[a.type]&&"function"==typeof this.items[a.type].setValue&&this.items[a.type].setValue(a,c,e)},dhtmlXRibbon.prototype.getItemText=function(c){var a=this._items[c];return a?"tab"==a.type?this.tabs(a.id).getText():"block"==a.type?this.items.button.getText(a):this.items[a.type]&&"function"==typeof this.items[a.type].getText?this.items[a.type].getText(a):null:null},dhtmlXRibbon.prototype.setItemText=function(e,c){var a=this._items[e];a&&("tab"==a.type?this.tabs(a.id).setText(c):"block"==a.type?this._setBlockText(a,c):this.items[a.type]&&"function"==typeof this.items[a.type].setText&&this.items[a.type].setText(a,c))},dhtmlXRibbon.prototype.setItemOptionText=function(g,e,c){var a=this._items[g];"buttonSelect"==a.type&&this.items[a.type].setOptionText(a,e,c)},dhtmlXRibbon.prototype.getItemOptionText=function(e,c){var a=this._items[e];return"buttonSelect"==a.type?this.items[a.type].getOptionText(a,c):null},dhtmlXRibbon.prototype.setItemImage=function(e,a){var c=this._items[e];null!=c&&null!=this.items[c.type]&&"function"==typeof this.items[c.type].setImage&&this.items[c.type].setImage(c,a)},dhtmlXRibbon.prototype.setItemImageDis=function(e,a){var c=this._items[e];null!=c&&null!=this.items[c.type]&&"function"==typeof this.items[c.type].setImageDis&&this.items[c.type].setImageDis(c,a)},dhtmlXRibbon.prototype.getCombo=function(c){var a=this._items[c];return null!=a&&"buttonCombo"==a.type?a.combo:null},function(){var a=dhtmlXRibbon.prototype.items;a.buttonTwoState=a._extends(a.buttonTwoState,a.button),a.buttonSelect=a._extends(a.buttonSelect,a.buttonTwoState),a.buttonSegment=a._extends(a.buttonSegment,a.buttonTwoState)}(),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_ribbon=function(h,c,g,a,e){return void 0!==e?h=e:((h=document.createElement("DIV")).className="dhx_cell_ribbon_"+(this.conf.borders?"def":"no_borders"),h.appendChild(document.createElement("DIV"))),this.cell.insertBefore(h,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.ribbon=!0,this._updateIdx(),this._adjustCont(this._idd),h},dhtmlXCellObject.prototype.attachRibbon=function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.callEvent("_onBeforeContentAttach",["ribbon"]),void 0===a&&(a={}),void 0===a.skin&&(a.skin=this.conf.skin),a.parent=this._attachObject("ribbon").firstChild,this.dataNodes.ribbon=new dhtmlXRibbon(a);var c=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){c._adjustCont(c._idd)}),this._adjustCont(),a.parent=null,a=null,this.callEvent("_onContentAttach",[]),this.dataNodes.ribbon}},dhtmlXCellObject.prototype.detachRibbon=function(){this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,delete this.dataNodes.ribbon,this._detachObject("ribbon"))},dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide("ribbon","")},dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbon","none")},dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon}),dhtmlXToolbarObject.prototype.addSpacer=function(e){var c=this.idPrefix+e;if(null!=this._spacer){if(this._spacer.idd==e)return;if(this._spacer==this.objPull[c].obj.parentNode){for(var a=!0;a;){var m=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]),m!=e&&0!=this._spacer.childNodes.length||(null!=this.objPull[c].arw&&this.base.appendChild(this.objPull[c].arw),a=!1)}return this._spacer.idd=e,void this._fixSpacer()}if(this.base==this.objPull[c].obj.parentNode){a=!0;for(var l=null!=this.objPull[c].arw;a;){var g=this.base.childNodes.length-1;1==l&&this.base.childNodes[g]==this.objPull[c].arw&&(a=!1),this.base.childNodes[g].idd==e&&(a=!1),a&&(0<this._spacer.childNodes.length?this._spacer.insertBefore(this.base.childNodes[g],this._spacer.childNodes[0]):this._spacer.appendChild(this.base.childNodes[g]))}return this._spacer.idd=e,void this._fixSpacer()}}else{var h=null;for(g=0;g<this.base.childNodes.length;g++)this.base.childNodes[g]==this.objPull[this.idPrefix+e].obj&&(h=g,null!=this.objPull[this.idPrefix+e].arw&&(h=g+1));if(null!=h){for(this._spacer=document.createElement("DIV"),this._spacer.className="right"==this.conf.align?" dhxtoolbar_float_left":" dhxtoolbar_float_right",this._spacer.dir="ltr",this._spacer.idd=e;this.base.childNodes.length>h+1;)this._spacer.appendChild(this.base.childNodes[h+1]);this.cont.appendChild(this._spacer),this._fixSpacer()}}"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.removeSpacer=function(){if(this._spacer){for(;0<this._spacer.childNodes.length;)this.base.appendChild(this._spacer.childNodes[0]);this._spacer.parentNode.removeChild(this._spacer),this._spacer=null,"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()}},dhtmlXToolbarObject.prototype._fixSpacer=function(){if(void 0===window.addEventListener&&null!=this._spacer){this._spacer.style.borderLeft="1px solid #a4bed4";var a=this._spacer;window.setTimeout(function(){a.style.borderLeft="0px solid #a4bed4",a=null},1)}},dhtmlXToolbarObject.prototype.getType=function(e){var g=this.getParentId(e);if(null!=g){var c=null,a=this.objPull[this.idPrefix+g]._listOptions[e];return null!=a&&(c=null!=a.sep?"buttonSelectSeparator":"buttonSelectButton"),c}return null==this.objPull[this.idPrefix+e]?null:this.objPull[this.idPrefix+e].type},dhtmlXToolbarObject.prototype.getTypeExt=function(c){var a=this.getType(c);return"buttonSelectButton"==a||"buttonSelectSeparator"==a?a="buttonSelectButton"==a?"button":"separator":null},dhtmlXToolbarObject.prototype.inArray=function(e,c){for(var a=0;a<e.length;a++)if(e[a]==c)return!0;return!1},dhtmlXToolbarObject.prototype.getParentId=function(g){var h=null;for(var e in this.objPull)if(this.objPull[e]._listOptions)for(var c in this.objPull[e]._listOptions)c==g&&(h=String(e).replace(this.idPrefix,""));return h},dhtmlXToolbarObject.prototype._addItem=function(a,c){"string"==typeof a.text&&(a.text=window.dhx4.trim(a.text),0==a.text.length&&(a.text=null)),this._addItemToStorage(a,c),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.addButton=function(h,g,c,a,e){this._addItem({id:h,type:"button",text:c,img:a,imgdis:e},g)},dhtmlXToolbarObject.prototype.addText=function(e,c,a){this._addItem({id:e,type:"text",text:a},c)},dhtmlXToolbarObject.prototype.addButtonSelect=function(g,n,s,a,c,o,m,w,h,l){for(var v=[],e=0;e<a.length;e++){var r={};a[e]instanceof Array?(r.id=a[e][0],r.type="obj"==a[e][1]?"button":"separator",r.text=a[e][2]||null,r.img=a[e][3]||null):a[e]instanceof Object&&null!=a[e]&&void 0!==a[e].id&&void 0!==a[e].type&&(r.id=a[e].id,r.type="obj"==a[e].type?"button":"separator",r.text=a[e].text,r.img=a[e].img),v.push(r)}this._addItem({id:g,type:"buttonSelect",text:s,img:c,imgdis:o,renderSelect:m,openAll:w,options:v,maxOpen:h,mode:l},n)},dhtmlXToolbarObject.prototype.addButtonTwoState=function(h,g,c,a,e){this._addItem({id:h,type:"buttonTwoState",img:a,imgdis:e,text:c},g)},dhtmlXToolbarObject.prototype.addSeparator=function(c,a){this._addItem({id:c,type:"separator"},a)},dhtmlXToolbarObject.prototype.addSlider=function(c,m,h,g,o,e,l,a,n){this._addItem({id:c,type:"slider",length:h,valueMin:g,valueMax:o,valueNow:e,textMin:l,textMax:a,toolTip:n},m)},dhtmlXToolbarObject.prototype.addInput=function(g,e,c,a){this._addItem({id:g,type:"buttonInput",value:c,width:a},e)},dhtmlXToolbarObject.prototype.forEachItem=function(e){for(var c in this.objPull)this.inArray(this.rootTypes,this.objPull[c].type)&&e(this.objPull[c].id.replace(this.idPrefix,""))},function(){for(var l="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(","),e=[!1,"","",!1,"","","","","","","","","",!1,"","","",null,"",[null,null],"",[null,null],"",null],c=function(m,n){return function(s,r,o){return s=this.idPrefix+s,null!=this.objPull[s][m]?this.objPull[s][m].call(this.objPull[s],r,o):n}},h=0;h<l.length;h++){var a=l[h],g=e[h];dhtmlXToolbarObject.prototype[a]=c(a,g)}}(),dhtmlXToolbarObject.prototype.showItem=function(a){a=this.idPrefix+a,null!=this.objPull[a]&&null!=this.objPull[a].showItem&&(this.objPull[a].showItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())},dhtmlXToolbarObject.prototype.hideItem=function(a){a=this.idPrefix+a,null!=this.objPull[a]&&null!=this.objPull[a].hideItem&&(this.objPull[a].hideItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())},dhtmlXToolbarObject.prototype.getPosition=function(a){return this._getPosition(a)},dhtmlXToolbarObject.prototype._getPosition=function(h,e){if(null==this.objPull[this.idPrefix+h])return null;for(var g=null,a=0,c=0;c<this.base.childNodes.length;c++)null!=this.base.childNodes[c].idd&&(this.base.childNodes[c].idd==h&&(g=a),a++);if(!g&&null!=this._spacer)for(c=0;c<this._spacer.childNodes.length;c++)null!=this._spacer.childNodes[c].idd&&(this._spacer.childNodes[c].idd==h&&(g=a),a++);return g},dhtmlXToolbarObject.prototype.setPosition=function(a,c){this._setPosition(a,c)},dhtmlXToolbarObject.prototype._setPosition=function(h,g){if(null!=this.objPull[this.idPrefix+h]){var a=null;this._spacer&&(a=this._spacer.idd,this.removeSpacer()),isNaN(g)&&(g=this.base.childNodes.length),g<0&&(g=0);var e=this.objPull[this.idPrefix+h];this.base.removeChild(e.obj),e.arw&&this.base.removeChild(e.arw);var c=this._getIdByPosition(g,!0);null==c[0]?(this.base.appendChild(e.obj),e.arw&&this.base.appendChild(e.arw)):(this.base.insertBefore(e.obj,this.base.childNodes[c[1]]),e.arw&&this.base.insertBefore(e.arw,this.base.childNodes[c[1]+1])),null!=a&&this.addSpacer(a)}},dhtmlXToolbarObject.prototype._getIdByPosition=function(l,c){for(var h=null,a=0,e=0,g=0;g<this.base.childNodes.length;g++)null!=this.base.childNodes[g].idd&&null==h&&a++==l&&(h=this.base.childNodes[g].idd),null==h&&e++;return e=null==h?null:e,1==c?new Array(h,e):h},dhtmlXToolbarObject.prototype.removeItem=function(a){this._removeItem(a),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype._removeItem=function(h){var e=this.getType(h);h=this.idPrefix+h;var g=this.objPull[h];if(1=={button:1,buttonTwoState:1}[e]){for(var c in window.dhx4.isIE&&(g.obj.onselectstart=null),this._evs.clear.apply(g,[g.obj.evs,g.obj]),g.obj)"function"==typeof g.obj[c]&&(g.obj[c]=null);for(var c in g.obj.parentNode.removeChild(g.obj),g.obj=null,g)g[c]=null}if("buttonSelect"==e){for(var c in g._listOptions)this.removeListOption(h,c);for(var c in g._listOptions=null,g.polygon._ie6cover&&(document.body.removeChild(g.polygon._ie6cover),g.polygon._ie6cover=null),g.p_tbl.removeChild(g.p_tbody),g.polygon.removeChild(g.p_tbl),g.polygon.onselectstart=null,document.body.removeChild(g.polygon),window.dhx4.isIE&&(g.obj.onselectstart=null,g.arw.onselectstart=null),this._evs.clear.apply(g,[g.obj.evs,g.obj]),this._evs.clear.apply(g,[g.arw.evs,g.arw]),g.obj)"function"==typeof g.obj[c]&&(g.obj[c]=null);for(var c in g.obj.parentNode.removeChild(g.obj),g.obj=null,g.arw)"function"==typeof g.arw[c]&&(g.arw[c]=null);for(var c in g.arw.parentNode.removeChild(g.arw),g.arw=null,g)g[c]=null}if("buttonInput"==e&&(g.obj.childNodes[0].onkeydown=null,g.obj.removeChild(g.obj.childNodes[0]),g.obj.w=null,g.obj.idd=null,g.obj.parentNode.removeChild(g.obj),g.obj=null,g.id=null,g.type=null,g.enableItem=null,g.disableItem=null,g.isEnabled=null,g.showItem=null,g.hideItem=null,g.isVisible=null,g.setItemToolTip=null,g.getItemToolTip=null,g.setWidth=null,g.getWidth=null,g.setValue=null,g.getValue=null,g.setItemText=null,g.getItemText=null),"slider"==e){for(window.dhx4.isIPad?(document.removeEventListener("touchmove",pen._doOnMouseMoveStart,!1),document.removeEventListener("touchend",pen._doOnMouseMoveEnd,!1)):"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",g.pen._doOnMouseMoveStart,!1),window.removeEventListener("mouseup",g.pen._doOnMouseMoveEnd,!1)):(document.body.detachEvent("onmousemove",g.pen._doOnMouseMoveStart),document.body.detachEvent("onmouseup",g.pen._doOnMouseMoveEnd)),g.pen.allowMove=null,g.pen.initXY=null,g.pen.maxX=null,g.pen.minX=null,g.pen.nowX=null,g.pen.newNowX=null,g.pen.valueMax=null,g.pen.valueMin=null,g.pen.valueNow=null,g.pen._definePos=null,g.pen._detectLimits=null,g.pen._doOnMouseMoveStart=null,g.pen._doOnMouseMoveEnd=null,g.pen.onmousedown=null,g.obj.removeChild(g.pen),g.pen=null,g.label.tip=null,document.body.removeChild(g.label),g.label=null,g.obj.onselectstart=null,g.obj.idd=null;0<g.obj.childNodes.length;)g.obj.removeChild(g.obj.childNodes[0]);g.obj.parentNode.removeChild(g.obj),g.obj=null,g.id=null,g.type=null,g.state=null,g.enableItem=null,g.disableItem=null,g.isEnabled=null,g.setItemToolTipTemplate=null,g.getItemToolTipTemplate=null,g.setMaxValue=null,g.setMinValue=null,g.getMaxValue=null,g.getMinValue=null,g.setValue=null,g.getValue=null,g.showItem=null,g.hideItem=null,g.isVisible=null}"separator"==e&&(g.obj.onselectstart=null,g.obj.idd=null,g.obj.parentNode.removeChild(g.obj),g.obj=null,g.id=null,g.type=null,g.showItem=null,g.hideItem=null,g.isVisible=null),"text"==e&&(g.obj.onselectstart=null,g.obj.idd=null,g.obj.parentNode.removeChild(g.obj),g.obj=null,g.id=null,g.type=null,g.showItem=null,g.hideItem=null,g.isVisible=null,g.setWidth=null,g.setItemText=null,g.getItemText=null),g=e=null,this.objPull[this.idPrefix+h]=null,delete this.objPull[this.idPrefix+h]},function(){for(var g="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(","),c=function(h){return function(s,m,l,r,o,n){if(s=this.idPrefix+s,null!=this.objPull[s]&&"buttonSelect"==this.objPull[s].type)return this.objPull[s][h].call(this.objPull[s],m,l,r,o,n)}},e=0;e<g.length;e++){var a=g[e];dhtmlXToolbarObject.prototype[a]=c(a)}}(),dhtmlXToolbarObject.prototype._rtlParseBtn=function(c,a){return c+a},dhtmlXToolbarObject.prototype._separatorObject=function(a,e,c){return this.id=a.idPrefix+e,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_sep",this.obj.style.display=null!=c.hidden?"none":"",this.obj.idd=String(e),this.obj.title=c.title||"",this.obj.onselectstart=function(g){(g=g||event).preventDefault?g.preventDefault():g.returnValue=!1},this.obj.ontouchstart=function(g){return(g=g||event).preventDefault?g.preventDefault():g.returnValue=!1,!(g.cancelBubble=!0)},a.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this},dhtmlXToolbarObject.prototype._textObject=function(a,e,c){return this.id=a.idPrefix+e,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_text",this.obj.style.display=null!=c.hidden?"none":"",this.obj.idd=String(e),this.obj.title=c.title||"",this.obj.onselectstart=function(g){(g=g||event).preventDefault?g.preventDefault():g.returnValue=!1},this.obj.ontouchstart=function(g){return(g=g||event).preventDefault?g.preventDefault():g.returnValue=!1,!(g.cancelBubble=!0)},this.obj.innerHTML=c.text||"",a.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(g){this.obj.innerHTML=g},this.getItemText=function(){return this.obj.innerHTML},this.setWidth=function(g){this.obj.style.width=g+"px"},this.setItemToolTip=function(g){this.obj.title=g},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._buttonObject=function(e,h,g){this.id=e.idPrefix+h,this.state=null==g.enabled,this.imgEn=g.img||"",this.imgDis=g.imgdis||"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=g.hidden?"none":"",this.obj.allowClick=!1,this.obj.extAction=g.action||null,this.obj.renderAs=this.obj.className,this.obj.idd=String(h),this.obj.title=g.title||"",this.obj.pressed=!1;var a=e.conf.icons_css?"<i class='"+e.conf.icons_path+this.img+"'></i>":"<img src='"+e.conf.icons_path+this.img+"'>";this.obj.innerHTML=e._rtlParseBtn(""!=this.img?a:"",null!=g.text?"<div class='dhxtoolbar_text'>"+g.text+"</div>":""),e.base.appendChild(this.obj),window.dhx4.isIE&&(this.obj.onselectstart=function(l){return(l=l||event).preventDefault?l.preventDefault():l.returnValue=!1,!1});var c=this;return this._doOnMouseOver=function(l){l=l||event,0!=c.state&&1!=c.obj.pressed&&1!=c.obj.over&&(null==c.obj.className.match(/dhxtoolbar_btn_over/gi)&&(c.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),c.obj.over=!0)},this._doOnMouseOut=function(l){l=l||event,0!=c.state&&(null!=c.obj.className.match(/dhxtoolbar_btn_over/gi)&&(c.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"),c.obj.over=c.obj.pressed=!1)},this._doOnMouseDown=function(l){if("touchstart"==(l=l||event).type){if(l.preventDefault&&l.preventDefault(),l.cancelBubble=!0,null!=e.conf.touch_id&&e.conf.touch_id!=c.id)return;e.conf.touch_id=c.id}0!=c.state&&(null==c.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(c.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"),c.obj.pressed=!0)},this._doOnMouseUp=function(l){"touchend"==(l=l||event).type&&(l.preventDefault&&l.preventDefault(),l.cancelBubble=!0,e.conf.touch_id==c.id&&(e.conf.touch_id=null)),0!=c.state&&0!=c.obj.pressed&&(null!=c.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(c.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(c.obj.over?"over":"def")),c.obj.pressed=!1,c.obj.extAction&&window.setTimeout(function(){try{c&&c.obj&&window[c.obj.extAction](c.id)}catch(m){}},1),e.callEvent("onClick",[c.obj.idd.replace(e.idPrefix,"")]))},this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"},e._evs.add.apply(this,[this.obj.evs,this.obj]),this.enableItem=function(){e._enableItem(this)},this.disableItem=function(){e._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(l){e._setItemText(this,l)},this.getItemText=function(){return e._getItemText(this)},this.setItemImage=function(l){e._setItemImage(this,l,!0)},this.clearItemImage=function(){e._clearItemImage(this,!0)},this.setItemImageDis=function(l){e._setItemImage(this,l,!1)},this.clearItemImageDis=function(){e._clearItemImage(this,!1)},this.setItemToolTip=function(l){this.obj.title=l},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._buttonSelectObject=function(g,m,l){this.id=g.idPrefix+m,this.state=null==l.enabled||"true"==l.enabled,this.imgEn=l.img||"",this.imgDis=l.imgdis||"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.mode=l.mode||"button","select"==this.mode?(this.openAll=!0,this.renderSelect=!1,l.text&&0!=l.text.length||(l.text="&nbsp;")):(this.openAll=1==window.dhx4.s2b(l.openAll),this.renderSelect=null==l.renderSelect||window.dhx4.s2b(l.renderSelect)),this.maxOpen=isNaN(l.maxOpen?l.maxOpen:"")?null:l.maxOpen,this._maxOpenTest=function(){if(!isNaN(this.maxOpen)&&!g._sbw){var o=document.createElement("DIV");o.className="dhxtoolbar_maxopen_test",document.body.appendChild(o);var n=document.createElement("DIV");n.className="dhxtoolbar_maxopen_test2",o.appendChild(n),g._sbw=o.offsetWidth-n.offsetWidth,o.removeChild(n),n=null,document.body.removeChild(o),o=null}},this._maxOpenTest(),this.obj=document.createElement("DIV"),this.obj.allowClick=!1,this.obj.extAction=l.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=l.hidden?"none":"",this.obj.renderAs=this.obj.className,this.obj.onselectstart=function(n){(n=n||event).preventDefault?n.preventDefault():n.returnValue=!1},this.obj.idd=String(m),this.obj.title=l.title||"",this.obj.pressed=!1,this.callEvent=!1;var c=g.conf.icons_css?"<i class='"+g.conf.icons_path+this.img+"'></i>":"<img src='"+g.conf.icons_path+this.img+"'>";this.obj.innerHTML=g._rtlParseBtn(""!=this.img?c:"",null!=l.text?"<div class='dhxtoolbar_text'>"+l.text+"</div>":""),g.base.appendChild(this.obj),this.arw=document.createElement("DIV"),this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis"),this.arw.style.display=this.obj.style.display,this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>",this.arw.title=this.obj.title,this.arw.onselectstart=function(n){(n=n||event).preventDefault?n.preventDefault():n.returnValue=!1},g.base.appendChild(this.arw);var a=this;if(window.dhx4.isIE&&(this.arw.onselectstart=this.obj.onselectstart=function(n){return(n=n||event).preventDefault?n.preventDefault():n.returnValue=!1,!1}),this._doOnMouseOver=function(n){n=n||event,0!=a.state&&1!=a.obj.over&&g.anyUsed!=a.obj.idd&&(null==a.obj.className.match(/dhxtoolbar_btn_over/gi)&&(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over",a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"),a.obj.over=!0)},this._doOnMouseOut=function(n){n=n||event,0!=a.state&&g.anyUsed!=a.obj.idd&&g.anyUsed!=a.obj.idd&&(null!=a.obj.className.match(/dhxtoolbar_btn_over/gi)&&(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"),a.obj.over=a.obj.pressed=!1)},this._doOnMouseDown=function(o){if("touchstart"==(o=o||event).type){if(o.preventDefault&&o.preventDefault(),o.cancelBubble=!0,null!=g.conf.touch_id&&g.conf.touch_id!=a.id)return;g.conf.touch_id=a.id}if(0!=a.state)if(g.anyUsed==a.obj.idd)1==a.obj.over?(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over",a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"):(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"),a._hidePoly(!0),g.anyUsed=null;else{var n=o.target||o.srcElement;1==a.openAll||n==a.arw||n.parentNode==a.arw?("touchstart"==o.type&&(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres",a.arw._skip=!0,a._showPoly(!0),g.anyUsed=a.obj.idd):(null==a.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres"),a.obj.pressed=!0)}},this._doOnMouseUp=function(o){if("touchend"==(o=o||event).type){if(""==a.polygon.style.display)return;o.preventDefault&&o.preventDefault(),o.cancelBubble=!0,g.conf.touch_id==a.id&&(g.conf.touch_id=null)}if(0!=a.state&&0!=a.obj.pressed){if(null!=a.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(a.obj.over?"over":"def"),a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(a.obj.over?"over":"def")),this.extAction){var n=this;window.setTimeout(function(){try{window[n.extAction](m)}catch(r){}n=null},1)}g.callEvent("onClick",[a.obj.idd.replace(g.idPrefix,"")])}},this.arw.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown"},g._evs.add.apply(this,[this.arw.evs,this.arw]),this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"},g._evs.add.apply(this,[this.obj.evs,this.obj]),this._showPoly=function(x){if(null!=g.anyUsed&&"buttonSelect"==g.objPull[g.idPrefix+g.anyUsed].type){var w=g.objPull[g.idPrefix+g.anyUsed];"none"!=w.polygon.style.display&&(w.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",w.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def",w.obj.over=!1,window.dhx4.zim.clear(w.polygon._idd),w.polygon.style.display="none",w.polygon._ie6cover&&(w.polygon._ie6cover.style.display="none"),"dhx_terrace"==g.conf.skin&&g._improveTerraceButtonSelect(w.id,!0),g.callEvent("onButtonSelectHide",[w.obj.idd]))}this.polygon.style.top="0px",this.polygon.style.visibility="hidden",this.polygon.style.zIndex=window.dhx4.zim.reserve(this.polygon._idd),this.polygon.style.display="","dhx_terrace"==g.conf.skin&&g._improveTerraceButtonSelect(this.id,!1),this._fixMaxOpenHeight(this.maxOpen||null),g._autoDetectVisibleArea();var r=window.dhx4.absTop(this.obj)+this.obj.offsetHeight+g.conf.sel_ofs_y,u=this.polygon.offsetHeight;if(r+u>g.tY2){var n=null!=this.maxOpen?Math.floor((g.tY2-r)/22):0;1<=n?this._fixMaxOpenHeight(n):(r=window.dhx4.absTop(this.obj)-u-g.conf.sel_ofs_y)<0&&(r=0)}if(this.polygon.style.top=r+"px",g.rtl)this.polygon.style.left=window.dhx4.absLeft(this.obj)+this.obj.offsetWidth-this.polygon.offsetWidth+g.conf.sel_ofs_x+"px";else{var o=document.body.scrollLeft+(window.innerWidth||document.body.clientWidth),v=window.dhx4.absLeft(this.obj)+g.conf.sel_ofs_x;v+this.polygon.offsetWidth>o&&(v=window.dhx4.absLeft(this.arw)+this.arw.offsetWidth-this.polygon.offsetWidth),this.polygon.style.left=Math.max(v,5)+"px"}this.polygon.style.visibility="visible",this.polygon._ie6cover&&(this.polygon._ie6cover.style.left=this.polygon.style.left,this.polygon._ie6cover.style.top=this.polygon.style.top,this.polygon._ie6cover.style.width=this.polygon.offsetWidth+"px",this.polygon._ie6cover.style.height=this.polygon.offsetHeight+"px",this.polygon._ie6cover.style.display=""),x&&g.callEvent("onButtonSelectShow",[this.obj.idd])},this._hidePoly=function(n){window.dhx4.zim.clear(this.polygon._idd),this.polygon.style.display="none",this.polygon._ie6cover&&(this.polygon._ie6cover.style.display="none"),"dhx_terrace"==g.conf.skin&&g._improveTerraceButtonSelect(this.id,!0),n&&g.callEvent("onButtonSelectHide",[this.obj.idd]),g.conf.touch_id=null},this.obj.iddPrefix=g.idPrefix,this._listOptions={},this._fixMaxOpenHeight=function(u){var s="auto",r=!1;if(null!==u){var o=0;for(var n in this._listOptions)o++;u<o?(this._ph=22*u,s=this._ph+"px"):r=!0}this.polygon.style.width="auto",this.polygon.style.height="auto",r||null==a.maxOpen||(this.polygon.style.width=this.p_tbl.offsetWidth+g._sbw+"px",this.polygon.style.height=s)},this._separatorButtonSelectObject=function(r,n,o){return this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.className="tr_sep",this.obj.tr.onselectstart=function(s){return(s=s||event).preventDefault?s.preventDefault():s.returnValue=!1,!1},this.obj.td=document.createElement("TD"),this.obj.td.colSpan="2",this.obj.td.className="td_btn_sep",this.obj.td.onselectstart=function(s){return(s=s||event).preventDefault?s.preventDefault():s.returnValue=!1,!1},isNaN(o)?o=a.p_tbody.childNodes.length+1:o<1&&(o=1),o>a.p_tbody.childNodes.length?a.p_tbody.appendChild(this.obj.tr):a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[o-1]),this.obj.tr.appendChild(this.obj.td),this.obj.sep=document.createElement("DIV"),this.obj.sep.className="btn_sep",this.obj.sep.onselectstart=function(s){return(s=s||event).preventDefault?s.preventDefault():s.returnValue=!1,!1},this.obj.td.appendChild(this.obj.sep),a._listOptions[r]=this.obj,this},this._buttonButtonSelectObject=function(u,r,s){var o=!0;void 0!==r.enabled?o=window.dhx4.s2b(r.enabled):void 0!==r.disabled&&(o=window.dhx4.s2b(r.disabled)),this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.en=o,this.obj.tr.extAction=r.action||null,this.obj.tr._selected=null!=r.selected,this.obj.tr.className="tr_btn"+(this.obj.tr.en?this.obj.tr._selected&&a.renderSelect?" tr_btn_selected":"":" tr_btn_disabled"),this.obj.tr.onselectstart=function(v){return(v=v||event).preventDefault?v.preventDefault():v.returnValue=!1,!1},this.obj.tr.idd=String(u),isNaN(s)?s=a.p_tbody.childNodes.length+1:s<1&&(s=1),s>a.p_tbody.childNodes.length?a.p_tbody.appendChild(this.obj.tr):a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[s-1]),this.obj.td_a=document.createElement("TD"),this.obj.td_a.className="td_btn_img",this.obj.td_a.onselectstart=function(v){return(v=v||event).preventDefault?v.preventDefault():v.returnValue=!1,!1},this.obj.td_b=document.createElement("TD"),this.obj.td_b.className="td_btn_txt",this.obj.td_b.onselectstart=function(v){return(v=v||event).preventDefault?v.preventDefault():v.returnValue=!1,!1},g.rtl?(this.obj.tr.appendChild(this.obj.td_b),this.obj.tr.appendChild(this.obj.td_a)):(this.obj.tr.appendChild(this.obj.td_a),this.obj.tr.appendChild(this.obj.td_b)),null!=r.img?(1==g.conf.icons_css?this.obj.td_a.innerHTML="<i class='"+g.conf.icons_path+r.img+"'></i>":this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+g.conf.icons_path+r.img+"' border='0'>",this.obj.tr._img=r.img):this.obj.td_a.innerHTML="&nbsp;";var n=null!=r.text?r.text:r.itemText||"";return this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+n+"</div>",this.obj.tr.onmouseover=function(v){null==(v=v||event).type.match(/touch/)&&(!this.en||this._selected&&a.renderSelect||(this.className="tr_btn tr_btn_over"))},this.obj.tr.onmouseout=function(v){null==(v=v||event).type.match(/touch/)&&this.en&&(this._selected&&a.renderSelect?-1==String(this.className).search("tr_btn_selected")&&(this.className="tr_btn tr_btn_selected"):this.className="tr_btn")},this.obj.tr.ontouchstart=this.obj.tr.onmousedown=function(v){v=v||event,null==this._etype&&(this._etype=v.type)},this.obj.tr.onclick=function(w){if((w=w||event).cancelBubble=!0,this.en){if(a.setListOptionSelected(this.idd.replace(g.idPrefix,"")),a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def",a.obj.over=!1,null!=this._etype&&null==this._etype.match(/touch/))window.dhx4.zim.clear(a.polygon._idd),a.polygon.style.display="none",a.polygon._ie6cover&&(a.polygon._ie6cover.style.display="none");else{var v=a.polygon;window.setTimeout(function(){window.dhx4.zim.clear(v._idd),v.style.display="none",v=null},500)}this._etype=null,"dhx_terrace"==g.conf.skin&&g._improveTerraceButtonSelect(a.id,!0),g.anyUsed=null,g.conf.touch_id=null,g.callEvent("onButtonSelectHide",[a.obj.idd]);var x=this.idd.replace(g.idPrefix,"");if(this.extAction)try{window[this.extAction](x)}catch(w){}g.callEvent("onClick",[x])}},a._listOptions[u]=this.obj,this},this.polygon=document.createElement("DIV"),this.polygon.dir="ltr",this.polygon.style.display="none",this.polygon.className="dhx_toolbar_poly_"+g.conf.skin+" dhxtoolbar_icons_"+g.conf.iconSize+g.conf.cssShadow,this.polygon.onselectstart=function(n){(n=n||event).preventDefault?n.preventDefault():n.returnValue=!1},this.polygon.onmousedown=function(n){(n=n||event).cancelBubble=!0},this.polygon.style.overflowY="auto",this.polygon._idd=window.dhx4.newId(),this.polygon.ontouchstart=function(n){(n=n||event).cancelBubble=!0},this.polygon.ontouchend=function(n){(n=n||event).cancelBubble=!0},this.p_tbl=document.createElement("TABLE"),this.p_tbl.className="buttons_cont",this.p_tbl.cellSpacing="0",this.p_tbl.cellPadding="0",this.p_tbl.border="0",this.polygon.appendChild(this.p_tbl),this.p_tbody=document.createElement("TBODY"),this.p_tbl.appendChild(this.p_tbody),null!=l.options)for(var h=0;h<l.options.length;h++){var e="_"+(l.options[h].type||"")+"ButtonSelectObject";null==l.options[h].id&&(l.options[h].id=g._genStr(24)),"function"==typeof this[e]&&new this[e](l.options[h].id,l.options[h])}return document.body.appendChild(this.polygon),window.dhx4.isIE6&&(this.polygon._ie6cover=document.createElement("IFRAME"),this.polygon._ie6cover.frameBorder=0,this.polygon._ie6cover.style.position="absolute",this.polygon._ie6cover.style.border="none",this.polygon._ie6cover.style.backgroundColor="#000000",this.polygon._ie6cover.style.filter="alpha(opacity=100)",this.polygon._ie6cover.style.display="none",this.polygon._ie6cover.setAttribute("src","javascript:false;"),document.body.appendChild(this.polygon._ie6cover)),this.setWidth=function(n){this.obj.style.width=n-this.arw.offsetWidth+"px",this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px",this.p_tbl.style.width=this.polygon.style.width},this.enableItem=function(){g._enableItem(this)},this.disableItem=function(){g._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display="",this.arw.style.display=""},this.hideItem=function(){this.obj.style.display="none",this.arw.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(n){g._setItemText(this,n)},this.getItemText=function(){return g._getItemText(this)},this.setItemImage=function(n){g._setItemImage(this,n,!0)},this.clearItemImage=function(){g._clearItemImage(this,!0)},this.setItemImageDis=function(n){g._setItemImage(this,n,!1)},this.clearItemImageDis=function(){g._clearItemImage(this,!1)},this.setItemToolTip=function(n){this.obj.title=n,this.arw.title=n},this.getItemToolTip=function(){return this.obj.title},this.addListOption=function(v,u,r,s,n){if("button"==r||"separator"==r){var o={id:v,type:r,text:s,img:n};new this["_"+r+"ButtonSelectObject"](v,o,u)}},this.removeListOption=function(r){if(this._isListButton(r,!0)){var n=this._listOptions[r];if(null!=n.td_a&&null!=n.td_b){for(n.td_a.onselectstart=null,n.td_b.onselectstart=null;0<n.td_a.childNodes.length;)n.td_a.removeChild(n.td_a.childNodes[0]);for(;0<n.td_b.childNodes.length;)n.td_b.removeChild(n.td_b.childNodes[0]);for(n.tr.onselectstart=null,n.tr.onmouseover=null,n.tr.onmouseout=null,n.tr.onclick=null,n.tr.ontouchstart=null,n.tr.onmousedown=null;0<n.tr.childNodes.length;)n.tr.removeChild(n.tr.childNodes[0]);n.tr.parentNode.removeChild(n.tr),n.td_a=null,n.td_b=null,n.tr=null}else{for(n.sep.onselectstart=null,n.td.onselectstart=null,n.tr.onselectstart=null;0<n.td.childNodes.length;)n.td.removeChild(n.td.childNodes[0]);for(;0<n.tr.childNodes.length;)n.tr.removeChild(n.tr.childNodes[0]);n.tr.parentNode.removeChild(n.tr),n.sep=null,n.td=null,n.tr=null}n=null,this._listOptions[r]=null;try{delete this._listOptions[r]}catch(o){}}},this.showListOption=function(n){this._isListButton(n,!0)&&(this._listOptions[n].tr.style.display="")},this.hideListOption=function(n){this._isListButton(n,!0)&&(this._listOptions[n].tr.style.display="none")},this.isListOptionVisible=function(n){if(this._isListButton(n,!0))return"none"!=this._listOptions[n].tr.style.display},this.enableListOption=function(n){this._isListButton(n)&&(this._listOptions[n].tr.en=!0,this._listOptions[n].tr.className="tr_btn"+(this._listOptions[n].tr._selected&&g.renderSelect?" tr_btn_selected":""))},this.disableListOption=function(n){this._isListButton(n)&&(this._listOptions[n].tr.en=!1,this._listOptions[n].tr.className="tr_btn tr_btn_disabled")},this.isListOptionEnabled=function(n){if(this._isListButton(n))return this._listOptions[n].tr.en},this.setListOptionPosition=function(r,o){if(this._listOptions[r]&&this.getListOptionPosition(r)!=o&&!isNaN(o)){o<1&&(o=1);var n=this._listOptions[r].tr;this.p_tbody.removeChild(n),o>this.p_tbody.childNodes.length?this.p_tbody.appendChild(n):this.p_tbody.insertBefore(n,this.p_tbody.childNodes[o-1]),n=null}},this.getListOptionPosition=function(r){var o=-1;if(!this._listOptions[r])return o;for(var n=0;n<this.p_tbody.childNodes.length;n++)this.p_tbody.childNodes[n]==this._listOptions[r].tr&&(o=n+1);return o},this.setListOptionImage=function(r,n){if(this._isListButton(r)){var o=this._listOptions[r].tr.childNodes[g.rtl?1:0];o.innerHTML=g.conf.icons_css?"<i class='"+g.conf.icons_path+n+"'></i>":"<img src='"+g.conf.icons_path+n+"' class='btn_sel_img'>",o=null}},this.getListOptionImage=function(r){if(this._isListButton(r)){var o=this._listOptions[r].tr.childNodes[g.rtl?1:0],n=null;return 0<o.childNodes.length&&(n=o.childNodes[0][g.conf.icons_css?"className":"src"]),o=null,n}},this.clearListOptionImage=function(o){if(this._isListButton(o)){for(var n=this._listOptions[o].tr.childNodes[g.rtl?1:0];0<n.childNodes.length;)n.removeChild(n.childNodes[0]);n.innerHTML="&nbsp;",n=null}},this.setListOptionText=function(o,n){this._isListButton(o)&&(this._listOptions[o].tr.childNodes[g.rtl?0:1].childNodes[0].innerHTML=n)},this.getListOptionText=function(n){if(this._isListButton(n))return this._listOptions[n].tr.childNodes[g.rtl?0:1].childNodes[0].innerHTML},this.setListOptionToolTip=function(o,n){this._isListButton(o)&&(this._listOptions[o].tr.title=n)},this.getListOptionToolTip=function(n){if(this._isListButton(n))return this._listOptions[n].tr.title},this.forEachListOption=function(o){for(var n in this._listOptions)o(n)},this.getAllListOptions=function(){var o=new Array;for(var n in this._listOptions)o[o.length]=n;return o},this.setListOptionSelected=function(r){for(var n in this._listOptions){var o=this._listOptions[n];null!=o.td_a&&null!=o.td_b&&o.tr.en&&(n==r?(o.tr._selected=!0,o.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":""),"select"==this.mode&&(o.tr._img?this.setItemImage(o.tr._img):this.clearItemImage(),this.setItemText(this.getListOptionText(r)))):(o.tr._selected=!1,o.tr.className="tr_btn")),o=null}},this.getListOptionSelected=function(){var o=null;for(var n in this._listOptions)1==this._listOptions[n].tr._selected&&(o=n);return o},this._isListButton=function(o,n){return null!=this._listOptions[o]&&!(!n&&"tr_sep"==this._listOptions[o].tr.className)},this.setMaxOpen=function(n){if(this._ph=null,"number"==typeof n)return this.maxOpen=n,void this._maxOpenTest();this.maxOpen=null},l.width&&this.setWidth(l.width),"select"==this.mode&&void 0!==l.selected&&this.setListOptionSelected(l.selected),this},dhtmlXToolbarObject.prototype._buttonInputObject=function(e,h,g){this.id=e.idPrefix+h,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.obj.style.display=null!=g.hidden?"none":"",this.obj.idd=String(h),this.obj.w=null!=g.width?g.width:100,this.obj.title=null!=g.title?g.title:"",this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(null!=g.value?" value='"+g.value+"'":"")+">";var c=e,a=this;return this.obj.childNodes[0].onkeydown=function(l){13==(l=l||event).keyCode&&c.callEvent("onEnter",[a.obj.idd,this.value])},e.base.appendChild(this.obj),this.enableItem=function(){this.obj.childNodes[0].disabled=!1},this.disableItem=function(){this.obj.childNodes[0].disabled=!0},this.isEnabled=function(){return!this.obj.childNodes[0].disabled},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return"none"!=this.obj.style.display},this.setValue=function(l){this.obj.childNodes[0].value=l},this.getValue=function(){return this.obj.childNodes[0].value},this.setWidth=function(l){this.obj.w=l,this.obj.childNodes[0].style.width=this.obj.w+"px"},this.getWidth=function(){return this.obj.w},this.setItemToolTip=function(l){this.obj.title=l},this.getItemToolTip=function(){return this.obj.title},this.getInput=function(){return this.obj.firstChild},void 0!==g.enabled&&0==window.dhx4.s2b(g.enabled)&&this.disableItem(),this},dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(e,h,g){this.id=e.idPrefix+h,this.state=null==g.enabled,this.imgEn=null!=g.img?g.img:"",this.imgDis=null!=g.imgdis?g.imgdis:"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.pressed=null!=g.selected,this.obj.extAction=g.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):this.state?"def":"dis"),this.obj.style.display=null!=g.hidden?"none":"",this.obj.renderAs=this.obj.className,this.obj.idd=String(h),this.obj.title=g.title||"",this.obj.pressed&&(this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over");var a=e.conf.icons_css?"<i class='"+e.conf.icons_path+this.img+"'></i>":"<img src='"+e.conf.icons_path+this.img+"'>";this.obj.innerHTML=e._rtlParseBtn(""!=this.img?a:"",null!=g.text?"<div class='dhxtoolbar_text'>"+g.text+"</div>":""),e.base.appendChild(this.obj),window.dhx4.isIE&&(this.obj.onselectstart=function(l){return(l=l||event).preventDefault?l.preventDefault():l.returnValue=!1,!1});var c=this;return this._doOnMouseOver=function(l){l=l||event,0!=c.state&&1!=c.obj.over&&(1!=c.obj.pressed&&null==c.obj.className.match(/dhxtoolbar_btn_over/gi)&&(c.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),c.obj.over=!0)},this._doOnMouseOut=function(l){l=l||event,0!=c.state&&(1!=c.obj.pressed&&null!=c.obj.className.match(/dhxtoolbar_btn_over/gi)&&(c.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"),c.obj.over=!1)},this._doOnMouseDown=function(l){if("touchstart"==(l=l||event).type){if(l.preventDefault&&l.preventDefault(),l.cancelBubble=!0,null!=e.conf.touch_id&&e.conf.touch_id!=c.id)return;e.conf.touch_id=c.id}if(0!=c.state&&!0===e.callEvent("onBeforeStateChange",[c.obj.idd.replace(e.idPrefix,""),c.obj.pressed])){c.obj.pressed=!c.obj.pressed,c.obj.className="dhx_toolbar_btn "+(1==c.obj.pressed?"dhxtoolbar_btn_pres":1==c.obj.over?"dhxtoolbar_btn_over":"dhxtoolbar_btn_def");var m=c.obj.idd.replace(e.idPrefix,"");if(c.obj.extAction)try{window[c.obj.extAction](idd,c.obj.pressed)}catch(l){}e.callEvent("onStateChange",[m,c.obj.pressed])}},this._doOnMouseUp=function(l){"touchend"==(l=l||event).type&&(l.preventDefault&&l.preventDefault(),l.cancelBubble=!0,e.conf.touch_id==c.id&&(e.conf.touch_id=null))},this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"},e._evs.add.apply(this,[this.obj.evs,this.obj]),this.setItemState=function(l,n){if(this.obj.pressed!=l&&(1==l?(this.obj.pressed=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis")):(this.obj.pressed=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis")),1==n)){var o=this.obj.idd.replace(e.idPrefix,"");if(this.obj.extAction)try{window[this.obj.extAction](o,this.obj.pressed)}catch(m){}e.callEvent("onStateChange",[o,this.obj.pressed])}},this.getItemState=function(){return this.obj.pressed},this.enableItem=function(){e._enableItem(this)},this.disableItem=function(){e._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(l){e._setItemText(this,l)},this.getItemText=function(){return e._getItemText(this)},this.setItemImage=function(l){e._setItemImage(this,l,!0)},this.clearItemImage=function(){e._clearItemImage(this,!0)},this.setItemImageDis=function(l){e._setItemImage(this,l,!1)},this.clearItemImageDis=function(){e._clearItemImage(this,!1)},this.setItemToolTip=function(l){this.obj.title=l},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._sliderObject=function(g,l,h){this.id=g.idPrefix+l,this.state=null==h.enabled||"true"==h.enabled,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=h.hidden?"none":"",this.obj.onselectstart=function(m){(m=m||event).preventDefault?m.preventDefault():m.returnValue=!1},this.obj.idd=String(l),this.obj.len=null!=h.length?Number(h.length):50,this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(h.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(h.textMax||"")+"</div>",g.base.appendChild(this.obj);var a=this;this.pen=document.createElement("DIV"),this.pen.className="dhxtoolbar_sl_pen",this.obj.appendChild(this.pen);var e=this.pen;this.label=document.createElement("DIV"),this.label.dir="ltr",this.label.className="dhx_toolbar_slider_label_"+g.conf.skin+(g.rtl?"_rtl":""),this.label.style.display="none",this.label.tip=h.toolTip||"%v",this.label._zi=window.dhx4.newId(),document.body.appendChild(this.label);var c=this.label;return this.pen.valueMin=null!=h.valueMin?Number(h.valueMin):0,this.pen.valueMax=null!=h.valueMax?Number(h.valueMax):100,this.pen.valueMin>this.pen.valueMax&&(this.pen.valueMin=this.pen.valueMax),this.pen.valueNow=null!=h.valueNow?Number(h.valueNow):this.pen.valueMax,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits=function(){this.minX=a.obj.childNodes[1].offsetLeft+2,this.maxX=a.obj.childNodes[3].offsetLeft-this.offsetWidth+1},this.pen._detectLimits(),this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX),this.style.left=this.nowX+"px",this.newNowX=this.nowX},this.pen._definePos(),this.pen.initXY=0,this.pen.allowMove=!1,this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(m){0!=a.state&&(m=m||event,this.initXY=window.dhx4.isIPad?m.touches[0].clientX:m.clientX,this.newValueNow=this.valueNow,this.allowMove=!0,this.className="dhxtoolbar_sl_pen dhxtoolbar_over",""!=c.tip&&(c.style.visibility="hidden",c.style.display="",c.innerHTML=c.tip.replace("%v",this.valueNow),c.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-c.offsetWidth/2)+"px",c.style.top=window.dhx4.absTop(this)-c.offsetHeight-3+"px",c.style.visibility="",c.style.zIndex=window.dhx4.zim.reserve(c._zi)))},this.pen._doOnMouseMoveStart=function(n){if(n=n||event,e.allowMove){var m=window.dhx4.isIPad?n.touches[0].clientX:n.clientX,o=m-e.initXY;if(!(m<window.dhx4.absLeft(e)+Math.round(e.offsetWidth/2)&&e.nowX==e.minX||m>window.dhx4.absLeft(e)+Math.round(e.offsetWidth/2)&&e.nowX==e.maxX))return e.newNowX=e.nowX+o,e.newNowX<e.minX&&(e.newNowX=e.minX),e.newNowX>e.maxX&&(e.newNowX=e.maxX),e.nowX=e.newNowX,e.style.left=e.nowX+"px",e.initXY=m,e.newValueNow=Math.round((e.valueMax-e.valueMin)*(e.newNowX-e.minX)/(e.maxX-e.minX)+e.valueMin),""!=c.tip&&(c.innerHTML=c.tip.replace(/%v/gi,e.newValueNow),c.style.left=Math.round(window.dhx4.absLeft(e)+e.offsetWidth/2-c.offsetWidth/2)+"px",c.style.top=window.dhx4.absTop(e)-c.offsetHeight-3+"px"),n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,!1}},this.pen._doOnMouseMoveEnd=function(){e.allowMove&&(e.className="dhxtoolbar_sl_pen",e.allowMove=!1,e.nowX=e.newNowX,e.valueNow=e.newValueNow,""!=c.tip&&(c.style.display="none",window.dhx4.zim.clear(c._zi)),g.callEvent("onValueChange",[a.obj.idd.replace(g.idPrefix,""),e.valueNow]))},window.dhx4.isIPad?(document.addEventListener("touchmove",e._doOnMouseMoveStart,!1),document.addEventListener("touchend",e._doOnMouseMoveEnd,!1)):void 0!==window.addEventListener?(window.addEventListener("mousemove",e._doOnMouseMoveStart,!1),window.addEventListener("mouseup",e._doOnMouseMoveEnd,!1)):(document.body.attachEvent("onmousemove",e._doOnMouseMoveStart),document.body.attachEvent("onmouseup",e._doOnMouseMoveEnd)),this.enableItem=function(){this.state||(this.state=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def")},this.disableItem=function(){this.state&&(this.state=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis")},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setValue=function(m,n){(m=Number(m))<this.pen.valueMin&&(m=this.pen.valueMin),m>this.pen.valueMax&&(m=this.pen.valueMax),this.pen.valueNow=m,this.pen._definePos(),1==n&&g.callEvent("onValueChange",[this.obj.idd.replace(g.idPrefix,""),this.pen.valueNow])},this.getValue=function(){return this.pen.valueNow},this.setMinValue=function(n,m){(n=Number(n))>this.pen.valueMax||(this.obj.childNodes[0].innerHTML=m,this.obj.childNodes[0].style.display=0<m.length?"":"none",this.pen.valueMin=n,this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits(),this.pen._definePos())},this.setMaxValue=function(n,m){(n=Number(n))<this.pen.valueMin||(this.obj.childNodes[4].innerHTML=m,this.obj.childNodes[4].style.display=0<m.length?"":"none",this.pen.valueMax=n,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen._detectLimits(),this.pen._definePos())},this.getMinValue=function(){var m=this.obj.childNodes[0].innerHTML,n=this.pen.valueMin;return new Array(n,m)},this.getMaxValue=function(){var m=this.obj.childNodes[4].innerHTML,n=this.pen.valueMax;return new Array(n,m)},this.setItemToolTipTemplate=function(m){this.label.tip=m},this.getItemToolTipTemplate=function(){return this.label.tip},this},dhtmlXToolbarObject.prototype.unload=function(){for("function"==typeof window.addEventListener?(window.removeEventListener("mousedown",this._doOnClick,!1),window.removeEventListener("touchstart",this._doOnClick,!1)):document.body.detachEvent("onmousedown",this._doOnClick),this._doOnClick=null,this.clearAll(),this.objPull=null,this._xmlLoader&&(this._xmlLoader.destructor(),this._xmlLoader=null);0<this.base.childNodes.length;)this.base.removeChild(this.base.childNodes[0]);for(this.cont.removeChild(this.base),this.base=null;0<this.cont.childNodes.length;)this.cont.removeChild(this.cont.childNodes[0]);this.cont.className="",this.cont=null,window.dhx4._enableDataLoading(this,null,null,null,"clear"),window.dhx4._eventable(this,"clear"),this.tX1=null,this.tX2=null,this.tY1=null,this.tY2=null,this.anyUsed=null,this.idPrefix=null,this.rootTypes=null,this._rtl=null,this._rtlParseBtn=null,this.setRTL=null,this._sbw=null,this._getObj=null,this._addImgObj=null,this._setItemImage=null,this._clearItemImage=null,this._setItemText=null,this._getItemText=null,this._enableItem=null,this._disableItem=null,this._xmlParser=null,this._addItemToStorage=null,this._genStr=null,this._addItem=null,this._getPosition=null,this._setPosition=null,this._getIdByPosition=null,this._separatorObject=null,this._textObject=null,this._buttonObject=null,this._buttonSelectObject=null,this._buttonInputObject=null,this._buttonTwoStateObject=null,this._sliderObject=null,this._autoDetectVisibleArea=null,this._removeItem=null,this.setAlign=null,this.setSkin=null,this.setIconsPath=null,this.setIconPath=null,this.loadXML=null,this.loadXMLString=null,this.clearAll=null,this.addSpacer=null,this.removeSpacer=null,this.getType=null,this.getTypeExt=null,this.inArray=null,this.getParentId=null,this.addButton=null,this.addText=null,this.addButtonSelect=null,this.addButtonTwoState=null,this.addSeparator=null,this.addSlider=null,this.addInput=null,this.forEachItem=null,this.showItem=null,this.hideItem=null,this.isVisible=null,this.enableItem=null,this.disableItem=null,this.isEnabled=null,this.setItemText=null,this.getItemText=null,this.setItemToolTip=null,this.getItemToolTip=null,this.setItemImage=null,this.setItemImageDis=null,this.clearItemImage=null,this.clearItemImageDis=null,this.setItemState=null,this.getItemState=null,this.setItemToolTipTemplate=null,this.getItemToolTipTemplate=null,this.setValue=null,this.getValue=null,this.setMinValue=null,this.getMinValue=null,this.setMaxValue=null,this.getMaxValue=null,this.setWidth=null,this.getWidth=null,this.getPosition=null,this.setPosition=null,this.removeItem=null,this.addListOption=null,this.removeListOption=null,this.showListOption=null,this.hideListOption=null,this.isListOptionVisible=null,this.enableListOption=null,this.disableListOption=null,this.isListOptionEnabled=null,this.setListOptionPosition=null,this.getListOptionPosition=null,this.setListOptionText=null,this.getListOptionText=null,this.setListOptionToolTip=null,this.getListOptionToolTip=null,this.setListOptionImage=null,this.getListOptionImage=null,this.clearListOptionImage=null,this.forEachListOption=null,this.getAllListOptions=null,this.setListOptionSelected=null,this.getListOptionSelected=null,this.unload=null,this.setUserData=null,this.getUserData=null,this.setMaxOpen=null,this.items=null,this.conf=null},dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var a=window.dhx4.screenDim();this.tX1=a.left,this.tX2=a.right,this.tY1=a.top,this.tY2=a.bottom},dhtmlXToolbarObject.prototype.setIconset=function(a){this.conf.icons_css="awesome"==a},dhtmlXToolbarObject.prototype._evs={add:function(e,g){for(var c in e)"function"==typeof window.addEventListener?g.addEventListener(c,this[e[c]],!1):null==c.match(/^touch/)&&g.attachEvent("on"+c,this[e[c]]);g=e=null},clear:function(e,g){for(var c in e)"function"==typeof window.addEventListener?g.removeEventListener(c,this[e[c]],!1):null==c.match(/^touch/)&&g.detachEvent("on"+c,this[e[c]]);g=e=null}},dhtmlXToolbarObject.prototype._initObj=function(c){for(var a=0;a<c.length;a++)this._addItemToStorage(c[a]);"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype._xmlToJson=function(v){var o=[],A=v.getElementsByTagName("toolbar");if(null!=A&&null!=A[0]){A=A[0];for(var x=function(h){for(var e=null,r=0;r<h.childNodes.length;r++)if(null==e&&"itemText"==h.childNodes[r].tagName){e=window.dhx4._xmlNodeValue(h.childNodes[r]);break}return e},E=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"],g=["id","type","enabled","disabled","action","selected","img","text"],c=0;c<A.childNodes.length;c++)if("item"==A.childNodes[c].tagName){for(var n={},C=0;C<E.length;C++){null!=(l=A.childNodes[c].getAttribute(E[C]))&&(n[E[C]]=l)}for(var y=0;y<A.childNodes[c].childNodes.length;y++){if("item"==A.childNodes[c].childNodes[y].tagName&&"buttonSelect"==n.type){var D={};for(C=0;C<g.length;C++){var l;null!=(l=A.childNodes[c].childNodes[y].getAttribute(g[C]))&&(D[g[C]]=l)}var s=A.childNodes[c].childNodes[y].getElementsByTagName("userdata");for(C=0;C<s.length;C++){D.userdata||(D.userdata={});var a={};try{a.name=s[C].getAttribute("name")}catch(m){a.name=null}try{a.value=s[C].firstChild.nodeValue}catch(m){a.value=""}null!=a.name&&(D.userdata[a.name]=a.value)}D.text=x(A.childNodes[c].childNodes[y])||D.text,null==n.options&&(n.options=[]),n.options.push(D)}if("userdata"==A.childNodes[c].childNodes[y].tagName){null==n.userdata&&(n.userdata={});D={};try{D.name=A.childNodes[c].childNodes[y].getAttribute("name")}catch(m){D.name=null}try{D.value=A.childNodes[c].childNodes[y].firstChild.nodeValue}catch(m){D.value=""}null!=D.name&&(n.userdata[D.name]=D.value)}}n.text=x(A.childNodes[c])||n.text,o.push(n)}x=null}return o},dhtmlXToolbarObject.prototype._addItemToStorage=function(l,n){var m=l.id||this._genStr(24),g=l.type||"";if("spacer"==g?this.addSpacer(this._lastId):this._lastId=m,""!=g&&null!=this["_"+g+"Object"]){if("buttonSelect"==g&&null!=l.options)for(var h=0;h<l.options.length;h++)"obj"==l.options[h].type&&(l.options[h].type="button"),"sep"==l.options[h].type&&(l.options[h].type="separator");if("slider"==g){var e={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(var c in e)null==l[e[c]]&&null!=l[c]&&(l[e[c]]=l[c])}"buttonInput"==g&&null==l.value&&null!=l.text&&(l.value=l.text),"buttonTwoState"==g&&void 0===l.selected&&void 0!==l.pressed&&window.dhx4.s2b(l.pressed)&&(l.selected=!0),void 0===l.enabled&&void 0!==l.disabled&&window.dhx4.s2b(l.disabled)&&(l.enabled=!1),null==l.imgDis&&null!=l.img_disabled&&(l.imgdis=l.img_disabled),void 0!==l.openAll&&null!=l.openAll||"dhx_terrace"!=this.conf.skin||(l.openAll=!0),this.objPull[this.idPrefix+m]=new this["_"+g+"Object"](this,m,l),this.objPull[this.idPrefix+m].type=g,this.setPosition(m,n)}if(null!=l.userdata)for(var c in l.userdata)this.setUserData(m,c,l.userdata[c]);if(null!=l.options)for(h=0;h<l.options.length;h++)if(null!=l.options[h].userdata)for(var c in l.options[h].userdata)this.setListOptionUserData(l.id,l.options[h].id,c,l.options[h].userdata[c])},dhtmlXToolbarObject.prototype.setSkin=function(h,e){for(var c in!0===e?this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize):(this.conf.skin=h,"dhx_skyblue"==this.conf.skin&&(this.conf.sel_ofs_y=1),"dhx_web"==this.conf.skin&&(this.conf.sel_ofs_y=1,this.conf.sel_ofs_x=1),"dhx_terrace"==this.conf.skin&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),"material"==this.conf.skin&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow),this.objPull){var g=this.objPull[c];"slider"==g.type&&(g.pen._detectLimits(),g.pen._definePos(),g.label.className="dhx_toolbar_slider_label_"+this.conf.skin),"buttonSelect"==g.type&&(g.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow)}"dhx_terrace"==h&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.setAlign=function(a){this.conf.align="right"==a?"right":"left",this.base.className="right"==a?"dhxtoolbar_float_right":"dhxtoolbar_float_left",this._spacer&&(this._spacer.className="right"==a?" dhxtoolbar_float_left":" dhxtoolbar_float_right")},dhtmlXToolbarObject.prototype.setIconSize=function(a){this.conf.iconSize={18:!0,24:!0,32:!0,48:!0}[a]?a:18,this.setSkin(this.conf.skin,!0),this.callEvent("_onIconSizeChange",[this.conf.iconSize])},dhtmlXToolbarObject.prototype.setIconsPath=function(a){this.conf.icons_path=a},dhtmlXToolbarObject.prototype.setUserData=function(e,a,c){e=this.idPrefix+e,null!=this.objPull[e]&&(null==this.objPull[e].userData&&(this.objPull[e].userData={}),this.objPull[e].userData[a]=c)},dhtmlXToolbarObject.prototype.getUserData=function(c,a){return c=this.idPrefix+c,null!=this.objPull[c]&&null!=this.objPull[c].userData&&this.objPull[c].userData[a]||null},dhtmlXToolbarObject.prototype._isListOptionExists=function(a,e){if(null==this.objPull[this.idPrefix+a])return!1;var c=this.objPull[this.idPrefix+a];return"buttonSelect"==c.type&&null!=c._listOptions[e]},dhtmlXToolbarObject.prototype.setListOptionUserData=function(a,h,c,g){if(this._isListOptionExists(a,h)){var e=this.objPull[this.idPrefix+a]._listOptions[h];null==e.userData&&(e.userData={}),e.userData[c]=g}},dhtmlXToolbarObject.prototype.getListOptionUserData=function(a,g,c){if(!this._isListOptionExists(a,g))return null;var e=this.objPull[this.idPrefix+a]._listOptions[g];return e.userData&&e.userData[c]?e.userData[c]:null},dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){null==this.conf.terrace_radius&&(this.conf.terrace_radius="3px");var g=[],h={separator:!0,text:!0},m=[this.base];null!=this._spacer&&m.push(this._spacer);for(var o=0;o<m.length;o++){g[o]=[];for(var c=0;c<m[o].childNodes.length;c++)if(null!=m[o].childNodes[c].idd&&"none"!=m[o].childNodes[c].style.display){var n=this.idPrefix+m[o].childNodes[c].idd;null!=this.objPull[n]&&this.objPull[n].obj==m[o].childNodes[c]&&g[o].push({a:n,type:this.objPull[n].type,node:this.objPull[n]["buttonSelect"==this.objPull[n].type?"arw":"obj"]})}m[o]=null}for(o=0;o<g.length;o++)for(c=0;c<g[o].length;c++){var r=g[o][c],s=!1,l=!1;h[r.type]||((c==g[o].length-1||null!=g[o][c+1]&&h[g[o][c+1].type])&&(s=!0),(0==c||0<=c-1&&null!=g[o][c-1]&&h[g[o][c-1].type])&&(l=!0)),r.node.style.borderRightWidth=s?"1px":"0px",r.node.style.borderTopRightRadius=r.node.style.borderBottomRightRadius=s?this.conf.terrace_radius:"0px","buttonSelect"==r.type?(r.node.previousSibling.style.borderTopLeftRadius=r.node.previousSibling.style.borderBottomLeftRadius=l?this.conf.terrace_radius:"0px",r.node.previousSibling._br=s,r.node.previousSibling._bl=l):r.node.style.borderTopLeftRadius=r.node.style.borderBottomLeftRadius=l?this.conf.terrace_radius:"0px",r.node._br=s,r.node._bl=l}for(o=0;o<g.length;o++){for(c=0;c<g[o].length;c++){for(var n in g[o][c])g[o][c][n]=null;g[o][c]=null}g[o]=null}g=m=null},dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(e,c){var a=this.objPull[e];1==c?(a.obj.style.borderBottomLeftRadius=a.obj._bl?this.conf.terrace_radius:"0px",a.arw.style.borderBottomRightRadius=a.obj._br?this.conf.terrace_radius:"0px"):(a.obj.style.borderBottomLeftRadius="0px",a.arw.style.borderBottomRightRadius="0px"),a=null},void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_toolbar=function(h,c,g,a,e){return void 0!==e?h=e:((h=document.createElement("DIV")).className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders"),h.appendChild(document.createElement("DIV")),h.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"),this.cell.insertBefore(h,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.toolbar=!0,this._updateIdx(),h},dhtmlXCellObject.prototype.attachToolbar=function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar)return this.callEvent("_onBeforeContentAttach",["toolbar"]),void 0===a?a={}:"string"==typeof a&&(a={skin:a}),void 0===a.skin&&(a.skin=this.conf.skin),a.parent=this._attachObject("toolbar").firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(a),this._adjustCont(this._idd),(this.dataNodes.toolbar._masterCell=this).dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()}),a.parent=null,a=null,this.callEvent("_onContentAttach",[]),this.dataNodes.toolbar},dhtmlXCellObject.prototype.detachToolbar=function(){this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,delete this.dataNodes.toolbar,this._detachObject("toolbar"))},dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")},dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")},dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar}),dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight),null!=this.editor&&(this.editor.style.left="5px",this.editor.style.width=this.base.clientWidth-5+"px")},dhtmlXEditor.prototype.setReadonly=function(a){this.conf.roMode=!0===a,this._prepareContent(!0,this.conf.roMode),this.cBlock.style.display=this.conf.roMode?"":"none"},dhtmlXEditor.prototype.isReadonly=function(a){return this.conf.roMode||!1},dhtmlXEditor.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+a),this.conf.skin=this.cell.conf.skin=a,this.tb&&(this.cell.detachToolbar(a),this.tb=null,this.attachToolbar()),this.setSizes()},dhtmlXEditor.prototype._fontConf=function(){if(""==this.conf.skin)var a={family:this.conf.font.family,size:this.conf.font.size,color:this.conf.font.color};else a={family:"Roboto, Arial, Helvetica",size:"14px",color:"#404040"};return window.dhx4.template("font-size: #size#; font-family: #family#; color: #color#;",a)},window.dhtmlXEditorCell=function(e,a){dhtmlXCellObject.apply(this,[e,"_editor"]);return this.editor=a,this.conf.skin=this.editor.conf.skin,this.attachEvent("_onCellUnload",function(){this._stbUnload(),this.editor=null,null}),this._stbInit(),this},dhtmlXEditorCell.prototype=new dhtmlXCellObject,dhtmlXEditorCell.prototype._stbInit=function(){var l=this,h=document.createElement("DIV");h.className="dhx_cell_stb"+(dhx4.isIE6||dhx4.isIE7||dhx4.isIE8?"":" dhx_cell_stb_shadow"),this.cell.insertBefore(h,this.cell.childNodes[this.conf.idx.cont]),h.onselectstart=function(a){return(a=a||event).cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1};var g={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"};for(var e in g){var c=document.createElement("A");c.href="javascript:void(0);",c.tabIndex=-1,h.appendChild(c),c.onmousedown=c.onclick=function(a){return(a=a||event).preventDefault?a.preventDefault():a.returnValue=!1,!1};var m=document.createElement("DIV");m.className="dhx_cell_stb_button btn_"+e,m._actv=e.charAt(0),m._cmd=g[e],c.appendChild(m),m.onclick=function(a){return(a=a||event).preventDefault?a.preventDefault():a.returnValue=!1,!1},m.onmousedown=function(a){(a=a||event).preventDefault?a.preventDefault():a.returnValue=!1,l.editor[this._cmd](),l.editor.callEvent("onToolbarClick",[this._actv])},m=c=null}h=null,this._stbUnload=function(){var a=this.cell.childNodes[this.conf.idx.stb];for(a.onselectstart=null;0<a.childNodes.length;)a.lastChild.onmousedown=a.lastChild.onclick=null,a.lastChild.firstChild.onmousedown=a.lastChild.firstChild.onclick=null,a.lastChild.firstChild._actv=a.lastChild.firstChild._cmd=null,a.lastChild.removeChild(a.lastChild.firstChild),a.removeChild(a.lastChild);a.parentNode.removeChild(a),a=l=null,this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null,delete this.conf.ofs_nodes.t._getStbHeight,delete this.conf.idx_data.stb,this._updateIdx()},this.conf.stb_visible=!0,this.conf.ofs_nodes.t._getStbHeight="func",this.conf.idx_data.stb="dhx_cell_stb",this._updateIdx()},dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none",this.conf.stb_visible=!1},dhtmlXEditorCell.prototype._getStbHeight=function(){return 1==this.conf.stb_visible&&"material"==this.conf.skin?(null==this.conf.stb_height&&(this.conf.stb_height=window.dhx4.readFromCss("dhxeditor_material stb_height_detect","scrollHeight","<div class='dhx_cell_editor'><div class='dhx_cell_stb'></div></div>")),this.conf.stb_height):this.cell.childNodes[this.conf.idx.stb].offsetHeight},dhtmlXCellObject.prototype.attachEditor=function(a){this.callEvent("_onBeforeContentAttach",["editor"]);var e=document.createElement("DIV");if(e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),"object"==typeof a&&null!=a||(a={}),a.parent=e,this.dataType="editor",this.dataObj=new dhtmlXEditor(a),e=null,a.parent=null,a=null,"function"==typeof window.dhtmlXPortalCell&&this instanceof window.dhtmlXPortalCell){if(null==this.portal.conf.editor_ev){var g=this.portal.attachEvent("onBeforeDrag",function(h){return"editor"==this.cdata[h].dataType&&(this.cdata[h].conf.editor_cont=this.cdata[h].dataObj.getContent()),!0}),c=this.portal.attachEvent("onDrop",function(h){"editor"==this.cdata[h].dataType&&(this.cdata[h].dataObj.setContent(this.cdata[h].conf.editor_cont),this.cdata[h].dataObj._prepareContent(!0),this.cdata[h].conf.editor_cont=null)});this.portal.conf.editor_ev=[g,c]}this.conf.editor_ev=this.attachEvent("_onBeforeContentDetach",function(){if(this.detachEvent(this.conf.editor_ev),this.conf.editor_ev=null,this instanceof window.dhtmlXPortalCell){var l=!1;for(var h in this.portal.cdata)this.portal.cdata[h]!=this&&"editor"==this.portal.cdata[h].dataType&&(l=!0);if(0==l){for(var m=0;m<this.portal.conf.editor_ev.length;m++)this.portal.detachEvent(this.portal.conf.editor_ev[m]);this.portal.conf.editor_ev=null}}})}return this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXEditor.prototype.attachToolbar=function(c){if(null==this.tb){null!=c&&(this.conf.iconsPath=c),this.cell._stbHide(),this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin}),this.setSizes();var h="material"==this.conf.skin?"png":"gif";this._availFonts=new Array("Arial","Arial Narrow","Comic Sans MS","Courier","Georgia","Impact","Tahoma","Times New Roman","Verdana"),this._initFont=this._availFonts[0],this._xmlFonts="";for(var m=0;m<this._availFonts.length;m++){var g=String(this._availFonts[m]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+g+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(g).toLowerCase()+"."+h+'" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'}for(var e in this._availSizes={1:"8pt",2:"10pt",3:"12pt",4:"14pt",5:"18pt",6:"24pt",7:"36pt"},this._xmlSizes="",this._availSizes)this._xmlSizes+='<item type="button" id="applyFontSize:'+e+":"+this._availSizes[e]+'" text="'+this._availSizes[e]+'"/>';this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.'+h+'" imgdis="h4_dis.'+h+'" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.'+h+'" imgdis="h4_dis.'+h+'" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.'+h+'" imgdis="h4_dis.'+h+'" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.'+h+'" imgdis="h4_dis.'+h+'" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.'+h+'" imgdis="bold_dis.'+h+'" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.'+h+'" imgdis="italic_dis.'+h+'" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.'+h+'" imgdis="underline_dis.'+h+'" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.'+h+'" imgdis="strike_dis.'+h+'" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.'+h+'" imgdis="align_left_dis.'+h+'" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.'+h+'" imgdis="align_center_dis.'+h+'" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.'+h+'" imgdis="align_right_dis.'+h+'" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.'+h+'" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.'+h+'" imgdis="script_sub.'+h+'" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.'+h+'" imgdis="script_super_dis.'+h+'" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.'+h+'" imgdis="list_number_dis.'+h+'" title="Number List"/><item id="createBulList" type="button" img="list_bullet.'+h+'" imgdis="list_bullet_dis.'+h+'" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.'+h+'" imgdis="indent_inc_dis.'+h+'" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.'+h+'" imgdis="indent_dec_dis.'+h+'" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.'+h+'" title="Clear Formatting"/></toolbar>',this.tb.loadStruct(this.tbXML),this._checkAlign=function(a){this.tb.setItemState("alignCenter",!1),this.tb.setItemState("alignRight",!1),this.tb.setItemState("alignJustify",!1),this.tb.setItemState("alignLeft",!1),a&&this.tb.setItemState(a,!0)},this._checkH=function(a){this.tb.setItemState("applyH1",!1),this.tb.setItemState("applyH2",!1),this.tb.setItemState("applyH3",!1),this.tb.setItemState("applyH4",!1),a&&this.tb.setItemState(a,!0)},this._doOnFocusChanged=function(o){if(o.h1||o.h2||o.h3||o.h4)this.tb.setItemState("applyBold",!1);else{var a=-1!=String(o.fontWeight).search(/bold/i)||700<=Number(o.fontWeight);this.tb.setItemState("applyBold",a)}var n="alignLeft";-1!=String(o.textAlign).search(/center/)&&(n="alignCenter"),-1!=String(o.textAlign).search(/right/)&&(n="alignRight"),-1!=String(o.textAlign).search(/justify/)&&(n="alignJustify"),this.tb.setItemState(n,!0),this._checkAlign(n),this.tb.setItemState("applyH1",o.h1),this.tb.setItemState("applyH2",o.h2),this.tb.setItemState("applyH3",o.h3),this.tb.setItemState("applyH4",o.h4),window._KHTMLrv&&(o.sub="sub"==o.vAlign,o.sup="super"==o.vAlign),this.tb.setItemState("applyItalic","italic"==o.fontStyle),this.tb.setItemState("applyStrikethrough",o.del),this.tb.setItemState("applySub",o.sub),this.tb.setItemState("applySuper",o.sup),this.tb.setItemState("applyUnderscore",o.u)},this._doOnToolbarClick=function(n){var a=String(n).split(":");null!=this[a[0]]&&"function"==typeof this[a[0]]&&(this[a[0]](a[1]),this.callEvent("onToolbarClick",[n]))},this._doOnStateChange=function(n,a){switch(this[n](),n){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(n);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(n)}this.callEvent("onToolbarClick",[n])},this._doOnBeforeStateChange=function(n,a){return"alignLeft"!=n&&"alignCenter"!=n&&"alignRight"!=n&&"alignJustify"!=n||1!=a};var l=this;this.tb.attachEvent("onClick",function(a){l._doOnToolbarClick(a)}),this.tb.attachEvent("onStateChange",function(n,a){l._doOnStateChange(n,a)}),this.tb.attachEvent("onBeforeStateChange",function(n,a){return l._doOnBeforeStateChange(n,a)}),this.applyBold=function(){this._runCommand("Bold")},this.applyItalic=function(){this._runCommand("Italic")},this.applyUnderscore=function(){this._runCommand("Underline")},this.applyStrikethrough=function(){this._runCommand("StrikeThrough")},this.alignLeft=function(){this._runCommand("JustifyLeft")},this.alignRight=function(){this._runCommand("JustifyRight")},this.alignCenter=function(){this._runCommand("JustifyCenter")},this.alignJustify=function(){this._runCommand("JustifyFull")},this.applySub=function(){this._runCommand("Subscript")},this.applySuper=function(){this._runCommand("Superscript")},this.applyH1=function(){this._runCommand("FormatBlock","<H1>")},this.applyH2=function(){this._runCommand("FormatBlock","<H2>")},this.applyH3=function(){this._runCommand("FormatBlock","<H3>")},this.applyH4=function(){this._runCommand("FormatBlock","<H4>")},this.createNumList=function(){this._runCommand("InsertOrderedList")},this.createBulList=function(){this._runCommand("InsertUnorderedList")},this.increaseIndent=function(){this._runCommand("Indent")},this.decreaseIndent=function(){this._runCommand("Outdent")},this.clearFormatting=function(){this._runCommand("RemoveFormat"),this.tb.setItemState("applyBold",!1),this.tb.setItemState("applyItalic",!1),this.tb.setItemState("applyStrikethrough",!1),this.tb.setItemState("applySub",!1),this.tb.setItemState("applySuper",!1),this.tb.setItemState("applyUnderscore",!1);var a=this.getContent();a=a.replace(/<\/?h\d>/gi,""),this.setContent(a)}}},dhtmlx.Group={_init:function(){dhtmlx.assert(this.data,"DataStore required for grouping"),this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(){this._settings.group&&this.group(this._settings.group,!1)},this)),this.attachEvent("onBeforeRender",dhtmlx.bind(function(a){this._settings.sort&&(a.block(),a.sort(this._settings.sort),a.unblock())},this)),this.data.attachEvent("onClearAll",dhtmlx.bind(function(){this.data._not_grouped_order=this.data._not_grouped_pull=null},this)),this.attachEvent("onBeforeSort",dhtmlx.bind(function(){this._settings.sort=null},this))},_init_group_data_event:function(c,a){c.attachEvent("onClearAll",dhtmlx.bind(function(){this.ungroup(!1),this.block(),this.clearAll(),this.unblock()},a))},sum:function(c,a){c=dhtmlx.Template.setter(c),a=a||this.data;var e=0;return a.each(function(g){e+=1*c(g)}),e},min:function(e,c){e=dhtmlx.Template.setter(e),c=c||this.data;var a=1/0;return c.each(function(g){1*e(g)<a&&(a=1*e(g))}),1*a},max:function(e,c){e=dhtmlx.Template.setter(e),c=c||this.data;var a=-1/0;return c.each(function(g){1*e(g)>a&&(a=1*e(g))}),a},_split_data_by:function(l){var n=function(s,r){return(s=dhtmlx.Template.setter(s))(r[0])},o=dhtmlx.Template.setter(l.by);l.map[o]||(l.map[o]=[o,n]);var e={},m=[];for(var a in this.data.each(function(r){var s=o(r);e[s]||(m.push({id:s}),e[s]=dhtmlx.toArray()),e[s].push(r)}),l.map){var h=l.map[a][1]||n;"function"!=typeof h&&(h=this[h]);for(var g=0;g<m.length;g++)m[g][a]=h.call(this,l.map[a][0],e[m[g].id])}this.data._not_grouped_order=this.data.order,this.data._not_grouped_pull=this.data.pull,this.data.order=dhtmlx.toArray(),this.data.pull={};for(g=0;g<m.length;g++){var c=this.data.id(m[g]);this.data.pull[c]=m[g],this.data.order.push(c)}this.callEvent("onStoreUpdated",[])},group:function(a,c){this.ungroup(!1),this._split_data_by(a),!1!==c&&this.data.callEvent("onStoreUpdated",[])},ungroup:function(a){this.data._not_grouped_order&&(this.data.order=this.data._not_grouped_order,this.data.pull=this.data._not_grouped_pull,this.data._not_grouped_pull=this.data._not_grouped_order=null),!1!==a&&this.data.callEvent("onStoreUpdated",[])},group_setter:function(a){return dhtmlx.assert("object"==typeof a,"Incorrect group value"),dhtmlx.assert(a.by,"group.by is mandatory"),dhtmlx.assert(a.map,"group.map is mandatory"),a},sort_setter:function(a){return"object"!=typeof a&&(a={by:a}),this._mergeSettings(a,{as:"string",dir:"asc"}),a}},dhtmlx.Date={Locale:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},date_part:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},time_part:function(a){return(a.valueOf()/1e3-60*a.getTimezoneOffset())%86400},week_start:function(c){var a=c.getDay();return this.config.start_on_monday&&(0===a?a=6:a--),this.date_part(this.add(c,-1*a,"day"))},month_start:function(a){return a.setDate(1),this.date_part(a)},year_start:function(a){return a.setMonth(0),this.month_start(a)},day_start:function(a){return this.date_part(a)},add:function(c,e,g){var a=new Date(c.valueOf());switch(g){case"day":a.setDate(a.getDate()+e);break;case"week":a.setDate(a.getDate()+7*e);break;case"month":a.setMonth(a.getMonth()+e);break;case"year":a.setYear(a.getFullYear()+e);break;case"hour":a.setHours(a.getHours()+e);break;case"minute":a.setMinutes(a.getMinutes()+e);break;default:return dhtmlx.Date["add_"+g](c,e,g)}return a},to_fixed:function(a){return a<10?"0"+a:a},copy:function(a){return new Date(a.valueOf())},date_to_str:function(c,a){return c=c.replace(/%[a-zA-Z]/g,function(e){switch(e){case"%d":return'"+dhtmlx.Date.to_fixed(date.getDate())+"';case"%m":return'"+dhtmlx.Date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+dhtmlx.Date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+dhtmlx.Date.Locale.day_short[date.getDay()]+"';case"%l":return'"+dhtmlx.Date.Locale.day_full[date.getDay()]+"';case"%M":return'"+dhtmlx.Date.Locale.month_short[date.getMonth()]+"';case"%F":return'"+dhtmlx.Date.Locale.month_full[date.getMonth()]+"';case"%h":return'"+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+dhtmlx.Date.to_fixed(date.getHours())+"';case"%i":return'"+dhtmlx.Date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+dhtmlx.Date.to_fixed(date.getSeconds())+"';case"%W":return'"+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+"';default:return e}}),a&&(c=c.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+c+'";')},str_to_date:function(h,e){for(var l="var temp=date.split(/[^0-9a-zA-Z]+/g);",a=h.match(/%[a-zA-Z]/g),c=0;c<a.length;c++)switch(a[c]){case"%j":case"%d":l+="set[2]=temp["+c+"]||1;";break;case"%n":case"%m":l+="set[1]=(temp["+c+"]||1)-1;";break;case"%y":l+="set[0]=temp["+c+"]*1+(temp["+c+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":l+="set[3]=temp["+c+"]||0;";break;case"%i":l+="set[4]=temp["+c+"]||0;";break;case"%Y":l+="set[0]=temp["+c+"]||0;";break;case"%a":case"%A":l+="set[3]=set[3]%12+((temp["+c+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":l+="set[5]=temp["+c+"]||0;"}var g="set[0],set[1],set[2],set[3],set[4],set[5]";return e&&(g=" Date.UTC("+g+")"),new Function("date","var set=[0,0,1,0,0,0]; "+l+" return new Date("+g+");")},getISOWeek:function(e){if(!e)return!1;var c=e.getDay();0===c&&(c=7);var g=new Date(e.valueOf());g.setDate(e.getDate()+(4-c));var a=g.getFullYear(),l=Math.floor((g.getTime()-new Date(a,0,1).getTime())/864e5);return 1+Math.floor(l/7)},getUTCISOWeek:function(a){return this.getISOWeek(a)}},dhtmlx.math={},dhtmlx.math._toHex=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],dhtmlx.math.toHex=function(c,a){for(c=parseInt(c,10),str="";0<c;)str=this._toHex[c%16]+str,c=Math.floor(c/16);for(;str.length<a;)str="0"+str;return str},dhtmlx.math.hexToDec=function(a){return parseInt(a,16)},dhtmlx.math.toRgb=function(c){var h,e,a,l;return"string"!=typeof c?(h=c[0],e=c[1],a=c[2]):-1!=c.indexOf("rgb")?(h=(l=c.substr(c.indexOf("(")+1,c.lastIndexOf(")")-c.indexOf("(")-1).split(","))[0],e=l[1],a=l[2]):("#"==c.substr(0,1)&&(c=c.substr(1)),h=this.hexToDec(c.substr(0,2)),e=this.hexToDec(c.substr(2,2)),a=this.hexToDec(c.substr(4,2))),((h=parseInt(h,10)||0)<0||255<h)&&(h=0),((e=parseInt(e,10)||0)<0||255<e)&&(e=0),((a=parseInt(a,10)||0)<0||255<a)&&(a=0),[h,e,a]},dhtmlx.math.hsvToRgb=function(m,y,w){var l,o,e,c,x,a,n,u;switch(e=w*(1-y),c=w*(1-(o=m/60-(l=Math.floor(m/60)%6))*y),x=w*(1-(1-o)*y),u=n=a=0,l){case 0:a=w,n=x,u=e;break;case 1:a=c,n=w,u=e;break;case 2:a=e,n=w,u=x;break;case 3:a=e,n=c,u=w;break;case 4:a=x,n=e,u=w;break;case 5:a=w,n=e,u=c}return[a=Math.floor(255*a),n=Math.floor(255*n),u=Math.floor(255*u)]},dhtmlx.math.rgbToHsv=function(c,n,o){var l,e,u,m,x;l=c/255,e=n/255,u=o/255;var w,a=Math.min(l,e,u);return m=0,(x=w=Math.max(l,e,u))==a?m=0:w==l&&u<=e?m=60*(e-u)/(w-a)+0:w==l&&e<u?m=60*(e-u)/(w-a)+360:w==e?m=60*(u-l)/(w-a)+120:w==u&&(m=60*(l-e)/(w-a)+240),[m,0==w?0:1-a/w,x]},dhtmlx.presets||(dhtmlx.presets={}),dhtmlx.presets.chart={simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,width:45,radius:0,alpha:1,border:!0},stick:{width:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",width:70,gradient:"falling",radius:0,alpha:.5,border:!0}},dhtmlx.ui.Map=function(a){this.name="Map",this._id="map_"+dhtmlx.uid(),this._key=a,this._map=[],this._areas=[]},dhtmlx.ui.Map.prototype={addRect:function(e,c,a){this._areas.push({index:a,points:c}),this._createMapArea(e,"RECT",c,a)},addPoly:function(e,c,a){this._createMapArea(e,"POLY",c,a)},_createMapArea:function(h,c,g,e){var a="";4==arguments.length&&(a="userdata='"+e+"'"),this._map.push("<area "+this._key+"='"+h+"' shape='"+c+"' coords='"+g.join()+"' "+a+"></area>")},addSector:function(a,r,o,m,h,e,g,l){var n=[];n.push(m),n.push(Math.floor(h*g));for(var c=r;c<o;c+=Math.PI/18)n.push(Math.floor(m+e*Math.cos(c))),n.push(Math.floor((h+e*Math.sin(c))*g));return n.push(Math.floor(m+e*Math.cos(o))),n.push(Math.floor((h+e*Math.sin(o))*g)),n.push(m),n.push(Math.floor(h*g)),this.addPoly(a,n,l)},render:function(a){var e=dhtmlx.html.create("DIV");e.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;",a.appendChild(e);var c=dhtmlx._isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";e.innerHTML="<map id='"+this._id+"' name='"+this._id+"'>"+this._map.join("\n")+"</map><img "+c+" class='dhx_map_img' usemap='#"+this._id+"' onmousedown='return false;'>",a._htmlmap=e,this._map=[]}},dhtmlx.chart={},dhtmlx.chart.scatter={pvt_render_scatter:function(r,l,o,n,m,a){if(!this._settings.xValue)return dhtmlx.log("warning","Undefined propery: xValue");var e=this._getLimits(),h=this._getLimits("h","xValue");m||(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),this._drawYAxis(this.canvases.y.getCanvas(),l,o,n,e.min,e.max),this._drawHXAxis(this.canvases.x.getCanvas(),l,o,n,h.min,h.max)),e={min:this._settings.yAxis.start,max:this._settings.yAxis.end},h={min:this._settings.xAxis.start,max:this._settings.xAxis.end};var c=this._getScatterParams(r,l,o,n,h,e);this._mapStart=o;for(var g=0;g<l.length;g++)this._drawScatterItem(r,a,o,n,c,h,e,l[g],m)},_getScatterParams:function(a,g,e,c,m,l){var h={};return h.totalHeight=c.y-e.y,h.totalWidth=c.x-e.x,this._calcScatterUnit(h,m.min,m.max,h.totalWidth,"X"),this._calcScatterUnit(h,l.min,l.max,h.totalHeight,"Y"),h},_drawScatterItem:function(s,a,o,n,e,h,g,l,m){var c=this._calculateScatterItemPosition(e,n,o,h,l,"X"),r=this._calculateScatterItemPosition(e,o,n,g,l,"Y");this._drawItem(s,c,r,l,this._settings.label.call(this,l),m,a)},_calculateScatterItemPosition:function(e,n,m,a,h,c){var r=this._settings["X"==c?"xValue":"value"].call(this,h),g=e["valueFactor"+c],s=(parseFloat(r||0)-a.min)*g,o=e["unit"+c],l=m[c.toLowerCase()]-("X"==c?-1:1)*Math.floor(o*s);return s<0&&(l=m[c.toLowerCase()]),r>a.max&&(l=n[c.toLowerCase()]),r<a.min&&(l=m[c.toLowerCase()]),l},_calcScatterUnit:function(l,e,a,c,g){var h=this._getRelativeValue(e,a);l["relValue"+(g=g||"")]=h[0],l["valueFactor"+g]=h[1],l["unit"+g]=l["relValue"+g]?c/l["relValue"+g]:10}},dhtmlx.chart.radar={pvt_render_radar:function(c,g,a,l,e,h){this._renderRadarChart(c,g,a,l,e,h)},_renderRadarChart:function(v,h,s,r,o,a){if(h.length){for(var m=this._getPieParameters(s,r),n=this._settings.radius?this._settings.radius:m.radius,c=this._settings.x?this._settings.x:m.x,u=this._settings.y?this._settings.y:m.y,e=[],g=0;g<h.length;g++)e.push(1);var l=this._getRatios(e,h.length);this._mapStart=s,o||this._drawRadarAxises(l,c,u,n,h),this._drawRadarData(v,l,c,u,n,h,o,a)}},_drawRadarData:function(D,u,n,m,h,O,E,N){var C,w,M,K,F,J,g,e,H,L,I,v,c,A,r,o,a,s,l;for(F=(M=this._settings).yAxis.start,J=M.yAxis.end,s=(v=(l=this._getRelativeValue(F,J))[0])?h/v:h/2,a=l[1],C=w=c=-Math.PI/2,H=[],K=e=0;K<O.length;K++)o?r=o:(A=M.value(O[K]),r=(parseFloat(A||0)-F)*a),L=Math.floor(s*r),A=M.value(K!=O.length-1?O[K+1]:O[0]),o=(parseFloat(A||0)-F)*a,I=Math.floor(s*o),C=w,w=K!=O.length-1?c+u[K]-1e-4:c,g=e||this._getPositionByAngle(C,n,m,L),e=this._getPositionByAngle(w,n,m,I),H.push(g);M.fill&&this._fillRadarChart(D,H,O),M.disableLines||this._strokeRadarChart(D,H,O),M.disableItems||this._drawRadarItemMarkers(D,H,O,E,N),H=null},_drawRadarItemMarkers:function(a,e,h,g,l){for(var c=0;c<e.length;c++)this._drawItem(a,e[c].x,e[c].y,h[c],this._settings.label.call(this,h),g,l)},_fillRadarChart:function(a,g,l){var h,e;a.globalAlpha=this._settings.alpha.call(this,{}),a.beginPath();for(var c=0;c<g.length;c++)a.fillStyle=this._settings.fill.call(this,l[c]),h=g[c],e=g[c+1]||g[0],c||a.moveTo(h.x,h.y),a.lineTo(e.x,e.y);a.fill(),a.globalAlpha=1},_strokeRadarChart:function(a,g,l){for(var h,e,c=0;c<g.length;c++)h=g[c],e=g[c+1]||g[0],this._drawLine(a,h.x,h.y,e.x,e.y,this._settings.line.color.call(this,l[c]),this._settings.line.width)},_drawRadarAxises:function(C,w,v,m,P){var a=this._settings.yAxis,g=this._settings.xAxis,n=a.start,l=a.end,r=a.step,D={},O=this._configYAxis;if(void 0===O.step||void 0===O.start||void 0===O.end){var s=this._getLimits();n=(D=this._calculateScale(s.min,s.max)).start,l=D.end,r=D.step,a.end=l,a.start=n}var M,L,E,u,A,J=[],N=0,e=m*r/(l-n);r<1&&(u=Math.min(this._log10(r),n<=0?0:this._log10(n)),A=Math.pow(10,-u));var K=[];this.canvases.scale||(this.canvases.scale=new dhtmlx.ui.Canvas(this._obj,"radar_scale"));var I=this.canvases.scale.getCanvas();for(M=l;n<=M;M-=r){D.fixNum&&(M=parseFloat(new Number(M).toFixed(D.fixNum))),J.push(Math.floor(N*e)+.5),A&&(M=Math.round(M*A)/A);var o=v-m+J[J.length-1];if(this.canvases.scale.renderTextAt("middle","left",w,o,a.template(M.toString()),"dhx_axis_item_y dhx_radar"),C.length<2)return void this._drawScaleSector(I,"arc",w,v,m-J[J.length-1],-Math.PI/2,3*Math.PI/2,M);var F,h=-Math.PI/2,H=h;for(L=0;L<C.length;L++)M==l&&K.push(H),F=h+C[L]-1e-4,this._drawScaleSector(I,O.lineShape||"line",w,v,m-J[J.length-1],H,F,M,L,P[M]),H=F;N++}for(M=0;M<K.length;M++)E=this._getPositionByAngle(K[M],w,v,m),g.lines.call(this,P[M],M)&&this._drawLine(I,w,v,E.x,E.y,g?g.lineColor.call(this,P[M]):"#cfcfcf",1),this._drawRadarScaleLabel(I,w,v,m,K[M],g?g.template.call(this,P[M]):"&nbsp;")},_drawScaleSector:function(u,l,s,o,h,c,a,g,e){var r,n;if(h<0)return!1;r=this._getPositionByAngle(c,s,o,h),n=this._getPositionByAngle(a,s,o,h);var m=this._settings.yAxis;m.bg&&(u.beginPath(),u.moveTo(s,o),"arc"==l?u.arc(s,o,h,c,a,!1):(u.lineTo(r.x,r.y),u.lineTo(n.x,n.y)),u.fillStyle=m.bg(g,e),u.moveTo(s,o),u.fill(),u.closePath()),m.lines.call(this,g)&&(u.lineWidth=1,u.beginPath(),"arc"==l?u.arc(s,o,h,c,a,!1):(u.moveTo(r.x,r.y),u.lineTo(n.x,n.y)),u.strokeStyle=m.lineColor.call(this,g),u.stroke())},_drawRadarScaleLabel:function(A,o,m,c,n,v){var w=this.canvases.scale.renderText(0,0,v,"dhx_axis_radar_title",1),e=w.scrollWidth,u=w.offsetHeight,s=.001,l=this._getPositionByAngle(n,o,m,c+5),h=0,g=0;(n<0||n>Math.PI)&&(g=-u),n>Math.PI/2&&(h=-e),Math.abs(n+Math.PI/2)<s||Math.abs(n-Math.PI/2)<s?h=-e/2:(Math.abs(n)<s||Math.abs(n-Math.PI)<s)&&(g=-u/2),w.style.top=l.y+g+"px",w.style.left=l.x+h+"px",w.style.width=e+"px",w.style.whiteSpace="nowrap"}},dhtmlx.chart.area={pvt_render_area:function(n,F,h,g,o,C){var s,A,u,r,l,y,m,E,D,x,w,c,v,a,e;if(y=this._calculateLineParams(n,F,h,g,o),r=(A=this._settings).eventRadius||Math.floor(y.cellWidth/2),F.length){for(m=[],x=A.offset?h.x+.5*y.cellWidth:h.x,u=0;u<F.length;u++)if(l=F[u],D=this._getPointY(l,h,g,y),v=x+y.cellWidth*u,D){if(a="object"==typeof D?D.y0:D,u&&this._settings.fixOverflow){if((E=this._getPointY(F[u-1],h,g,y)).out&&E.out==D.out)continue;w=y.cellWidth*(u-1)-.5+x,c="object"==typeof E?E.y0:E,E.out&&(e="min"==E.out?g.y:h.y,m.push([this._calcOverflowX(w,v,c,a,e),e])),D.out&&(e="min"==D.out?g.y:h.y,m.push([this._calcOverflowX(w,v,c,a,e),e]),u==F.length-1&&e==h.y&&m.push([v,h.y]))}D.out||(m.push([v,a]),C.addRect(l.id,[v-r-h.x,a-r-h.y,v+r-h.x,a+r-h.y],o)),A.yAxis||(s=A.offset||u!=F.length-1?"center":"left",this.canvases[o].renderTextAt(!1,s,v,a-A.labelOffset,A.label(l)))}m.length&&(m.push([v,g.y]),m.push([m[0][0],g.y])),n.globalAlpha=this._settings.alpha.call(this,F[0]),n.fillStyle=this._settings.color.call(this,F[0]),n.beginPath(),this._path(n,m),n.fill(),A.border&&(n.lineWidth=A.borderWidth||1,A.borderColor?n.strokeStyle=A.borderColor.call(this,F[0]):this._setBorderStyles(n,n.fillStyle),n.beginPath(),this._path(n,m),n.stroke()),n.lineWidth=1,n.globalAlpha=1}}},dhtmlx.chart.stackedArea={pvt_render_stackedArea:function(o,H,c,a,r,E){var J,I,v,D,A,w,u,l,C,n,g,e,m,y,M,L,K;if(C=this._calculateLineParams(o,H,c,a,r),u=(D=this._settings).eventRadius||Math.floor(C.cellWidth/2),H.length){n=[],m=[],g=D.offset?c.x+.5*C.cellWidth:c.x;var F=function(x,K){return r?H[x].$startY?K-a.y+H[x].$startY:0:K};for(A=0;A<H.length;A++)l=H[A],A?g+=C.cellWidth:(e=F(A,a.y),n.push([g,e])),e=F(A,this._getPointY(l,c,a,C)),m.push(isNaN(e)&&!A?H[A].$startY||a.y:e),e&&(n.push([g,e]),E.addRect(l.id,[g-u-c.x,e-u-c.y,g+u-c.x,e+u-c.y],r),D.yAxis||(D.offset,v="center",this.canvases[r].renderTextAt(!1,v,g,e-D.labelOffset,D.label(l))));if(n.push([g,F(A-1,a.y)]),r)for(A=H.length-2;0<A;A--)g-=C.cellWidth,(e=H[A].$startY)&&n.push([g,e]);for(n.push([n[0][0],n[0][1]]),o.globalAlpha=this._settings.alpha.call(this,H[0]),o.fillStyle=this._settings.color.call(this,H[0]),o.beginPath(),this._path(o,n),o.fill(),A=0;A<H.length;A++){if(!(e=m[A]))for(A==H.length-1&&(e=H[A].$startY),w=A+1;w<H.length;w++)if(m[w]){J={x:c.x,y:m[0]},I={x:c.x+C.cellWidth*w,y:m[w]},y=c.x+C.cellWidth*A,void 0,e=(K=((L=I).y-(M=J).y)/(L.x-M.x))*y+M.y-K*M.x;break}H[A].$startY=e}}}},dhtmlx.chart.spline={pvt_render_spline:function(o,I,g,e,r,H){var F,u,n,s,E,m,l,A,w,v,h,c,a;if(E=this._calculateLineParams(o,I,g,e,r),F=this._settings,this._mapStart=g,n=[],I.length){for(A=F.offset?g.x+.5*E.cellWidth:g.x,u=0;u<I.length;u++)(h=this._getPointY(I[u],g,e,E))&&(l=u?E.cellWidth*u-.5+A:A,n.push({x:l,y:h,index:u}));for(m=this._getSplineParameters(n),u=0;u<n.length;u++){if(w=n[u].x,c=n[u].y,u<n.length-1){for(v=n[u+1].x,a=n[u+1].y,s=w;s<v;s++){var D=this._getSplineYPoint(s,w,u,m.a,m.b,m.c,m.d);D<g.y&&(D=g.y),D>e.y&&(D=e.y);var C=this._getSplineYPoint(s+1,w,u,m.a,m.b,m.c,m.d);C<g.y&&(C=g.y),C>e.y&&(C=e.y),this._drawLine(o,s,D,s+1,C,F.line.color(I[u]),F.line.width)}this._drawLine(o,v-1,this._getSplineYPoint(s,w,u,m.a,m.b,m.c,m.d),v,a,F.line.color(I[u]),F.line.width)}this._drawItem(o,w,c,I[n[u].index],F.label(I[n[u].index]),r,H)}}},_getSplineParameters:function(A){var l,D,C,E,y,x,w,r,o=[],g=[],e=A.length;for(l=0;l<e-1;l++)o[l]=A[l+1].x-A[l].x,g[l]=(A[l+1].y-A[l].y)/o[l];for(C=[],(D=[])[0]=0,D[1]=2*(o[0]+o[1]),C[0]=0,C[1]=6*(g[1]-g[0]),l=2;l<e-1;l++)D[l]=2*(o[l-1]+o[l])-o[l-1]*o[l-1]/D[l-1],C[l]=6*(g[l]-g[l-1])-o[l-1]*C[l-1]/D[l-1];for((E=[])[e-1]=E[0]=0,l=e-2;1<=l;l--)E[l]=(C[l]-o[l]*E[l+1])/D[l];for(y=[],x=[],w=[],r=[],l=0;l<e-1;l++)y[l]=A[l].y,x[l]=-o[l]*E[l+1]/6-o[l]*E[l]/3+(A[l+1].y-A[l].y)/o[l],w[l]=E[l]/2,r[l]=(E[l+1]-E[l])/(6*o[l]);return{a:y,b:x,c:w,d:r}},_getSplineYPoint:function(g,l,m,h,e,o,n){return h[m]+(g-l)*(e[m]+(g-l)*(o[m]+(g-l)*n[m]))}},dhtmlx.chart.barH={pvt_render_barH:function(D,Q,m,l,E,P){var u,w,H,F,a,J,r,N,x,O,c,A,n,K,y,h,C,v,M,g,s;H=(l.y-m.y)/Q.length,N=(r=this._getLimits("h")).max,x=r.min,h=l.x-m.x,s=!!this._settings.yAxis,E||this._drawHScales(D,Q,m,l,x,N,H),s&&(N=parseFloat(this._settings.xAxis.end),x=parseFloat(this._settings.xAxis.start)),A=(K=this._getRelativeValue(x,N))[0],c=K[1],v=A?h/A:10,s||(y=10,v=A?(h-y)/A:10),w=parseInt(this._settings.width,10);var L=this._series.length,o=this._settings.seriesMargin,e=this._settings.seriesPadding;for(this._series&&H<w*L+e+(2<L?o*L:0)&&(w=H/L-e-(2<L?o:0)),u=(H-w*L-o*(L-1))/2,this._settings.border&&(w=parseInt(w,10),u=parseInt(u,10)),n=void 0!==this._settings.radius?parseInt(this._settings.radius,10):Math.round(w/5),O=!1,(a=this._settings.gradient)&&"function"!=typeof a?(O=a,a=!1):a&&(a=D.createLinearGradient(m.x,m.y,l.x,m.y),this._settings.gradient(a)),s||this._drawLine(D,m.x-.5,m.y,m.x-.5,l.y,"#000000",1),J=0;J<Q.length;J++)if(N<(C=parseFloat(this._settings.value(Q[J]||0)))&&(C=N),C-=x,C*=c,M=m.x,g=m.y+u+(2<L?o*E:0)+parseInt(J*H,10)+w*E,C<0&&"auto"==this._settings.origin||this._settings.xAxis&&0===C&&!("auto"!=this._settings.origin&&this._settings.origin>x))this.canvases[E].renderTextAt("middle","right",M+10,g+w/2+u,this._settings.label(Q[J]));else{C<0&&"auto"!=this._settings.origin&&this._settings.origin>x&&(C=0),s||(C+=y/v),F=a||this._settings.color.call(this,Q[J]),this._settings.border&&this._drawBarHBorder(D,M,g,w,x,n,v,C,F),D.globalAlpha=this._settings.alpha.call(this,Q[J]);var I=this._drawBarH(D,l,M,g,w,x,n,v,C,F,a,O);0!=O&&this._drawBarHGradient(D,M,g,w,x,n,v,C,F,O),D.globalAlpha=1,I[3]==g?(this.canvases[E].renderTextAt("middle","left",I[0]-5,I[3]+Math.floor(w/2),this._settings.label(Q[J])),P.addRect(Q[J].id,[I[0]-m.x,I[3]-m.y,I[2]-m.x,I[3]+w-m.y],E)):(this.canvases[E].renderTextAt("middle",!1,I[2]+5,I[1]+Math.floor(w/2),this._settings.label(Q[J])),P.addRect(Q[J].id,[I[0]-m.x,g-m.y,I[2]-m.x,I[3]-m.y],E))}},_setBarHPoints:function(x,g,v,y,m,w,u,l,h){var c=0;if(w*u<m){var s=(m-w*u)/m;c=-Math.asin(s)+Math.PI/2}x.moveTo(g,v+l);var e=g+w*u-m-(m?0:l);m<w*u&&x.lineTo(e,v+l);var r=v+m;m&&0<m&&x.arc(e,r,m-l,-Math.PI/2+c,0,!1);var o=v+y-m-(m?0:l),a=e+m-(m?l:0);x.lineTo(a,o),m&&0<m&&x.arc(e,o,m-l,0,Math.PI/2-c,!1);var n=v+y-l;return x.lineTo(g,n),h||x.lineTo(g,v+l),[a,n]},_drawHScales:function(e,m,l,h,n,c,g){var a=0;this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj)),a=this._drawHXAxis(this.canvases.x.getCanvas(),m,l,h,n,c)),this._settings.yAxis&&(this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj)),this._drawHYAxis(this.canvases.y.getCanvas(),m,l,h,g,a))},_drawHYAxis:function(u,h,o,m,e,a){if(this._settings.yAxis){var l,c=parseInt(a||o.x,10)-.5,r=m.y+.5,n=o.y;this._drawLine(u,c,r,c,n,this._settings.yAxis.color,1);for(var g=0;g<h.length;g++){var s="auto"!=this._settings.origin&&"barH"==this._settings.view&&parseFloat(this._settings.value(h[g]))<this._settings.origin;l=n+e/2+g*e,this.canvases.y.renderTextAt("middle",!s&&"left",s?c+5:c-5,l,this._settings.yAxis.template(h[g]),"dhx_axis_item_y",s?0:c-10),this._settings.yAxis.lines.call(this,h[g])&&this._drawLine(u,o.x,l,m.x,l,this._settings.yAxis.lineColor.call(this,h[g]),1)}this._drawLine(u,o.x+.5,n+.5,m.x,n+.5,this._settings.yAxis.lineColor.call(this,{}),1),this._setYAxisTitle(o,m)}},_drawHXAxis:function(y,F,l,h,n,m){var o,w={},e=this._settings.xAxis;if(e){var g=h.y+.5,D=l.x-.5,C=h.x-.5,v=l.x;if(this._drawLine(y,D,g,C,g,e.color,1),e.step&&(o=parseFloat(e.step)),void 0!==this._configXAxis.step&&void 0!==this._configXAxis.start&&void 0!==this._configXAxis.end||(n=(w=this._calculateScale(n,m)).start,m=w.end,o=w.step,this._settings.xAxis.end=m,this._settings.xAxis.start=n,this._settings.xAxis.step=o),0!==o){for(var a=(C-D)*o/(m-n),E=0,A=n;A<=m;A+=o){w.fixNum&&(A=parseFloat(new Number(A).toFixed(w.fixNum)));var x=Math.floor(D+E*a)+.5;A==n&&"auto"==this._settings.origin||!e.lines.call(this,A)||this._drawLine(y,x,g,x,l.y,this._settings.xAxis.lineColor.call(this,A),1),A==this._settings.origin&&(v=x+1);var r=A;if(o<1){var s=Math.min(this._log10(o),n<=0?0:this._log10(n)),u=Math.pow(10,-s);r=Math.round(A*u)/u}this.canvases.x.renderTextAt(!1,!0,x,g+2,e.template(r.toString()),"dhx_axis_item_x"),E++}return this.canvases.x.renderTextAt(!0,!1,D,h.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",h.x-l.x),e.lines.call(this,{})||this._drawLine(y,D,l.y-.5,C,l.y-.5,this._settings.xAxis.color,.2),v}}},_correctBarHParams:function(n,h,e,l,m,o,g){var c=h;return this._settings.yAxis&&"auto"!=this._settings.origin&&this._settings.origin>g&&(c=h+=(this._settings.origin-g)*m,(l-=this._settings.origin-g)<0&&(l*=-1,n.translate(h,e+o),n.rotate(Math.PI),h=.5,e=0),h+=.5),{value:l,x0:h,y0:e,start:c}},_drawBarH:function(v,h,C,g,o,r,l,n,u,w,a,m){var x;v.save();var s=this._correctBarHParams(v,C,g,u,n,o,r);v.fillStyle=w,v.beginPath(),0<n*s.value?(x=this._setBarHPoints(v,s.x0,s.y0,o,l,n,s.value,this._settings.border?1:0),a&&!m&&v.lineTo(h.x,s.y0+(this._settings.border?1:0))):x=[s.x0,s.y0+1],v.fill(),v.restore();var e=s.y0,c=s.y0!=g?g:x[1];return[s.y0!=g?s.start-x[0]:s.start,e,s.y0!=g?s.start:x[0],c]},_drawBarHBorder:function(o,c,m,r,h,g,n,l,e){o.save();var a=this._correctBarHParams(o,c,m,l,n,r,h);o.beginPath(),this._setBorderStyles(o,e),o.globalAlpha=.9,0<n*a.value&&this._setBarHPoints(o,a.x0,a.y0,r,g,n,a.value,o.lineWidth/2,1),o.stroke(),o.restore()},_drawBarHGradient:function(s,e,o,u,m,l,r,n,g,a){s.save();var c=this._correctBarHParams(s,e,o,n,r,u,m),h=this._setBarGradient(s,c.x0,c.y0+u,c.x0+r*c.value,c.y0,a,g,"x");s.fillStyle=h.gradient,s.beginPath(),0<r*c.value&&this._setBarHPoints(s,c.x0,c.y0+h.offset,u-2*h.offset,l,r,c.value,h.offset),s.fill(),s.globalAlpha=1,s.restore()}},dhtmlx.assert(dhtmlx.chart.barH),dhtmlx.chart.stackedBarH={pvt_render_stackedBarH:function(D,Q,h,g,E,P){var O,w,c,x,A=g.x-h.x,n=!!this._settings.yAxis,m=this._getStackedLimits(Q);O=m.max,w=m.min;var H=Math.floor((g.y-h.y)/Q.length);E||this._drawHScales(D,Q,h,g,w,O,H),n&&(O=parseFloat(this._settings.xAxis.end),w=parseFloat(this._settings.xAxis.start));var L=this._getRelativeValue(w,O);x=L[0],c=L[1];var u=x?A/x:10;if(!n){var y=10;u=x?(A-y)/x:10}var v=parseInt(this._settings.width,10);H<v+4&&(v=H-4);var o=(H-v)/2,r=!1,a=this._settings.gradient;a&&(r=!0),n||this._drawLine(D,h.x-.5,h.y,h.x-.5,g.y,"#000000",1);var N=0,K=0;for(J=0;J<this._series.length;J++)J==E&&(K=N),"stackedBarH"==this._series[J].view&&N++;for(var J=0;J<Q.length;J++){K||(Q[J].$startX=h.x);var C=parseFloat(this._settings.value(Q[J]||0));O<C&&(C=O),C-=w,C*=c;var M=h.x,e=h.y+o+J*H;if(K?M=Q[J].$startX:Q[J].$startX=M,C<0||this._settings.yAxis&&0===C)this.canvases.y.renderTextAt("middle",!0,M+10,e+v/2,this._settings.label(Q[J]));else{n||(C+=y/u);var F=this._settings.color.call(this,Q[J]);D.globalAlpha=this._settings.alpha.call(this,Q[J]),D.fillStyle=this._settings.color.call(this,Q[J]),D.beginPath();var I=this._setBarHPoints(D,M,e,v,0,u,C,this._settings.border?1:0);if(a&&!r&&D.lineTo(h.x+A,e+(this._settings.border?1:0)),D.fill(),0!=r){var s=this._setBarGradient(D,M,e+v,M,e,r,F,"x");D.fillStyle=s.gradient,D.beginPath(),I=this._setBarHPoints(D,M,e,v,0,u,C,0),D.fill()}this._settings.border&&this._drawBarHBorder(D,M,e,v,w,0,u,C,F),D.globalAlpha=1,this.canvases[E].renderTextAt("middle",!0,Q[J].$startX+(I[0]-Q[J].$startX)/2-1,e+(I[1]-e)/2,this._settings.label(Q[J])),P.addRect(Q[J].id,[Q[J].$startX-h.x,e-h.y,I[0]-h.x,I[1]-h.y],E),Q[J].$startX=I[0]}}}},dhtmlx.chart.stackedBar={pvt_render_stackedBar:function(E,T,l,h,F,Q){var N,y,a,M,g,c,A,P=this._settings,C=h.y-l.y,n=!!P.yAxis,O=!!P.xAxis,m=this._getStackedLimits(T),S=0===P.origin;if(N=m.max,y=m.min,T.length){var I=(h.x-l.x)/T.length;F||(a=this._drawScales(T,l,h,y,N,I)),n&&(N=parseFloat(P.yAxis.end),y=parseFloat(P.yAxis.start));var L=this._getRelativeValue(y,N);A=L[0],c=L[1];var w=A?C/A:10,x=parseInt(P.width,10);I<x+4&&(x=I-4);var o=Math.floor((I-x)/2),s=!!P.gradient&&P.gradient;O||this._drawLine(E,l.x,h.y+.5,h.x,h.y+.5,"#000000",1);for(var K=0;K<T.length;K++){var D=parseFloat(P.value(T[K]||0));this._logScaleCalc&&(D=this._log10(D)),M=l.x+o+K*I;var r=S&&D<0;if(F?g=r?T[K].$startYN:T[K].$startY:(g=a-1,T[K].$startY=g,S&&(r&&(g=a+1),T[K].$startYN=a+1)),D&&(F||S||(D-=y),D*=c,!(g<l.y+1)))if(P.yAxis&&0===D)this.canvases.y.renderTextAt(!0,!0,M+Math.floor(x/2),g,this._settings.label(T[K]));else{var H=this._settings.color.call(this,T[K]),v=Math.abs(g-(S?h.y+y*w:h.y))<3;E.globalAlpha=P.alpha.call(this,T[K]),E.fillStyle=E.strokeStyle=P.color.call(this,T[K]),E.beginPath();var e=g-w*D+(v?r?-1:1:0),J=this._setStakedBarPoints(E,M-(P.border?.5:0),g,x+(P.border?.5:0),e,0,l.y);if(E.fill(),E.stroke(),s){E.save();var u=this._setBarGradient(E,M,g,M+x,J[1],s,H,"y");E.fillStyle=u.gradient,E.beginPath(),J=this._setStakedBarPoints(E,M+u.offset,g,x-2*u.offset,e,P.border?1:0,l.y),E.fill(),E.restore()}P.border&&(E.save(),"string"==typeof P.border?E.strokeStyle=P.border:this._setBorderStyles(E,H),E.beginPath(),this._setStakedBarPoints(E,M-.5,parseInt(g,10)+.5,x+1,parseInt(e,10)+.5,0,l.y,v),E.stroke(),E.restore()),E.globalAlpha=1,this.canvases[F].renderTextAt(!1,!0,M+Math.floor(x/2),J[1]+(g-J[1])/2-7,this._settings.label(T[K])),Q.addRect(T[K].id,[M-l.x,J[1]-l.y,J[0]-l.x,T[K][r?"$startYN":"$startY"]-l.y],F),T[K][r?"$startYN":"$startY"]=J[1]}}}},_setStakedBarPoints:function(r,c,n,s,m,g,e,h){r.moveTo(c,n),m<e&&(m=e),r.lineTo(c,m);var a=c+s,l=m;r.lineTo(a,l);var o=c+s;return r.lineTo(o,n),h||r.lineTo(c,n),[o,l]}},dhtmlx.chart.line={pvt_render_line:function(m,C,h,g,n,y){var x,o,l,v,u,s,r,c,a,e,A,w;if(v=this._calculateLineParams(m,C,h,g,n),x=this._settings,C.length){for(u=x.offset?h.x+.5*v.cellWidth:h.x,l=[],o=0;o<C.length;o++)if(w=this._getPointY(C[o],h,g,v)){if(r=o?v.cellWidth*o-.5+u:u,a="object"==typeof w?w.y0:w,o&&this._settings.fixOverflow){if((A=this._getPointY(C[o-1],h,g,v)).out&&A.out==w.out)continue;s=v.cellWidth*(o-1)-.5+u,c="object"==typeof A?A.y0:A,A.out&&(e="min"==A.out?g.y:h.y,l.push({x:this._calcOverflowX(s,r,c,a,e),y:e})),w.out&&(e="min"==w.out?g.y:h.y,l.push({x:this._calcOverflowX(s,r,c,a,e),y:e}))}w.out||l.push({x:r,y:w,index:o})}for(this._mapStart=h,o=1;o<=l.length;o++)s=l[o-1].x,c=l[o-1].y,o<l.length&&(r=l[o].x,a=l[o].y,this._drawLine(m,s,c,r,a,x.line.color.call(this,C[o-1]),x.line.width),x.line&&x.line.shadow&&(m.globalAlpha=.3,this._drawLine(m,s+2,c+x.line.width+8,r+2,a+x.line.width+8,"#eeeeee",x.line.width+3),m.globalAlpha=1)),void 0!==l[o-1].index&&this._drawItem(m,s,c,C[l[o-1].index],x.label(C[l[o-1].index]),n,y,h)}},_calcOverflowX:function(c,a,g,e,h){return c+(h-g)*(a-c)/(e-g)},_drawItem:function(v,e,u,o,s,r,c){var g=this._settings.item,n=parseInt(g.radius.call(this,o),10)||0,m=this._mapStart;if(n){if(v.save(),g.shadow){v.lineWidth=1,v.strokeStyle="#bdbdbd",v.fillStyle="#bdbdbd";for(var a=[.1,.2,.3],l=a.length-1;0<=l;l--)v.globalAlpha=a[l],v.strokeStyle="#d0d0d0",v.beginPath(),this._strokeChartItem(v,e,u+2*n/3,n+l+1,g.type),v.stroke();v.beginPath(),v.globalAlpha=.3,v.fillStyle="#bdbdbd",this._strokeChartItem(v,e,u+2*n/3,n+1,g.type),v.fill()}v.restore(),"image"==g.type&&g.src?this._drawImage(v,e-n,u-n,g.src,2*n,2*n):(v.lineWidth=g.borderWidth,v.fillStyle=g.color.call(this,o),v.strokeStyle=g.borderColor.call(this,o),v.globalAlpha=g.alpha.call(this,o),v.beginPath(),this._strokeChartItem(v,e,u,n+1,g.type),v.fill(),v.stroke(),v.globalAlpha=1)}s&&this.canvases[r].renderTextAt(!1,!0,e,u-n-this._settings.labelOffset,this._settings.label.call(this,o));var h=this._settings.eventRadius||n+1;c.addRect(o.id,[e-h-m.x,u-h-m.y,e+h-m.x,u+h-m.y],r)},_drawImage:function(e,c,n,l,g,a){var h=document.createElement("img");h.style.display="none",h.style.width=g+"px",h.style.height=a+"px",document.body.appendChild(h),h.src=l;var m=function(){e.drawImage(h,c,n)};h.complete?m():h.onload=m},_strokeChartItem:function(a,c,h,g,e){var l=[];if(c=parseInt(c,10),h=parseInt(h,10),!e||"square"!=e&&"s"!=e)if(!e||"diamond"!=e&&"d"!=e)l=!e||"triangle"!=e&&"t"!=e?[[c,h,g,0,2*Math.PI,!0]]:[[c,h-g],[c+Math.sqrt(3)*g/2,h+g/2],[c-Math.sqrt(3)*g/2,h+g/2],[c,h-g]];else{var m=1<a.lineWidth?a.lineWidth*Math.sqrt(2)/4:0;l=[[c,h-g],[c+g,h],[c,h+g],[c-g,h],[c+m,h-g-m]]}else l=[[c-(g*=Math.sqrt(2)/2)-a.lineWidth/2,h-g],[c+g,h-g],[c+g,h+g],[c-g,h+g],[c-g,h-g]];this._path(a,l)},_getPointY:function(e,n,l,a){var m=a.minValue,g=a.maxValue,r=a.unit,c=a.valueFactor,o=this._settings.value(e),s=(parseFloat(o||0)-m)*c;this._settings.yAxis||(s+=a.startValue/r);var h=l.y-r*s;return!this._settings.fixOverflow||"line"!=this._settings.view&&"area"!=this._settings.view?(g<o&&(h=n.y),(s<0||o<m)&&(h=l.y)):g<o?h={y:n.y,y0:h,out:"max"}:(s<0||o<m)&&(h={y:l.y,y0:h,out:"min"}),h},_calculateLineParams:function(o,g,m,l,h){var r,c={};c.totalHeight=l.y-m.y,c.cellWidth=(l.x-m.x)/(this._settings.offset?g.length:g.length-1);var e=!!this._settings.yAxis,a=-1!=this._settings.view.indexOf("stacked")?this._getStackedLimits(g):this._getLimits();c.maxValue=a.max,c.minValue=a.min,h||this._drawScales(g,m,l,c.minValue,c.maxValue,c.cellWidth),e&&(c.maxValue=parseFloat(this._settings.yAxis.end),c.minValue=parseFloat(this._settings.yAxis.start));var n=this._getRelativeValue(c.minValue,c.maxValue);return r=n[0],c.valueFactor=n[1],c.unit=r?c.totalHeight/r:10,c.startValue=0,e||(c.startValue=10,c.unit!=c.totalHeight&&(c.unit=r?(c.totalHeight-c.startValue)/r:10)),c}},dhtmlx.chart.bar={pvt_render_bar:function(D,T,l,h,E,S){var w,H,K,o,P,x,y,c,L,A,v,O,r,Q=h.y-l.y;r=!!this._settings.yAxis,O=!!this._settings.xAxis,P=(o=this._getLimits()).max,x=o.min,H=(h.x-l.x)/T.length,E||"auto"!=this._settings.origin&&!r||this._drawScales(T,l,h,x,P,H),r&&(P=parseFloat(this._settings.yAxis.end),x=parseFloat(this._settings.yAxis.start)),y=(L=this._getRelativeValue(x,P))[0],c=L[1],v=y?Q/y:y,r||"auto"!=this._settings.origin&&O||(A=10,v=y?(Q-A)/y:A),!E&&"auto"!=this._settings.origin&&!r&&this._settings.origin>x&&this._drawXAxis(D,T,l,h,H,h.y-v*(this._settings.origin-x)),w=parseInt(this._settings.width,10);var N=0,J=0;for(K=0;K<this._series.length;K++)K==E&&(J=N),"bar"==this._series[K].view&&N++;var n=this._settings.seriesMargin,g=this._settings.seriesPadding;this._series&&H<w*N+g+(2<N?n*N:0)&&(w=H/N-g-(2<N?n:0));var s=(H-w*N-n*(N-1))/2;this._settings.border&&(w=parseInt(w,10),s=parseInt(s,10));var m=void 0!==this._settings.radius?parseInt(this._settings.radius,10):Math.round(w/5),u=!1,a=this._settings.gradient;for(a&&"function"!=typeof a?(u=a,a=!1):a&&(a=D.createLinearGradient(0,h.y,0,l.y),this._settings.gradient(a)),O||this._drawLine(D,l.x,h.y+.5,h.x,h.y+.5,"#000000",1),K=0;K<T.length;K++){var C=parseFloat(this._settings.value(T[K])||0);if(!isNaN(C)){P<C&&(C=P),C-=x,C*=c;var M=l.x+s+(2<N?n*J:0)+K*H+w*J,e=h.y;if(C<0||this._settings.yAxis&&0===C&&!("auto"!=this._settings.origin&&this._settings.origin>x))this.canvases[E].renderTextAt(!0,!0,M+Math.floor(w/2),e,this._settings.label(T[K]));else{r||"auto"!=this._settings.origin&&O||(C+=A/v);var F=a||this._settings.color.call(this,T[K]);D.globalAlpha=this._settings.alpha.call(this,T[K]);var I=this._drawBar(D,l,M,e,w,x,m,v,C,F,a,u);u&&this._drawBarGradient(D,M,e,w,x,m,v,C,F,u),this._settings.border&&this._drawBarBorder(D,M,e,w,x,m,v,C,F),D.globalAlpha=1,I[0]!=M?this.canvases[E].renderTextAt(!1,!0,M+Math.floor(w/2),I[1],this._settings.label(T[K])):this.canvases[E].renderTextAt(!0,!0,M+Math.floor(w/2),I[3],this._settings.label(T[K])),S.addRect(T[K].id,[M-l.x,I[3]-l.y,I[2]-l.x,I[1]-l.y],E)}}}},_correctBarParams:function(n,h,e,l,m,o,g){var c=e;return this._settings.xAxis&&"auto"!=this._settings.origin&&this._settings.origin>g&&(c=e-=(this._settings.origin-g)*m,(l-=this._settings.origin-g)<0&&(l*=-1,n.translate(h+o,e),n.rotate(Math.PI),e=h=0),e-=.5),{value:l,x0:h,y0:e,start:c}},_drawBar:function(v,h,C,g,o,r,l,n,u,w,a,m){var x;v.save(),v.fillStyle=w;var s=this._correctBarParams(v,C,g,u,n,o,r);x=0<n*s.value?this._setBarPoints(v,s.x0,s.y0,o,l,n,s.value,this._settings.border?1:0):[s.x0,s.y0],a&&!m&&v.lineTo(s.x0+(this._settings.border?1:0),h.y),v.fill(),v.restore();var A=s.x0,y=s.x0!=C?C+x[0]:x[0];return[A,s.x0!=C?s.start-x[1]-s.y0:s.y0,y,s.x0!=C?s.start-s.y0:x[1]]},_drawBarBorder:function(o,c,m,r,h,g,n,l,e){var a;o.save(),a=this._correctBarParams(o,c,m,l,n,r,h),this._setBorderStyles(o,e),0<n*a.value&&this._setBarPoints(o,a.x0,a.y0,r,g,n,a.value,o.lineWidth/2,1),o.stroke(),o.restore()},_drawBarGradient:function(u,g,r,v,n,m,s,o,h,c){u.save();var e=this._correctBarParams(u,g,r,o,s,v,n),l=this._setBarGradient(u,e.x0,e.y0,e.x0+v,e.y0-s*e.value+2,c,h,"y"),a=this._settings.border?1:0;u.fillStyle=l.gradient,0<s*e.value&&this._setBarPoints(u,e.x0+l.offset,e.y0,v-2*l.offset,m,s,e.value,l.offset+a),u.fill(),u.restore()},_setBarPoints:function(x,g,u,y,n,v,s,h,m){x.beginPath();var c=0;if(v*s<n){var l=(n-v*s)/n;l<=1&&-1<=l&&(c=-Math.acos(l)+Math.PI/2)}x.moveTo(g+h,u);var r=u-Math.floor(v*s)+n+(n?0:h);n<v*s&&x.lineTo(g+h,r);var e=g+n;n&&0<n&&x.arc(e,r,n-h,-Math.PI+c,-Math.PI/2,!1);var a=g+y-n-h,o=r-n+(n?h:0);x.lineTo(a,o),n&&0<n&&x.arc(a,r,n-h,-Math.PI/2,0-c,!1);var w=g+y-h;return x.lineTo(w,u),m||x.lineTo(g+h,u),[w,o]}},dhtmlx.chart.pie={pvt_render_pie:function(c,g,a,l,e,h){this._renderPie(c,g,a,l,1,h,e)},_renderPie:function(u,H,h,g,E,F,v){if(H.length){var w=this._getPieParameters(h,g),m=this._settings.radius?this._settings.radius:w.radius;if(!(m<0)){var a=this._getValues(H),l=this._getTotalValue(a),n=this._getRatios(a,l),D=this._settings.x?this._settings.x:w.x,e=this._settings.y?this._settings.y:w.y;1==E&&this._settings.shadow&&this._addShadow(u,D,e,m),e/=E;var r,o,s=-Math.PI/2,y=[];if(u.scale(1,E),this._settings.gradient){var C=1!=E?D+m/3:D,c=1!=E?e+m/3:e;this._showRadialGradient(u,D,e,m,C,c)}this._settings.labelLines&&(this._labelMargins=this._getLabelMargins(n,m));for(var A=0;A<H.length;A++)if(a[A]){u.strokeStyle=1==H.length?this._settings.color.call(this,H[A]):this._settings.lineColor.call(this,H[A]),u.beginPath(),u.moveTo(D,e),y.push(s),r=-Math.PI/2+n[A]-1e-4,u.arc(D,e,m,s,r,!1),u.lineTo(D,e);var x=this._settings.color.call(this,H[A]);u.fillStyle=x,u.fill(),this._settings.pieInnerText&&this._drawSectorLabel(D,e,5*m/6,s,r,E,this._settings.pieInnerText(H[A],l),!0),this._settings.label&&this._drawSectorLabel(D,e,m,s,r,E,this._settings.label(H[A]),0,this._labelMargins?this._labelMargins[A]:{},u),1!=E&&(this._createLowerSector(u,D,e,s,r,m,!0),u.fillStyle="#000000",u.globalAlpha=.2,this._createLowerSector(u,D,e,s,r,m,!1),u.globalAlpha=1,u.fillStyle=x),F.addSector(H[A].id,s,r,D-h.x,e-h.y/E,m,E,v),s=r}if(u.globalAlpha=.8,1<y.length)for(A=0;A<y.length;A++)o=this._getPositionByAngle(y[A],D,e,m),this._drawLine(u,D,e,o.x,o.y,this._settings.lineColor.call(this,H[A]),2);1==E&&(u.lineWidth=2,u.strokeStyle="#ffffff",u.beginPath(),u.arc(D,e,m+1,0,2*Math.PI,!1),u.stroke()),u.globalAlpha=1,u.scale(1,1/E)}}},_getLabelMargins:function(v,l){var D,C,J,M={1:[0]};for(J=1;J<v.length;J++){D=-Math.PI/2+(1<J?v[J-1]-(v[J-1]-v[J-2])/2:v[J-1]/2),C=-Math.PI/2+v[J]-(v[J]-v[J-1])/2;var h=Math.cos(C),y=Math.sin(C),m=Math.cos(D),A=Math.sin(D),E=Math.round((l+8)*Math.abs(Math.sin(C)-Math.sin(D))),s=h<0?y<0?4:3:y<0?1:2,u=m<0?A<0?4:3:A<0?1:2;M[s]||(M[s]=[]),M[s].push(u==s?E:0)}var F=[];for(var x in M){M[x].length;var o=0,n=0;if(1==x||3==x){I=x-1;for(var K=0;0<I;)M[I]&&(K+=M[I].length),I--;F[K+M[x].length-1]={y:0,x:0};for(var I=M[x].length-2;0<=I;)(o||I)&&M[x][I+1]-o<18?o+=18-M[x][I+1]:o=0,F[K+I]={y:o*(1==x?-1:1)},I--;for(var H=F.length-M[x].length;H<F.length;H++)0!=F[H].y?(n+=6,F[H].x=n):n=F[H].x=0}else{I=1;for(F.push({y:0,x:0});I<M[x].length;)M[x][I]-o<18?o+=18-M[x][I]:o=0,F.push({y:o*(4==x?-1:1)}),I++;for(H=F.length-1;H>=F.length-M[x].length;H--)0!=F[H].y?(n+=8,F[H].x=n):(n=0,F[H].x=0)}}return F},_getValues:function(e){for(var a=[],c=0;c<e.length;c++)a.push(parseFloat(this._settings.value(e[c])||0));return a},_getTotalValue:function(a){for(var e=0,c=0;c<a.length;c++)e+=a[c];return e},_getRatios:function(c,a){var l,h=[],g=0;a=a||this._getTotalValue(c);for(var e=0;e<c.length;e++)l=c[e],h[e]=2*Math.PI*(a?(l+g)/a:1/c.length),g+=l;return h},_getPieParameters:function(m,h){var g=h.x-m.x,c=h.y-m.y;return{x:m.x+g/2,y:m.y+c/2,radius:Math.min(g/2,c/2)}},_createLowerSector:function(g,h,m,e,a,l,c){if(g.lineWidth=1,e<=0&&0<=a||0<=e&&a<=Math.PI||.003<Math.abs(e-Math.PI)&&e<=Math.PI&&a>=Math.PI){e<=0&&0<=a&&(e=0,c=!1,this._drawSectorLine(g,h,m,l,e,a)),e<=Math.PI&&a>=Math.PI&&(a=Math.PI,c=!1,this._drawSectorLine(g,h,m,l,e,a));var n=(this._settings.height||Math.floor(l/4))/this._settings.cant;g.beginPath(),g.arc(h,m,l,e,a,!1),g.lineTo(h+l*Math.cos(a),m+l*Math.sin(a)+n),g.arc(h,m+n,l,a,e,!0),g.lineTo(h+l*Math.cos(e),m+l*Math.sin(e)),g.fill(),c&&g.stroke()}},_drawSectorLine:function(e,g,l,h,c,a){e.beginPath(),e.arc(g,l,h,c,a,!1),e.stroke()},_addShadow:function(c,a,l,g){c.globalAlpha=.5;for(var h=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],e=h.length-1;-1<e;e--)c.beginPath(),c.fillStyle=h[e],c.arc(a+1,l+1,g+e,0,2*Math.PI,!0),c.fill();c.globalAlpha=1},_getGrayGradient:function(a){return a.addColorStop(0,"#ffffff"),a.addColorStop(.7,"#7a7a7a"),a.addColorStop(1,"#000000"),a},_showRadialGradient:function(e,c,m,a,g,h){var l;e.beginPath(),"function"!=typeof this._settings.gradient?(l=e.createRadialGradient(g,h,a/4,c,m,a),l=this._getGrayGradient(l)):l=this._settings.gradient(l),e.fillStyle=l,e.arc(c,m,a,0,2*Math.PI,!0),e.fill(),e.globalAlpha=.7},_drawSectorLabel:function(N,g,m,F,E,O,C,a,D,I){var A=this.canvases[0].renderText(0,0,C,0,1);if(A){var P=A.scrollWidth;A.style.width=P+"px",N<P&&(P=N);var H=E-F<.2?4:8;a&&(H=P/1.8);var l=F+(E-F)/2,h=m;m=a?5*m/6:m+this._settings.labelOffset,m-=(H-8)/2;var s=-H,J="right";(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)&&(s=-P-s,J="left");var n=0;!a&&O<1&&0<l&&l<Math.PI&&(n=(this._settings.height||Math.floor(m/4))/O);var u=(g+Math.floor(m+n)*Math.sin(l))*O-8,v=N+Math.floor(m+H/2)*Math.cos(l)+s,o=E<Math.PI/2+.01,w=F<Math.PI/2;if(w&&o?v=Math.max(v,N+3):w||o?a||this._settings.labelLines||!(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)||(v+=P/3):v=Math.min(v,N-P),this._settings.labelLines&&!a){Math.abs((Math.abs(D||0)+Math.abs(h*Math.sin(l)))/Math.sin(l));D.y&&(u+=D.y),"left"==J?v-=D.x:v+=D.x,I.beginPath(),I.strokeStyle="#555";var M=N+h*Math.cos(l),e=g+h*Math.sin(l);I.moveTo(M,e);var L=v-("left"==J?s-8:2),c=u;"left"==J&&M<L?(L=M-Math.abs(c-e+16)/Math.tan(l-Math.PI),c+=16,l<Math.PI&&(c-=8)):c+=8,I.lineTo(L,c),I.lineTo(L+("left"==J?-5:5),c),I.stroke(),u=c-8,v=L+s+("left"==J?-15:15)}A.style.top=u+"px",A.style.left=v+"px",A.style.width=P+"px",A.style.textAlign=J,A.style.whiteSpace="nowrap"}}},dhtmlx.chart.pie3D={pvt_render_pie3D:function(c,g,a,l,e,h){this._renderPie(c,g,a,l,this._settings.cant,h)}},dhtmlx.chart.donut={pvt_render_donut:function(u,h,r,o,m,c){if(h.length){this._renderPie(u,h,r,o,1,c);var g=this._settings,l=this._getPieParameters(r,o),a=g.radius?g.radius:l.radius,n=g.innerRadius&&g.innerRadius<a?g.innerRadius:a/3,e=g.x?g.x:l.x,s=g.y?g.y:l.y;u.fillStyle="#ffffff",u.beginPath(),u.arc(e,s,n,0,2*Math.PI,!0),u.fill()}}},dhtmlx.DataDriver.dhtmlxgrid={_grid_getter:"_get_cell_value",toObject:function(a){return this._grid=a},getRecords:function(a){return a.rowsBuffer},getDetails:function(e){for(var a={},c=0;c<this._grid.getColumnsNum();c++)a["data"+c]=this._grid[this._grid_getter](e,c);return a},getInfo:function(a){return{_size:0,_from:0}}},dhtmlx.ui.Canvas=function(c,e,h){this._canvas_labels=[],this._canvas_name=e;var g=(this._obj=c).offsetWidth*(window.devicePixelRatio||1),a=c.offsetHeight*(window.devicePixelRatio||1);h=h||"";h+=";width:"+c.offsetWidth+"px;height:"+c.offsetHeight+"px;",this._prepareCanvas(e,h,g,a)},dhtmlx.ui.Canvas.prototype={_prepareCanvas:function(c,g,e,a){return this._canvas=dhtmlx.html.create("canvas",{width:e,height:a,canvas_id:c,style:g||""}),this._obj.appendChild(this._canvas),this._canvas.getContext||(dhtmlx._isIE?(dhtmlx.require("thirdparty/excanvas/excanvas.js"),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this._canvas)):dhtmlx.error("Canvas is not supported in the current browser")),this._canvas},getCanvas:function(c){var a=(this._canvas||this._prepareCanvas()).getContext(c||"2d");return this._dhtmlxDevicePixelRatio||(this._dhtmlxDevicePixelRatio=!0,a.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)),a},_resizeCanvas:function(){if(this._canvas){var a=this._canvas.parentNode.offsetWidth,c=this._canvas.parentNode.offsetHeight;this._canvas.setAttribute("width",a*(window.devicePixelRatio||1)),this._canvas.setAttribute("height",c*(window.devicePixelRatio||1)),this._canvas.style.width=a+"px",this._canvas.style.height=c+"px",this._dhtmlxDevicePixelRatio=!1}},renderText:function(a,l,h,g,c){if(h){var e=dhtmlx.html.create("DIV",{class:"dhx_canvas_text"+(g?" "+g:""),style:"left:"+a+"px; top:"+l+"px;"},h);return this._obj.appendChild(e),this._canvas_labels.push(e),c&&(e.style.width=c+"px"),e}},renderTextAt:function(h,o,a,n,g,m,e){var l=this.renderText.call(this,a,n,g,m,e);return l&&(h&&(l.style.top="middle"==h?parseInt(n-l.offsetHeight/2,10)+"px":n-l.offsetHeight+"px"),o&&(l.style.left="left"==o?a-l.offsetWidth+"px":parseInt(a-l.offsetWidth/2,10)+"px")),l},clearCanvas:function(a){var e,c=[];for(e=0;e<this._canvas_labels.length;e++)this._obj.removeChild(this._canvas_labels[e]);if(this._canvas_labels=[],!a&&this._obj._htmlmap){for(c=this._getMapAreas();c.length;)c[0].parentNode.removeChild(c[0]),c.splice(0,1);c=null,this._obj._htmlmap.getElementsByTagName("AREA").length||(this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap),this._obj._htmlmap=null)}this.getCanvas().clearRect(0,0,this._canvas.width,this._canvas.height)},toggleCanvas:function(){this._toggleCanvas("none"==this._canvas.style.display)},showCanvas:function(){this._toggleCanvas(!0)},hideCanvas:function(){this._toggleCanvas(!1)},_toggleCanvas:function(a){var c,e;for(e=0;e<this._canvas_labels.length;e++)this._canvas_labels[e].style.display=a?"":"none";if(this._obj._htmlmap)for(c=this._getMapAreas(),e=0;e<c.length;e++)a?c[e].removeAttribute("disabled"):c[e].setAttribute("disabled","true");this._canvas.style.display=a?"":"none"},_getMapAreas:function(){var a,c,e=[];for(a=this._obj._htmlmap.getElementsByTagName("AREA"),c=0;c<a.length;c++)a[c].getAttribute("userdata")==this._canvas_name&&e.push(a[c]);return e}},dhtmlXChart=function(a){for(var c in this.name="Chart",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(a,"dhx_chart"),dhtmlx.extend(this,dhtmlx.AtomDataLoader),dhtmlx.extend(this,dhtmlx.DataLoader),this.data.provideApi(this,!0),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.MouseEvents),dhtmlx.destructors.push(this),dhtmlx.extend(this,dhtmlx.Group),dhtmlx.extend(this,dhtmlx.AutoTooltip),dhtmlx.chart)dhtmlx.extend(this,dhtmlx.chart[c]);a.preset&&this.definePreset(a),this._parseSettings(a,this.defaults),this._series=[this._settings],this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render()},this)),this.attachEvent("onLocateData",this._switchSerie)},dhtmlXChart.prototype={_id:"dhx_area_id",on_click:{dhx_chart_legend_item:function(m,n,l){var h=l.getAttribute("series_id");if(this.callEvent("onLegendClick",[m,h,l])){var g=this._settings,c=g.legend.values,a=c&&void 0!==c[h].toggle?c[h].toggle:g.legend.toggle;void 0!==h&&1<this._series.length&&a&&(-1!=l.className.indexOf("hidden")?this.showSeries(h):this.hideSeries(h))}}},on_dblclick:{},on_mouse_move:{},destructor:function(){if(dhtmlx.Destruction.destructor.apply(this,arguments),this.canvases){for(var a in this.canvases)this.canvases[a]._obj=null,this.canvases[a]=null;this.canvases=null}this.legendObj&&(this.legendObj.innerHTML="",this.legendObj=null),this.config.tooltip&&(this.config.tooltip._obj=null,this.config.tooltip._dataobj=null)},bind:function(){dhtmlx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhtmlx.BaseBind.legacySync.apply(this,arguments)},resize:function(){for(var a in this.canvases)this.canvases[a]._resizeCanvas();this.render()},view_setter:function(a){return dhtmlx.chart[a]||dhtmlx.error("Chart type extension is not loaded: "+a),void 0===this._settings.offset&&(this._settings.offset=!("area"==a||"stackedArea"==a)),"radar"!=a||this._settings.yAxis||this.define("yAxis",{}),"scatter"==a&&(this._settings.yAxis||this.define("yAxis",{}),this._settings.xAxis||this.define("xAxis",{})),a},clearCanvas:function(){if(this.canvases&&"object"==typeof this.canvases)for(var a in this.canvases)this.canvases[a].clearCanvas()},render:function(){var e,c,g,h,a;if(this.callEvent("onBeforeRender",[this.data])){if(this.canvases&&"object"==typeof this.canvases)for(c in this.canvases)this.canvases[c].clearCanvas();else this.canvases={};for(this._settings.legend&&(this.canvases.legend||(this.canvases.legend=new dhtmlx.ui.Canvas(this._obj,"legend")),this._drawLegend(this.data.getRange(),this._obj.offsetWidth)),e=this._getChartBounds(this._obj.offsetWidth,this._obj.offsetHeight),this._map=h=new dhtmlx.ui.Map(this._id),a=this._settings,g=this._getChartData(),c=0;c<this._series.length;c++)this._settings=this._series[c],this.canvases[c]||(this.canvases[c]=new dhtmlx.ui.Canvas(this._obj,c,"z-index:"+(2+c))),this["pvt_render_"+this._settings.view](this.canvases[c].getCanvas(),g,e.start,e.end,c,h);h.render(this._obj),this._obj.lastChild.style.zIndex=1e3,this._applyBounds(this._obj.lastChild,e),this.callEvent("onAfterRender",[]),this._settings=a}},_applyBounds:function(e,c){var a={};for(var g in a.left=c.start.x,a.top=c.start.y,a.width=c.end.x-c.start.x,a.height=c.end.y-c.start.y,a)e.style[g]=a[g]+"px"},_getChartData:function(){var g,m,e,h,l,r,a,n,o,c;if(h=this.data.getRange(),g=-1!=this._settings.view.toLowerCase().indexOf("barh")?"yAxis":"xAxis",(m=this._settings[g])&&m.units&&"object"==typeof m.units){if(n=[],void 0!==(e=m.units).start&&void 0!==e.end&&void 0!==e.next)for(a=e.start;a<=e.end;)n.push(a),a=e.next.call(this,a);else"[object Array]"===Object.prototype.toString.call(e)&&(n=e);if(r=[],n.length){for(o=m.value,c={},l=0;l<h.length;l++)c[o(h[l])]=l;for(l=0;l<n.length;l++)void 0!==c[n[l]]?(h[c[n[l]]].$unit=n[l],r.push(h[c[n[l]]])):r.push({$unit:n[l]})}return r}return h},value_setter:dhtmlx.Template.obj_setter,xValue_setter:dhtmlx.Template.obj_setter,yValue_setter:function(a){this.define("value",a)},alpha_setter:dhtmlx.Template.obj_setter,label_setter:dhtmlx.Template.obj_setter,lineColor_setter:dhtmlx.Template.obj_setter,borderColor_setter:dhtmlx.Template.obj_setter,pieInnerText_setter:dhtmlx.Template.obj_setter,gradient_setter:function(a){return"function"!=typeof a&&a&&!0===a&&(a="light"),a},colormap:{RAINBOW:function(a){var c=Math.floor(this.indexById(a.id)/this.dataCount()*1536);return 1536==c&&(c-=1),this._rainbow[Math.floor(c/256)](c%256)}},color_setter:function(a){return this.colormap[a]||dhtmlx.Template.obj_setter(a)},fill_setter:function(a){return!(!a||0==a)&&dhtmlx.Template.obj_setter(a)},definePreset:function(a){this.define("preset",a.preset),delete a.preset},preset_setter:function(h){var e,c,g;if(this.defaults=dhtmlx.extend({},this.defaults),"object"==typeof dhtmlx.presets.chart[h]){for(e in g=dhtmlx.presets.chart[h])if("object"==typeof g[e])if(this.defaults[e]&&"object"==typeof this.defaults[e])for(c in this.defaults[e]=dhtmlx.extend({},this.defaults[e]),g[e])this.defaults[e][c]=g[e][c];else this.defaults[e]=dhtmlx.extend({},g[e]);else this.defaults[e]=g[e];return h}return!1},legend_setter:function(a){return a?("object"!=typeof a&&(a={template:a}),this._mergeSettings(a,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this._settings.view.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),a.template=dhtmlx.Template.setter(a.template),a):(this.legendObj&&(this.legendObj.innerHTML="",this.legendObj=null),!1)},defaults:{color:"RAINBOW",alpha:"1",label:!1,value:"{obj.value}",padding:{},view:"pie",lineColor:"#ffffff",cant:.5,width:30,labelWidth:100,line:{width:2,color:"#1293f8"},seriesMargin:1,seriesPadding:4,item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto"},item_setter:function(a){"object"!=typeof a&&(a={color:a,borderColor:a}),this._mergeSettings(a,dhtmlx.extend({},this.defaults.item));for(var e=["alpha","borderColor","color","radius"],c=0;c<e.length;c++)a[e[c]]=dhtmlx.Template.setter(a[e[c]]);return a},line_setter:function(a){return"object"!=typeof a&&(a={color:a}),dhtmlx.extend(this.defaults.line,a),(a=dhtmlx.extend({},this.defaults.line)).color=dhtmlx.Template.setter(a.color),a},padding_setter:function(a){return"object"!=typeof a&&(a={left:a,right:a,top:a,bottom:a}),this._mergeSettings(a,{left:50,right:20,top:35,bottom:40}),a},xAxis_setter:function(a){if(!a)return!1;"object"!=typeof a&&(a={template:a}),a.value||(a.value=a.template),this._mergeSettings(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",value:"{obj}",lines:!0});return this._converToTemplate(["lineColor","template","lines","value"],a),this._configXAxis=dhtmlx.extend({},a),a},yAxis_setter:function(a){if(!a)return!1;this._mergeSettings(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});return this._converToTemplate(["lineColor","template","lines","bg"],a),this._configYAxis=dhtmlx.extend({},a),a},_converToTemplate:function(a,c){for(var e=0;e<a.length;e++)c[a[e]]=dhtmlx.Template.setter(c[a[e]])},_drawScales:function(h,g,e,m,a,c){var l=0;return this._settings.yAxis&&(this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),l=this._drawYAxis(this.canvases.y.getCanvas(),h,g,e,m,a)),this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this._drawXAxis(this.canvases.x.getCanvas(),h,g,e,c,l)),l},_drawXAxis:function(w,l,u,s,g,r){for(var m,e=u.x-.5,v=parseInt(r||s.y,10)+.5,c=s.x,a=!0,n=0===this._settings.origin&&"stackedBar"==this._settings.view?s.y+.5:v,h=0;h<l.length;h++){!0===this._settings.offset?m=e+g/2+h*g:(m=h==l.length-1?s.x:e+h*g,a=!!h),m=Math.ceil(m)-.5;var o="auto"!=this._settings.origin&&"bar"==this._settings.view&&parseFloat(this._settings.value(l[h]))<this._settings.origin;this._drawXAxisLabel(m,n,l[h],a,o),(this._settings.offset||h)&&this._settings.xAxis.lines.call(this,l[h])&&this._drawXAxisLine(w,m,s.y,u.y,l[h])}this.canvases.x.renderTextAt(!0,!1,e,s.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",s.x-u.x),this._drawLine(w,e,v,c,v,this._settings.xAxis.color,1),this._settings.xAxis.lines.call(this,{})&&this._settings.offset&&this._drawLine(w,c+.5,s.y,c+.5,u.y+.5,this._settings.xAxis.color,.2)},_drawYAxis:function(x,E,l,h,n,m){var o,v={};if(this._settings.yAxis){var A=l.x-.5,g=h.y,e=l.y,w=h.y;this._settings.yAxis.step&&(o=parseFloat(this._settings.yAxis.step)),void 0!==this._configYAxis.step&&void 0!==this._configYAxis.start&&void 0!==this._configYAxis.end||(n=(v=this._calculateScale(n,m)).start,m=v.end,o=v.step,this._settings.yAxis.end=m,this._settings.yAxis.start=n),this._setYAxisTitle(l,h),0===o&&(m=n,o=1);for(var a=m==n?g-e:(g-e)*o/(m-n),C=0,y=n;y<=m;y+=o){v.fixNum&&(y=parseFloat(new Number(y).toFixed(v.fixNum)));var D=Math.floor(g-C*a)+.5;y==n&&"auto"==this._settings.origin||!this._settings.yAxis.lines.call(this,y)||this._drawLine(x,A,D,h.x,D,this._settings.yAxis.lineColor.call(this,y),1),y==this._settings.origin&&(w=D);var r=y;if(o<1){var s=Math.min(this._log10(o),n<=0?0:this._log10(n)),u=Math.pow(10,-s);y=r=Math.round(y*u)/u}this.canvases.y.renderText(0,D-5,this._settings.yAxis.template(r.toString()),"dhx_axis_item_y",l.x-5),C++}return this._drawLine(x,A,g+1,A,e,this._settings.yAxis.color,1),w}},_setYAxisTitle:function(e,c){var a="dhx_axis_title_y"+(dhtmlx._isIE&&9!=dhtmlx._isIE?" dhx_ie_filter":""),g=this.canvases.y.renderTextAt("middle",!1,0,parseInt((c.y-e.y)/2+e.y,10),this._settings.yAxis.title,a);g&&(g.style.left=(dhtmlx.env.transform?(g.offsetHeight-g.offsetWidth)/2:0)+"px")},_calculateScale:function(r,c){var h,g,m;"auto"!=this._settings.origin&&this._settings.origin<r&&(r=this._settings.origin),h=(c-r)/8||1;var e=Math.floor(this._log10(h)),a=Math.pow(10,e),l=h/a;if(l=5<l?10:5,(h=parseInt(l,10)*a)>Math.abs(r))g=r<0?-h:0;else{var s=Math.abs(r),o=Math.floor(this._log10(s)),n=s/Math.pow(10,o);for(g=Math.ceil(10*n)/10*Math.pow(10,o)-h,1<s&&.1<h&&(g=Math.ceil(g));r<0?g<=r:r<=g;)g-=h;r<0&&(g=-g-2*h)}for(m=g;m<c;)m+=h,m=parseFloat(new Number(m).toFixed(Math.abs(e)));return{start:g,end:m,step:h,fixNum:Math.abs(e)}},_getLimits:function(c,m){var n,l,h=arguments.length&&"h"==c?this._configXAxis:this._configYAxis;if(m=m||"value",h&&void 0!==h.end&&void 0!==h.start&&h.step)n=parseFloat(h.end),l=parseFloat(h.start);else if(n=this.max(this._series[0][m]),l=h&&void 0!==h.start?parseFloat(h.start):this.min(this._series[0][m]),1<this._series.length)for(var g=1;g<this._series.length;g++){var a=this.max(this._series[g][m]),e=this.min(this._series[g][m]);n<a&&(n=a),e<l&&(l=e)}return{max:n,min:l}},_log10:function(c){return Math.floor(Math.log(c)/Math.LN10)},_drawXAxisLabel:function(c,l,h,a,g){if(this._settings.xAxis){var e=this.canvases.x.renderTextAt(g,a,c,l-(g?2:0),this._settings.xAxis.template(h));e&&(e.className+=" dhx_axis_item_x")}},_drawXAxisLine:function(c,a,g,e,h){this._settings.xAxis&&this._settings.xAxis.lines&&this._drawLine(c,a,g,a,e,this._settings.xAxis.lineColor.call(this,h),1)},_drawLine:function(a,g,m,e,h,c,l){a.strokeStyle=c,a.lineWidth=l,a.beginPath(),a.moveTo(g,m),a.lineTo(e,h),a.stroke(),a.lineWidth=1},_getRelativeValue:function(g,h){return[h!=g?h-g:g,1]},_rainbow:[function(a){return"#FF"+dhtmlx.math.toHex(a/2,2)+"00"},function(a){return"#FF"+dhtmlx.math.toHex(a/2+128,2)+"00"},function(a){return"#"+dhtmlx.math.toHex(255-a,2)+"FF00"},function(a){return"#00FF"+dhtmlx.math.toHex(a,2)},function(a){return"#00"+dhtmlx.math.toHex(255-a,2)+"FF"},function(a){return"#"+dhtmlx.math.toHex(a,2)+"00FF"}],addSeries:function(c){var a=this._settings;this._settings=dhtmlx.extend({},a),this._parseSettings(c,{}),this._series.push(this._settings),this._settings=a},_switchSerie:function(l,a,h){var g;if(this._active_serie=1==this._series.length?a.getAttribute("userdata"):this._getActiveSeries(h),this._series[this._active_serie]){for(var c=0;c<this._series.length;c++)(g=this._series[c].tooltip)&&g.disable();a.getAttribute("disabled")||(g=this._series[this._active_serie].tooltip)&&g.enable()}},_getActiveSeries:function(l){var o,c,h,g,n,s,r,m;for(c=this._map._areas,g=dhtmlx.html.offset(this._obj._htmlmap),r=(n=dhtmlx.html.pos(l)).x-g.x,m=n.y-g.y,h=0;h<c.length;h++)r<=(o=c[h].points)[2]&&r>=o[0]&&m<=o[3]&&m>=o[1]&&(s?c[h].index>s.index&&(s=c[h]):s=c[h]);return s?s.index:0},hideSeries:function(a){this.canvases[a].hideCanvas(),this._settings.legend.values&&this._settings.legend.values[a]&&(this._settings.legend.values[a].$hidden=!0),this._drawLegend()},showSeries:function(a){this.canvases[a].showCanvas(),this._settings.legend.values&&this._settings.legend.values[a]&&delete this._settings.legend.values[a].$hidden,this._drawLegend()},_changeColorSV:function(c,h,a){var g,e;return e=dhtmlx.math.toRgb(c),(g=dhtmlx.math.rgbToHsv(e[0],e[1],e[2]))[1]*=h,g[2]*=a,"rgb("+dhtmlx.math.hsvToRgb(g[0],g[1],g[2])+")"},_setBorderStyles:function(a,c){var g,e;e=dhtmlx.math.toRgb(c),(g=dhtmlx.math.rgbToHsv(e[0],e[1],e[2]))[2]/=2,c="rgb("+dhtmlx.math.hsvToRgb(g[0],g[1],g[2])+")",a.strokeStyle=c,1==a.globalAlpha&&(a.globalAlpha=.9)},_drawLegend:function(h,c){var l,s,C,u,m,v,a,A,r,g,w,o=0,n=0;if(h=h||[],c=c||this._obj.offsetWidth,A=this.canvases.legend.getCanvas(),s=this._settings.legend,a="x"!=this._settings.legend.layout?"width:"+s.width+"px":"",this.legendObj&&(this.legendObj.innerHTML="",this.legendObj.parentNode.removeChild(this.legendObj)),this.canvases.legend.clearCanvas(!0),C=dhtmlx.html.create("DIV",{class:"dhx_chart_legend",style:"left:"+o+"px; top:"+n+"px;"+a},""),s.padding&&(C.style.padding=s.padding+"px"),this.legendObj=C,this._obj.appendChild(C),m=[],s.values)for(l=0;l<s.values.length;l++)m.push(this._drawLegendText(C,s.values[l].text,void 0!==s.values[l].id?typeof s.values[l].id:l,s.values[l].$hidden));else for(l=0;l<h.length;l++)m.push(this._drawLegendText(C,s.template(h[l])));for(v=C.offsetWidth,u=C.offsetHeight,v<this._obj.offsetWidth&&("x"==s.layout&&"center"==s.align&&(o=(this._obj.offsetWidth-v)/2),"right"==s.align&&(o=this._obj.offsetWidth-v),s.margin&&"center"!=s.align&&(o+=("left"==s.align?1:-1)*s.margin)),u<this._obj.offsetHeight&&("middle"==s.valign&&"center"!=s.align&&"x"!=s.layout?n=(this._obj.offsetHeight-u)/2:"bottom"==s.valign&&(n=this._obj.offsetHeight-u),s.margin&&"middle"!=s.valign&&(n+=("top"==s.valign?1:-1)*s.margin)),C.style.left=o+"px",C.style.top=n+"px",A.save(),l=0;l<m.length;l++){w=m[l],s.values&&s.values[l].$hidden?(g=!0,r=s.values[l].disableColor?s.values[l].disableColor:"#d9d9d9"):(g=!1,r=s.values?s.values[l].color:this._settings.color.call(this,h[l]));var e="right"==s.marker.position?w.offsetWidth-s.marker.width:0;this._drawLegendMarker(A,w.offsetLeft+o+e,w.offsetTop+n,r,w.offsetHeight,g,l)}A.restore(),m=null},_drawLegendText:function(a,l,c,h){var g="",e=this._settings.legend;"x"==e.layout&&(g="float:left;");var n=e.marker.position,m=dhtmlx.html.create("DIV",{style:g+"padding-"+(n&&"right"==n?"right":"left")+":"+(10+e.marker.width)+"px",class:"dhx_chart_legend_item"+(h?" hidden":"")},l);return 2<arguments.length&&m.setAttribute("series_id",c),a.appendChild(m),m},_drawLegendMarker:function(C,u,s,h,A,l,n){var c=[],m=this._settings.legend.marker,w=this._settings.legend.values,r=w&&w[n].markerType?w[n].markerType:m.type;if(h&&(C.fillStyle=h,C.strokeStyle=this._getDarkenColor(h,.75)),C.beginPath(),"round"!=r&&m.radius)if("item"==r){if(this._settings.line&&"scatter"!=this._settings.view&&!this._settings.disableLines){C.beginPath(),C.lineWidth=this._series[n].line.width,C.strokeStyle=l?h:this._series[n].line.color.call(this,{});var e=u+5,v=s+A/2;C.moveTo(e,v);a=e+m.width;C.lineTo(a,v),C.stroke()}var g=this._series[n].item,o=parseInt(g.radius.call(this,{}),10)||0;if(o){if("image"==g.type&&g.src)return void this._drawImage(C,u+5,s+m.height/2-5,g.src,2*o,2*o);C.beginPath(),l?(C.lineWidth=g.borderWidth,C.strokeStyle=h,C.fillStyle=h):(C.lineWidth=g.borderWidth,C.fillStyle=g.color.call(this,{}),C.strokeStyle=g.borderColor.call(this,{}),C.globalAlpha=g.alpha.call(this,{})),C.beginPath(),u+=m.width/2+5,s+=A/2,this._strokeChartItem(C,u,s,o+1,g.type),C.fill(),C.stroke()}C.globalAlpha=1}else C.lineWidth=1,u+=5,s+=parseInt(A/2-m.height/2,10),c=[[u+m.radius,s+m.radius,m.radius,Math.PI,3*Math.PI/2,!1],[u+m.width-m.radius,s],[u+m.width-m.radius,s+m.radius,m.radius,-Math.PI/2,0,!1],[u+m.width,s+m.height-m.radius],[u+m.width-m.radius,s+m.height-m.radius,m.radius,0,Math.PI/2,!1],[u+m.radius,s+m.height],[u+m.radius,s+m.height-m.radius,m.radius,Math.PI/2,Math.PI,!1],[u,s+m.radius]],this._path(C,c);else{C.lineWidth=m.height,C.lineCap=r,u+=C.lineWidth/2+5,s+=A/2,C.moveTo(u,s);var a=u+m.width-m.height+1;C.lineTo(a,s)}C.stroke(),C.fill()},_getDarkenColor:function(a,g){var e,c;return c=dhtmlx.math.toRgb(a),(e=dhtmlx.math.rgbToHsv(c[0],c[1],c[2]))[2]=e[2]*g,"rgb("+dhtmlx.math.hsvToRgb(e[0],e[1],e[2])+")"},_getChartBounds:function(a,m){var o,e,n,c;if(o=this._settings.padding.left,e=this._settings.padding.top,n=a-this._settings.padding.right,c=m-this._settings.padding.bottom,this._settings.legend){var h=this._settings.legend,l=this._settings.legend.width,g=this._settings.legend.height;"x"==h.layout?"center"==h.valign?"right"==h.align?n-=l:"left"==h.align&&(o+=l):"bottom"==h.valign?c-=g:e+=g:"right"==h.align?n-=l:"left"==h.align&&(o+=l)}return{start:{x:o,y:e},end:{x:n,y:c}}},_getStackedLimits:function(h){var c,a,l,g,e;if(this._settings.yAxis&&void 0!==this._settings.yAxis.end&&void 0!==this._settings.yAxis.start&&this._settings.yAxis.step)l=parseFloat(this._settings.yAxis.end),g=parseFloat(this._settings.yAxis.start);else{for(c=0;c<h.length;c++)for(h[c].$sum=0,h[c].$min=1/0,a=0;a<this._series.length;a++)e=parseFloat(this._series[a].value(h[c])||0),isNaN(e)||(-1!=this._series[a].view.toLowerCase().indexOf("stacked")&&(h[c].$sum+=e),e<h[c].$min&&(h[c].$min=e));for(l=-1/0,g=1/0,c=0;c<h.length;c++)h[c].$sum>l&&(l=h[c].$sum),h[c].$min<g&&(g=h[c].$min);0<g&&(g=0)}return{max:l,min:g}},_setBarGradient:function(w,c,s,a,o,n,g,e){var r,h,m,l,v,u;return"light"==n?(r="x"==e?w.createLinearGradient(c,s,a,s):w.createLinearGradient(c,s,c,o),u=[[0,"#FFFFFF"],[.9,g],[1,g]],h=2):"falling"==n||"rising"==n?(r="x"==e?w.createLinearGradient(c,s,a,s):w.createLinearGradient(c,s,c,o),m=dhtmlx.math.toRgb(g),(l=dhtmlx.math.rgbToHsv(m[0],m[1],m[2]))[1]*=.5,v="rgb("+dhtmlx.math.hsvToRgb(l[0],l[1],l[2])+")","falling"==n?u=[[0,v],[.7,g],[1,g]]:"rising"==n&&(u=[[0,g],[.3,g],[1,v]]),h=0):(w.globalAlpha=.37,h=0,r="x"==e?w.createLinearGradient(c,o,c,s):w.createLinearGradient(c,s,a,s),u=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this._gradient(r,u),{gradient:r,offset:h}},_getPositionByAngle:function(e,c,h,g){return e*=-1,{x:c+=Math.cos(e)*g,y:h-=Math.sin(e)*g}},_gradient:function(e,c){for(var a=0;a<c.length;a++)e.addColorStop(c[a][0],c[a][1])},_path:function(a,e){var c,g;for(c=0;c<e.length;c++)g=c?"lineTo":"moveTo",2<e[c].length&&(g="arc"),a[g].apply(a,e[c])},_circle:function(c,a,g,e){c.arc(a,g,e,2*Math.PI,!0)},_addMapRect:function(g,h,a,e,c){g.addRect(h,[a[0].x-e.x,a[0].y-e.y,a[1].x-e.x,a[1].y-e.y],c)}},dhtmlx.compat("layout"),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachChart=function(a){this.callEvent("_onBeforeContentAttach",["chart"]);var c=document.createElement("DIV");return c.id="dhxChartObj_"+window.dhx4.newId(),c.style.width="100%",c.style.height="100%",document.body.appendChild(c),this._attachObject(c),a.container=c.id,this.dataType="chart",this.dataObj=new dhtmlXChart(a),this.dataObj.setSizes||(this.dataObj.setSizes=function(){this.resize?this.resize():this.render()}),this.dataObj}),dhtmlx.ui.pager=function(a){this.name="Pager",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(a,"dhx_pager"),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.SingleRender),dhtmlx.extend(this,dhtmlx.MouseEvents),this._parseSettings(a,{size:10,page:-1,group:5,count:0,type:"default"}),this.data=this._settings,this.refresh()},dhtmlx.ui.pager.prototype={_id:"dhx_p_id",on_click:{dhx_pager_item:function(a,c){this.select(c)}},select:function(a){switch(a){case"next":a=this._settings.page+1;break;case"prev":a=this._settings.page-1;break;case"first":a=0;break;case"last":a=this._settings.limit-1}a<0&&(a=0),a>=this.data.limit&&(a=this.data.limit-1),this.callEvent("onBeforePageChange",[this._settings.page,a])&&(this.data.page=1*a,this.refresh(),this.callEvent("onAfterPageChange",[a]))},types:{default:{template:dhtmlx.Template.fromHTML("{common.pages()}"),pages:function(e){var c="";if(-1==e.page)return"";e.min=e.page-Math.round((e.group-1)/2),e.max=e.min+e.group-1,e.min<0&&(e.max+=-1*e.min,e.min=0),e.max>=e.limit&&(e.min-=Math.min(e.min,e.max-e.limit+1),e.max=e.limit-1);for(var a=e.min||0;a<=e.max;a++)c+=this.button({id:a,index:a+1,selected:a==e.page?"_selected":""});return c},page:function(a){return a.page+1},first:function(){return this.button({id:"first",index:" &lt;&lt; ",selected:""})},last:function(){return this.button({id:"last",index:" &gt;&gt; ",selected:""})},prev:function(){return this.button({id:"prev",index:"&lt;",selected:""})},next:function(){return this.button({id:"next",index:"&gt;",selected:""})},button:dhtmlx.Template.fromHTML("<div dhx_p_id='{obj.id}' class='dhx_pager_item{obj.selected}'>{obj.index}</div>")}},refresh:function(){var a=this._settings;a.limit=Math.ceil(a.count/a.size),a.limit&&a.limit!=a.old_limit&&(a.page=Math.min(a.limit-1,a.page));var c=a.page;(-1!=c&&c!=a.old_page||a.limit!=a.old_limit)&&(this.render(),this.callEvent("onRefresh",[]),a.old_limit=a.limit,a.old_page=a.page)},template_item_start:dhtmlx.Template.fromHTML("<div>"),template_item_end:dhtmlx.Template.fromHTML("</div>")},dhtmlx.DataProcessor={_dp_init:function(c){var a="_methods";c[a]=["setItemStyle","","changeId","remove"],this.attachEvent("onAfterAdd",function(e){c.setUpdated(e,!0,"inserted")}),this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(g,e){g.getUserData&&g.getUserData(e,this._userdata)},this)),this.attachEvent("onBeforeDelete",function(g){if(c._silent_mode)return!0;var e=c.getState(g);return"inserted"==e?(c.setUpdated(g,!1),!0):"deleted"!=e&&("true_deleted"==e||(c.setUpdated(g,!0,"deleted"),!1))}),this.attachEvent("onAfterEditStop",function(e){c.setUpdated(e,!0,"updated")}),this.attachEvent("onBindUpdate",function(e){window.setTimeout(function(){c.setUpdated(e.id,!0,"updated")},1)}),c[a="_getRowData"]=function(m,e){var h=this.obj.data.get(m),l={};for(var g in h)0!==g.indexOf("_")&&(l[g]=h[g]);return l},c[a="_clearUpdateFlag"]=function(){},this._userdata={},c.attachEvent("insertCallback",this._dp_callback),c.attachEvent("updateCallback",this._dp_callback),c.attachEvent("deleteCallback",function(e,g){this.obj.setUserData(g,this.action_param,"true_deleted"),this.obj.remove(g)}),dhtmlx.compat("dataProcessor",c)},_dp_callback:function(a,c){this.obj.data.set(c,dhtmlx.DataDriver.xml.getDetails(a.firstChild)),this.obj.data.refresh(c)},setItemStyle:function(e,a){var c=this._locateHTML(e);c&&(c.style.cssText+=";"+a)},changeId:function(c,a){this.data.changeId(c,a),this.refresh()},setUserData:function(e,a,c){e?this.data.get(e)[a]=c:this._userdata[a]=c},getUserData:function(c,a){return c?this.data.get(c)[a]:this._userdata[a]}},dhtmlx.DataProcessor._dp_init=dhtmlx.DataProcessor._dp_init,dhtmlx.compat.dnd=function(){if(window.dhtmlDragAndDropObject){var n="_dragged",g=dhtmlDragAndDropObject.prototype.checkLanding;dhtmlDragAndDropObject.prototype.checkLanding=function(r,s,o){if(g.apply(this,arguments),!o){var u=dhtmlx.DragControl._drag_context=dhtmlx.DragControl._drag_context||{};u.from||(u.from=this.dragStartObject),dhtmlx.DragControl._checkLand(r,s,!0)}};var c=dhtmlDragAndDropObject.prototype.stopDrag;dhtmlDragAndDropObject.prototype.stopDrag=function(s,o,r){r||dhtmlx.DragControl._last&&(dhtmlx.DragControl._active=m.dragStartNode,dhtmlx.DragControl._stopDrag(s,!0)),c.apply(this,arguments)};var m=new dhtmlDragAndDropObject,h=dhtmlx.DragControl._startDrag;dhtmlx.DragControl._startDrag=function(){h.apply(this,arguments);var u=dhtmlx.DragControl._drag_context;if(u){for(var s=[],r=[],o=0;o<u.source.length;o++)s[o]={idd:u.source[o]},r.push(u.source[o]);m.dragStartNode={parentNode:{},parentObject:{idd:s,id:1==r.length?r[0]:r,treeNod:{object:u.from}}},m.dragStartNode.parentObject.treeNod[n]=s,m.dragStartObject=u.from}};var l=dhtmlx.DragControl._checkLand;dhtmlx.DragControl._checkLand=function(r,s,o){l.apply(this,arguments),this._last||o||(r=m.checkLanding(r,s,!0))};var a=dhtmlx.DragControl._stopDrag;dhtmlx.DragControl._stopDrag=function(r,o){a.apply(this,arguments),m.lastLanding&&!o&&m.stopDrag(r,!1,!0)};var e=dhtmlx.DragControl.getMaster;dhtmlx.DragControl.getMaster=function(r){var s=null;if(r&&(s=e.apply(this,arguments)),!s){for(var u=[],v=(s=m.dragStartObject)[n],o=0;o<v.length;o++)u.push(v[o].idd||v[o].id);dhtmlx.DragControl._drag_context.source=u}return s}}},dhtmlx.DataMove={_init:function(){dhtmlx.assert(this.data,"DataMove :: Component doesn't have DataStore")},copy:function(c,h,a,g){var e=this.get(c);if(e)return a&&(dhtmlx.assert(a.externalData,"DataMove :: External object doesn't support operation"),e=a.externalData(e)),(a=a||this).add(a.externalData(e,g),h);dhtmlx.log("Warning","Incorrect ID in DataMove::copy")},move:function(e,m,c,l){if(e instanceof Array)for(var g=0;g<e.length;g++){var a=(c||this).indexById(this.move(e[g],m,c,e[g]));e[g+1]&&(m=a+(this.indexById(e[g+1])<a?0:1))}else if(nid=e,m<0)dhtmlx.log("Info","DataMove::move - moving outside of bounds is ignored");else{var h=this.get(e);if(h)return c&&c!=this?(dhtmlx.assert(c.externalData,"DataMove :: External object doesn't support operation"),nid=c.add(c.externalData(h,l),m),this.remove(e)):this.data.move(this.indexById(e),m),nid;dhtmlx.log("Warning","Incorrect ID in DataMove::move")}},moveUp:function(c,a){return this.move(c,this.indexById(c)-(a||1))},moveDown:function(c,a){return this.moveUp(c,-1*(a||1))},moveTop:function(a){return this.move(a,0)},moveBottom:function(a){return this.move(a,this.data.dataCount()-1)},externalData:function(a,e){var c=dhtmlx.extend({},a);return c.id=e||dhtmlx.uid(),c.$selected=c.$template=null,c}},dhtmlx.DragControl={_drag_masters:dhtmlx.toArray(["dummy"]),addDrop:function(c,e,a){(c=dhtmlx.toNode(c)).dhx_drop=this._getCtrl(e),a&&(c.dhx_master=!0)},_getCtrl:function(c){c=c||dhtmlx.DragControl;var a=this._drag_masters.find(c);return a<0&&(a=this._drag_masters.length,this._drag_masters.push(c)),a},addDrag:function(a,c){(a=dhtmlx.toNode(a)).dhx_drag=this._getCtrl(c),dhtmlx.event(a,"mousedown",this._preStart,a)},_preStart:function(a){return dhtmlx.DragControl._active&&(dhtmlx.DragControl._preStartFalse(),dhtmlx.DragControl.destroyDrag()),dhtmlx.DragControl._active=this,dhtmlx.DragControl._start_pos={x:a.pageX,y:a.pageY},dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._startDrag),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._preStartFalse),dhtmlx.DragControl._dhx_drag_sc=dhtmlx.event(this,"scroll",dhtmlx.DragControl._preStartFalse),!(a.cancelBubble=!0)},_preStartFalse:function(a){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu),dhtmlx.DragControl._dhx_drag_sc=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_sc)},_startDrag:function(a){var c_x=a.pageX,c_y=a.pageY;Math.abs(c_x-dhtmlx.DragControl._start_pos.x)<5&&Math.abs(c_y-dhtmlx.DragControl._start_pos.y)<5||(dhtmlx.DragControl._preStartFalse(),dhtmlx.DragControl.createDrag(a)&&(dhtmlx.DragControl.sendSignal("start"),dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._moveDrag),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._stopDrag),dhtmlx.DragControl._moveDrag(a)))},_stopDrag:function(a){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu),dhtmlx.DragControl._last&&(dhtmlx.DragControl.onDrop(dhtmlx.DragControl._active,dhtmlx.DragControl._last,this._landing,a),dhtmlx.DragControl.onDragOut(dhtmlx.DragControl._active,dhtmlx.DragControl._last,null,a)),dhtmlx.DragControl.destroyDrag(),dhtmlx.DragControl.sendSignal("stop")},_moveDrag:function(a){var c=dhtmlx.html.pos(a);return dhtmlx.DragControl._html.style.top=c.y+dhtmlx.DragControl.top+"px",dhtmlx.DragControl._html.style.left=c.x+dhtmlx.DragControl.left+"px",dhtmlx.DragControl._skip?dhtmlx.DragControl._skip=!1:dhtmlx.DragControl._checkLand(a.srcElement||a.target,a),!(a.cancelBubble=!0)},_checkLand:function(a,c){for(;a&&"BODY"!=a.tagName;){if(a.dhx_drop)return this._last&&(this._last!=a||a.dhx_master)&&this.onDragOut(this._active,this._last,a,c),!this._last||this._last!=a||a.dhx_master?(this._last=null,this._landing=this.onDragIn(dhtmlx.DragControl._active,a,c),void(this._landing&&(this._last=a))):void 0;a=a.parentNode}this._last&&(this._last=this._landing=this.onDragOut(this._active,this._last,null,c))},sendSignal:function(a){dhtmlx.DragControl.active="start"==a},getMaster:function(a){return this._drag_masters[a.dhx_drag||a.dhx_drop]},getContext:function(a){return this._drag_context},createDrag:function(l){var g=dhtmlx.DragControl._active,h=this._drag_masters[g.dhx_drag];if(h.onDragCreate)(c=h.onDragCreate(g,l)).style.position="absolute",c.style.zIndex=dhtmlx.zIndex.drag,c.onmousemove=dhtmlx.DragControl._skip_mark;else{var c,m=dhtmlx.DragControl.onDrag(g,l);if(!m)return!1;(c=document.createElement("DIV")).innerHTML=m,c.className="dhx_drag_zone",c.onmousemove=dhtmlx.DragControl._skip_mark,document.body.appendChild(c)}return dhtmlx.DragControl._html=c,!0},_skip_mark:function(){dhtmlx.DragControl._skip=!0},destroyDrag:function(){var c=dhtmlx.DragControl._active,e=this._drag_masters[c.dhx_drag];e&&e.onDragDestroy?e.onDragDestroy(c,dhtmlx.DragControl._html):dhtmlx.html.remove(dhtmlx.DragControl._html),dhtmlx.DragControl._landing=dhtmlx.DragControl._active=dhtmlx.DragControl._last=dhtmlx.DragControl._html=null},top:5,left:5,onDragIn:function(g,c,h){var a=this._drag_masters[c.dhx_drop];return a.onDragIn&&a!=this?a.onDragIn(g,c,h):(c.className=c.className+" dhx_drop_zone",c)},onDragOut:function(g,c,l,h){var a=this._drag_masters[c.dhx_drop];return a.onDragOut&&a!=this?a.onDragOut(g,c,l,h):(c.className=c.className.replace("dhx_drop_zone",""),null)},onDrop:function(g,c,l,h){var a=this._drag_masters[c.dhx_drop];if(dhtmlx.DragControl._drag_context.from=dhtmlx.DragControl.getMaster(g),a.onDrop&&a!=this)return a.onDrop(g,c,l,h);c.appendChild(g)},onDrag:function(c,g){var a=this._drag_masters[c.dhx_drag];return a.onDrag&&a!=this?a.onDrag(c,g):(dhtmlx.DragControl._drag_context={source:c,from:c},"<div style='"+c.style.cssText+"'>"+c.innerHTML+"</div>")}},dhtmlx.DragItem={_init:function(){dhtmlx.assert(this.move,"DragItem :: Component doesn't have DataMove interface"),dhtmlx.assert(this.locate,"DragItem :: Component doesn't have RenderStack interface"),dhtmlx.assert(dhtmlx.DragControl,"DragItem :: DragControl is not included"),!this._settings||this._settings.drag?dhtmlx.DragItem._initHandlers(this):this._settings&&(this.drag_setter=function(a){return a&&(this._initHandlers(this),delete this.drag_setter),a}),this.dragMarker&&(this.attachEvent("onBeforeDragIn",this.dragMarker),this.attachEvent("onDragOut",this.dragMarker))},_initHandlers:function(a){dhtmlx.DragControl.addDrop(a._obj,a,!0),dhtmlx.DragControl.addDrag(a._obj,a)},onDragIn:function(h,g,l){var n=this.locate(l)||null,c=dhtmlx.DragControl._drag_context,m=dhtmlx.DragControl.getMaster(h),a=this._locateHTML(n)||this._obj;return a==dhtmlx.DragControl._landing?a:(c.target=n,c.to=m,this.callEvent("onBeforeDragIn",[c,l])?(dhtmlx.html.addCss(a,"dhx_drag_over"),a):c.id=null)},onDragOut:function(h,g,o,l){var m=this.locate(l)||null;if(o!=this._dataobj&&(m=null),(this._locateHTML(m)||(o?dhtmlx.DragControl.getMaster(o)._obj:window.undefined))==dhtmlx.DragControl._landing)return null;var a=dhtmlx.DragControl._drag_context;return dhtmlx.html.removeCss(dhtmlx.DragControl._landing,"dhx_drag_over"),a.target=a.to=null,this.callEvent("onDragOut",[a,l]),null},onDrop:function(g,c,l,h){var a=dhtmlx.DragControl._drag_context;a.to=this,a.index=a.target?this.indexById(a.target):this.dataCount(),a.new_id=dhtmlx.uid(),this.callEvent("onBeforeDrop",[a,h])&&(a.from==a.to?this.move(a.source,a.index):a.from?a.from.move(a.source,a.index,a.to,a.new_id):dhtmlx.error("Unsopported d-n-d combination"),this.callEvent("onAfterDrop",[a,h]))},onDrag:function(g,l){var m=this.locate(l),h=[m];if(m){if(this.getSelected){var c=this.getSelected();-1!=dhtmlx.PowerArray.find.call(c,m)&&(h=c)}var a=dhtmlx.DragControl._drag_context={source:h,start:m};if((a.from=this).callEvent("onBeforeDrag",[a,l]))return a.html||this._toHTML(this.get(m))}return null}},dhtmlx.EditAbility={_init:function(a){this._edit_id=null,this._edit_bind=null,dhtmlx.assert(this.data,"EditAbility :: Component doesn't have DataStore"),dhtmlx.assert(this._locateHTML,"EditAbility :: Component doesn't have RenderStack"),this.attachEvent("onEditKeyPress",function(e,g,c){13!=e||c?27==e&&this.stopEdit(!0):this.stopEdit()}),this.attachEvent("onBeforeRender",function(){this.stopEdit()})},isEdit:function(){return this._edit_id},edit:function(c){if(this.stopEdit(!1,c)){if(!this.callEvent("onBeforeEditStart",[c]))return;var a=this.data.get(c);if(a.$template)return;a.$template="edit",this.data.refresh(c),this._edit_id=c,this._save_binding(c),this._edit_bind(!0,a),this.callEvent("onAfterEditStart",[c])}},stopEdit:function(e,h){if(!this._edit_id)return!0;if(this._edit_id==h)return!1;var a={};if(e?a=null:this._edit_bind(!1,a),!this.callEvent("onBeforeEditStop",[this._edit_id,a]))return!1;var c=this.data.get(this._edit_id);c.$template=null,e||this._edit_bind(!1,c);var g=this._edit_id;return this._edit_bind=this._edit_id=null,this.data.refresh(g),this.callEvent("onAfterEditStop",[g,a]),!0},_save_binding:function(n){var a=this._locateHTML(n),e="",l="",h=[];if(a){for(var g=a.getElementsByTagName("*"),m="",c=0;c<g.length;c++)1==g[c].nodeType&&(m=g[c].getAttribute("bind"))&&(e+="els["+h.length+"].value="+m+";",l+=m+"=els["+h.length+"].value;",h.push(g[c]),g[c].className+=" dhx_allow_selection",g[c].onselectstart=this._block_native);g=null}e=Function("obj","els",e),l=Function("obj","els",l),this._edit_bind=function(r,o){r?(e(o,h),h.length&&h[0].select&&h[0].select()):l(o,h)}},_block_native:function(a){return(a||event).cancelBubble=!0}},dhtmlx.SelectionModel={_init:function(){this._selected=dhtmlx.toArray(),dhtmlx.assert(this.data,"SelectionModel :: Component doesn't have DataStore"),this.data.attachEvent("onStoreUpdated",dhtmlx.bind(this._data_updated,this)),this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._data_loaded,this)),this.data.attachEvent("onAfterFilter",dhtmlx.bind(this._data_filtered,this)),this.data.attachEvent("onIdChange",dhtmlx.bind(this._id_changed,this))},_id_changed:function(e,a){for(var c=this._selected.length-1;0<=c;c--)this._selected[c]==e&&(this._selected[c]=a)},_data_filtered:function(){for(var a=this._selected.length-1;0<=a;a--)if(this.data.indexById(this._selected[a])<0){var e=this._selected[a],c=this.item(e);c&&delete c.$selected,this._selected.splice(a,1),this.callEvent("onSelectChange",[e])}},_data_updated:function(e,c,a){"delete"==a?this._selected.remove(e):this.data.dataCount()||this.data._filter_order||(this._selected=dhtmlx.toArray())},_data_loaded:function(){this._settings.select&&this.data.each(function(a){a.$selected&&this.select(a.id)},this)},_select_mark:function(e,c,a){return!(!a&&!this.callEvent("onBeforeSelect",[e,c]))&&(this.data.item(e).$selected=c,a?a.push(e):(c?this._selected.push(e):this._selected.remove(e),this._refresh_selection(e)),!0)},select:function(g,e,a){if(!g)return this.selectAll();if(g instanceof Array)for(var c=0;c<g.length;c++)this.select(g[c],e,a);else if(this.data.exists(g)){if(a&&this._selected.length)return this.selectAll(this._selected[this._selected.length-1],g);e||1==this._selected.length&&this._selected[0]==g||(this._silent_selection=!0,this.unselectAll(),this._silent_selection=!1),this.isSelected(g)?e&&this.unselect(g):this._select_mark(g,!0)&&this.callEvent("onAfterSelect",[g])}else dhtmlx.error("Incorrect id in select command: "+g)},unselect:function(a){if(!a)return this.unselectAll();this.isSelected(a)&&this._select_mark(a,!1)},selectAll:function(g,e){var c=[];(g||e?this.data.getRange(g||null,e||null):this.data.getRange()).each(function(h){return this.data.item(h.id).$selected||(this._selected.push(h.id),this._select_mark(h.id,!0,c)),h.id},this),this._refresh_selection(c)},unselectAll:function(){var a=[];this._selected.each(function(c){this._select_mark(c,!1,a)},this),this._selected=dhtmlx.toArray(),this._refresh_selection(a)},isSelected:function(a){return-1!=this._selected.find(a)},getSelected:function(a){switch(this._selected.length){case 0:return a?[]:"";case 1:return a?[this._selected[0]]:this._selected[0];default:return[].concat(this._selected)}},_is_mass_selection:function(a){return 100<a.length||a.length>this.data.dataCount/2},_refresh_selection:function(c){if("object"!=typeof c&&(c=[c]),c.length){if(this._is_mass_selection(c))this.data.refresh();else for(var a=0;a<c.length;a++)this.render(c[a],this.data.item(c[a]),"update");this._silent_selection||this.callEvent("onSelectChange",[c])}}},dhtmlx.RenderStack={_init:function(){dhtmlx.assert(this.data,"RenderStack :: Component doesn't have DataStore"),dhtmlx.assert(dhtmlx.Template,"dhtmlx.Template :: dhtmlx.Template is not accessible"),this._html=document.createElement("DIV")},_toHTML:function(a){return dhtmlx.assert(!a.$template||this.type["template_"+a.$template],"RenderStack :: Unknown template: "+a.$template),this.callEvent("onItemRender",[a]),this.type._item_start(a,this.type)+(a.$template?this.type["template_"+a.$template]:this.type.template)(a,this.type)+this.type._item_end},_toHTMLObject:function(a){return this._html.innerHTML=this._toHTML(a),this._html.firstChild},_locateHTML:function(a){if(this._htmlmap)return this._htmlmap[a];this._htmlmap={};for(var e=this._dataobj.childNodes,c=0;c<e.length;c++){var g=e[c].getAttribute(this._id);g&&(this._htmlmap[g]=e[c])}return this._locateHTML(a)},locate:function(a){return dhtmlx.html.locate(a,this._id)},show:function(c){var a=this._locateHTML(c);a&&(this._dataobj.scrollTop=a.offsetTop-this._dataobj.offsetTop)},render:function(l,g,e,h){if(l){var a=this._locateHTML(l);switch(e){case"update":if(!a)return;var c=this._htmlmap[l]=this._toHTMLObject(g);dhtmlx.html.insertBefore(c,a),dhtmlx.html.remove(a);break;case"delete":if(!a)return;dhtmlx.html.remove(a),delete this._htmlmap[l];break;case"add":c=this._htmlmap[l]=this._toHTMLObject(g);dhtmlx.html.insertBefore(c,this._locateHTML(this.data.next(l)),this._dataobj);break;case"move":this.render(l,g,"delete"),this.render(l,g,"add");break;default:dhtmlx.error("Unknown render command: "+e)}}else this.callEvent("onBeforeRender",[this.data])&&(this._dataobj.innerHTML=this.data.getRange().map(this._toHTML,this).join(""),this._htmlmap=null);this.callEvent("onAfterRender",[])},pager_setter:function(c){this.attachEvent("onBeforeRender",function(){var g=this._settings.pager._settings;return-1!=g.page&&(this.data.min=g.page*g.size,this.data.max=(g.page+1)*g.size-1,!0)});var a=new dhtmlx.ui.pager(c),e=dhtmlx.bind(function(){this.data.refresh()},this);return a.attachEvent("onRefresh",e),this.data.attachEvent("onStoreUpdated",function(h){var g=this.dataCount();g!=a._settings.count&&(a._settings.count=g,-1==a._settings.page&&(a._settings.page=0),a.refresh())}),a},height_setter:function(a){return"auto"==a&&(this.attachEvent("onAfterRender",this._correct_height),dhtmlx.event(window,"resize",dhtmlx.bind(this._correct_height,this))),a},_correct_height:function(){this._dataobj.style.overflow="hidden",this._dataobj.style.height="1px";var a=this._dataobj.scrollHeight;if(this._dataobj.style.height=a+"px",dhtmlx._isFF){var c=this._dataobj.scrollHeight;c!=a&&(this._dataobj.style.height=c+"px")}this._obj.style.height=this._dataobj.style.height},_getDimension:function(){var a=this.type,c=(a.border||0)+2*(a.padding||0)+2*(a.margin||0);return{x:a.width+c,y:a.height+c}},x_count_setter:function(c){var e=this._getDimension(),a=dhtmlx.$customScroll?0:18;return this._dataobj.style.width=e.x*c+("auto"!=this._settings.height?a:0)+"px",c},y_count_setter:function(a){var c=this._getDimension();return this._dataobj.style.height=c.y*a+"px",a}},dhtmlx.VirtualRenderStack={_init:function(){dhtmlx.assert(this.render,"VirtualRenderStack :: Object must use RenderStack first"),this._htmlmap={},this._dataobj.style.overflowY="scroll",dhtmlx.event(this._dataobj,"scroll",dhtmlx.bind(this._render_visible_rows,this)),dhtmlx.event(window,"resize",dhtmlx.bind(function(){this.render()},this)),this.data._unrendered_area=[],this.data.getIndexRange=this._getIndexRange},_locateHTML:function(a){return this._htmlmap[a]},show:function(e){range=this._getVisibleRange();var c=this.data.indexById(e),a=Math.floor(c/range._dx)*range._y;this._dataobj.scrollTop=a},_getIndexRange:function(h,g){0!==g&&(g=Math.min(g||1/0,this.dataCount()-1));for(var a=dhtmlx.toArray(),c=h||0;c<=g;c++){var e=this.item(this.order[c]);this.order.length>c&&(e?"loading"==e.$template&&this._unrendered_area.push(this.order[c]):(this.order[c]=dhtmlx.uid(),e={id:this.order[c],$template:"loading"},this._unrendered_area.push(this.order[c])),a.push(e))}return a},render:function(l,g,e,h){if(l){var a=this._locateHTML(l);switch(e){case"update":if(!a)return;var c=this._htmlmap[l]=this._toHTMLObject(g);dhtmlx.html.insertBefore(c,a),dhtmlx.html.remove(a);break;default:this._render_delayed()}}else this.callEvent("onBeforeRender",[this.data])&&(this._htmlmap={},this._render_visible_rows(null,!0),this._wait_for_render=!1,this.callEvent("onAfterRender",[]))},_render_delayed:function(){this._wait_for_render||(this._wait_for_render=!0,window.setTimeout(dhtmlx.bind(function(){this.render()},this),1))},_create_placeholder:function(a){var c=document.createElement("DIV");return c.className="dhxdataview_placeholder",c.style.cssText="height:"+a+"px; width:100%; overflow:hidden;",c},_render_visible_rows:function(C,F){this.data._unrendered_area=[];var A=this._getVisibleRange();this._dataobj.firstChild&&!F||(this._dataobj.innerHTML="",this._dataobj.appendChild(this._create_placeholder(A._max)),this._htmlrows=[this._dataobj.firstChild]);for(var l=Math.max(A._from,0),y=this.data.max||0===this.data.max?this.data.max:1/0;l<=A._height;){for(;this._htmlrows[l]&&this._htmlrows[l]._filled&&l<=A._height;)l++;if(l>A._height)break;for(var o=l;!this._htmlrows[o];)o--;var a=this._htmlrows[o],g=l*A._dx+(this.data.min||0);if(y<g)break;var m=Math.min(g+A._dx-1,y),s=this._create_placeholder(A._y),n=this.data.getIndexRange(g,m);if(!n.length)break;s.innerHTML=n.map(this._toHTML,this).join("");for(var w=0;w<n.length;w++)this._htmlmap[this.data.idByIndex(g+w)]=s.childNodes[w];var x=parseInt(a.style.height,10),E=(l-o)*A._y,v=x-E-A._y;if(dhtmlx.html.insertBefore(s,E?a.nextSibling:a,this._dataobj),(this._htmlrows[l]=s)._filled=!0,E<=0&&0<v)a.style.height=v+"px",this._htmlrows[l+1]=a;else if(E<0?dhtmlx.html.remove(a):a.style.height=E+"px",0<v){var r=this._htmlrows[l+1]=this._create_placeholder(v);dhtmlx.html.insertBefore(r,s.nextSibling,this._dataobj)}l++}if(this.data._unrendered_area.length){var u=this.indexById(this.data._unrendered_area[0]),c=this.indexById(this.data._unrendered_area.pop())+1;if(u<c){if(!this.callEvent("onDataRequest",[u,c-u]))return!1;dhtmlx.assert(this.data.feed,"Data feed is missed"),this.data.feed.call(this,u,c-u)}}dhtmlx._isIE&&(this._getVisibleRange()._from!=A._from&&this._render_visible_rows())},_getVisibleRange:function(){dhtmlx.$customScroll;var m=this._dataobj.scrollTop,a=this._dataobj.scrollWidth,n=this._dataobj.offsetHeight,g=(this.type,this._getDimension()),s=Math.floor(a/g.x)||1,e=Math.floor(m/g.y),o=Math.ceil((n+m)/g.y)-1,h=this.data.max?this.data.max-this.data.min:this.data.dataCount();return{_from:e,_height:o,_top:m,_max:Math.ceil(h/s)*g.y,_y:g.y,_dx:s}}},dhtmlXDataView=function(a){this.name="DataView",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(a,"dhx_dataview"),dhtmlx.extend(this,dhtmlx.AtomDataLoader),dhtmlx.extend(this,dhtmlx.DataLoader),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.RenderStack),dhtmlx.extend(this,dhtmlx.SelectionModel),dhtmlx.extend(this,dhtmlx.MouseEvents),dhtmlx.extend(this,dhtmlx.KeyEvents),dhtmlx.extend(this,dhtmlx.EditAbility),dhtmlx.extend(this,dhtmlx.DataMove),dhtmlx.extend(this,dhtmlx.DragItem),dhtmlx.extend(this,dhtmlx.DataProcessor),dhtmlx.extend(this,dhtmlx.AutoTooltip),dhtmlx.extend(this,dhtmlx.Destruction),this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this)),this._parseSettings(a,{drag:!1,edit:!1,select:"multiselect",type:"default"}),"auto"==this._settings.height||this._settings.renderAll||dhtmlx.extend(this,dhtmlx.VirtualRenderStack),this.data.provideApi(this,!0),this.config.autowidth&&(this.attachEvent("onBeforeRender",function(){this.type.width=Math.floor(this._dataobj.scrollWidth/(1*this.config.autowidth||1))-2*this.type.padding-2*this.type.margin-2*this.type.border,this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type)),this.type._item_end=this.template_item_end(this.type)}),dhtmlx.event(window,"resize",function(){this.refresh()},this)),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this)},dhtmlXDataView.prototype={bind:function(){dhtmlx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhtmlx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(e,h){var g=this._locateHTML(e.target);if(this.type.drag_marker&&(this._drag_marker&&(this._drag_marker.style.backgroundImage="",this._drag_marker.style.backgroundRepeat=""),g&&(g.style.backgroundImage="url("+(dhtmlx.image_path||"")+this.type.drag_marker+")",g.style.backgroundRepeat="no-repeat",this._drag_marker=g)),g&&this._settings.auto_scroll){var a=g.offsetTop,l=g.offsetHeight,c=this._obj.scrollTop,m=this._obj.offsetHeight;0<=a-l&&a-.75*l<c?c=Math.max(a-l,0):c+m<a+l/.75&&(c+=l),this._obj.scrollTop=c}return!0},_id:"dhx_f_id",on_click:{dhx_dataview_item:function(a,c){this.stopEdit(!1,c)&&this._settings.select&&("multiselect"==this._settings.select?this.select(c,a.ctrlKey,a.shiftKey):this.select(c))}},on_dblclick:{dhx_dataview_item:function(a,c){this._settings.edit&&this.edit(c)}},on_mouse_move:{},types:{default:{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),width:210,height:115,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}' style='width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")},dhtmlx.compat("layout"),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachDataView=function(a){this.callEvent("_onBeforeContentAttach",["dataview"]);var c=document.createElement("DIV");return c.style.width="100%",c.style.height="100%",c.style.position="relative",c.style.overflow="hidden",this._attachObject(c),void 0===a&&(a={}),c.id="DataViewObject_"+(new Date).getTime(),a.container=c.id,a.skin=this.conf.skin,this.dataType="dataview",this.dataObj=new dhtmlXDataView(a),this.dataObj.setSizes=function(){this.render()},c=null,this.callEvent("_onContentAttach",[]),this.dataObj}),dhtmlXList=function(a){this.name="List",dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(a,"dhx_list"),dhtmlx.extend(this,dhtmlx.AtomDataLoader),dhtmlx.extend(this,dhtmlx.DataLoader),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.RenderStack),dhtmlx.extend(this,dhtmlx.SelectionModel),dhtmlx.extend(this,dhtmlx.MouseEvents),dhtmlx.extend(this,dhtmlx.KeyEvents),dhtmlx.extend(this,dhtmlx.EditAbility),dhtmlx.extend(this,dhtmlx.DataMove),dhtmlx.extend(this,dhtmlx.DragItem),dhtmlx.extend(this,dhtmlx.DataProcessor),dhtmlx.extend(this,dhtmlx.AutoTooltip),dhtmlx.extend(this,dhtmlx.Destruction),this._getDimension=function(){var c=this.type,e=2*(c.margin||0);return{x:c.width+e,y:c.height+e}},this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this)),this._parseSettings(a,{drag:!1,edit:!1,select:"multiselect",type:"default"}),this.data.provideApi(this,!0),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this)},dhtmlXList.prototype={bind:function(){dhtmlx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhtmlx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(e,h){var g=this._locateHTML(e.target);if(g&&this._settings.auto_scroll){var a=g.offsetTop,l=g.offsetHeight,c=this._obj.scrollTop,m=this._obj.offsetHeight;0<=a-l&&a-.75*l<c?c=Math.max(a-l,0):c+m<a+l/.75&&(c+=l),this._obj.scrollTop=c}return!0},_id:"dhx_f_id",on_click:{dhx_list_item:function(a,c){this.stopEdit(!1,c)&&this._settings.select&&("multiselect"==this._settings.select?this.select(c,a.ctrlKey,a.shiftKey):this.select(c))}},on_dblclick:{dhx_list_item:function(a,c){this._settings.edit&&this.edit(c)}},on_mouse_move:{},types:{default:{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),height:50,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_list_item dhx_list_{obj.css}_item{-obj.$selected?_selected:}' style='width:100%; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")},dhtmlx.compat("layout"),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachList=function(a){this.callEvent("_onBeforeContentAttach",["list"]);var c=document.createElement("DIV");return c.style.width="100%",c.style.height="100%",c.style.position="relative",c.style.overflowX="hidden",this._attachObject(c),void 0===a&&(a={}),c.id="ListObject_"+(new Date).getTime(),a.container=c.id,a.skin=this.conf.skin,this.dataType="list",this.dataObj=new dhtmlXList(a),this.dataObj.setSizes=function(){this.render()},c=null,this.callEvent("_onContentAttach",[]),this.dataObj}),xmlPointer.prototype={text:function(){return _isFF?(new XMLSerializer).serializeToString(this.d):this.d.xml},get:function(a){return this.d.getAttribute(a)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.wholeText||this.d.firstChild.data:""},each:function(g,m,l,h){var e=this.d.childNodes,n=new xmlPointer;if(e.length)for(h=h||0;h<e.length;h++)if(e[h].tagName==g&&(n.d=e[h],-1==m.apply(l,[n,h])))return},get_all:function(){for(var e={},c=this.d.attributes,g=0;g<c.length;g++)e[c[g].name]=c[g].value;return e},sub:function(g){var e=this.d.childNodes,l=new xmlPointer;if(e.length)for(var h=0;h<e.length;h++)if(e[h].tagName==g)return l.d=e[h],l},up:function(a){return new xmlPointer(this.d.parentNode)},set:function(a,c){this.d.setAttribute(a,c)},clone:function(a){return new xmlPointer(this.d)},sub_exists:function(e){var c=this.d.childNodes;if(c.length)for(var g=0;g<c.length;g++)if(c[g].tagName==e)return!0;return!1},through:function(e,m,r,h,s){var n=this.d.childNodes;if(n.length)for(var g=0;g<n.length;g++){if(n[g].tagName==e&&null!=n[g].getAttribute(m)&&""!=n[g].getAttribute(m)&&(!r||n[g].getAttribute(m)==r)){var l=new xmlPointer(n[g]);h.apply(s,[l,g])}var o=this.d;this.d=n[g],this.through(e,m,r,h,s),this.d=o}}},dhtmlXTreeObject.prototype.setDataMode=function(a){this._datamode=a},dhtmlXTreeObject.prototype._doContClick=function(m,a){if(!a&&2!=m.button)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(var c=_isIE?m.srcElement:m.target;c&&"BODY"!=c.tagName&&!c.parentObject;)c=c.parentNode;if(!c||!c.parentObject)return!0;var h=c.parentObject;if(this.callEvent("onRightClick",[h.id,m])||((m.srcElement||m.target).oncontextmenu=function(r){return!((r||event).cancelBubble=!0)}),this._acMenu=h.cMenu||this.cMenu,this._acMenu){if(!this.callEvent("onBeforeContextMenu",[h.id]))return!0;if(_isMacOS||((m.srcElement||m.target).oncontextmenu=function(r){return!((r||event).cancelBubble=!0)}),this._acMenu.showContextMenu){var g=window.document.documentElement,e=window.document.body,n=new Array(g.scrollLeft||e.scrollLeft,g.scrollTop||e.scrollTop);if(_isIE)var o=m.clientX+n[0],l=m.clientY+n[1];else o=m.pageX,l=m.pageY;this._acMenu.showContextMenu(o-1,l-1),this.contextID=h.id,m.cancelBubble=!0,this._acMenu._skip_hide=!0}else c.contextMenuId=h.id,c.contextMenu=this._acMenu,c.a=this._acMenu._contextStart,c.a(c,m),c.a=null;return!1}return!0},dhtmlXTreeObject.prototype.enableIEImageFix=function(a){a?(this._getImg=function(){var c=document.createElement("DIV");return c.innerHTML="&nbsp;",c.className="dhx_bg_img_fix",c},this._setSrc=function(e,c){e.style.backgroundImage="url("+c+")"},this._getSrc=function(c){var e=c.style.backgroundImage;return e.substr(4,e.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(c){return document.createElement(c==this.rootId?"div":"img")},this._setSrc=function(e,c){e.src=c},this._getSrc=function(c){return c.src})},dhtmlXTreeObject.prototype.destructor=function(){for(var c in this._idpull){var e=this._idpull[c];e&&(e.parentObject=null,e.treeNod=null,e.childNodes=null,e.span=null,e.tr.nodem=null,e.tr=null,e.htmlNode.objBelong=null,e.htmlNode=null,this._idpull[c]=null)}for(var c in this.parentObject.innerHTML="",this.allTree.onselectstart=null,this.allTree.oncontextmenu=null,this.allTree.onmousedown=null,this)this[c]=null},cObject.prototype=new Object,cObject.prototype.clone=function(){function a(){}return a.prototype=this,new a},dhtmlXTreeObject.prototype._globalIdStorageAdd=function(c,a){return this._globalIdStorageFind(c,1,1)?(c=c+"_"+(new Date).valueOf(),this._globalIdStorageAdd(c,a)):(this._idpull[c]=a,this._pullSize++,c)},dhtmlXTreeObject.prototype._globalIdStorageSub=function(a){this._idpull[a]&&(this._unselectItem(this._idpull[a]),this._idpull[a]=null,this._pullSize--),this._locker&&this._locker[a]&&(this._locker[a]=!1)},dhtmlXTreeObject.prototype._globalIdStorageFind=function(l,a,e,g){var h=this._idpull[l];if(h){if(h.unParsed&&!e&&this.reParse(h,0),this._srnd&&!h.htmlNode&&this._buildSRND(h,e),g&&this._edsbpsA)for(var c=0;c<this._edsbpsA.length;c++)if(this._edsbpsA[c][2]==l)return dhx4.callEvent("ongetItemError",["Requested item still in parsing process.",l]),null;return h}return this.slowParse&&0!=l&&!a?this.preParse(l):null},dhtmlXTreeObject.prototype._getSubItemsXML=function(a){var c=[];return a.each("item",function(e){c.push(e.get("id"))},this),c.join(this.dlmtr)},dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(a){this.slowParse=dhx4.s2b(a)},dhtmlXTreeObject.prototype.findXML=function(c,a,e){},dhtmlXTreeObject.prototype._getAllCheckedXML=function(c,a,g){var e=[];return 2==g&&c.through("item","checked",-1,function(h){e.push(h.get("id"))},this),1==g&&c.through("item","id",null,function(h){h.get("checked")&&-1!=h.get("checked")&&e.push(h.get("id"))},this),0==g&&c.through("item","id",null,function(h){h.get("checked")&&0!=h.get("checked")||e.push(h.get("id"))},this),e.length?a+(a?this.dlmtr:"")+e.join(this.dlmtr):a||""},dhtmlXTreeObject.prototype._setSubCheckedXML=function(a,c){var e=a?"1":"";c.through("item","id",null,function(g){g.get("disabled")&&0!=g.get("disabled")||g.set("checked",e)},this)},dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(e,a){var g=[],c=function(h){h.sub_exists("item")?h.each("item",c,this):g.push(h.get("id"))};return c(e),g.join(",")},dhtmlXTreeObject.prototype._getAllFatItemsXML=function(e,a){var g=[],c=function(h){h.sub_exists("item")&&(g.push(h.get("id")),h.each("item",c,this))};return c(e),g.join(",")},dhtmlXTreeObject.prototype._getAllSubItemsXML=function(e,c,a){c=[];return a.through("item","id",null,function(g){c.push(g.get("id"))},this),c.join(",")},dhtmlXTreeObject.prototype.reParse=function(e){this.parsCount||this.callEvent("onXLS",[this,e.id]),this.xmlstate=1;var g=e.unParsed;e.unParsed=0,this.XMLloadingWarning=1;var a=this.parsingOn,m=this.waitUpdateXML,o=this.parsedArray;this.parsedArray=new Array,this.waitUpdateXML=!1,this.parsingOn=e.id,this.parsedArray=new Array,this.setCheckList="",this._parse(g,e.id,2);for(var r=this.setCheckList.split(this.dlmtr),h=0;h<this.parsedArray.length;h++)e.htmlNode.childNodes[0].appendChild(this.parsedArray[h]);g.get("order")&&"none"!=g.get("order")&&this._reorderBranch(e,g.get("order"),!0),this.oldsmcheck=this.smcheck,this.smcheck=!1;for(var c=0;c<r.length;c++)r[c]&&this.setCheck(r[c],1);return this.smcheck=this.oldsmcheck,this.parsingOn=a,this.waitUpdateXML=m,this.parsedArray=o,this.XMLloadingWarning=0,this._redrawFrom(this,e),this._srnd&&!e._sready&&this.prepareSR(e.id),!(this.xmlstate=0)},dhtmlXTreeObject.prototype.preParse=function(c){if(!c||!this._p)return null;var a=!1;if(this._p.clone().through("item","id",c,function(g){return this._globalIdStorageFind(g.up().get("id")),a=!0},this),a){var e=this._globalIdStorageFind(c,!0,!1);e||dhx4.callEvent("ongetItemError",["The item "+c+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",c])}return e},dhtmlXTreeObject.prototype._escape=function(a){switch(this.utfesc){case"none":return a;case"utf8":return encodeURIComponent(a);default:return escape(a)}},dhtmlXTreeObject.prototype._drawNewTr=function(h,e){var g=document.createElement("tr"),c=document.createElement("td"),a=document.createElement("td");return c.appendChild(document.createTextNode(" ")),a.colSpan=3,a.appendChild(h),g.appendChild(c),g.appendChild(a),g},dhtmlXTreeObject.prototype.parse=function(g,e,a){if("string"==typeof e&&(a=e,e=null),"json"===a)return this._loadJSONObject(g,e);if("csv"===a)return this._loadCSVString(g,e);if("jsarray"===a)return this._loadJSArray(g,e);this.parsCount||this.callEvent("onXLS",[this,null]),this.xmlstate=1,this.XMLLoader({responseXML:dhx4.ajax.parse(g)},e)},dhtmlXTreeObject.prototype.loadXMLString=function(){return window.console&&window.console.info&&window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.parse.apply(this,arguments)},dhtmlXTreeObject.prototype.load=function(c,h,e){if("string"==typeof h&&(e=h,h=null),"json"===(e=e||this._datamode))return this._loadJSON(c,h);if("csv"===e)return this._loadCSV(c,h);if("jsarray"===e)return this._loadJSArrayFile(xmlString,h);this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1,this.XMLLoader=this._parseXMLTree;var a=this;dhx4.ajax.get(c,function(l){a.XMLLoader(l.xmlDoc,h),a=null})},dhtmlXTreeObject.prototype.loadXML=function(){return window.console&&window.console.info&&window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.load.apply(this,arguments)},dhtmlXTreeObject.prototype._attachChildNode=function(m,l,g,o,E,D,C,r,e,v,w){v&&v.parentObject&&(m=v.parentObject),0==m.XMLload&&this.XMLsource&&!this.XMLloadingWarning&&(m.XMLload=1,this._loadDynXML(m.id));var u,s=m.childsCount,F=m.childNodes;if(w&&w.tr.previousSibling&&(w.tr.previousSibling.previousSibling?v=w.tr.previousSibling.nodem:r=r.replace("TOP","")+",TOP"),v){var h,A;for(h=0;h<s;h++)if(F[h]==v){for(A=s;A!=h;A--)F[1+A]=F[A];break}s=++h}if(r)for(var x=r.split(","),y=0;y<x.length;y++)switch(x[y]){case"TOP":for(0<m.childsCount&&((v=new Object).tr=m.childNodes[0].tr.previousSibling),m._has_top=!0,h=s;0<h;h--)F[h]=F[h-1];s=0}(u=this._idpull[l])&&-1==u.span||(u=F[s]=new dhtmlXTreeItemObject(l,g,m,this,o,1),l=F[s].id,m.childsCount++),u.htmlNode||(u.label=g,u.htmlNode=this._createItem(this.checkBoxOff?1:0,u),u.htmlNode.objBelong=u),E&&(u.images[0]=E),D&&(u.images[1]=D),C&&(u.images[2]=C);var c=this._drawNewTr(u.htmlNode);if((this.XMLloadingWarning||this._hAdI)&&(u.htmlNode.parentNode.parentNode.style.display="none"),v&&v.tr&&v.tr.nextSibling?m.htmlNode.childNodes[0].insertBefore(c,v.tr.nextSibling):this.parsingOn==m.id?this.parsedArray[this.parsedArray.length]=c:m.htmlNode.childNodes[0].appendChild(c),v&&!v.span&&(v=null),this.XMLsource&&(u.XMLload=e&&0!=e?0:1),(u.tr=c).nodem=u,0==m.itemId&&(c.childNodes[0].className="hiddenRow"),(m._r_logic||this._frbtr)&&this._setSrc(u.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]),r)for(x=r.split(","),y=0;y<x.length;y++)switch(x[y]){case"SELECT":this.selectItem(l,!1);break;case"CALL":this.selectItem(l,!0);break;case"CHILD":u.XMLload=0;break;case"CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+l:this.setCheck(l,1);break;case"HCHECKED":this._setCheck(u,"unsure");break;case"OPEN":u.openMe=1}if(!this.XMLloadingWarning&&(this._getOpenState(m)<0&&!this._hAdI&&this.openItem(m.id),v&&(this._correctPlus(v),this._correctLine(v)),this._correctPlus(m),this._correctLine(m),this._correctPlus(u),2<=m.childsCount&&(this._correctPlus(F[m.childsCount-2]),this._correctLine(F[m.childsCount-2])),2!=m.childsCount&&this._correctPlus(F[0]),this.tscheck&&this._correctCheckStates(m),this._onradh))if(1==this.xmlstate){var a=this.onXLE;this.onXLE=function(n){this._onradh(l),a&&a(n)}}else this._onradh(l);return u},dhtmlXTreeObject.prototype.enableContextMenu=function(a){a&&(this.cMenu=a)},dhtmlXTreeObject.prototype.setItemContextMenu=function(h,g){for(var a=h.toString().split(this.dlmtr),e=0;e<a.length;e++){var c=this._globalIdStorageFind(a[e]);c&&(c.cMenu=g)}},dhtmlXTreeObject.prototype.insertNewItem=function(g,n,r,e,m,l,h,c,a){var s=this._globalIdStorageFind(g);if(!s)return-1;var o=this._attachChildNode(s,n,r,e,m,l,h,c,a);return this._idpull[this.rootId].XMLload||(this._idpull[this.rootId].XMLload=1),!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(s),o},dhtmlXTreeObject.prototype.insertNewChild=function(g,n,o,e,m,l,h,c,a){return this.insertNewItem(g,n,o,e,m,l,h,c,a)},dhtmlXTreeObject.prototype._parseXMLTree=function(a,e){var c=new xmlPointer(dhx4.ajax.xmltop("tree",a));this._parse(c),this._p=c,e&&e.call(this,a)},dhtmlXTreeObject.prototype._parseItem=function(l,r,h,n){var e;if(!this._srnd||this._idpull[e=l.get("id")]&&this._idpull[e].span){var m=l.get_all();if("object"!=typeof this.waitUpdateXML||this.waitUpdateXML[m.id]){null!==m.text&&void 0!==m.text||(m.text=l.sub("itemtext"),m.text&&(m.text=m.text.content()));var u=[];if(m.select&&u.push("SELECT"),m.top&&u.push("TOP"),m.call&&(this.nodeAskingCall=m.id),-1==m.checked?u.push("HCHECKED"):m.checked&&u.push("CHECKED"),m.open&&u.push("OPEN"),this.waitUpdateXML)if(this._globalIdStorageFind(m.id))var o=this.updateItem(m.id,m.text,m.im0,m.im1,m.im2,m.checked,m.child);else{0==this.npl?u.push("TOP"):h=r.childNodes[this.npl];o=this._attachChildNode(r,m.id,m.text,0,m.im0,m.im1,m.im2,u.join(","),m.child,0,h);m.id=o.id,h=null}else o=this._attachChildNode(r,m.id,m.text,0,m.im0,m.im1,m.im2,u.join(","),m.child,n||0,h);if(m.tooltip&&(o.span.parentNode.parentNode.title=m.tooltip),m.style&&(o.span.style.cssText?o.span.style.cssText+=";"+m.style:o.span.setAttribute("style",o.span.getAttribute("style")+"; "+m.style)),m.radio&&(o._r_logic=!0),m.nocheckbox)o.span.parentNode.previousSibling.previousSibling.style.display="none",o.nocheckbox=!0;m.disabled&&(null!=m.checked&&this._setCheck(o,m.checked),this.disableCheckbox(o,1)),o._acc=m.child||0,this.parserExtension&&this.parserExtension._parseExtension.call(this,l,m,r?r.id:0),this.setItemColor(o,m.aCol,m.sCol),"1"==m.locked&&this.lockItem(o.id,!0,!0),(m.imwidth||m.imheight)&&this.setIconSize(m.imwidth,m.imheight,o),"0"!=m.closeable&&"1"!=m.closeable||this.setItemCloseable(o,m.closeable);var g="";m.topoffset&&this.setItemTopOffset(o,m.topoffset),this.slowParse&&"object"!=typeof this.waitUpdateXML?(!o.childsCount&&l.sub_exists("item")&&(o.unParsed=l.clone()),l.each("userdata",function(a){this.setUserData(m.id,a.get("name"),a.content())},this)):l.sub_exists("item")&&(g=this._parse(l,m.id,1)),""!=g&&(this.nodeAskingCall=g),l.each("userdata",function(a){this.setUserData(l.get("id"),a.get("name"),a.content())},this)}else this._parse(l,m.id,1)}else this._addItemSRND(r.id,e,l)},dhtmlXTreeObject.prototype._parse=function(e,l,a,c){if(this._srnd&&!this.parentObject.offsetHeight){var w=this;return window.setTimeout(function(){w._parse(e,l,a,c)},100)}if(e.exists()){if(this.skipLock=!0,!l){l=e.get("id"),this._dynDeleteBranches[l]&&(this.deleteChildItems(l),this._dynDeleteBranches[l]--,this._dynDeleteBranches[l]||delete this._dynDeleteBranches[l]);var u=e.get("dhx_security");u&&(dhtmlx.security_key=u),e.get("radio")&&(this.htmlNode._r_logic=!0),this.parsingOn=l,this.parsedArray=new Array,this.setCheckList="",this.nodeAskingCall=""}var v=this._globalIdStorageFind(l);if(!v)return dhx4.callEvent("onDataStructureError",["XML refers to not existing parent"]);if(this.parsCount=this.parsCount?this.parsCount+1:1,this.XMLloadingWarning=1,!v.childsCount||c||this._edsbps||v._has_top)m=0;else var m=0;if(this.npl=0,e.each("item",function(x,n){if(v.XMLload=1,this._parseItem(x,v,0,m),this._edsbps&&this.npl==this._edsbpsC)return this._distributedStart(e,n+1,l,a,v.childsCount),-1;this.npl++},this,c),!a){if(e.each("userdata",function(n){this.setUserData(e.get("id"),n.get("name"),n.content())},this),v.XMLload=1,this.waitUpdateXML){this.waitUpdateXML=!1;for(var h=v.childsCount-1;0<=h;h--)v.childNodes[h]._dmark&&this.deleteItem(v.childNodes[h].id)}for(this._globalIdStorageFind(this.parsingOn),h=0;h<this.parsedArray.length;h++)v.htmlNode.childNodes[0].appendChild(this.parsedArray[h]);this.parsedArray=[],this.lastLoadedXMLId=l,this.XMLloadingWarning=0;for(var s=this.setCheckList.split(this.dlmtr),g=0;g<s.length;g++)s[g]&&this.setCheck(s[g],1);this.XMLsource&&this.tscheck&&this.smcheck&&v.id!=this.rootId&&(0===v.checkstate?this._setSubChecked(0,v):1===v.checkstate&&this._setSubChecked(1,v)),this._redrawFrom(this,null,c),e.get("order")&&"none"!=e.get("order")&&this._reorderBranch(v,e.get("order"),!0),""!=this.nodeAskingCall&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]),this._branchUpdate&&this._branchUpdateNext(e)}if(1==this.parsCount){if(this.parsingOn=null,this._srnd&&v.id!=this.rootId&&(this.prepareSR(v.id),this.XMLsource&&this.openItem(v.id)),e.through("item","open",null,function(n){this.openItem(n.get("id"))},this),!this._edsbps||!this._edsbpsA.length){var o=this;window.setTimeout(function(){o.callEvent("onXLE",[o,l])},1),this.xmlstate=0}this.skipLock=!1}this.parsCount--;o=this;return this._edsbps&&window.setTimeout(function(){o._distributedStep(l)},this._edsbpsD),!a&&this.onXLE&&this.onXLE(this,l),this.nodeAskingCall}},dhtmlXTreeObject.prototype._branchUpdateNext=function(a){a.each("item",function(g){var e=g.get("id");this._idpull[e]&&!this._idpull[e].XMLload||(this._branchUpdate++,this.smartRefreshItem(g.get("id"),g))},this),this._branchUpdate--},dhtmlXTreeObject.prototype.checkUserData=function(c,e){if(1==c.nodeType&&"userdata"==c.tagName){var a=c.getAttribute("name");a&&c.childNodes[0]&&this.setUserData(e,a,c.childNodes[0].data)}},dhtmlXTreeObject.prototype._redrawFrom=function(n,c,m,e){if(c)h=c;else{var h=n._globalIdStorageFind(n.lastLoadedXMLId);if(n.lastLoadedXMLId=-1,!h)return 0}for(var l=0,g=m?m-1:0;g<h.childsCount;g++)if(this._branchUpdate&&1!=this._getOpenState(h)||c&&1!=e||(h.childNodes[g].htmlNode.parentNode.parentNode.style.display=""),1==h.childNodes[g].openMe&&(this._openItem(h.childNodes[g]),h.childNodes[g].openMe=0),n._redrawFrom(n,h.childNodes[g]),null!=this.childCalc){if((h.childNodes[g].unParsed||!h.childNodes[g].XMLload&&this.XMLsource)&&(h.childNodes[g]._acc?h.childNodes[g].span.innerHTML=h.childNodes[g].label+this.htmlcA+h.childNodes[g]._acc+this.htmlcB:h.childNodes[g].span.innerHTML=h.childNodes[g].label),h.childNodes[g].childNodes.length&&this.childCalc){var a;if(1==this.childCalc&&(h.childNodes[g].span.innerHTML=h.childNodes[g].label+this.htmlcA+h.childNodes[g].childsCount+this.htmlcB),2==this.childCalc)(a=h.childNodes[g].childsCount-(h.childNodes[g].pureChilds||0))&&(h.childNodes[g].span.innerHTML=h.childNodes[g].label+this.htmlcA+a+this.htmlcB),h.pureChilds?h.pureChilds++:h.pureChilds=1;if(3==this.childCalc&&(h.childNodes[g].span.innerHTML=h.childNodes[g].label+this.htmlcA+h.childNodes[g]._acc+this.htmlcB),4==this.childCalc)(a=h.childNodes[g]._acc)&&(h.childNodes[g].span.innerHTML=h.childNodes[g].label+this.htmlcA+a+this.htmlcB)}else 4==this.childCalc&&l++;l+=h.childNodes[g]._acc,3==this.childCalc&&l++}h.unParsed||!h.XMLload&&this.XMLsource||(h._acc=l),n._correctLine(h),n._correctPlus(h),this.childCalc&&!c&&n._fixChildCountLabel(h)},dhtmlXTreeObject.prototype._createSelf=function(){var a=document.createElement("div");return a.className="containerTableStyle",a.style.width=this.width,a.style.height=this.height,this.parentObject.appendChild(a),a},dhtmlXTreeObject.prototype._xcloseAll=function(c){if(!c.unParsed){if(this.rootId!=c.id){if(!c.htmlNode)return;for(var g=c.htmlNode.childNodes[0].childNodes,a=g.length,e=1;e<a;e++)g[e].style.display="none";this._correctPlus(c)}for(e=0;e<c.childsCount;e++)c.childNodes[e].childsCount&&this._xcloseAll(c.childNodes[e])}},dhtmlXTreeObject.prototype._xopenAll=function(a){this._HideShow(a,2);for(var c=0;c<a.childsCount;c++)this._xopenAll(a.childNodes[c])},dhtmlXTreeObject.prototype._correctPlus=function(c){if(c.htmlNode){var e=c.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,h=c.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],a=this.lineArray;if(this.XMLsource&&!c.XMLload){a=this.plusArray;if(this._setSrc(h,this.iconURL+c.images[2]),this._txtimg)return e.innerHTML="[+]"}else if(c.childsCount||c.unParsed)if(c.htmlNode.childNodes[0].childNodes[1]&&"none"!=c.htmlNode.childNodes[0].childNodes[1].style.display){if(!c.wsign)a=this.minusArray;if(this._setSrc(h,this.iconURL+c.images[1]),this._txtimg)return e.innerHTML="[-]"}else{if(!c.wsign)a=this.plusArray;if(this._setSrc(h,this.iconURL+c.images[2]),this._txtimg)return e.innerHTML="[+]"}else this._setSrc(h,this.iconURL+c.images[0]);var g=2;c.treeNod.treeLinesOn?(c.parentObject&&(g=this._getCountStatus(c.id,c.parentObject)),this._setSrc(e,this.imPath+a[g])):this._setSrc(e,this.imPath+a[3])}},dhtmlXTreeObject.prototype._correctLine=function(c){if(c.htmlNode){var a=c.parentObject;if(a)if(0!=this._getLineStatus(c.id,a)&&this.treeLinesOn)for(e=1;e<=c.childsCount&&c.htmlNode.childNodes[0].childNodes[e];e++)c.htmlNode.childNodes[0].childNodes[e].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")",c.htmlNode.childNodes[0].childNodes[e].childNodes[0].style.backgroundRepeat="repeat-y";else for(var e=1;e<=c.childsCount&&c.htmlNode.childNodes[0].childNodes[e];e++)c.htmlNode.childNodes[0].childNodes[e].childNodes[0].style.backgroundImage="",c.htmlNode.childNodes[0].childNodes[e].childNodes[0].style.backgroundRepeat=""}},dhtmlXTreeObject.prototype._getCountStatus=function(c,a){return a.childsCount<=1?a.id==this.rootId?4:0:a.childNodes[0].id==c?a.id==this.rootId?2:1:a.childNodes[a.childsCount-1].id==c?0:1},dhtmlXTreeObject.prototype._getLineStatus=function(c,a){return a.childNodes[a.childsCount-1].id==c?0:1},dhtmlXTreeObject.prototype._HideShow=function(c,h){if(!this._locker||this.skipLock||!this._locker[c.id]){if(this.XMLsource&&!c.XMLload){if(1==h)return;return c.XMLload=1,void this._loadDynXML(c.id)}c.unParsed&&this.reParse(c);var g=c.htmlNode.childNodes[0].childNodes,a=g.length;if(1<a){"none"==g[1].style.display&&1!=h||2==h?nodestyle="":(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none");for(var e=1;e<a;e++)g[e].style.display=nodestyle}this._correctPlus(c)}},dhtmlXTreeObject.prototype._getOpenState=function(a){if(!a.htmlNode)return 0;var c=a.htmlNode.childNodes[0].childNodes;return c.length<=1?0:"none"!=c[1].style.display?1:-1},dhtmlXTreeObject.prototype.onRowClick2=function(){var a=this.parentObject.treeNod;return a.callEvent("onDblClick",[this.parentObject.id,a])&&(this.parentObject.closeble&&"0"!=this.parentObject.closeble?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2),a.checkEvent("onOpenEnd")&&(a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)]))),!1},dhtmlXTreeObject.prototype.onRowClick=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onOpenStart",[this.parentObject.id,a._getOpenState(this.parentObject)]))return 0;this.parentObject.closeble&&"0"!=this.parentObject.closeble?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2),a.checkEvent("onOpenEnd")&&(a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)]))},dhtmlXTreeObject.prototype._epnFHe=function(c,e,a){e!=this.rootId&&this.callEvent("onOpenEnd",[e,c.getOpenState(e)]),c.onXLE=c._oie_onXLE.pop(),a||c._oie_onXLE.length||c.onXLE&&c.onXLE(c,e)},dhtmlXTreeObject.prototype.onRowClickDown=function(c){c=c||window.event,this.parentObject.treeNod._selectItem(this.parentObject,c)},dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var c=new Array,a=0;a<this._selected.length;a++)c[a]=this._selected[a].id;return c.join(this.dlmtr)},dhtmlXTreeObject.prototype._selectItem=function(m,n){if(this.checkEvent("onSelect")&&(this._onSSCFold=this.getSelectedItemId()),this._amsel&&n&&(n.ctrlKey||n.metaKey||n.shiftKey)||this._unselectItems(),m.i_sel&&this._amsel&&n&&(n.ctrlKey||n.metaKey))this._unselectItem(m);else if(!(m.i_sel||this._amselS&&0!=this._selected.length&&this._selected[0].parentObject!=m.parentObject))if(this._amsel&&n&&n.shiftKey&&0!=this._selected.length&&this._selected[this._selected.length-1].parentObject==m.parentObject){var h=this._getIndex(this._selected[this._selected.length-1]),g=this._getIndex(m);if(g<h){var r=h;h=g,g=r}for(var l=h;l<=g;l++)m.parentObject.childNodes[l].i_sel||this._markItem(m.parentObject.childNodes[l])}else this._markItem(m);if(this.checkEvent("onSelect")){var o=this.getSelectedItemId();o!=this._onSSCFold&&this.callEvent("onSelect",[o])}},dhtmlXTreeObject.prototype._markItem=function(a){a.scolor&&(a.span.style.color=a.scolor),a.span.className="selectedTreeRow",a.span.parentNode.parentNode.className="selectedTreeRowFull",a.i_sel=!0,this._selected[this._selected.length]=a},dhtmlXTreeObject.prototype.getIndexById=function(c){var a=this._globalIdStorageFind(c);return a?this._getIndex(a):null},dhtmlXTreeObject.prototype._getIndex=function(a){for(var e=a.parentObject,c=0;c<e.childsCount;c++)if(e.childNodes[c]==a)return c},dhtmlXTreeObject.prototype._unselectItem=function(c){if(c&&c.i_sel){c.span.className="standartTreeRow",c.span.parentNode.parentNode.className="",c.acolor&&(c.span.style.color=c.acolor),c.i_sel=!1;for(var a=0;a<this._selected.length;a++)if(!this._selected[a].i_sel){this._selected.splice(a,1);break}}},dhtmlXTreeObject.prototype._unselectItems=function(){for(var a=0;a<this._selected.length;a++){var c=this._selected[a];c.span.className="standartTreeRow",c.span.parentNode.parentNode.className="",c.acolor&&(c.span.style.color=c.acolor),c.i_sel=!1}this._selected=new Array},dhtmlXTreeObject.prototype.onRowSelect=function(h,g,m){h=h||window.event;var c=this.parentObject;g&&(c=g.parentObject);var a=c.treeNod,l=a.getSelectedItemId();h&&h.skipUnSel||a._selectItem(c,h),m||(c.actionHandler?c.actionHandler(c.id,l):a.callEvent("onClick",[c.id,l]))},dhtmlXTreeObject.prototype._correctCheckStates=function(h){if(this.tscheck&&h&&h.id!=this.rootId){var e=h.childNodes,c=0,a=0;if(0!=h.childsCount){for(var g=0;g<h.childsCount;g++)if(!e[g].dscheck)if(0==e[g].checkstate)c=1;else{if(1!=e[g].checkstate){a=c=1;break}a=1}c&&a?this._setCheck(h,"unsure"):c?this._setCheck(h,!1):this._setCheck(h,!0),this._correctCheckStates(h.parentObject)}}},dhtmlXTreeObject.prototype.onCheckBoxClick=function(a){if(this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate]))return!!this.parentObject.dscheck||(this.treeNod.tscheck?1==this.parentObject.checkstate?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):1==this.parentObject.checkstate?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0),this.treeNod._correctCheckStates(this.parentObject.parentObject),this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate]))},dhtmlXTreeObject.prototype._createItem=function(u,s,n){var v=document.createElement("table");v.cellSpacing=0,v.cellPadding=0,v.border=0,this.hfMode&&(v.style.tableLayout="fixed"),v.style.margin=0,v.style.padding=0;var m=document.createElement("tbody"),r=document.createElement("tr"),g=document.createElement("td");if(g.className="standartTreeImage",this._txtimg){var h=document.createElement("div");g.appendChild(h),h.className="dhx_tree_textSign"}else{(h=this._getImg(s.id)).border="0","IMG"==h.tagName&&(h.align="absmiddle"),g.appendChild(h),h.style.padding=0,h.style.margin=0,h.style.width=this.def_line_img_x}var e=document.createElement("td"),o=this._getImg(this.cBROf?this.rootId:s.id);o.checked=0,this._setSrc(o,this.imPath+this.checkArray[0]),o.style.width="18px",o.style.height="18px",u||(e.style.display="none"),e.appendChild(o),this.cBROf||"IMG"!=o.tagName||(o.align="absmiddle"),o.onclick=this.onCheckBoxClick,o.treeNod=this,o.parentObject=s,window._KHTMLrv?e.width="16px":e.width="20px";var c=document.createElement("td");c.className="standartTreeImage";var l=this._getImg(this.timgen?s.id:this.rootId);l.onmousedown=this._preventNsDrag,l.ondragstart=this._preventNsDrag,l.border="0",this._aimgs&&(l.parentObject=s,"IMG"==l.tagName&&(l.align="absmiddle"),l.onclick=this.onRowSelect),n||this._setSrc(l,this.iconURL+this.imageArray[0]),c.appendChild(l),l.style.padding=0,l.style.margin=0,this.timgen?(c.style.width=l.style.width=this.def_img_x,l.style.height=this.def_img_y):(l.style.width="0px",l.style.height="0px",(_isOpera||window._KHTMLrv)&&(c.style.display="none"));var a=document.createElement("td");return a.className="dhxTextCell standartTreeRow",s.span=document.createElement("span"),s.span.className="standartTreeRow",this.mlitems?(s.span.style.width=this.mlitems,s.span.style.display="block"):a.noWrap=!0,dhx4.isIE8?a.style.width="99999px":window._KHTMLrv||(a.style.width="100%"),s.span.innerHTML=s.label,a.appendChild(s.span),a.parentObject=s,g.parentObject=s,a.onclick=this.onRowSelect,g.onclick=this.onRowClick,a.ondblclick=this.onRowClick2,this.ettip&&(r.title=s.label),this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(c,this),c.parentObject=s),this.dragger.addDraggableItem(a,this)),s.span.style.paddingLeft="5px",s.span.style.paddingRight="5px",a.style.verticalAlign="",a.style.fontSize="10pt",a.style.cursor=this.style_pointer,r.appendChild(g),r.appendChild(e),r.appendChild(c),r.appendChild(a),m.appendChild(r),v.appendChild(m),(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))&&(r.onmousemove=this._itemMouseIn,r[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut),v},dhtmlXTreeObject.prototype.setImagePath=function(a){this.imPath=a,this.iconURL=a},dhtmlXTreeObject.prototype.setIconPath=function(a){this.iconURL=a},dhtmlXTreeObject.prototype._getLeafCount=function(g){for(var e=0,c=0;c<g.childsCount;c++)0==g.childNodes[c].childsCount&&e++;return e},dhtmlXTreeObject.prototype._getChildCounterValue=function(c){var a=this._globalIdStorageFind(c);if(!a)return 0;if(a.unParsed||!a.XMLload&&this.XMLsource)return a._acc;switch(this.childCalc){case 1:return a.childsCount;case 2:return this._getLeafCount(a);case 3:case 4:return a._acc}},dhtmlXTreeObject.prototype._fixChildCountLabel=function(l,g){if(null!=this.childCalc)if(l.unParsed||!l.XMLload&&this.XMLsource)l._acc?l.span.innerHTML=l.label+this.htmlcA+l._acc+this.htmlcB:l.span.innerHTML=l.label;else switch(this.childCalc){case 1:0!=l.childsCount?l.span.innerHTML=l.label+this.htmlcA+l.childsCount+this.htmlcB:l.span.innerHTML=l.label;break;case 2:var h=this._getLeafCount(l);l.span.innerHTML=0!=h?l.label+this.htmlcA+h+this.htmlcB:l.label;break;case 3:if(0!=l.childsCount){for(var e=0,c=0;c<l.childsCount;c++)l.childNodes[c]._acc||(l.childNodes[c]._acc=0),e+=1*l.childNodes[c]._acc;e+=1*l.childsCount,l.span.innerHTML=l.label+this.htmlcA+e+this.htmlcB,l._acc=e}else l.span.innerHTML=l.label,l._acc=0;l.parentObject&&l.parentObject!=this.htmlNode&&this._fixChildCountLabel(l.parentObject);break;case 4:if(0!=l.childsCount){for(e=0,c=0;c<l.childsCount;c++)l.childNodes[c]._acc||(l.childNodes[c]._acc=1),e+=1*l.childNodes[c]._acc;l.span.innerHTML=l.label+this.htmlcA+e+this.htmlcB,l._acc=e}else l.span.innerHTML=l.label,l._acc=1;l.parentObject&&l.parentObject!=this.htmlNode&&this._fixChildCountLabel(l.parentObject)}},dhtmlXTreeObject.prototype.setChildCalcMode=function(a){switch(a){case"child":this.childCalc=1;break;case"leafs":this.childCalc=2;break;case"childrec":this.childCalc=3;break;case"leafsrec":this.childCalc=4;break;case"disabled":this.childCalc=null;break;default:this.childCalc=4}},dhtmlXTreeObject.prototype.setChildCalcHTML=function(c,a){this.htmlcA=c,this.htmlcB=a},dhtmlXTreeObject.prototype.setOnRightClickHandler=function(a){this.attachEvent("onRightClick",a)},dhtmlXTreeObject.prototype.setOnClickHandler=function(a){this.attachEvent("onClick",a)},dhtmlXTreeObject.prototype.setOnSelectStateChange=function(a){this.attachEvent("onSelect",a)},dhtmlXTreeObject.prototype.setXMLAutoLoading=function(a){this.XMLsource=a},dhtmlXTreeObject.prototype.setOnCheckHandler=function(a){this.attachEvent("onCheck",a)},dhtmlXTreeObject.prototype.setOnOpenHandler=function(a){this.attachEvent("onOpenStart",a)},dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)},dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)},dhtmlXTreeObject.prototype.setOnDblClickHandler=function(a){this.attachEvent("onDblClick",a)},dhtmlXTreeObject.prototype.openAllItems=function(c){var a=this._globalIdStorageFind(c);if(!a)return 0;this._xopenAll(a)},dhtmlXTreeObject.prototype.getOpenState=function(c){var a=this._globalIdStorageFind(c);return a?this._getOpenState(a):""},dhtmlXTreeObject.prototype.closeAllItems=function(c){c===window.undefined&&(c=this.rootId);var a=this._globalIdStorageFind(c);if(!a)return 0;this._xcloseAll(a),this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"},dhtmlXTreeObject.prototype.setUserData=function(g,c,e){var a=this._globalIdStorageFind(g,0,!0);a&&("hint"==c&&(a.htmlNode.childNodes[0].childNodes[0].title=e),void 0===a.userData["t_"+c]&&(a._userdatalist?a._userdatalist+=","+c:a._userdatalist=c),a.userData["t_"+c]=e)},dhtmlXTreeObject.prototype.getUserData=function(e,c){var a=this._globalIdStorageFind(e,0,!0);if(a)return a.userData["t_"+c]},dhtmlXTreeObject.prototype.getItemColor=function(e){var a=this._globalIdStorageFind(e);if(!a)return 0;var c=new Object;return a.acolor&&(c.acolor=a.acolor),a.scolor&&(c.scolor=a.scolor),c},dhtmlXTreeObject.prototype.setItemColor=function(e,c,g){if(e&&e.span)var a=e;else a=this._globalIdStorageFind(e);if(!a)return 0;a.i_sel?(g||c)&&(a.span.style.color=g||c):c&&(a.span.style.color=c),g&&(a.scolor=g),c&&(a.acolor=c)},dhtmlXTreeObject.prototype.getItemText=function(c){var a=this._globalIdStorageFind(c);return a?a.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML:0},dhtmlXTreeObject.prototype.getParentId=function(c){var a=this._globalIdStorageFind(c);return a&&a.parentObject?a.parentObject.id:""},dhtmlXTreeObject.prototype.changeItemId=function(c,e){if(c!=e){var a=this._globalIdStorageFind(c);if(!a)return 0;a.id=e,a.span.contextMenuId=e,this._idpull[e]=this._idpull[c],delete this._idpull[c]}},dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut(),this.nodeCut=(new Array).concat(this._selected);for(var a=0;a<this.nodeCut.length;a++){var c=this.nodeCut[a];c._cimgs=new Array,c._cimgs[0]=c.images[0],c._cimgs[1]=c.images[1],c._cimgs[2]=c.images[2],c.images[0]=c.images[1]=c.images[2]=this.cutImage,this._correctPlus(c)}},dhtmlXTreeObject.prototype.doPaste=function(e){var a=this._globalIdStorageFind(e);if(!a)return 0;for(var c=0;c<this.nodeCut.length;c++)this._checkPNodes(a,this.nodeCut[c])||this._moveNode(this.nodeCut[c],a);this.clearCut()},dhtmlXTreeObject.prototype.clearCut=function(){for(var a=0;a<this.nodeCut.length;a++){var c=this.nodeCut[a];c.images[0]=c._cimgs[0],c.images[1]=c._cimgs[1],c.images[2]=c._cimgs[2],this._correctPlus(c)}this.nodeCut=new Array},dhtmlXTreeObject.prototype._moveNode=function(a,c){if(1==this.dadmodec){var h=c;if(this.dadmodefix<0){for(;;){if(-1==(h=this._getPrevNode(h))){h=this.htmlNode;break}if(0==h.tr||""==h.tr.style.display||!h.parentObject)break}var g=h,e=c}else{h.tr&&h.tr.nextSibling&&h.tr.nextSibling.nodem&&this._getOpenState(h)<1?h=h.tr.nextSibling.nodem:-1==(h=this._getNextNode(h))&&(h=this.htmlNode);e=h,g=c}return this._getNodeLevel(g,0)>this._getNodeLevel(e,0)?this.dropLower?e.id!=this.rootId?this._moveNodeTo(a,e.parentObject,e):this._moveNodeTo(a,this.htmlNode,null):this._moveNodeTo(a,g.parentObject):this._moveNodeTo(a,e.parentObject,e)}return this._moveNodeTo(a,c)},dhtmlXTreeObject.prototype._fixNodesCollection=function(n,l){var c=0,m=n.childNodes,a=n.childsCount-1;if(l!=m[a]){for(var h=0;h<a;h++)m[h]==m[a]&&(m[h]=m[h+1],m[h+1]=m[a]);for(h=0;h<a+1;h++)if(c){var e=m[h];m[h]=c,c=e}else m[h]==l&&(c=m[h],m[h]=m[a])}},dhtmlXTreeObject.prototype._recreateBranch=function(l,n,h,a){var o="";if(h){for(c=0;c<n.childsCount&&n.childNodes[c]!=h;c++);0!=c?h=n.childNodes[c-1]:(o="TOP",h="")}var e=this._onradh;this._onradh=null;var m=this._attachChildNode(n,l.id,l.label,0,l.images[0],l.images[1],l.images[2],o,0,h);if(m._userdatalist=l._userdatalist,m.userData=l.userData.clone(),l._attrs)for(var g in m._attrs={},l._attrs)m._attrs[g]=l._attrs[g];m.XMLload=l.XMLload,e&&(this._onradh=e,this._onradh(m.id)),l.treeNod.dpcpy?l.treeNod._globalIdStorageFind(l.id):m.unParsed=l.unParsed,this._correctPlus(m);for(var c=0;c<l.childsCount;c++)this._recreateBranch(l.childNodes[c],m,0,1);return!a&&this.childCalc&&this._redrawFrom(this,n),m},dhtmlXTreeObject.prototype._moveNodeTo=function(u,w,s){if(u.treeNod._nonTrivialNode)return u.treeNod._nonTrivialNode(this,w,s,u);if(this._checkPNodes(w,u))return!1;if(w.mytype)var m=u.treeNod.lWin!=w.lWin;else m=u.treeNod.lWin!=w.treeNod.lWin;if(!this.callEvent("onDrag",[u.id,w.id,s?s.id:null,u.treeNod,w.treeNod]))return!1;0==w.XMLload&&this.XMLsource&&(w.XMLload=1,this._loadDynXML(w.id)),this.openItem(w.id);var e=u.treeNod,o=u.parentObject.childsCount,r=u.parentObject;if(m||e.dpcpy){var g=u.id;u=this._recreateBranch(u,w,s),e.dpcpy||e.deleteItem(g)}else{var h=w.childsCount,v=w.childNodes;0==h&&(w._open=!0),e._unselectItem(u),(v[h]=u).treeNod=w.treeNod,w.childsCount++;var n=this._drawNewTr(v[h].htmlNode);s?(w.htmlNode.childNodes[0].insertBefore(n,s.tr),this._fixNodesCollection(w,s),v=w.childNodes):(w.htmlNode.childNodes[0].appendChild(n),1==this.dadmode&&this._fixNodesCollection(w,s))}if(!e.dpcpy&&!m){var a=u.tr;if(document.all&&-1!=navigator.appVersion.search(/MSIE\ 5\.0/gi)?window.setTimeout(function(){a.parentNode.removeChild(a)},250):u.parentObject.htmlNode.childNodes[0].removeChild(u.tr),s&&w==u.parentObject)r.childNodes[r.childsCount-1]=0;else for(var l=0;l<r.childsCount;l++)if(r.childNodes[l].id==u.id){r.childNodes[l]=0;break}e._compressChildList(r.childsCount,r.childNodes),r.childsCount--}if(!m&&!e.dpcpy){if(e!=(((u.tr=n).nodem=u).parentObject=w).treeNod){if(u.treeNod._registerBranch(u,e))return;this._clearStyles(u),this._redrawFrom(this,u.parentObject),this._onradh&&this._onradh(u.id)}this._correctPlus(w),this._correctLine(w),this._correctLine(u),this._correctPlus(u),s?this._correctPlus(s):2<=w.childsCount&&(this._correctPlus(v[w.childsCount-2]),this._correctLine(v[w.childsCount-2])),this._correctPlus(v[w.childsCount-1]),this.tscheck&&this._correctCheckStates(w),e.tscheck&&e._correctCheckStates(r)}return 1<o&&(e._correctPlus(r.childNodes[o-2]),e._correctLine(r.childNodes[o-2])),e._correctPlus(r),e._correctLine(r),this._fixChildCountLabel(w),e._fixChildCountLabel(r),this.callEvent("onDrop",[u.id,w.id,s?s.id:null,e,w.treeNod]),u.id},dhtmlXTreeObject.prototype._clearStyles=function(a){if(a.htmlNode){var g=a.htmlNode.childNodes[0].childNodes[0].childNodes[1],c=g.nextSibling.nextSibling;a.span.innerHTML=a.label,a.i_sel=!1,a._aimgs&&this.dragger.removeDraggableItem(g.nextSibling),this.checkBoxOff?(g.childNodes[0].style.display="",g.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(g.childNodes[0],this.imPath+this.checkArray[a.checkstate])):g.style.display="none",(g.childNodes[0].treeNod=this).dragger.removeDraggableItem(c),this.dragAndDropOff&&this.dragger.addDraggableItem(c,this),this._aimgs&&this.dragger.addDraggableItem(g.nextSibling,this),c.childNodes[0].className="standartTreeRow",c.parentNode.className="",c.onclick=this.onRowSelect,c.ondblclick=this.onRowClick2,g.previousSibling.onclick=this.onRowClick,this._correctLine(a),this._correctPlus(a);for(var e=0;e<a.childsCount;e++)this._clearStyles(a.childNodes[e])}},dhtmlXTreeObject.prototype._registerBranch=function(c,a){a&&a._globalIdStorageSub(c.id),c.id=this._globalIdStorageAdd(c.id,c),c.treeNod=this;for(var e=0;e<c.childsCount;e++)this._registerBranch(c.childNodes[e],a);return 0},dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(a){this.tscheck=dhx4.s2b(a)},dhtmlXTreeObject.prototype.setOnMouseInHandler=function(a){this.ehlt=!0,this.attachEvent("onMouseIn",a)},dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(a){this.ehlt=!0,this.attachEvent("onMouseOut",a)},dhtmlXTreeObject.prototype.enableMercyDrag=function(a){this.dpcpy=dhx4.s2b(a)},dhtmlXTreeObject.prototype.enableTreeImages=function(a){this.timgen=dhx4.s2b(a)},dhtmlXTreeObject.prototype.enableFixedMode=function(a){this.hfMode=dhx4.s2b(a)},dhtmlXTreeObject.prototype.enableCheckBoxes=function(c,a){this.checkBoxOff=dhx4.s2b(c),this.cBROf=!(this.checkBoxOff||dhx4.s2b(a))},dhtmlXTreeObject.prototype.setStdImages=function(a,e,c){this.imageArray[0]=a,this.imageArray[1]=e,this.imageArray[2]=c},dhtmlXTreeObject.prototype.enableTreeLines=function(a){this.treeLinesOn=dhx4.s2b(a)},dhtmlXTreeObject.prototype.setImageArrays=function(g,a,l,h,e,c){switch(g){case"plus":this.plusArray[0]=a,this.plusArray[1]=l,this.plusArray[2]=h,this.plusArray[3]=e,this.plusArray[4]=c;break;case"minus":this.minusArray[0]=a,this.minusArray[1]=l,this.minusArray[2]=h,this.minusArray[3]=e,this.minusArray[4]=c}},dhtmlXTreeObject.prototype.openItem=function(c){this.skipLock=!0;var a=this._globalIdStorageFind(c);return a?this._openItem(a):0},dhtmlXTreeObject.prototype._openItem=function(a){var c=this._getOpenState(a);if(c<0||this.XMLsource&&!a.XMLload){if(!this.callEvent("onOpenStart",[a.id,c]))return 0;this._HideShow(a,2),this.checkEvent("onOpenEnd")&&(this.onXLE==this._epnFHe&&this._epnFHe(this,a.id,!0),this.xmlstate&&this.XMLsource?(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe):this.callEvent("onOpenEnd",[a.id,this._getOpenState(a)]))}else this._srnd&&this._HideShow(a,2);a.parentObject&&!this._skip_open_parent&&this._openItem(a.parentObject)},dhtmlXTreeObject.prototype.closeItem=function(c){if(this.rootId==c)return 0;this.skipLock=!0;var a=this._globalIdStorageFind(c);if(!a)return 0;a.closeble&&this._HideShow(a,1),this.skipLock=!1},dhtmlXTreeObject.prototype.getLevel=function(c){var a=this._globalIdStorageFind(c);return a?this._getNodeLevel(a,0):0},dhtmlXTreeObject.prototype.setItemCloseable=function(e,a){if(a=dhx4.s2b(a),e&&e.span)var c=e;else c=this._globalIdStorageFind(e);if(!c)return 0;c.closeble=a},dhtmlXTreeObject.prototype._getNodeLevel=function(a,c){return a.parentObject?this._getNodeLevel(a.parentObject,c+1):c},dhtmlXTreeObject.prototype.hasChildren=function(c){var a=this._globalIdStorageFind(c);return a?!(!this.XMLsource||a.XMLload)||a.childsCount:0},dhtmlXTreeObject.prototype._getLeafCount=function(g){for(var e=0,c=0;c<g.childsCount;c++)0==g.childNodes[c].childsCount&&e++;return e},dhtmlXTreeObject.prototype.setItemText=function(g,e,c){var a=this._globalIdStorageFind(g);if(!a)return 0;a.label=e,a.span.innerHTML=e,this.childCalc&&this._fixChildCountLabel(a),a.span.parentNode.parentNode.title=c||""},dhtmlXTreeObject.prototype.getItemTooltip=function(c){var a=this._globalIdStorageFind(c);return a&&(a.span.parentNode.parentNode._dhx_title||a.span.parentNode.parentNode.title)||""},dhtmlXTreeObject.prototype.refreshItem=function(c){c||(c=this.rootId);this._globalIdStorageFind(c);this._dynDeleteBranches[c]=(this._dynDeleteBranches[c]||0)+1,this._loadDynXML(c)},dhtmlXTreeObject.prototype.setItemImage2=function(g,a,h,e){var c=this._globalIdStorageFind(g);if(!c)return 0;c.images[1]=h,c.images[2]=e,c.images[0]=a,this._correctPlus(c)},dhtmlXTreeObject.prototype.setItemImage=function(e,a,g){var c=this._globalIdStorageFind(e);if(!c)return 0;g?(c.images[1]=a,c.images[2]=g):c.images[0]=a,this._correctPlus(c)},dhtmlXTreeObject.prototype.getSubItems=function(e){var a=this._globalIdStorageFind(e,0,1);if(!a)return 0;if(a.unParsed)return this._getSubItemsXML(a.unParsed);var c="";for(i=0;i<a.childsCount;i++)c?c+=this.dlmtr+a.childNodes[i].id:c=""+a.childNodes[i].id;return c},dhtmlXTreeObject.prototype._getAllScraggyItems=function(e){for(var g="",c=0;c<e.childsCount;c++)if(e.childNodes[c].unParsed||0<e.childNodes[c].childsCount){if(e.childNodes[c].unParsed)var a=this._getAllScraggyItemsXML(e.childNodes[c].unParsed,1);else a=this._getAllScraggyItems(e.childNodes[c]);a&&(g?g+=this.dlmtr+a:g=a)}else g?g+=this.dlmtr+e.childNodes[c].id:g=""+e.childNodes[c].id;return g},dhtmlXTreeObject.prototype._getAllFatItems=function(e){for(var g="",c=0;c<e.childsCount;c++)if(e.childNodes[c].unParsed||0<e.childNodes[c].childsCount){if(g?g+=this.dlmtr+e.childNodes[c].id:g=""+e.childNodes[c].id,e.childNodes[c].unParsed)var a=this._getAllFatItemsXML(e.childNodes[c].unParsed,1);else a=this._getAllFatItems(e.childNodes[c]);a&&(g+=this.dlmtr+a)}return g},dhtmlXTreeObject.prototype._getAllSubItems=function(l,h,g){if(g)c=g;else var c=this._globalIdStorageFind(l);if(!c)return 0;h="";for(var e=0;e<c.childsCount;e++){h?h+=this.dlmtr+c.childNodes[e].id:h=""+c.childNodes[e].id;var a=this._getAllSubItems(0,h,c.childNodes[e]);a&&(h+=this.dlmtr+a)}return c.unParsed&&(h=this._getAllSubItemsXML(l,h,c.unParsed)),h},dhtmlXTreeObject.prototype.selectItem=function(g,e,c){e=dhx4.s2b(e);var a=this._globalIdStorageFind(g);if(!a||!a.parentObject)return 0;this.XMLloadingWarning?a.parentObject.openMe=1:this._openItem(a.parentObject);var h=null;c&&((h=new Object).ctrlKey=!0,a.i_sel&&(h.skipUnSel=!0)),e?this.onRowSelect(h,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1):this.onRowSelect(h,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)},dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var c=new Array,a=0;a<this._selected.length;a++)c[a]=this._selected[a].span.innerHTML;return c.join(this.dlmtr)},dhtmlXTreeObject.prototype._compressChildList=function(a,e){a--;for(var c=0;c<a;c++)0==e[c]&&(e[c]=e[c+1],e[c+1]=0)},dhtmlXTreeObject.prototype._deleteNode=function(m,h,o){if(!h||!h.parentObject)return 0;var a=0,c=0;h.tr.nextSibling&&(a=h.tr.nextSibling.nodem),h.tr.previousSibling&&(c=h.tr.previousSibling.nodem);for(var l=h.parentObject,e=l.childsCount,n=l.childNodes,g=0;g<e;g++)if(n[g].id==m){o||l.htmlNode.childNodes[0].removeChild(n[g].tr),n[g]=0;break}this._compressChildList(e,n),o||l.childsCount--,a&&(this._correctPlus(a),this._correctLine(a)),c&&(this._correctPlus(c),this._correctLine(c)),this.tscheck&&this._correctCheckStates(l),o||this._globalIdStorageRecSub(h)},dhtmlXTreeObject.prototype.setCheck=function(e,c){var a=this._globalIdStorageFind(e,0,1);a&&("unsure"===c?this._setCheck(a,c):(c=dhx4.s2b(c),this.tscheck&&this.smcheck?this._setSubChecked(c,a):this._setCheck(a,c)),this.smcheck&&this._correctCheckStates(a.parentObject))},dhtmlXTreeObject.prototype._setCheck=function(a,e){if(a){if((a.parentObject._r_logic||this._frbtr)&&e)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=a;else for(var c=0;c<a.parentObject.childsCount;c++)this._setCheck(a.parentObject.childNodes[c],0);var g=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];a.checkstate="unsure"==e?2:e?1:0,a.dscheck&&(a.checkstate=a.dscheck),this._setSrc(g,this.imPath+(a.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[a.checkstate])}},dhtmlXTreeObject.prototype.setSubChecked=function(e,c){var a=this._globalIdStorageFind(e);this._setSubChecked(c,a),this._correctCheckStates(a.parentObject)},dhtmlXTreeObject.prototype._setSubChecked=function(e,a){if(e=dhx4.s2b(e),a){if((a.parentObject._r_logic||this._frbtr)&&e)for(var c=0;c<a.parentObject.childsCount;c++)this._setSubChecked(0,a.parentObject.childNodes[c]);if(a.unParsed&&this._setSubCheckedXML(e,a.unParsed),a._r_logic||this._frbtr)this._setSubChecked(e,a.childNodes[0]);else for(c=0;c<a.childsCount;c++)this._setSubChecked(e,a.childNodes[c]);var g=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];a.checkstate=e?1:0,a.dscheck&&(a.checkstate=a.dscheck),this._setSrc(g,this.imPath+(a.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[a.checkstate])}},dhtmlXTreeObject.prototype.isItemChecked=function(c){var a=this._globalIdStorageFind(c);if(a)return a.checkstate},dhtmlXTreeObject.prototype.deleteChildItems=function(g){var a=this._globalIdStorageFind(g);if(a)for(var c=a.childsCount,e=0;e<c;e++)this._deleteNode(a.childNodes[0].id,a.childNodes[0])},dhtmlXTreeObject.prototype.deleteItem=function(e,a){if(!this._onrdlh||this._onrdlh(e)){var c=this._deleteItem(e,a);c&&this._fixChildCountLabel(c)}this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype._deleteItem=function(l,c,h){c=dhx4.s2b(c);var a=this._globalIdStorageFind(l);if(a){var e=this.getParentId(l),g=a.parentObject;return this._deleteNode(l,a,h),this._editCell&&this._editCell.id==l&&(this._editCell=null),this._correctPlus(g),this._correctLine(g),c&&e!=this.rootId&&this.selectItem(e,1),g}},dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(a){for(var c=0;c<a.childsCount;c++)this._globalIdStorageRecSub(a.childNodes[c]),this._globalIdStorageSub(a.childNodes[c].id);this._globalIdStorageSub(a.id);var e=a;e.span=null,e.tr.nodem=null,e.tr=null,e.htmlNode=null},dhtmlXTreeObject.prototype.insertNewNext=function(n,s,r,e,l,h,g,c,a){var m=this._globalIdStorageFind(n);if(!m||!m.parentObject)return 0;var o=this._attachChildNode(0,s,r,e,l,h,g,c,a,m);return!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(m.parentObject),o},dhtmlXTreeObject.prototype.getItemIdByIndex=function(e,a){var c=this._globalIdStorageFind(e);return!c||a>=c.childsCount?null:c.childNodes[a].id},dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(e,a){var c=this._globalIdStorageFind(e);return!c||a>=c.childsCount?null:c.childNodes[a].id},dhtmlXTreeObject.prototype.setDragHandler=function(a){this.attachEvent("onDrag",a)},dhtmlXTreeObject.prototype._clearMove=function(){this._lastMark&&(this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null),this.selectionBar.style.display="none",this.allTree.className=this.allTree.className.replace(" selectionBox","")},dhtmlXTreeObject.prototype.enableDragAndDrop=function(c,a){"temporary_disabled"==c?c=!(this.dADTempOff=!1):this.dADTempOff=!0,this.dragAndDropOff=dhx4.s2b(c),this.dragAndDropOff&&this.dragger.addDragLanding(this.allTree,this),1<arguments.length&&(this._ddronr=!dhx4.s2b(a))},dhtmlXTreeObject.prototype._setMove=function(h,e,m){if(h.parentObject.span){var g=dhx4.absTop(h),c=dhx4.absTop(this.allTree)-this.allTree.scrollTop;if(this.dadmodec=this.dadmode,this.dadmodefix=0,2==this.dadmode){var l=m-g+(document.body.scrollTop||document.documentElement.scrollTop)-2-h.offsetHeight/2;0<Math.abs(l)-h.offsetHeight/6?(this.dadmodec=1,l<0&&(this.dadmodefix=0-h.offsetHeight)):this.dadmodec=0}if(0==this.dadmodec){var a=h.parentObject.span;a.className+=" dragAndDropRow",this._lastMark=a}else this._clearMove(),this.selectionBar.style.top=g-c+((parseInt(h.parentObject.span.parentNode.parentNode.offsetHeight)||18)-1)+this.dadmodefix+"px",this.selectionBar.style.left="5px",20<this.allTree.offsetWidth&&(this.selectionBar.style.width=this.allTree.offsetWidth-(_isFF?30:25)+"px"),this.selectionBar.style.display="";this._autoScroll(null,g,c)}},dhtmlXTreeObject.prototype._autoScroll=function(e,c,a){this.autoScroll&&(e&&(c=dhx4.absTop(e),a=dhx4.absTop(this.allTree)-this.allTree.scrollTop),c-a-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20),c-a<parseInt(this.allTree.scrollTop)+30&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20))},dhtmlXTreeObject.prototype._createDragNode=function(l,h){if(!this.dADTempOff)return null;var g=l.parentObject;if(!this.callEvent("onBeforeDrag",[g.id,h]))return null;g.i_sel||this._selectItem(g,h),this._checkMSelectionLogic();var c=document.createElement("div"),m=new Array;if(this._itim_dg)for(var a=0;a<this._selected.length;a++)m[a]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[a].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[a].span.innerHTML+"</td></tr></table>";else m=this.getSelectedItemText().split(this.dlmtr);return c.innerHTML=m.join(""),c.style.position="absolute",c.className="dragSpanDiv",this._dragged=(new Array).concat(this._selected),c},dhtmlXTreeObject.prototype._focusNode=function(a){var c=dhx4.absTop(a.htmlNode)-dhx4.absTop(this.allTree);(c>this.allTree.offsetHeight-30||c<0)&&(this.allTree.scrollTop=c+this.allTree.scrollTop)},dhtmlXTreeObject.prototype._preventNsDrag=function(a){return a&&a.preventDefault&&a.preventDefault(),!1},dhtmlXTreeObject.prototype._drag=function(m,n,a){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer),a.parentObject||(a=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0),this._clearMove();var l=m.parentObject.treeNod;if(l&&l._clearMove&&l._clearMove(""),!this.dragMove||this.dragMove()){if(l&&l._clearMove&&l._dragged)g=l._dragged;else var g=new Array(m.parentObject);for(var c=a.parentObject,h=0;h<g.length;h++){var e=this._moveNode(g[h],c);this.dadmodec&&!1!==e&&(c=this._globalIdStorageFind(e,!0,!0)),e&&!this._sADnD&&this.selectItem(e,0,1)}}l&&(l._dragged=new Array)},dhtmlXTreeObject.prototype._dragIn=function(g,c,l,h){if(!this.dADTempOff)return 0;var m=c.parentObject,a=g.parentObject;if(a||!this._ddronr){if(!this.callEvent("onDragIn",[m.id,a?a.id:null,m.treeNod,this]))return a&&this._autoScroll(g),0;if(a){if(null==m.childNodes)return this._setMove(g,l,h),g;for(var o=m.treeNod,e=0;e<o._dragged.length;e++)if(this._checkPNodes(a,o._dragged[e]))return this._autoScroll(g),0;if(this.selectionBar.parentNode.removeChild(this.selectionBar),a.span.parentNode.appendChild(this.selectionBar),this._setMove(g,l,h),this._getOpenState(a)<=0){var n=this;this._autoOpenId=a.id,this._autoOpenTimer=window.setTimeout(function(){n._autoOpenItem(null,n),n=null},1e3)}}else this.allTree.className+=" selectionBox";return g}},dhtmlXTreeObject.prototype._autoOpenItem=function(c,a){a.openItem(a._autoOpenId)},dhtmlXTreeObject.prototype._dragOut=function(a){this._clearMove(),this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)},dhtmlXTreeObject.prototype._getNextNode=function(a,c){return!c&&a.childsCount?a.childNodes[0]:a==this.htmlNode?-1:a.tr&&a.tr.nextSibling&&a.tr.nextSibling.nodem?a.tr.nextSibling.nodem:this._getNextNode(a.parentObject,!0)},dhtmlXTreeObject.prototype._lastChild=function(a){return a.childsCount?this._lastChild(a.childNodes[a.childsCount-1]):a},dhtmlXTreeObject.prototype._getPrevNode=function(a,c){return a.tr&&a.tr.previousSibling&&a.tr.previousSibling.nodem?this._lastChild(a.tr.previousSibling.nodem):a.parentObject?a.parentObject:-1},dhtmlXTreeObject.prototype.findItem=function(a,e,c){var g=this._findNodeByLabel(a,e,c?this.htmlNode:null);return g?(this.selectItem(g.id,!0),this._focusNode(g),g.id):null},dhtmlXTreeObject.prototype.findItemIdByLabel=function(a,e,c){var g=this._findNodeByLabel(a,e,c?this.htmlNode:null);return g?g.id:null},dhtmlXTreeObject.prototype.findStrInXML=function(c,e,h){if(!c.childNodes&&c.item)return this.findStrInJSON(c,e,h);if(!c.childNodes)return!1;for(var a=0;a<c.childNodes.length;a++)if(1==c.childNodes[a].nodeType){var g=c.childNodes[a].getAttribute(e);if(g||"itemtext"!=c.childNodes[a].tagName||(g=c.childNodes[a].firstChild.data),g&&-1!=g.toLowerCase().search(h))return!0;if(this.findStrInXML(c.childNodes[a],e,h))return!0}return!1},dhtmlXTreeObject.prototype.findStrInJSON=function(c,e,h){for(var a=0;a<c.item.length;a++){var g=c.item[a].text;if(g&&-1!=g.toLowerCase().search(h))return!0;if(c.item[a].item&&this.findStrInJSON(c.item[a],e,h))return!0}return!1},dhtmlXTreeObject.prototype._findNodeByLabel=function(a,h,g){a=a.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),"");a=new RegExp(a.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi"),g||(g=this._selected[0])||(g=this.htmlNode);var c=g;h?(-1==(e=this._getPrevNode(c))&&(e=this._lastChild(this.htmlNode)),e.unParsed&&this.findStrInXML(e.unParsed.d,"text",a)?(this.reParse(e),g=this._getPrevNode(c)):g=e,-1==g&&(g=this._lastChild(this.htmlNode))):(g.unParsed&&this.findStrInXML(g.unParsed.d,"text",a)&&this.reParse(g),-1==(g=this._getNextNode(c))&&(g=this.htmlNode.childNodes[0]));for(;g&&g!=c;){if(g.label&&-1!=g.label.search(a))return g;if(h){var e;-1==(e=this._getPrevNode(g))&&(e=this._lastChild(this.htmlNode)),e.unParsed&&this.findStrInXML(e.unParsed.d,"text",a)?(this.reParse(e),g=this._getPrevNode(g)):g=e,-1==g&&(g=this._lastChild(this.htmlNode))}else{if(-1==g){if(c==this.htmlNode)break;g=this.htmlNode.childNodes[0]}g.unParsed&&this.findStrInXML(g.unParsed.d,"text",a)&&this.reParse(g),-1==(g=this._getNextNode(g))&&(g=this.htmlNode)}}return null},dhtmlXTreeObject.prototype.moveItem=function(n,c,o,a){var h=this._globalIdStorageFind(n);if(!h)return 0;var l=null;switch(c){case"right":alert("Not supported yet");break;case"item_child":if(!(e=(a||this)._globalIdStorageFind(o)))return 0;l=(a||this)._moveNodeTo(h,e,0);break;case"item_sibling":if(!(e=(a||this)._globalIdStorageFind(o)))return 0;l=(a||this)._moveNodeTo(h,e.parentObject,e);break;case"item_sibling_next":var e;if(!(e=(a||this)._globalIdStorageFind(o)))return 0;l=e.tr&&e.tr.nextSibling&&e.tr.nextSibling.nodem?(a||this)._moveNodeTo(h,e.parentObject,e.tr.nextSibling.nodem):(a||this)._moveNodeTo(h,e.parentObject);break;case"left":h.parentObject.parentObject&&(l=this._moveNodeTo(h,h.parentObject.parentObject,h.parentObject));break;case"up":if(-1==(m=this._getPrevNode(h))||!m.parentObject)return null;l=this._moveNodeTo(h,m.parentObject,m);break;case"up_strict":0!=(m=this._getIndex(h))&&(l=this._moveNodeTo(h,h.parentObject,h.parentObject.childNodes[m-1]));break;case"down_strict":var m=this._getIndex(h),g=h.parentObject.childsCount-2;m==g?l=this._moveNodeTo(h,h.parentObject):m<g&&(l=this._moveNodeTo(h,h.parentObject,h.parentObject.childNodes[m+2]));break;case"down":if(-1==(m=this._getNextNode(this._lastChild(h)))||!m.parentObject)return;if(m.parentObject==h.parentObject)m=this._getNextNode(m);if(-1==m)l=this._moveNodeTo(h,h.parentObject);else{if(-1==m||!m.parentObject)return;l=this._moveNodeTo(h,m.parentObject,m)}}return _isIE&&_isIE<8&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"),l},dhtmlXTreeObject.prototype.setDragBehavior=function(c,a){switch(this._sADnD=!dhx4.s2b(a),c){case"child":this.dadmode=0;break;case"sibling":this.dadmode=1;break;case"complex":this.dadmode=2}},dhtmlXTreeObject.prototype._loadDynXML=function(e,c){c=c||this.XMLsource;var a=(new Date).valueOf();this._ld_id=e,"function"==this.xmlalb?c&&c(this._escape(e)):"name"==this.xmlalb?this.load(c+this._escape(e)):"xmlname"==this.xmlalb?this.load(c+this._escape(e)+".xml?uid="+a):this.load(c+dhtmlx.url(c)+"uid="+a+"&id="+this._escape(e))},dhtmlXTreeObject.prototype.enableMultiselection=function(c,a){this._amsel=dhx4.s2b(c),this._amselS=dhx4.s2b(a)},dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){for(var e=new Array,c=0;c<this._selected.length;c++)for(var a=0;a<this._selected.length;a++)c!=a&&this._checkPNodes(this._selected[a],this._selected[c])&&(e[e.length]=this._selected[a]);for(c=0;c<e.length;c++)this._unselectItem(e[c])},dhtmlXTreeObject.prototype._checkPNodes=function(c,a){return!this._dcheckf&&(a==c?1:c.parentObject?this._checkPNodes(c.parentObject,a):0)},dhtmlXTreeObject.prototype.disableDropCheck=function(a){this._dcheckf=dhx4.s2b(a)},dhtmlXTreeObject.prototype.enableDistributedParsing=function(e,c,a){this._edsbps=dhx4.s2b(e),this._edsbpsA=new Array,this._edsbpsC=c||10,this._edsbpsD=a||250},dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return!(!this._edsbpsA||!this._edsbpsA.length)},dhtmlXTreeObject.prototype.getItemParsingState=function(e){if(!this._globalIdStorageFind(e,!0,!0))return 0;if(this._edsbpsA)for(var a=0;a<this._edsbpsA.length;a++)if(this._edsbpsA[a][2]==e)return-1;return 1},dhtmlXTreeObject.prototype._distributedStart=function(c,h,g,e,a){this._edsbpsA||(this._edsbpsA=new Array),this._edsbpsA[this._edsbpsA.length]=[c,h,g,e,a]},dhtmlXTreeObject.prototype._distributedStep=function(g){var c=this;if(this._edsbpsA&&this._edsbpsA.length){var h=this._edsbpsA[0];this.parsedArray=new Array,this._parse(h[0],h[2],h[3],h[1]);var a=this._globalIdStorageFind(h[2]);this._redrawFrom(this,a,h[4],this._getOpenState(a));for(var e=this.setCheckList.split(this.dlmtr),l=0;l<e.length;l++)e[l]&&this.setCheck(e[l],1);this._edsbpsA=(new Array).concat(this._edsbpsA.slice(1)),this._edsbpsA.length||(window.setTimeout(function(){c.onXLE&&c.onXLE(c,g),c.callEvent("onXLE",[c,g])},1),c.xmlstate=0)}else c.XMLloadingWarning=0},dhtmlXTreeObject.prototype.enableTextSigns=function(a){this._txtimg=dhx4.s2b(a)},dhtmlXTreeObject.prototype.preventIECaching=function(a){dhx4.ajax.cache=!a},dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching,dhtmlXTreeObject.prototype.disableCheckbox=function(e,c){if("object"!=typeof e)var a=this._globalIdStorageFind(e,0,1);else a=e;a&&(a.dscheck=dhx4.s2b(c)?(a.checkstate||0)%3+3:2<a.checkstate?a.checkstate-3:a.checkstate,this._setCheck(a),a.dscheck<3&&(a.dscheck=!1))},dhtmlXTreeObject.prototype.smartRefreshBranch=function(c,a){this._branchUpdate=1,this.smartRefreshItem(c,a)},dhtmlXTreeObject.prototype.smartRefreshItem=function(g,e){for(var a=this._globalIdStorageFind(g),c=0;c<a.childsCount;c++)a.childNodes[c]._dmark=!0;this.waitUpdateXML=!0,e&&e.exists?this._parse(e,g):this._loadDynXML(g,e)},dhtmlXTreeObject.prototype.refreshItems=function(c,e){var g=c.toString().split(this.dlmtr);this.waitUpdateXML=new Array;for(var a=0;a<g.length;a++)this.waitUpdateXML[g[a]]=!0;this.load((e||this.XMLsource)+dhtmlx.url(e||this.XMLsource)+"ids="+this._escape(c))},dhtmlXTreeObject.prototype.updateItem=function(m,l,g,e,c,h,n){var a=this._globalIdStorageFind(m);return a.userData=new cObject,l&&(a.label=l),a.images=new Array(g||this.imageArray[0],e||this.imageArray[1],c||this.imageArray[2]),this.setItemText(m,l),h&&this._setCheck(a,!0),"1"!=n||this.hasChildren(m)||(a.XMLload=0),this._correctPlus(a),a._dmark=!1,a},dhtmlXTreeObject.prototype.setDropHandler=function(a){this.attachEvent("onDrop",a)},dhtmlXTreeObject.prototype.setOnLoadingStart=function(a){this.attachEvent("onXLS",a)},dhtmlXTreeObject.prototype.setOnLoadingEnd=function(a){this.attachEvent("onXLE",a)},dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(a){this.xmlalb=a},dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(a){this.smcheck=dhx4.s2b(a)},dhtmlXTreeObject.prototype.getXMLState=function(){return 1==this.xmlstate},dhtmlXTreeObject.prototype.setItemTopOffset=function(l,g){var e,h=(e="object"!=typeof l?this._globalIdStorageFind(l):l).span.parentNode.parentNode;e.span.style.paddingBottom="1px";for(var c=0;c<h.childNodes.length;c++){if(0!=c)_isIE?(h.childNodes[c].style.height="18px",h.childNodes[c].style.paddingTop=parseInt(g)+"px"):h.childNodes[c].style.height=18+parseInt(g)+"px";else{var a=h.childNodes[c].firstChild;"DIV"!=h.childNodes[c].firstChild.tagName&&(a=document.createElement("DIV"),h.childNodes[c].insertBefore(a,h.childNodes[c].firstChild)),e.parentObject.id==this.rootId&&e.parentObject.childNodes[0]==e||!this.treeLinesOn||(h.childNodes[c].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")"),a.innerHTML="&nbsp;",a.style.overflow="hidden"}a.style.verticalAlign=h.childNodes[c].style.verticalAlign="bottom",_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0")}},dhtmlXTreeObject.prototype.setIconSize=function(g,c,h){if(h){if(h&&h.span)var a=h;else a=this._globalIdStorageFind(h);if(!a)return 0;var e=a.span.parentNode.previousSibling.childNodes[0];g&&(e.style.width=g+"px",window._KHTMLrv&&(e.parentNode.style.width=g+"px")),c&&(e.style.height=c+"px",window._KHTMLrv&&(e.parentNode.style.height=c+"px"))}else this.def_img_x=g+"px",this.def_img_y=c+"px"},dhtmlXTreeObject.prototype.getItemImage=function(h,g,c){var e=this._globalIdStorageFind(h);if(!e)return"";var a=e.images[g||0];return c&&(a=this.iconURL+a),a},dhtmlXTreeObject.prototype.enableRadioButtons=function(g,e){if(1==arguments.length)return this._frbtr=dhx4.s2b(g),void(this.checkBoxOff=this.checkBoxOff||this._frbtr);var c=this._globalIdStorageFind(g);if(!c)return"";if((e=dhx4.s2b(e))&&!c._r_logic){c._r_logic=!0;for(var a=0;a<c.childsCount;a++)this._setCheck(c.childNodes[a],c.childNodes[a].checkstate)}if(!e&&c._r_logic){c._r_logic=!1;for(a=0;a<c.childsCount;a++)this._setCheck(c.childNodes[a],c.childNodes[a].checkstate)}},dhtmlXTreeObject.prototype.enableSingleRadioMode=function(a){this._frbtrs=dhx4.s2b(a)},dhtmlXTreeObject.prototype.openOnItemAdded=function(a){this._hAdI=!dhx4.s2b(a)},dhtmlXTreeObject.prototype.openOnItemAdding=function(a){this._hAdI=!dhx4.s2b(a)},dhtmlXTreeObject.prototype.enableMultiLineItems=function(a){this.mlitems=!0===a?"100%":a},dhtmlXTreeObject.prototype.enableAutoTooltips=function(a){this.ettip=dhx4.s2b(a)},dhtmlXTreeObject.prototype.clearSelection=function(a){a?this._unselectItem(this._globalIdStorageFind(a)):this._unselectItems()},dhtmlXTreeObject.prototype.showItemSign=function(g,c){var a=this._globalIdStorageFind(g);if(!a)return 0;a.span.parentNode.previousSibling.previousSibling.previousSibling;dhx4.s2b(c)?(a.closeble=!0,a.wsign=!1):(this._openItem(a),a.closeble=!1,a.wsign=!0),this._correctPlus(a)},dhtmlXTreeObject.prototype.showItemCheckbox=function(h,g){if(!h)for(var c in this._idpull)this.showItemCheckbox(this._idpull[c],g);if("object"!=typeof h&&(h=this._globalIdStorageFind(h,0,0)),!h)return 0;h.nocheckbox=!dhx4.s2b(g),h.span.parentNode.previousSibling.previousSibling.childNodes[0].parentNode.style.display=h.nocheckbox?"none":""},dhtmlXTreeObject.prototype.setListDelimeter=function(a){this.dlmtr=a},dhtmlXTreeObject.prototype.setEscapingMode=function(a){this.utfesc=a},dhtmlXTreeObject.prototype.enableHighlighting=function(a){this.ehlt=!0,this.ehlta=dhx4.s2b(a)},dhtmlXTreeObject.prototype._itemMouseOut=function(){var c=this.childNodes[3].parentObject,a=c.treeNod;a.callEvent("onMouseOut",[c.id]),c.id==a._l_onMSI&&(a._l_onMSI=null),a.ehlta&&(c.span.className=c.span.className.replace("_lor",""))},dhtmlXTreeObject.prototype._itemMouseIn=function(){var c=this.childNodes[3].parentObject,a=c.treeNod;a._l_onMSI!=c.id&&a.callEvent("onMouseIn",[c.id]),a._l_onMSI=c.id,a.ehlta&&(c.span.className=c.span.className.replace("_lor",""),c.span.className=c.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor"))},dhtmlXTreeObject.prototype.enableActiveImages=function(a){this._aimgs=dhx4.s2b(a)},dhtmlXTreeObject.prototype.focusItem=function(c){var a=this._globalIdStorageFind(c);if(!a)return 0;this._focusNode(a)},dhtmlXTreeObject.prototype.getAllSubItems=function(a){return this._getAllSubItems(a)},dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless,dhtmlXTreeObject.prototype._getAllScraggyItems=function(e){for(var g="",c=0;c<e.childsCount;c++)if(e.childNodes[c].unParsed||0<e.childNodes[c].childsCount){if(e.childNodes[c].unParsed)var a=this._getAllScraggyItemsXML(e.childNodes[c].unParsed,1);else a=this._getAllScraggyItems(e.childNodes[c]);a&&(g?g+=this.dlmtr+a:g=a)}else g?g+=this.dlmtr+e.childNodes[c].id:g=""+e.childNodes[c].id;return g},dhtmlXTreeObject.prototype._getAllFatItems=function(e){for(var g="",c=0;c<e.childsCount;c++)if(e.childNodes[c].unParsed||0<e.childNodes[c].childsCount){if(g?g+=this.dlmtr+e.childNodes[c].id:g=""+e.childNodes[c].id,e.childNodes[c].unParsed)var a=this._getAllFatItemsXML(e.childNodes[c].unParsed,1);else a=this._getAllFatItems(e.childNodes[c]);a&&(g+=this.dlmtr+a)}return g},dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids,dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)},dhtmlXTreeObject.prototype.getAllUnchecked=function(a){return a&&(a=this._globalIdStorageFind(a)),this._getAllChecked(a,"",0)},dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)},dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var a=[this._getAllChecked("","",1)],c=this._getAllChecked("","",2);return c&&a.push(c),a.join(this.dlmtr)},dhtmlXTreeObject.prototype._getAllChecked=function(g,e,h){g||(g=this.htmlNode),g.checkstate==h&&(g.nocheckbox||(e?e+=this.dlmtr+g.id:e=""+g.id));for(var a=g.childsCount,c=0;c<a;c++)e=this._getAllChecked(g.childNodes[c],e,h);return g.unParsed&&(e=this._getAllCheckedXML(g.unParsed,e,h)),e||""},dhtmlXTreeObject.prototype.setItemStyle=function(g,e,c){c=c||!1;var a=this._globalIdStorageFind(g);if(!a)return 0;a.span.style.cssText?a.span.style.cssText=c?e:a.span.style.cssText+";"+e:a.span.setAttribute("style",a.span.getAttribute("style")+"; "+e)},dhtmlXTreeObject.prototype.enableImageDrag=function(a){this._itim_dg=dhx4.s2b(a)},dhtmlXTreeObject.prototype.setOnDragIn=function(a){this.attachEvent("onDragIn",a)},dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(a){this.autoScroll=dhx4.s2b(a)},dhtmlXTreeObject.prototype.setSkin=function(a){var c=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=c+" dhxtree_"+a,"dhx_terrace"!=a&&"dhx_web"!=a&&"material"!=a||this.enableTreeLines(!1),"material"==a&&this.setIconSize("25","25")},dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(a){return[a.parent,a.width||"100%",a.height||"100%",a.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{}),dhtmlXTreeObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(g,l,c){var h=dhx4.ajax.xpath(".//item",g)[0].getAttribute("text");this.obj.insertNewItem(c,l,h,0,0,0,0,"CHILD")}),a.attachEvent("updateCallback",function(g,l,c){var h=dhx4.ajax.xpath(".//item",g)[0].getAttribute("text");this.obj.setItemText(l,h),this.obj.getParentId(l)!=c&&this.obj.moveItem(l,"item_child",c),this.setUpdated(l,!0,"updated")}),a.attachEvent("deleteCallback",function(e,g,c){this.obj.setUserData(g,this.action_param,"true_deleted"),this.obj.deleteItem(g,!1)}),a._methods=["setItemStyle","","changeItemId","deleteItem"],this.attachEvent("onEdit",function(c,e){return 3==c&&a.setUpdated(e,!0),!0}),this.attachEvent("onDrop",function(l,h,g,e,c){e==c&&a.setUpdated(l,!0)}),this._onrdlh=function(c){var e=a.getState(c);return"inserted"==e?(a.set_invalid(c,!1),a.setUpdated(c,!1),!0):"true_deleted"==e?(a.setUpdated(c,!1),!0):(a.setUpdated(c,!0,"deleted"),!1)},this._onradh=function(c){a.setUpdated(c,!0,"inserted")},a._getRowData=function(h){var g={},l=this.obj._globalIdStorageFind(h),e=l.parentObject,c=0;for(c=0;c<e.childsCount&&e.childNodes[c]!=l;c++);for(g.tr_id=l.id,g.tr_pid=e.id,g.tr_order=c,g.tr_text=l.span.innerHTML,e=(l._userdatalist||"").split(","),c=0;c<e.length;c++)g[e[c]]=l.userData["t_"+e[c]];return g}},void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachTree=function(a){this.callEvent("_onBeforeContentAttach",["tree"]);var c=document.createElement("DIV");return c.style.width="100%",c.style.height="100%",c.style.position="relative",c.style.overflow="hidden",this._attachObject(c),this.dataType="tree",this.dataObj=new dhtmlXTreeObject(c,"100%","100%",a||0),this.dataObj.setSkin(this.conf.skin),this.dataObj.allTree.childNodes[0].style.marginTop="2px",this.dataObj.allTree.childNodes[0].style.marginBottom="2px",c=null,this.callEvent("_onContentAttach",[]),this.dataObj}),dhtmlXTreeObject.prototype.makeDraggable=function(c,a){"object"!=typeof c&&(c=document.getElementById(c)),dragger=new dhtmlDragAndDropObject,dropper=new dhx_dragSomethingInTree,dragger.addDraggableItem(c,dropper),c.dragLanding=null,c.ondragstart=dropper._preventNsDrag,c.onselectstart=new Function("return false;"),c.parentObject=new Object,(c.parentObject.img=c).parentObject.treeNod=dropper,dropper._customDrop=a},dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable,dhtmlXTreeObject.prototype.makeAllDraggable=function(c){for(var e=document.getElementsByTagName("div"),a=0;a<e.length;a++)e[a].getAttribute("dragInDhtmlXTree")&&this.makeDragable(e[a],c)},dhtmlXTreeObject.prototype.enableItemEditor=function(a){this._eItEd=dhx4.s2b(a),this._eItEdFlag||(this._edn_click_IE=!0,this._edn_dblclick=!0,this._ie_aFunc=this.aFunc,this._ie_dblclickFuncHandler=this.dblclickFuncHandler,this.setOnDblClickHandler(function(e,c){return this._edn_dblclick&&this._editItem(e,c),!0}),this.setOnClickHandler(function(e,c){return this._stopEditItem(e,c),this.ed_hist_clcik==e&&this._edn_click_IE&&this._editItem(e,c),this.ed_hist_clcik=e,!0}),this._eItEdFlag=!0)},dhtmlXTreeObject.prototype.setOnEditHandler=function(a){this.attachEvent("onEdit",a)},dhtmlXTreeObject.prototype.setEditStartAction=function(a,c){this._edn_click_IE=dhx4.s2b(a),this._edn_dblclick=dhx4.s2b(c)},dhtmlXTreeObject.prototype._stopEdit=function(c,l){if(this._editCell&&(this.dADTempOff=this.dADTempOffEd,this._editCell.id!=c)){var g=!0;l?(g=!1,this.callEvent("onEditCancel",[this._editCell.id,this._editCell._oldValue])):g=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value]),!0===g?g=this._editCell.span.childNodes[0].value:!1===g&&(g=this._editCell._oldValue);var h=g!=this._editCell._oldValue;this._editCell.span.innerHTML=g,this._editCell.label=this._editCell.span.innerHTML;var e=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";this._editCell.span.className=e,this._editCell.span.parentNode.className="standartTreeRow",this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px",this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};var m=this._editCell.id;this.childCalc&&this._fixChildCountLabel(this._editCell),this._editCell=null,l||this.callEvent("onEdit",[3,m,this,h]),this._enblkbrd&&(this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus())}},dhtmlXTreeObject.prototype._stopEditItem=function(c,a){this._stopEdit(c)},dhtmlXTreeObject.prototype.stopEdit=function(a){this._editCell&&this._stopEdit(this._editCell.id+"_non",a)},dhtmlXTreeObject.prototype.editItem=function(a){this._editItem(a,this)},dhtmlXTreeObject.prototype._editItem=function(h,a){if(this._eItEd){this._stopEdit();var e=this._globalIdStorageFind(h);if(!e)return;var g=this.callEvent("onEdit",[0,h,this,e.span.innerHTML]);if(!0===g)g=void 0!==e.span.innerText?e.span.innerText:e.span.textContent;else if(!1===g)return;this.dADTempOffEd=this.dADTempOff,this.dADTempOff=!1,(this._editCell=e)._oldValue=g,e.span.innerHTML="<input type='text' class='intreeeditRow' />",e.span.style.paddingRight=e.span.style.paddingLeft="0px",e.span.onclick=e.span.ondblclick=function(l){(l||event).cancelBubble=!0},e.span.childNodes[0].value=g,e.span.childNodes[0].onselectstart=function(l){return(l||event).cancelBubble=!0},e.span.childNodes[0].onmousedown=function(l){return(l||event).cancelBubble=!0},e.span.childNodes[0].focus(),e.span.childNodes[0].focus(),e.span.onclick=function(l){return!((l||event).cancelBubble=!0)},e.span.className="",e.span.parentNode.className="";var c=this;e.span.childNodes[0].onkeydown=function(l){l||(l=window.event),13==l.keyCode?(l.cancelBubble=!0,c._stopEdit(window.undefined)):27==l.keyCode&&c._stopEdit(window.undefined,!0),(l||event).cancelBubble=!0},this.callEvent("onEdit",[1,h,this])}},jsonPointer.prototype={text:function(){var a=function(h){for(var g=[],e=0;e<h.length;e++)g.push("{"+c(h[e])+"}");return g.join(",")},c=function(h){var g=[];for(var e in h)"object"==typeof h[e]?e.length?g.push('"'+e+'":['+a(h[e])+"]"):g.push('"'+e+'":{'+c(h[e])+"}"):g.push('"'+e+'":"'+h[e]+'"');return g.join(",")};return"{"+c(this.d)+"}"},get:function(a){return this.d[a]},exists:function(){return!!this.d},content:function(){return this.d.content},each:function(g,m,l){var e=this.d[g],n=new jsonPointer;if(e)for(var h=0;h<e.length;h++)n.d=e[h],m.apply(l,[n,h])},get_all:function(){return this.d},sub:function(a){return new jsonPointer(this.d[a],this.d)},sub_exists:function(a){return!!this.d[a]},each_x:function(g,n,m,l,h){var e=this.d[g],o=new jsonPointer(0,this.d);if(e)for(h=h||0;h<e.length;h++)if(e[h][n]&&(o.d=e[h],-1==m.apply(l,[o,h])))return},up:function(a){return new jsonPointer(this.dp,this.d)},set:function(a,c){this.d[a]=c},clone:function(a){return new jsonPointer(this.d,this.dp)},through:function(e,m,r,h,s){var n=this.d[e];if(n.length)for(var g=0;g<n.length;g++){if(null!=n[g][m]&&""!=n[g][m]&&(!r||n[g][m]==r)){var l=new jsonPointer(n[g],this.d);h.apply(s,[l,g])}var o=this.d;this.d=n[g],this.sub_exists(e)&&this.through(e,m,r,h,s),this.d=o}}},dhtmlXTreeObject.prototype.loadJSArrayFile=function(a,c){return window.console&&window.console.info&&window.console.info("loadJSArrayFile was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSArrayFile(a,c)},dhtmlXTreeObject.prototype._loadJSArrayFile=function(file,callback){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=function(xml,callback){eval("var z="+xml.responseText),this._loadJSArray(z),callback&&callback.call(this,xml)},dhx4.ajax.get(file,function(obj){that.XMLLoader(obj.xmlDoc,callback)})},dhtmlXTreeObject.prototype.loadCSV=function(a,c){return window.console&&window.console.info&&window.console.info("loadCSV was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadCSV(a,c)},dhtmlXTreeObject.prototype._loadCSV=function(a,e){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var c=this;this.XMLLoader=function(g,h){this._loadCSVString(g.responseText),h&&h.call(this,g)},dhx4.ajax.get(a,function(g){c.XMLLoader(g.xmlDoc,e)})},dhtmlXTreeObject.prototype.loadJSArray=function(a,c){return window.console&&window.console.info&&window.console.info("loadJSArray was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSArray(a,c)},dhtmlXTreeObject.prototype._loadJSArray=function(a,g){for(var l=[],c=0;c<a.length;c++)l[a[c][1]]||(l[a[c][1]]=[]),l[a[c][1]].push({id:a[c][0],text:a[c][2]});var h={id:this.rootId},e=function(o,n){if(l[o.id]){o.item=l[o.id];for(var m=0;m<o.item.length;m++)n(o.item[m],n)}};e(h,e),this._loadJSONObject(h,g)},dhtmlXTreeObject.prototype.loadCSVString=function(a,c){return window.console&&window.console.info&&window.console.info("loadCSVString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadCSVString(a,c)},dhtmlXTreeObject.prototype._loadCSVString=function(a,l){for(var n=[],c=a.split("\n"),g=0;g<c.length;g++){var e=c[g].split(",");n[e[1]]||(n[e[1]]=[]),n[e[1]].push({id:e[0],text:e[2]})}var m={id:this.rootId},h=function(s,r){if(n[s.id]){s.item=n[s.id];for(var o=0;o<s.item.length;o++)r(s.item[o],r)}};h(m,h),this._loadJSONObject(m,l)},dhtmlXTreeObject.prototype.loadJSONObject=function(a,c){return window.console&&window.console.info&&window.console.info("loadJSONObject was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSONObject(a,c)},dhtmlXTreeObject.prototype._loadJSONObject=function(a,c){this.parsCount||this.callEvent("onXLS",[this,null]),this.xmlstate=1;var e=new jsonPointer(a);this._parse(e),this._p=e,c&&c()},dhtmlXTreeObject.prototype.loadJSON=function(a,c){return window.console&&window.console.info&&window.console.info("loadJSON was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSON(a,c)},dhtmlXTreeObject.prototype._loadJSON=function(file,callback){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=function(xml,callback){try{eval("var t="+xml.responseText)}catch(e){return void dhx4.callEvent("onLoadXMLerror",["Incorrect JSON",xml,this])}var p=new jsonPointer(t);this._parse(p),this._p=p,callback&&callback.call(this,xml)},dhx4.ajax.get(file,function(obj){that.XMLLoader(obj.xmlDoc,callback)})},dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var a=['{"id":"'+this.rootId+'", "item":['],e=[],c=0;c<this.htmlNode.childsCount;c++)e.push(this._serializeItemJSON(this.htmlNode.childNodes[c]));return a.push(e.join(",")),a.push("]}"),a.join("")},dhtmlXTreeObject.prototype._serializeItemJSON=function(m){var a=[];if(m.unParsed)return m.unParsed.text();if(this._selected.length)var e=this._selected[0].id;else e="";var l=m.span.innerHTML;if(l=l.replace(/\"/g,'\\"',l),this._xfullXML?a.push('{ "id":"'+m.id+'", '+(1==this._getOpenState(m)?' "open":"1", ':"")+(e==m.id?' "select":"1",':"")+' "text":"'+l+'", "im0":"'+m.images[0]+'", "im1":"'+m.images[1]+'", "im2":"'+m.images[2]+'" '+(m.acolor?', "aCol":"'+m.acolor+'" ':"")+(m.scolor?', "sCol":"'+m.scolor+'" ':"")+(1==m.checkstate?', "checked":"1" ':2==m.checkstate?', "checked":"-1"':"")+(m.closeable?', "closeable":"1" ':"")+(this.XMLsource&&0==m.XMLload?', "child":"1" ':"")):a.push('{ "id":"'+m.id+'", '+(1==this._getOpenState(m)?' "open":"1", ':"")+(e==m.id?' "select":"1",':"")+' "text":"'+l+'"'+(this.XMLsource&&0==m.XMLload?', "child":"1" ':"")),this._xuserData&&m._userdatalist){a.push(', "userdata":[');for(var h=m._userdatalist.split(","),g=[],c=0;c<h.length;c++)g.push('{ "name":"'+h[c]+'" , "content":"'+m.userData["t_"+h[c]]+'" }');a.push(g.join(",")),a.push("]")}if(m.childsCount){a.push(', "item":[');for(g=[],c=0;c<m.childsCount;c++)g.push(this._serializeItemJSON(m.childNodes[c]));a.push(g.join(",")),a.push("]\n")}return a.push("}\n"),a.join("")},window.addEventListener?window.addEventListener("load",dhx_init_trees,!1):window.attachEvent&&window.attachEvent("onload",dhx_init_trees),dhtmlXTreeObject.prototype.parserExtension={_parseExtension:function(g,c,e){this._idpull[c.id]._attrs=c}},dhtmlXTreeObject.prototype.getAttribute=function(e,a){this._globalIdStorageFind(e);var c=this._idpull[e]._attrs;return c?c[a]:window.undefined},dhtmlXTreeObject.prototype.setAttribute=function(g,a,e){this._globalIdStorageFind(g);var c=this._idpull[g]._attrs||{};c[a]=e,this._idpull[g]._attrs=c},dhtmlXTreeObject.prototype.enableKeyboardNavigation=function(e){if(this._enblkbrd=dhx4.s2b(e),this._enblkbrd){if(_isFF)"absolute"!=(c=window.getComputedStyle(this.parentObject,null).position)&&"relative"!=c&&(this.parentObject.style.position="relative");this._navKeys=[["up",38],["down",40],["open",39],["close",37],["call",13],["edit",113]];var c,a=this;(c=document.createElement("INPUT")).className="a_dhx_hidden_input",c.autocomplete="off",window._KHTMLrv&&(c.style.color="white"),this.parentObject.appendChild(c),this.parentObject[_isOpera?"onkeypress":"onkeydown"]=function(g){if(a.callEvent("onKeyPress",[(g||window.event).keyCode,g||window.event]))return a._onKeyDown(g||window.event)},this.parentObject.onclick=function(g){(_isFF||_isIE)&&c.select(),(window._KHTMLrv||_isOpera)&&c.focus()}}else this.parentObject.onkeydown=null},dhtmlXTreeObject.prototype._onKeyDown=function(g){if(window.globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject.isActive)return!0;for(var c=0;c<this._navKeys.length;c++)if(this._navKeys[c][1]==g.keyCode)return this["_onkey_"+this._navKeys[c][0]].apply(this,[this.getSelectedItemId()]),g.preventDefault&&g.preventDefault(),!((g||event).cancelBubble=!0);return!this._textSearch||this._searchItemByKey(g)},dhtmlXTreeObject.prototype._onkey_up=function(e){var a=this._globalIdStorageFind(e);if(a){var c=this._getPrevVisibleNode(a);c.id!=this.rootId&&(this.focusItem(c.id),this.selectItem(c.id,!1))}},dhtmlXTreeObject.prototype._onkey_down=function(e){var a=this._globalIdStorageFind(e);if(a){var c=this._getNextVisibleNode(a);c.id!=this.rootId&&(this.focusItem(c.id),this.selectItem(c.id,!1))}},dhtmlXTreeObject.prototype._onkey_open=function(a){this.openItem(a)},dhtmlXTreeObject.prototype._onkey_close=function(a){this.closeItem(a)},dhtmlXTreeObject.prototype._onkey_call=function(a){this.stopEdit?(this.stopEdit(),this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus(),this.selectItem(a,!0)):this.selectItem(this.getSelectedItemId(),!0)},dhtmlXTreeObject.prototype._onkey_edit=function(a){this.editItem&&this.editItem(a)},dhtmlXTreeObject.prototype._getNextVisibleNode=function(a,c){return!c&&0<this._getOpenState(a)?a.childNodes[0]:a.tr&&a.tr.nextSibling&&a.tr.nextSibling.nodem?a.tr.nextSibling.nodem:a.parentObject?this._getNextVisibleNode(a.parentObject,1):a},dhtmlXTreeObject.prototype._getPrevVisibleNode=function(a){return a.tr&&a.tr.previousSibling&&a.tr.previousSibling.nodem?this._lastVisibleChild(a.tr.previousSibling.nodem):a.parentObject?a.parentObject:a},dhtmlXTreeObject.prototype._lastVisibleChild=function(a){return 0<this._getOpenState(a)?this._lastVisibleChild(a.childNodes[a.childsCount-1]):a},dhtmlXTreeObject.prototype._searchItemByKey=function(c){if(8==c.keyCode)return!(this._textSearchString="");var a=String.fromCharCode(c.keyCode).toUpperCase();return!a.match(/[A-Z,a-z,0-9\ ]/)||(this._textSearchString+=a,this._textSearchInProgress=!0,(this.getSelectedItemText()||"").match(RegExp("^"+this._textSearchString,"i"))||this.findItem(this._textSearchString,0),this._textSearchInProgress=!1,c.preventDefault&&c.preventDefault(),!((c||event).cancelBubble=!0))},dhtmlXTreeObject.prototype.assignKeys=function(a){this._navKeys=a},dhtmlXTreeObject.prototype.enableKeySearch=function(c){if(this._textSearch=dhx4.s2b(c),this._textSearch){this._textSearchString="";var a=this;this._markItem2=this._markItem,this._markItem=function(e){a._textSearchInProgress||(a._textSearchString=""),a._markItem2(e)}}},dhtmlXTreeObject.prototype.enableLoadingItem=function(a){this.attachEvent("onXLS",this._showFakeItem),this.attachEvent("onXLE",this._hideFakeItem),this._tfi_text=a||"Loading..."},dhtmlXTreeObject.prototype._showFakeItem=function(a,e){if(null!==e&&!this._globalIdStorageFind("fake_load_xml_"+e)){var c=this.XMLsource;this.XMLsource=null,this.insertNewItem(e,"fake_load_xml_"+e,this._tfi_text),this.XMLsource=c}},dhtmlXTreeObject.prototype._hideFakeItem=function(a,c){null!==c&&this.deleteItem("fake_load_xml_"+c)},dhtmlXTreeObject.prototype.isLocked=function(a){return this._locker||this._init_lock(),1==this._locker[a]},dhtmlXTreeObject.prototype._lockItem=function(a,h,c){if(this._locker||this._init_lock(),h){if(1==this._locker[a.id])return;this._locker[a.id]=!0,a.bIm0=a.images[0],a.bIm1=a.images[1],a.bIm2=a.images[2],a.images[0]=this.lico0,a.images[1]=this.lico1,a.images[2]=this.lico2;var e=(g=a.span.parentNode).previousSibling;this.dragger.removeDraggableItem(g),this.dragger.removeDraggableItem(e)}else{if(1!=this._locker[a.id])return;this._locker[a.id]=!1,a.images[0]=a.bIm0,a.images[1]=a.bIm1,a.images[2]=a.bIm2;var g;e=(g=a.span.parentNode).previousSibling;this.dragger.addDraggableItem(g,this),this.dragger.addDraggableItem(e,this)}c||this._correctPlus(a)},dhtmlXTreeObject.prototype.lockItem=function(e,c){this._locker||this._init_lock(),this._lockOn=!1;var a=this._globalIdStorageFind(e);this._lockOn=!0,this._lockItem(a,dhx4.s2b(c))},dhtmlXTreeObject.prototype.setLockedIcons=function(e,c,a){this._locker||this._init_lock(),this.lico0=e,this.lico1=c,this.lico2=a},dhtmlXTreeObject.prototype._init_lock=function(){this._locker=new Array,this._locker_count="0",this._lockOn=!0,this._globalIdStorageFindA=this._globalIdStorageFind,this._globalIdStorageFind=this._lockIdFind,this._serializeItem&&(this._serializeItemA=this._serializeItem,this._serializeItem=this._serializeLockItem,this._serializeTreeA=this.serializeTree,this.serializeTree=this._serializeLockTree),this.setLockedIcons(this.imageArray[0],this.imageArray[1],this.imageArray[2])},dhtmlXTreeObject.prototype._lockIdFind=function(e,a,c){return this.skipLock||c||1!=this._lockOn||1!=this._locker[e]?this._globalIdStorageFindA(e,a,c):null},dhtmlXTreeObject.prototype._serializeLockItem=function(a){return 1==this._locker[a.id]?"":this._serializeItemA(a)},dhtmlXTreeObject.prototype._serializeLockTree=function(){return this._serializeTreeA().replace(/<item[^>]+locked\=\"1\"[^>]+\/>/g,"")},dhtmlXTreeObject.prototype._moveNodeToA=dhtmlXTreeObject.prototype._moveNodeTo,dhtmlXTreeObject.prototype._moveNodeTo=function(a,e,c){return(!e.treeNod.isLocked||!e.treeNod.isLocked(e.id))&&this._moveNodeToA(a,e,c)},dhtmlXTreeObject.prototype.lockTree=function(a){dhx4.s2b(a)?this._initTreeLocker():this._TreeLocker&&(this._TreeLocker.parentNode.removeChild(this._TreeLocker),this._TreeLocker=null)},dhtmlXTreeObject.prototype._initTreeLocker=function(a){if(!this._TreeLocker){this.parentObject.style.overflow="hidden","absolute"!=this.parentObject.style.position&&(this.parentObject.style.position="relative");var c=document.createElement("div");c.style.position="absolute",c.style.left="0px",c.style.top="0px",c.className="dhx_tree_opacity",c.style.width=this.allTree.offsetWidth+"px",c.style.backgroundColor="#FFFFFF",c.style.height=this.allTree.offsetHeight+"px",this._TreeLocker=c,this.parentObject.appendChild(this._TreeLocker)}},dhtmlXTreeObject.prototype.enableRTL=function(c){var a=dhx4.s2b(c);(a&&!this.rtlMode||!a&&this.rtlMode)&&(this.rtlMode=a,this._switchToRTL(this.rtlMode))},dhtmlXTreeObject.prototype._switchToRTL=function(a){a?(this.allTree.className=this._ltr_line=this.lineArray,this._ltr_min=this.minusArray,this._ltr_plus=this.plusArray,this.lineArray=new Array("line2_rtl.gif","line3_rtl.gif","line4_rtl.gif","blank.gif","blank.gif","line1_rtl.gif"),this.minusArray=new Array("minus2_rtl.gif","minus3_rtl.gif","minus4_rtl.gif","minus.gif","minus5_rtl.gif"),this.plusArray=new Array("plus2_rtl.gif","plus3_rtl.gif","plus4_rtl.gif","plus.gif","plus5_rtl.gif"),this.allTree.className="containerTableStyleRTL"):(this.allTree.className="containerTableStyle",this.lineArray=this._ltr_line,this.minusArray=this._ltr_min,this.plusArray=this._ltr_plus),this.htmlNode.childsCount&&this._redrawFrom(this,this.htmlNode)},dhtmlXTreeObject.prototype.sortTree=function(g,c,e){var a=this._globalIdStorageFind(g);if(!a)return!1;this._reorderBranch(a,"asc"==c.toString().toLowerCase(),dhx4.s2b(e))},dhtmlXTreeObject.prototype.setCustomSortFunction=function(a){this._csfunca=a},dhtmlXTreeObject.prototype._reorderBranch=function(n,c,o){var a=[],l=n.childsCount;if(l){for(var h=n.childNodes[0].tr.parentNode,g=0;g<l;g++)a[g]=n.childNodes[g],h.removeChild(a[g].tr);var e=this;1==c?this._csfunca?a.sort(function(r,m){return e._csfunca(r.id,m.id)}):a.sort(function(r,m){return r.span.innerHTML.toUpperCase()>m.span.innerHTML.toUpperCase()?1:r.span.innerHTML.toUpperCase()==m.span.innerHTML.toUpperCase()?0:-1}):this._csfunca?a.sort(function(r,m){return e._csfunca(m.id,r.id)}):a.sort(function(r,m){return r.span.innerHTML.toUpperCase()<m.span.innerHTML.toUpperCase()?1:r.span.innerHTML.toUpperCase()==m.span.innerHTML.toUpperCase()?0:-1});for(g=0;g<l;g++)h.appendChild(a[g].tr),n.childNodes[g]=a[g],o&&a[g].unParsed?a[g].unParsed.set("order",c?1:-1):o&&a[g].childsCount&&this._reorderBranch(a[g],c,o);for(g=0;g<l;g++)this._correctPlus(a[g]),this._correctLine(a[g])}},dhtmlXTreeObject.prototype._reorderXMLBranch=function(l){var n=l.getAttribute("order");if("none"!=n){var c=1==n,h=l.childNodes.length;if(h){for(var a=new Array,e=0,g=0;g<h;g++)1==l.childNodes[g].nodeType&&(a[e]=l.childNodes[g],e++);for(g=h-1;0!=g;g--)l.removeChild(l.childNodes[g]);c?a.sort(function(o,m){return o.getAttribute("text")>m.getAttribute("text")?1:o.getAttribute("text")==m.getAttribute("text")?0:-1}):a.sort(function(o,m){return o.getAttribute("text")<m.getAttribute("text")?1:o.getAttribute("text")==m.getAttribute("text")?0:-1});for(g=0;g<e;g++)a[g].setAttribute("order",n),l.appendChild(a[g]);l.setAttribute("order","none")}}},dhtmlXTreeObject.prototype._serEnts=[["&","&amp;"],["<","&lt;"],[">","&gt;"]],dhtmlXTreeObject.prototype.registerXMLEntity=function(a,c){this._serEnts[this._serEnts.length]=[a,c,new RegExp(a,"g")]},dhtmlXTreeObject.prototype.setSerializationLevel=function(a,c,h,l,e){this._xuserData=dhx4.s2b(a),this._xfullXML=dhx4.s2b(c),this._dtd=e,this._xescapeEntities=dhx4.s2b(h),dhx4.s2b(l)&&(this._apreUC="<![CDATA[",this._apstUC="]]>");for(var g=0;g<this._serEnts.length;g++)this._serEnts[g][2]=new RegExp(this._serEnts[g][0],"g")},dhtmlXTreeObject.prototype.serializeTree=function(){this.stopEdit&&this.stopEdit(),this._apreUC=this._apreUC||"",this._apstUC=this._apstUC||"";var a='<?xml version="1.0"?>';if(this._dtd&&(a+='<!DOCTYPE tree SYSTEM "'+this._dtd+'">'),a+='<tree id="'+this.rootId+'">',this._xuserData&&this._idpull[this.rootId]._userdatalist)for(var e=this._idpull[this.rootId]._userdatalist.split(","),c=0;c<e.length;c++)a+='<userdata name="'+e[c]+'">'+this._apreUC+this._idpull[this.rootId].userData["t_"+e[c]]+this._apstUC+"</userdata>";for(c=0;c<this.htmlNode.childsCount;c++)a+=this._serializeItem(this.htmlNode.childNodes[c]);return a+="</tree>"},dhtmlXTreeObject.prototype._serializeItem=function(m){if(m.unParsed)return dhx4.isIE?m.unParsed.d.xml:(new XMLSerializer).serializeToString(m.unParsed.d);var c="";if(this._selected.length)var g=this._selected[0].id;else g='"';var l=m.span.innerHTML;if(this._xescapeEntities)for(var e=0;e<this._serEnts.length;e++)l=l.replace(this._serEnts[e][2],this._serEnts[e][1]);if(c=this._xfullXML?'<item id="'+m.id+'" '+(1==this._getOpenState(m)?' open="1" ':"")+(g==m.id?' select="1"':"")+' text="'+l+'" im0="'+m.images[0]+'" im1="'+m.images[1]+'" im2="'+m.images[2]+'" '+(m.acolor?'aCol="'+m.acolor+'" ':"")+(m.scolor?'sCol="'+m.scolor+'" ':"")+(1==m.checkstate?'checked="1" ':2==m.checkstate?'checked="-1"':"")+(m.closeable?'closeable="1" ':"")+(this.XMLsource&&0==m.XMLload?' child="1" ':"")+">":'<item id="'+m.id+'" '+(1==this._getOpenState(m)?' open="1" ':"")+(g==m.id?' select="1"':"")+' text="'+l+'"'+(this.XMLsource&&0==m.XMLload?' child="1" ':"")+">",this._xuserData&&m._userdatalist){var h=m._userdatalist.split(",");for(e=0;e<h.length;e++)c+='<userdata name="'+h[e]+'">'+this._apreUC+m.userData["t_"+h[e]]+this._apstUC+"</userdata>"}for(e=0;e<m.childsCount;e++)c+=this._serializeItem(m.childNodes[e]);return c+="</item>"},dhtmlXTreeObject.prototype.saveSelectedItem=function(c,a){c=c||"",this.setCookie("treeStateSelected"+c,this.getSelectedItemId(),a)},dhtmlXTreeObject.prototype.restoreSelectedItem=function(a){a=a||"";var c=this.getCookie("treeStateSelected"+a);this.selectItem(c,!1)},dhtmlXTreeObject.prototype.enableAutoSavingSelected=function(a,c){this.assMode=dhx4.s2b(a),this.assMode&&!this.oldOnSelect&&(this.oldOnSelect=this.onRowSelect,this.onRowSelect=function(h,g,l){g||(g=this),g.parentObject.treeNod.oldOnSelect(h,g,l),g.parentObject.treeNod.assMode&&g.parentObject.treeNod.saveSelectedItem(g.parentObject.treeNod.assCookieName)}),this.assCookieName=c},dhtmlXTreeObject.prototype.saveState=function(e,c){var h,a=4e3;if((h=this._escape(this.serializeTree())).length>a){if(-1!=navigator.appName.indexOf("Microsoft"))return!1;this.setCookie("treeStatex"+e,Math.ceil(h.length/a));for(var g=0;g<Math.ceil(h.length/a);g++)this.setCookie("treeStatex"+e+"x"+g,h.substr(g*a,a),c)}else this.setCookie("treeStatex"+e,h,c);return!!(h=this.getCookie("treeStatex"+e))||(this.setCookie("treeStatex"+e,"",c),!1)},dhtmlXTreeObject.prototype.loadState=function(a){var g=this.getCookie("treeStatex"+a);if(!g)return!1;if(g.length){if(g.toString().length<4){for(var e="",c=0;c<g;c++)e+=this.getCookie("treeStatex"+a+"x"+c);g=e}this.parse("utf8"==this.utfesc?decodeURI(g):unescape(g))}return!0},dhtmlXTreeObject.prototype.setCookie=function(c,e,a){var g=c+"="+e+(a?"; "+a:"");document.cookie=g},dhtmlXTreeObject.prototype.getCookie=function(c){var e=c+"=";if(0<document.cookie.length){var g=document.cookie.indexOf(e);if(-1!=g){g+=e.length;var a=document.cookie.indexOf(";",g);return-1==a&&(a=document.cookie.length),document.cookie.substring(g,a)}}},dhtmlXTreeObject.prototype.saveOpenStates=function(c,a){for(var g=[],e=0;e<this.htmlNode.childsCount;e++)g=g.concat(this._collectOpenStates(this.htmlNode.childNodes[e]));g=g.join(this.dlmtr),this.setCookie("treeOpenStatex"+c,g,a)},dhtmlXTreeObject.prototype.loadOpenStates=function(c){for(var e=0;e<this.htmlNode.childsCount;e++)this._xcloseAll(this.htmlNode.childNodes[e]);this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0";var h=getCookie("treeOpenStatex"+c);if(h){var a=h.split(this.dlmtr);for(e=0;e<a.length;e++){var g=this._globalIdStorageFind(a[e]);if(g){if(this.XMLsource&&!g.XMLload&&g.id!=this.rootId)return void this._delayedLoad(g,"loadOpenStates('"+c+"')");this.openItem(a[e])}}}this.callEvent("onAllOpenDynamic",[])},dhtmlXTreeObject.prototype._delayedLoad=function(c,a){this.afterLoadMethod=a,this.onLoadReserve=this.onXLE,this.onXLE=this._delayedLoadStep2,this._loadDynXML(c.id)},dhtmlXTreeObject.prototype._delayedLoadStep2=function(tree){tree.onXLE=tree.onLoadReserve,window.setTimeout(function(){dhtmlx.temp=tree,eval("dhtmlx.temp."+tree.afterLoadMethod)},100),tree.onXLE&&tree.onXLE(tree),tree.callEvent("onXLE",[tree])},dhtmlXTreeObject.prototype._collectOpenStates=function(c){var e=[];if(1==this._getOpenState(c)){e.push(c.id);for(var a=0;a<c.childsCount;a++)e=e.concat(this._collectOpenStates(c.childNodes[a]))}return e},dhtmlXTreeObject.prototype.openAllItemsDynamic=function(a){this.ClosedElem=new Array,this.G_node=null;var c=this._globalIdStorageFind(a||this.rootId);c.id!=this.rootId&&0!=this.getOpenState(c.id)&&this.openItem(a),this._openAllNodeChilds(c,0),0<this.ClosedElem.length&&(this.onLoadReserve=this.onXLE,this.onXLE=this._loadAndOpen,this._loadAndOpen(this))},dhtmlXTreeObject.prototype._openAllNodeChilds=function(c){(0==c.XMLload||c.unParsed)&&this.ClosedElem.push(c);for(var a=0;a<c.childsCount;a++)this._getOpenState(c.childNodes[a])<0&&this._HideShow(c.childNodes[a],2),0<c.childNodes[a].childsCount&&this._openAllNodeChilds(c.childNodes[a]),(0==c.childNodes[a].XMLload||c.childNodes[a].unParsed)&&this.ClosedElem.push(c.childNodes[a])},dhtmlXTreeObject.prototype._loadAndOpen=function(a){a.G_node&&(a._openItem(a.G_node),a._openAllNodeChilds(a.G_node),a.G_node=null),0<a.ClosedElem.length&&(a.G_node=a.ClosedElem.shift()),a.G_node?a.G_node.unParsed?a.reParse(a.G_node):window.setTimeout(function(){a._loadDynXML(a.G_node.id)},100):(a.onXLE=a.onLoadReserve,a.onXLE&&a.onXLE(a),a.callEvent("onAllOpenDynamic",[a]))},dhtmlXTreeObject.prototype.openItemsDynamic=function(c,a){this.onXLE!=this._stepOpen&&(this._opnItmsDnmcFlg=dhx4.s2b(a),this.onLoadReserve=this.onXLE,this.onXLE=this._stepOpen,this.ClosedElem=c.split(",").reverse(),this._stepOpen(this))},dhtmlXTreeObject.prototype._stepOpen=function(c){if(!c.ClosedElem.length)return c.onXLE=c.onLoadReserve,c._opnItmsDnmcFlg&&c.selectItem(c.G_node,!0),c.onXLE&&arguments[1]&&c.onXLE.apply(c,arguments),void c.callEvent("onOpenDynamicEnd",[]);c.G_node=c.ClosedElem.pop(),c.skipLock=!0;var a=c._globalIdStorageFind(c.G_node);a&&(0===a.XMLload?c.openItem(c.G_node):(c.openItem(c.G_node),c._stepOpen(c))),c.skipLock=!1},dhtmlXTreeView.prototype.modules={},dhtmlXTreeView.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("s{0,}dhxtreeview_"+(this.conf.skin||"")),"")+" dhxtreeview_"+a,this.conf.skin=a,this.conf.icon_width=dhx4.readFromCss("dhxtreeview_"+this.conf.skin+" dhxtreeview_icon_width"),this.conf.ofs="dhx_skyblue"==this.conf.skin?{w:1,h:0}:{w:0,h:0}},dhtmlXTreeView.prototype.setItemText=function(c,a){null!=this.items[c]&&(this.items[c].text=a,this.items[c].item.firstChild.childNodes[this.conf.idx.text].innerHTML=a,this._callPublicEvent("onTextChange",[c,a]))},dhtmlXTreeView.prototype.getItemText=function(a){return this.items[a].text},dhtmlXTreeView.prototype.getParentId=function(a){return this.items[a].pId},dhtmlXTreeView.prototype.getSubItems=function(g){var e=[];for(var c in this.items)this.items[c].pId==g&&e.push(c);return e},dhtmlXTreeView.prototype._refreshItemHtml=function(e,a,c){this.items[e].item.firstChild.innerHTML=this._getItemHtml(e),1==a&&this._signUpdate(e),1==c&&this._iconUpdate(e)},dhtmlXTreeView.prototype._getItemHtml=function(l){var e=[],h=0;for(var c in this.conf.idx){var g=this["_itemHtml_"+c](l,h);!1!==g.nodeText&&(e.push(g.nodeText),h+=g.nodeIndex)}return e.join("")},dhtmlXTreeView.prototype._getIconOfs=function(c,a){return(this.items[c].level-1+a)*this.conf.icon_width},dhtmlXTreeView.prototype._itemHtml_text=function(c,a){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_label' style='left:"+this._getIconOfs(c,a)+"px;'>"+this.items[c].text+"</div>"}},dhtmlXTreeView.prototype.setUserData=function(g,a,e){var c=this.items[g];c&&(c.userdata[a]=e)},dhtmlXTreeView.prototype.getUserData=function(e,a){var c=this.items[e];return c&&!a?c.userdata:c&&c.userdata[a]||null},dhtmlXTreeView.prototype.silent=function(a){this.conf.silent=!0,"function"==typeof a&&a.apply(window,[this]),this.conf.silent=!1},dhtmlXTreeView.prototype._callPublicEvent=function(){return 0!=this.conf.silent||this.callEvent.apply(this,arguments)},"function"==typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachTreeView=function(e){this.callEvent("_onBeforeContentAttach",["treeview"]);var h=document.createElement("DIV");h.style.position="relative",h.style.overflow="hidden",h.style.width="100%",h.style.height="100%",this._attachObject(h);var g={parent:h,skin:this.conf.skin};if(null!=e&&"object"==typeof e)for(var c in e)void 0===g[c]&&(g[c]=e[c]);return this.dataType="treeview",this.dataObj=new dhtmlXTreeView(g),"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(h.className+=" dhxtreeview_with_border",this.dataObj.conf.adjust_base=!0,this.dataObj.setSizes()),g.parent=null,g=h=e=null,this.callEvent("_onContentAttach",[]),this.dataObj}),dhtmlXTreeView.prototype.modules.chbx={init:"_chbxInit"},dhtmlXTreeView.prototype.enableCheckboxes=function(e){if(e=1==e,this.conf.enable_chbx!=e)for(var c in this.conf.enable_chbx=e,this._chbxUpdIndex(),this.items)this._refreshItemHtml(c,!0,!0)},dhtmlXTreeView.prototype.getAllChecked=function(a){return this._chbxGetCheckedBranch(a,!0)},dhtmlXTreeView.prototype.getAllUnchecked=function(a){return this._chbxGetCheckedBranch(a,!1)},dhtmlXTreeView.prototype.checkItem=function(a){this._chbxSetChecked(a,!0,!0)},dhtmlXTreeView.prototype.uncheckItem=function(a){this._chbxSetChecked(a,!1,!0)},dhtmlXTreeView.prototype.isItemChecked=function(a){return null==this.items[a]?null:1==this.items[a].checked},dhtmlXTreeView.prototype.enableCheckbox=function(a){this._chbxSetEnabled(a,!0)},dhtmlXTreeView.prototype.disableCheckbox=function(a){this._chbxSetEnabled(a,!1)},dhtmlXTreeView.prototype.isCheckboxEnabled=function(a){return 1==this.items[a].chbx_enabled},dhtmlXTreeView.prototype.showCheckbox=function(a){this._chbxSetVisible(a,!0)},dhtmlXTreeView.prototype.hideCheckbox=function(a){this._chbxSetVisible(a,!1)},dhtmlXTreeView.prototype.isCheckboxVisible=function(a){return 1==this.items[a].chbx_visible},dhtmlXTreeView.prototype._chbxInit=function(a){this.enableCheckboxes(a.checkboxes),this.attachEvent("_onItemRendered",function(g,e){this.items[g].checked=window.dhx4.s2b(e.checked);var c=e.checkbox||"enabled,visible";this.items[g].chbx_enabled=null==c.match(/disabled/),this.items[g].chbx_visible=null==c.match(/hidden/)}),this.attachEvent("_onTreeClick",function(h,c){if(1==this.conf.enable_chbx){var g=h.target||h.srcElement;if("i"==g.tagName.toLowerCase()&&(g=g.parentNode),null!=(g.parentNode.className||"").match(/dhxtreeview_item_text/)&&g==g.parentNode.childNodes[this.conf.idx.chbx]){var l=g.parentNode.parentNode._itemId;1==this.items[l].chbx_enabled&&this._chbxSetChecked(l,!this.items[l].checked,!0),c.stop=!0}}}),a=null},dhtmlXTreeView.prototype._itemHtml_chbx=function(e,c){var a={nodeIndex:0,nodeText:!1};return 1==this.conf.enable_chbx&&(1==this.items[e].chbx_visible&&(a.nodeIndex=1),a.nodeText="<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(e,c)+"px;"+(0<a.nodeIndex?"":"display:none;")+"'>"+this._chbxGenIcon(e)+"</div>"),a},dhtmlXTreeView.prototype._chbxSetChecked=function(c,a){if(1==this.conf.enable_chbx&&(a=1==a,this.items[c].checked!=a)){if(!0!==this._callPublicEvent("onBeforeCheck",[c,1==this.items[c].checked]))return;this.items[c].checked=a,this.items[c].item.childNodes[0].childNodes[this.conf.idx.chbx].innerHTML=this._chbxGenIcon(c),this._callPublicEvent("onCheck",[c,a])}},dhtmlXTreeView.prototype._chbxSetEnabled=function(c,a){this.items[c].chbx_enabled!=a&&(this.items[c].chbx_enabled=a,this.items[c].item.firstChild.childNodes[this.conf.idx.chbx].innerHTML=this._chbxGenIcon(c))},dhtmlXTreeView.prototype._chbxSetVisible=function(c,a){this.items[c].chbx_visible!=a&&(this.items[c].chbx_visible=a,this._refreshItemHtml(c,!0,!0))},dhtmlXTreeView.prototype._chbxGenIcon=function(c){var a=this.conf.icons["chbx_"+(this.items[c].chbx_enabled?"":"dis_")+(this.items[c].checked?"1":"0")];return'<i class="'+this.conf.icons.prefix+" "+a+'"></i>'},dhtmlXTreeView.prototype._chbxUpdIndex=function(){1==this.conf.enable_chbx?this.conf.idx={sign:0,chbx:1,icon:2,text:3}:this.conf.idx={sign:0,icon:1,text:2}},dhtmlXTreeView.prototype._chbxGetCheckedBranch=function(g,h){var e=[];for(var c in this.items)this.items[c].pId==g&&(this.items[c].checked==h&&e.push(c),1==this.items[c].kids&&(e=e.concat(this._chbxGetCheckedBranch(c,h))));return e},dhtmlXTreeView.prototype.modules.sign={init:"_signInit"},dhtmlXTreeView.prototype._signInit=function(){this.attachEvent("_onTreeClick",function(g,a){if(1!=a.stop){var c=g.target||g.srcElement;"i"==c.tagName.toLowerCase()&&(c=c.parentNode),null!=(c.parentNode.className||"").match(/dhxtreeview_item_text/)&&c==c.parentNode.childNodes[this.conf.idx.sign]&&(this._openCloseItem(c.parentNode.parentNode._itemId,!0),a.stop=!0)}})},dhtmlXTreeView.prototype._signUpdate=function(e){var c=this.items[e],a=c.item.childNodes[0].childNodes[this.conf.idx.sign];1==c.kids||1==c.kids_request?a.innerHTML='<i class="'+this.conf.icons.prefix+" "+this.conf.icons[c.opened||c.half_opened?"minus":"plus"]+'"></i>':a.innerHTML="",c=a=null},dhtmlXTreeView.prototype._itemHtml_sign=function(c,a){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(c,a)+"px;'></div>"}},dhtmlXTreeView.prototype.modules.selection={init:"_selectionInit"},dhtmlXTreeView.prototype.selectItem=function(h){if(1==this.conf.msel){var e={};h instanceof Array||(h=[h]);for(var g=0;g<h.length;g++)e[h[g]]=!0;for(var c in this.conf.selected)1==e[c]?delete e[c]:this._setSelected(c,!1);for(var c in e)this._setSelected(c,!0)}else null==h||1==this.conf.selected[h]||h instanceof Array||0==this._clearSelection(h)&&this._setSelected(h,!0)},dhtmlXTreeView.prototype.unselectItem=function(c){if(1==this.conf.msel){c instanceof Array||(c=[c]);for(var a=0;a<c.length;a++)1==this.conf.selected[c[a]]&&this._setSelected(c[a],!1)}else null!=c&&this._setSelected(c,!1)},dhtmlXTreeView.prototype.getSelectedId=function(){var e=[];for(var c in this.conf.selected)e.push(c);return this.conf.msel?e:e[0]||null},dhtmlXTreeView.prototype.enableMultiselect=function(a){a=1==a,this.conf.msel!=a&&(this._clearSelection(),this.conf.msel=a)},dhtmlXTreeView.prototype._selectionInit=function(a){this.conf.msel=window.dhx4.s2b(a.multiselect),this.attachEvent("_onTreeClick",function(l,c){if(1!=c.stop){var h=l.target||l.srcElement;"i"==h.tagName.toLowerCase()&&(h=h.parentNode);var g=null;null!=h.className.match(/dhxtreeview_item_label/)?g=h.parentNode.parentNode._itemId:null!=h.className.match(/^dhxtreeview_item_text/)?g=h.parentNode._itemId:null!=h.className.match(/^dhxtreeview_item_icon/)&&(g=h.parentNode.parentNode._itemId),null!=g&&(1==this.conf.msel?1!=l.ctrlKey&&1!=this.conf.mac_cmd_key||0!=l.shiftKey||0!=l.altKey?0==l.ctrlKey&&0==l.shiftKey&&0==l.altKey&&0==this.conf.mac_cmd_key&&0==this._clearSelection(g)&&this._setSelected(g,!0):this._setSelected(g,!this._isSelected(g)):0==this._clearSelection(g)&&this._setSelected(g,!0))}})},dhtmlXTreeView.prototype._setSelected=function(c,a){1==a?1!=this.conf.selected[c]&&(this.items[c].item.childNodes[0].className+=" dhxtreeview_item_text_selected",this.conf.selected[c]=!0,this._callPublicEvent("onSelect",[c,!0])):1==this.conf.selected[c]&&(this.items[c].item.childNodes[0].className=String(this.items[c].item.childNodes[0].className).replace(/\s*dhxtreeview_item_text_selected/gi,""),delete this.conf.selected[c],this._callPublicEvent("onSelect",[c,!1]))},dhtmlXTreeView.prototype._clearSelection=function(g){var e=!1;for(var c in this.conf.selected)null!=g&&c==g?e=!0:this._setSelected(c,!1);return e},dhtmlXTreeView.prototype._isSelected=function(a){return 1==this.conf.selected[a]},dhtmlXTreeView.prototype.modules.icons={init:"_iconModuleInit"},dhtmlXTreeView.prototype.setItemIcons=function(g,e){if(null==e&&null!=this.items[g].icons)delete this.items[g].icons;else if(null!=e)for(var c in null==this.items[g].icons&&(this.items[g].icons={}),e)null!=e[c]?this.items[g].icons[c]=e[c]:null==e[c]&&null!=this.items[g].icons[c]&&delete this.items[g].icons[c];this._iconUpdate(g)},dhtmlXTreeView.prototype.setIconColor=function(e,a){var c=this.items[e].item.firstChild.childNodes[this.conf.idx.icon].firstChild;null==a?null!=this.items[e].icon_color&&(delete this.items[e].icon_color,c.style.color="inherit"):this.items[e].icon_color!=a&&(this.items[e].icon_color=a,c.style.color=a),c=null},dhtmlXTreeView.prototype.setIconset=function(a){null!=this.icons[a]&&1==this.icons[a].r&&(this.conf.icons=this.icons[a])},dhtmlXTreeView.prototype._iconModuleInit=function(){this.attachEvent("_onItemRendered",function(c,a){null!=a.icons&&(this.items[c].icons=a.icons),null!=a.icon_color&&(this.items[c].icon_color=a.icon_color)})},dhtmlXTreeView.prototype._iconConf=function(g){var e=this.items[g].icons||{};for(var c in{folder_opened:1,folder_closed:1,file:1})void 0===e[c]&&(e[c]=this.conf.icons[c]);return e},dhtmlXTreeView.prototype._iconHtml=function(e,c){var a=['class="'+this.conf.icons.prefix+" "+c+'"'];return null!=this.items[e].icon_color&&a.push('style="color:'+this.items[e].icon_color+';"'),"<i "+a.join(" ")+"></i>"},dhtmlXTreeView.prototype._itemHtml_icon=function(c,a){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(c,a)+"px;'>"+this._iconHtml(c,this._iconConf(c).file)+"</div>"}},dhtmlXTreeView.prototype._iconUpdate=function(g){var e=this.items[g],c=this._iconConf(g),a=1==e.kids||1==e.kids_request?c[e.opened?"folder_opened":"folder_closed"]:c.file;e.item.childNodes[0].childNodes[this.conf.idx.icon].innerHTML=this._iconHtml(g,a),e=null},dhtmlXTreeView.prototype.icons={tree_native:{r:!0,prefix:"dhxtreeview_icon",plus:"dhxtreeview_icon_plus",minus:"dhxtreeview_icon_minus",file:"dhxtreeview_icon_file",folder_opened:"dhxtreeview_icon_folder_opened",folder_closed:"dhxtreeview_icon_folder_closed",loading:"dhxtreeview_icon_loading",chbx_0:"dhxtreeview_icon_chbx_0",chbx_1:"dhxtreeview_icon_chbx_1",chbx_dis_0:"dhxtreeview_icon_chbx_dis_0",chbx_dis_1:"dhxtreeview_icon_chbx_dis_1"},font_awesome:{r:!(1==window.dhx4.isIE6||1==window.dhx4.isIE7),prefix:"fa",plus:"fa-caret-right",minus:"fa-caret-down",file:"fa-file-o",folder_opened:"fa-folder-open-o",folder_closed:"fa-folder-o",loading:"fa-refresh fa-spin",chbx_0:"fa-square-o",chbx_1:"fa-check-square-o",chbx_dis_0:"fa-square-o dhx-disabled",chbx_dis_1:"fa-check-square-o dhx-disabled"}},dhtmlXTreeView.prototype.modules.loading={init:"_loadingInit",unload:"_loadingUnload"},dhtmlXTreeView.prototype._loadingInit=function(a){window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tree",{struct:!0}),this.conf.root_id=void 0===a.root_id||null==a.root_id?"0":a.root_id,this._dhxdataload.onBeforeXLS=function(c){return null==this.conf.autoload.url&&(this.conf.autoload.url=c),{url:c.replace(/\{id\}/gi,this.conf.root_id)}}},dhtmlXTreeView.prototype._loadingUnload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear")},dhtmlXTreeView.prototype._initObj=function(h,a,c,e){for(var g=0;g<h.length;g++){var l=h[g].id;null==l&&(l="dhxtreeview_id_"+window.dhx4.newId()),null==this.items[l]&&this._addItem(l,c,h[g]),null!=h[g].items&&this._initObj(h[g].items,null,l,!0)}1!=e&&this._fixAreaWidth()},dhtmlXTreeView.prototype._xmlToObj=function(n,m){1!=m&&(n=n.getElementsByTagName("tree")[0]);for(var h=[],c=0;c<n.childNodes.length;c++){var g=n.childNodes[c];if("item"==(g.tagName||"").toLowerCase()){for(var r={},o=0;o<g.attributes.length;o++)r[g.attributes[o].name]=g.attributes[o].value;if(0<g.childNodes.length){0<(m=this._xmlToObj(g,!0)).length&&(r.items=m);for(o=0;o<g.childNodes.length;o++){var s=(g.childNodes[o].tagName||"").toLowerCase();if(1=={icons:1,userdata:1}[s]){null==r[s]&&(r[s]={});for(var l=0;l<g.childNodes[o].attributes.length;l++){var a=g.childNodes[o].attributes[l].name;null==r[s][a]&&(r[s][a]=g.childNodes[o].attributes[l].value)}}n2=null}}h.push(r)}g=null}return h},dhtmlXTreeView.prototype.modules.dnd={init:"_dndInit",unload:"_dndUnload"},dhtmlXTreeView.prototype.enableDragAndDrop=function(a){this.conf.enable_dnd=window.dhx4.s2b(a)},dhtmlXTreeView.prototype._dndInit=function(a){var c=this;this.enableDragAndDrop(a.dnd),this.conf.dnd=null,this._dndOnMouseDown=function(n){if(1==c.conf.enable_dnd){if(void 0!==(n=n||event).button&&2<=n.button)return!1;for(var o=null,m=null,l=n.target||n.srcElement,h=window.dhx4.absLeft(l)+(void 0===n.offsetX?n.layerX:n.offsetX)-n.clientX,g=window.dhx4.absTop(l)+(void 0===n.offsetY?n.layerY:n.offsetY)-n.clientY;null!=l&&l!=c.cont;)null!=(l.className||"").match(/dhxtreeview_item/)&&null!=l._itemId?(o=l._itemId,m=l._treeId,l=null):l=l.parentNode;(l=null)!=o&&(c.conf.dnd={inited:!1,id:o,treeId:m,selected:1==c.conf.selected[o],tid:null,drop:{},x:n.clientX,y:n.clientY,ofs_x:h,ofs_y:g,zi:window.dhx4.newId(),scroll:!1,scroll_ofs:5,scroll_time:30,scroll_tm:null,kids:{},idx:{}},c._dndInitEvents())}},this._dndOnMouseMove=function(u){if(u=u||event,1!=c.conf.dnd.inited){if(!(15<=Math.abs(c.conf.dnd.x-u.clientX)||15<=Math.abs(c.conf.dnd.y-u.clientY)))return;if(!0!==c._callPublicEvent("onBeforeDrag",[c.conf.dnd.id]))return;c.conf.dnd.inited=!0,c.cont.className+=" dhxtreeview_dnd_mode",c._dndInitDraggedObj(),c._dndCollectKids(c.conf.dnd.id),c._dndCollectIndexes(c.area),0==c._clearSelection(c.conf.dnd.id)&&c._setSelected(c.conf.dnd.id,!0),c.items[c.conf.dnd.id].item.className+=" dhxtreeview_item_dragged",document.body.className+=" dhxtreeview_dnd_mode",c.conf.dnd.cont={x1:window.dhx4.absLeft(c.base),y1:window.dhx4.absTop(c.base)},c.conf.dnd.cont.x2=c.conf.dnd.cont.x1+c.base.offsetWidth,c.conf.dnd.cont.y2=c.conf.dnd.cont.y1+c.base.offsetHeight}c.conf.dnd.x=u.clientX,c.conf.dnd.y=u.clientY,c._dndAdjustDraggedObj();var m=!0;c.cont.scrollHeight>c.cont.clientHeight&&c.conf.dnd.x>=c.conf.dnd.cont.x1&&c.conf.dnd.x<=c.conf.dnd.cont.x2&&(0<c.cont.scrollTop&&c.conf.dnd.y>=c.conf.dnd.cont.y1&&c.conf.dnd.y<=c.conf.dnd.cont.y1+10?(c._dndScroll("up"),m=!1):c.cont.scrollTop+c.cont.clientHeight<c.cont.scrollHeight&&c.conf.dnd.y<=c.conf.dnd.cont.y2&&c.conf.dnd.y>=c.conf.dnd.cont.y2-10&&(c._dndScroll("down"),m=!1)),1==m&&1==c.conf.dnd.scroll&&c._dndScroll("stop");var w=u.target||u.srcElement;if(null==w.parentNode||null==(w.parentNode.className||"").match(/dhxtreeview_kids_cont/)){var g=!1,n=null,s=null;if(null!=w.className&&(null!=w.className.match(/dhxtreeview_item_[li]/)?(n=w.parentNode.parentNode._itemId,s=w.parentNode.parentNode._treeId):null!=w.className.match(/dhxtreeview_item_[t]/)&&(n=w.parentNode._itemId,s=w.parentNode._treeId)),null==n||s==c.conf.dnd.treeId){if(c.conf.dnd.id!=n&&1!=c.conf.dnd.kids[n]||(n=null),null!=n){var o=c.items[n].item.firstChild.offsetHeight,v=Math.max(Math.floor(3*Math.min(u.layerY||u.offsetY,o)/o),0);0==v?c.items[n].item.previousSibling==c.items[c.conf.dnd.id].item&&(v=null):1==v?c.items[c.conf.dnd.id].pId==n?v=null:1==c.items[n].kids&&c.items[n].item.lastChild.firstChild.firstChild==c.items[c.conf.dnd.id].item?v=null:c.items[n].opened:2==v&&(1==c.items[n].opened?v=null:c.items[n].item.nextSibling==c.items[c.conf.dnd.id].item&&(v=null)),v!=c.conf.dnd.ofs&&(c.conf.dnd.ofs=v,g=!0)}if(n!=c.conf.dnd.tid&&(null!=c.conf.dnd.tid&&c._dndUpdateTargetCss(c.conf.dnd.tid,!1),null!=n&&(g=!0),c.conf.dnd.tid=n),1==g){var r=!1;if(null!=v){var l={id:c.conf.dnd.id,pId:c.items[n].pId||null,index:null,idxOfs:c.items[c.conf.dnd.id].pId==c.items[n].pId&&c.conf.dnd.idx[c.conf.dnd.id]<c.conf.dnd.idx[n]?-1:0};0==v||2==v?l.index=c.conf.dnd.idx[n]+(2==v?1:0)+l.idxOfs:1==v&&(l.pId=n,l.index=null==c.items[n].item.lastChild.className.match(/dhxtreeview_kids_cont/)?0:c.items[n].item.lastChild.firstChild.childNodes.length),c.conf.dnd.drop.id==l.id&&c.conf.dnd.drop.pId==l.pId&&c.conf.dnd.drop.index==l.index||(c.conf.dnd.drop=l,!0===c._callPublicEvent("onDragOver",[c.conf.dnd.drop.id,c.conf.dnd.drop.pId,c.conf.dnd.drop.index])&&(r=!0))}1!=r&&(c.conf.dnd.ofs=v=null),c._dndUpdateTargetCss(n,r)}}}else w=null},this._dndOnMouseUp=function(r){if(!(void 0!==(r=r||event).button&&2<=r.button)){if(c._dndUnloadEvents(),c._dndUnloadDraggedObj(),1==c.conf.dnd.scroll&&c._dndScroll("stop"),null!=c.cont.className.match(/dhxtreeview_dnd_mode/gi)&&(c.cont.className=String(c.cont.className).replace(/\s*dhxtreeview_dnd_mode/gi,"")),null!=c.conf.dnd.tid&&c._dndUpdateTargetCss(c.conf.dnd.tid,!1),1==c.conf.dnd.inited&&(c.items[c.conf.dnd.id].item.className=String(c.items[c.conf.dnd.id].item.className).replace(/\s*dhxtreeview_item_dragged/gi,""),document.body.className=String(document.body.className).replace(/\s*dhxtreeview_dnd_mode/,""),null!=c.conf.dnd.tid&&null!=c.conf.dnd.ofs&&!0===c._callPublicEvent("onBeforeDrop",[c.conf.dnd.drop.id,c.conf.dnd.drop.pId,c.conf.dnd.drop.index]))){var n,o=c.items[c.conf.dnd.id],h=c.items[c.conf.dnd.tid],l=null!=o.pId?c.items[o.pId]:null;if(1==c.conf.dnd.ofs){var m=!1;0==h.kids&&(c._initKidsNode(h.id),m=!0),h.item.lastChild.firstChild.appendChild(o.item),1==m&&c._openCloseItem(h.id,!1),o.pId=h.id,n=h.level+1-o.level}else 0!=c.conf.dnd.ofs&&2!=c.conf.dnd.ofs||(0==c.conf.dnd.ofs?h.item.parentNode.insertBefore(o.item,h.item):null!=h.item.nextSibling?h.item.parentNode.insertBefore(o.item,h.item.nextSibling):h.item.parentNode.appendChild(o.item),o.pId=h.pId,n=h.level-o.level);if(0!=n)for(var g in c.conf.dnd.kids[o.id]=!0,c.conf.dnd.kids)c.items[g].level+=n,c._refreshItemHtml(g,1==c.items[g].kids,!0);null!=l&&1==l.kids&&0==l.item.lastChild.firstChild.childNodes.length&&(c._clearKidsNode(l.id),l.opened=!1),o=h=l=null,c._fixAreaWidth(),c._callPublicEvent("onDrop",[c.conf.dnd.drop.id,c.conf.dnd.drop.pId,c.conf.dnd.drop.index])}window.dhx4.zim.clear(c.conf.dnd.zi),c.conf.dnd=null}},this._dndOnContextMenu=function(g){if(1==c.conf.dnd.inited)return(g=g||event).cancelBubble=!0,g.preventDefault&&g.preventDefault(),g.returnValue=!1},this._dndInitEvents=function(){"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._dndOnMouseMove,!1),window.addEventListener("mouseup",this._dndOnMouseUp,!1),window.addEventListener("contextmenu",this._dndOnContextMenu,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove),document.body.attachEvent("onmouseup",this._dndOnMouseUp),document.body.attachEvent("oncontextmenu",this._dndOnContextMenu))},this._dndUnloadEvents=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._dndOnMouseMove,!1),window.removeEventListener("mouseup",this._dndOnMouseUp,!1),window.removeEventListener("contextmenu",this._dndOnContextMenu,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove),document.body.detachEvent("onmouseup",this._dndOnMouseUp),document.body.detachEvent("oncontextmenu",this._dndOnContextMenu))},this._dndInitDraggedObj=function(){this.conf.dnd.dragged=document.createElement("DIV"),this.conf.dnd.dragged.className="dhxtreeview_dragged_obj_"+this.conf.skin,this.conf.dnd.dragged.style.zIndex=window.dhx4.zim.reserve(this.conf.dnd.zi),document.body.appendChild(this.conf.dnd.dragged),this.conf.dnd.dragged.innerHTML=this.getItemText(this.conf.dnd.id)},this._dndAdjustDraggedObj=function(){this.conf.dnd.dragged.style.left=this.conf.dnd.x+this.conf.dnd.ofs_x+12+"px",this.conf.dnd.dragged.style.top=this.conf.dnd.y+this.conf.dnd.ofs_y+18+"px"},this._dndUnloadDraggedObj=function(){null!=this.conf.dnd.dragged&&(document.body.removeChild(this.conf.dnd.dragged),this.conf.dnd.dragged=null)},this._dndUpdateTargetCss=function(l,h){var g=this.items[l].item.childNodes[0];if(null==this.conf.dnd.ofs&&(h=!1),1==h){if(g.className=String(g.className).replace(/(\s*dhxtreeview_drop_\d)?$/i," dhxtreeview_drop_"+this.conf.dnd.ofs),null==g.nextSibling||null==g.nextSibling.className.match(/dhxtreeview_drop_preview/)){var e=document.createElement("DIV");e.className="dhxtreeview_drop_preview",e.style.left=g.lastChild.previousSibling.style.left,null==g.nextSibling?g.parentNode.appendChild(e):g.parentNode.insertBefore(e,g.nextSibling),e=null}g.nextSibling.className=String(g.nextSibling.className).replace(/(\s*dhxtreeview_drop_\d)?$/i," dhxtreeview_drop_"+this.conf.dnd.ofs)}else null!=g.className.match(/dhxtreeview_drop_\d/)&&(g.className=String(g.className).replace(/\s*dhxtreeview_drop_\d/gi,""),null!=g.nextSibling&&null!=g.nextSibling.className.match(/dhxtreeview_drop_preview/)&&g.parentNode.removeChild(g.nextSibling));g=null},this._dndCollectKids=function(g){for(var e in this.items)this.items[e].pId==g&&(this.conf.dnd.kids[e]=!0,1==this.items[e].kids&&this._dndCollectKids(e))},this._dndCollectIndexes=function(e){for(var g=0;g<e.childNodes.length;g++)this.conf.dnd.idx[e.childNodes[g]._itemId]=g,null!=e.childNodes[g].lastChild.className.match(/dhxtreeview_kids_cont/)&&this._dndCollectIndexes(e.childNodes[g].lastChild.firstChild)},this._dndScroll=function(h,g){if("stop"!=h){if(1==c.conf.dnd.scroll){if(1!=g)return}else c.conf.dnd.scroll=!0;var e=!1;"up"==h?(c.cont.scrollTop=Math.max(0,c.cont.scrollTop-c.conf.dnd.scroll_ofs),0==c.cont.scrollTop&&(e=!0)):(c.cont.scrollTop=Math.min(c.cont.scrollHeight-c.cont.clientHeight,c.cont.scrollTop+c.conf.dnd.scroll_ofs),c.cont.scrollTop+c.cont.clientHeight==c.cont.scrollHeight&&(e=!0)),1!=e&&(c.conf.dnd.scroll_tm=window.setTimeout(function(){c._dndScroll(h,!0)},c.conf.dnd.scroll_time))}else 1==c.conf.dnd.scroll&&(c.conf.dnd.scroll_tm&&window.clearTimeout(c.conf.dnd.scroll_tm),c.conf.dnd.scroll=!1)},"function"==typeof window.addEventListener?this.cont.addEventListener("mousedown",this._dndOnMouseDown,!1):this.cont.attachEvent("onmousedown",this._dndOnMouseDown),this._dndUnload=function(){"function"==typeof window.addEventListener?this.cont.removeEventListener("mousedown",this._dndOnMouseDown,!1):this.cont.detachEvent("onmousedown",this._dndOnMouseDown),c=null},a=null},dhtmlXTreeView.prototype.modules.ctx={init:"_ctxInit",unload:"_ctxUnload"},dhtmlXTreeView.prototype.enableContextMenu=function(a){this.conf.ctx=window.dhx4.s2b(a)},dhtmlXTreeView.prototype._ctxInit=function(a){var c=this;this._ctxCall=function(l){if(1==c.conf.ctx){var h=(l=l||event).target||l.srcElement;"i"==h.tagName.toLowerCase()&&(h=h.parentNode);var n=h.parentNode._itemId||h.parentNode.parentNode._itemId,g=window.dhx4.absLeft(h)+(void 0===l.offsetX?l.layerX:l.offsetX),m=window.dhx4.absTop(h)+(void 0===l.offsetY?l.layerY:l.offsetY);return null!=n&&!0!==c._callPublicEvent("onContextMenu",[n,g,m,l])?(l.preventDefault&&l.preventDefault(),l.cancelBubble=!0,l.returnValue=!1):void 0}},"function"==typeof window.addEventListener?this.cont.addEventListener("contextmenu",this._ctxCall,!1):this.cont.attachEvent("oncontextmenu",this._ctxCall),this._ctxUnload=function(){"function"==typeof window.addEventListener?this.cont.removeEventListener("contextmenu",this._ctxCall,!1):this.cont.detachEvent("oncontextmenu",this._ctxCall),c=null},this.enableContextMenu(a.context_menu)},dhtmlXTreeView.prototype.modules.dynload={init:"_dynLoadInit"},dhtmlXTreeView.prototype._dynLoadInit=function(){this.attachEvent("_onItemInited",function(e,c){if(this.items[e].kids_request=window.dhx4.s2b(c.kids),1==this.items[e].kids_request&&this._initKidsNode(e),1==this.items[e].opened&&1==this.items[e].kids_request){var a=this;window.setTimeout(function(){a._dynLoadRequest(e),a=null},100)}}),this.attachEvent("_onBeforeOpen",function(a){return 1==this.items[a].opened||1!=this.items[a].kids_request||1==this._dynLoadRequest(a)||(this.items[a].half_opened=!0,this._signUpdate(a),!1)})},dhtmlXTreeView.prototype._dynLoadRequest=function(c){if("function"==typeof this.conf.autoload.mode)return this.conf.autoload.mode.apply(window,[c]),!0;if(null!=this.conf.autoload.url){this._dhxdataload.onBeforeXLS=function(e){return{url:e.replace(/\{id\}/gi,c)}};var a=this;return this.items[c].kids_loading_tm=window.setTimeout(function(){a._dynLoadUpdateIcon(c,!0),a=null},100),this.loadStruct(this.conf.autoload.url,function(){window.clearTimeout(this.items[c].kids_loading_tm),this._dynLoadUpdateIcon(c,!1),this.items[c].half_opened&&(this.items[c].half_opened=!1,this._openCloseItem(c,!0))}),this.items[c].kids_request=!1}},dhtmlXTreeView.prototype._dynLoadUpdateIcon=function(c,a){this.items[c].loading=1==a,1==this.items[c].loading?this.items[c].item.childNodes[0].childNodes[this.conf.idx.icon].innerHTML="<i class='"+this.conf.icons.prefix+" "+this.conf.icons.loading+"'></i>":this._iconUpdate(c)},String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")},dhtmlxArray._master={_dhx_find:function(c){for(var a=0;a<this.length;a++)if(c==this[a])return a;return-1},_dhx_insertAt:function(e,c){this[this.length]=null;for(var a=this.length-1;e<=a;a--)this[a]=this[a-1];this[e]=c},_dhx_removeAt:function(a){this.splice(a,1)},_dhx_swapItems:function(a,e){var c=this[a];this[a]=this[e],this[e]=c}},dhtmlXGridObject.prototype={getRowAttribute:function(c,a){return this.getRowById(c)._attrs[a]},setRowAttribute:function(e,a,c){this.getRowById(e)._attrs[a]=c},isTreeGrid:function(){return-1!=this.cellType._dhx_find("tree")},setRowHidden:function(l,e){dhx4.s2b(e);var h=this.getRowById(l);if(h){if(""===h.expand&&this.collapseKids(h),e&&"none"!=h.style.display){h.style.display="none";var g=this.selectedRows._dhx_find(h);if(-1!=g){h.className=h.className.replace("rowselected","");for(var a=0;a<h.childNodes.length;a++)h.childNodes[a].className=h.childNodes[a].className.replace(/cellselected/g,"");this.selectedRows._dhx_removeAt(g)}this.callEvent("onGridReconstructed",[])}e||"none"!=h.style.display||(h.style.display="",this.callEvent("onGridReconstructed",[])),this.callEvent("onRowHide",[l,e]),this.setSizes()}},setColumnHidden:function(e,c){if(!this.hdr.rows.length)return this._ivizcol||(this._ivizcol=[]),this._ivizcol[e]=c;if(this.fldSorted&&this.fldSorted.cellIndex==e&&c&&(this.sortImg.style.display="none"),dhx4.s2b(c)){if(this._hrrar){if(this._hrrar[e])return}else this._hrrar=new Array;this._hrrar[e]="display:none;",this._hideShowColumn(e,"none")}else{if(!this._hrrar||!this._hrrar[e])return;this._hrrar[e]="",this._hideShowColumn(e,"")}this.fldSorted&&this.fldSorted.cellIndex==e&&!c&&(this.sortImg.style.display="inline"),this.setSortImgPos(),this.callEvent("onColumnHidden",[e,c])},isColumnHidden:function(a){return!(!this._hrrar||!this._hrrar[a])},setColumnsVisibility:function(c){if(c&&(this._ivizcol=c.split(this.delim)),this.hdr.rows.length&&this._ivizcol)for(var a=0;a<this._ivizcol.length;a++)this.setColumnHidden(a,this._ivizcol[a])},_fixHiddenRowsAll:function(n,e,a,c,l){l=l||"_cellIndex";for(var m=n.rows.length,h=0;h<m;h++){var o=n.rows[h].childNodes;if(o.length!=this._cCount){for(var g=0;g<o.length;g++)if(o[g][l]==e){o[g].style[a]=c;break}}else o[e].style[a]=c}},_hideShowColumn:function(h,g){if(this.hdr.rows[1]&&this.hdr.rows[1]._childIndexes&&this.hdr.rows[1]._childIndexes[h]!=h&&this.hdr.rows[1]._childIndexes[h],"none"==g){this.hdr.rows[0].cells[h]._oldWidth=this.hdr.rows[0].cells[h].style.width||this.initCellWidth[h]+"px",this.hdr.rows[0].cells[h]._oldWidthP=this.cellWidthPC[h],this.obj.rows[0].cells[h].style.width="0px";var c={rows:[this.obj.rows[0]]};this.forEachRow(function(l){"TR"==this.rowsAr[l].tagName&&c.rows.push(this.rowsAr[l])}),this._fixHiddenRowsAll(c,h,"display","none"),this.isTreeGrid()&&this._fixHiddenRowsAllTG(h,"none"),(_isOpera&&_OperaRv<9||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,h,"display","none","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],h,"display","none"),this._fixHiddenRowsAll(this.hdr,h,"whiteSpace","nowrap","_cellIndexS"),this.cellWidthPX.length||this.cellWidthPC.length||(this.cellWidthPX=[].concat(this.initCellWidth)),this.cellWidthPX[h]&&(this.cellWidthPX[h]=0),this.cellWidthPC[h]&&(this.cellWidthPC[h]=0)}else if(this.hdr.rows[0].cells[h]._oldWidth){var e=this.hdr.rows[0].cells[h];(_isOpera||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,h,"display","","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],h,"display","");c={rows:[this.obj.rows[0]]};this.forEachRow(function(l){"TR"==this.rowsAr[l].tagName&&c.rows.push(this.rowsAr[l])}),this._fixHiddenRowsAll(c,h,"display",""),this.isTreeGrid()&&this._fixHiddenRowsAllTG(h,""),this._fixHiddenRowsAll(this.hdr,h,"whiteSpace","normal","_cellIndexS"),e._oldWidthP&&(this.cellWidthPC[h]=e._oldWidthP),e._oldWidth&&(this.cellWidthPX[h]=parseInt(e._oldWidth))}!g&&this._realfake&&this.setColumnSizes(this.entBox.clientWidth),this.setSizes(),_isIE||_isFF||(this.obj.border=1,this.obj.border=0)},enableColSpan:function(a){this._ecspn=dhx4.s2b(a)},enableRowsHover:function(c,a){this._unsetRowHover(!1,!0),this._hvrCss=a,dhx4.s2b(c)?this._elmnh||(this.obj._honmousemove=this.obj.onmousemove,this.obj.onmousemove=this._setRowHover,_isIE?this.obj.onmouseleave=this._unsetRowHover:this.obj.onmouseout=this._unsetRowHover,this._elmnh=!0):this._elmnh&&(this.obj.onmousemove=this.obj._honmousemove,_isIE?this.obj.onmouseleave=null:this.obj.onmouseout=null,this._elmnh=!1)},enableEditEvents:function(c,e,a){this._sclE=dhx4.s2b(c),this._dclE=dhx4.s2b(e),this._f2kE=dhx4.s2b(a)},enableLightMouseNavigation:function(a){dhx4.s2b(a)?this._elmn||(this.entBox._onclick=this.entBox.onclick,this.entBox.onclick=function(){return!0},this.obj._onclick=this.obj.onclick,this.obj.onclick=function(g){var h=this.grid.getFirstParentOfType(g?g.target:event.srcElement,"TD");h&&(this.grid.editStop(),this.grid.doClick(h),this.grid.editCell(),(g||event).cancelBubble=!0)},this.obj._onmousemove=this.obj.onmousemove,this.obj.onmousemove=this._autoMoveSelect,this._elmn=!0):this._elmn&&(this.entBox.onclick=this.entBox._onclick,this.obj.onclick=this.obj._onclick,this.obj.onmousemove=this.obj._onmousemove,this._elmn=!1)},_unsetRowHover:function(g,h){if(that=h?this:this.grid,that._lahRw&&that._lahRw!=h){for(var a=0;a<that._lahRw.childNodes.length;a++)that._lahRw.childNodes[a].className=that._lahRw.childNodes[a].className.replace(that._hvrCss,"");that._lahRw=null}},_setRowHover:function(g){var h=this.grid.getFirstParentOfType(g?g.target:event.srcElement,"TD");if(h&&h.parentNode!=this.grid._lahRw){if(this.grid._unsetRowHover(0,h),!(h=h.parentNode).idd||"__filler__"==h.idd)return;for(var a=0;a<h.childNodes.length;a++)h.childNodes[a].className+=" "+this.grid._hvrCss;this.grid._lahRw=h}this._honmousemove(g)},_autoMoveSelect:function(a){if(!this.grid.editor){var g=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");g.parentNode.idd&&this.grid.doClick(g,!0,0)}this._onmousemove(a)},enableDistributedParsing:function(e,a,c){dhx4.s2b(e)?(this._ads_count=a||10,this._ads_time=c||250):this._ads_count=0},destructor:function(){if(this.editStop(!0),this._sizeTime&&(this._sizeTime=window.clearTimeout(this._sizeTime)),this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,""),this.formInputs)for(var e=0;e<this.formInputs.length;e++)this.parentForm.removeChild(this.formInputs[e]);var c;for(e=0;e<this.rowsCol.length;e++)this.rowsCol[e]&&(this.rowsCol[e].grid=null);for(e in this.rowsAr)this.rowsAr[e]&&(this.rowsAr[e]=null);this.rowsCol=new dhtmlxArray,this.rowsAr={},this.entBox.innerHTML="";var g=function(){};for(c in this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=g,this.setSizes=this._update_srnd_view=this.callEvent=g,this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null,this._fake&&(this.globalBox.innerHTML="",this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=g,this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=g),this)this[c]&&this[c].m_obj&&(this[c].m_obj=null),this[c]=null;return this==globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject=null),null},getSortingState:function(){var a=new Array;return this.fldSorted&&(a[0]=this.fldSorted._cellIndex,a[1]="dhxgrid_sort_desc"==this.sortImg.className?"des":"asc"),a},enableAutoHeight:function(e,c,a){this._ahgr=dhx4.s2b(e),this._ahgrF=dhx4.s2b(a),this._ahgrM=c||null,1==arguments.length&&(this.objBox.style.overflowY=e?"hidden":"auto"),"auto"==c&&(this._ahgrM=null,this._ahgrMA=!0,this._setAutoResize())},enableStableSorting:function(a){this._sst=dhx4.s2b(a),this.rowsCol.stablesort=function(l){for(var h=this.length-1,g=0;g<this.length-1;g++){for(var e=0;e<h;e++)if(0<l(this[e],this[e+1])){var c=this[e];this[e]=this[e+1],this[e+1]=c}h--}}},enableKeyboardSupport:function(a){this._htkebl=!dhx4.s2b(a)},enableContextMenu:function(a){this._ctmndx=a},setScrollbarWidthCorrection:function(a){},enableTooltips:function(c){this._enbTts=c.split(",");for(var a=0;a<this._enbTts.length;a++)this._enbTts[a]=dhx4.s2b(this._enbTts[a])},enableResizing:function(c){this._drsclmn=c.split(",");for(var a=0;a<this._drsclmn.length;a++)this._drsclmn[a]=dhx4.s2b(this._drsclmn[a])},setColumnMinWidth:function(a,c){2==arguments.length?(this._drsclmW||(this._drsclmW=new Array),this._drsclmW[c]=a):this._drsclmW=a.split(",")},enableCellIds:function(a){this._enbCid=dhx4.s2b(a)},lockRow:function(a,e){var c=this.getRowById(a);c&&(c._locked=dhx4.s2b(e),this.cell&&this.cell.parentNode.idd==a&&this.editStop())},_getRowArray:function(h){for(var g=new Array,e=0;e<h.childNodes.length;e++){var c=this.cells3(h,e);g[e]=c.getValue()}return g},setDateFormat:function(c,a){this._dtmask=c,this._dtmask_inc=a},setNumberFormat:function(n,e,h,m){var g=n.replace(/[^0\,\.]*/g,""),a=g.indexOf(".");-1<a&&(a=g.length-a-1);var c=g.indexOf(",");-1<c&&(c=g.length-a-2-c),"string"!=typeof h&&(h=this.i18n.decimal_separator),"string"!=typeof m&&(m=this.i18n.group_separator);var o=n.split(g)[0],l=n.split(g)[1];this._maskArr[e]=[a,c,o,l,h,m]},_aplNFb:function(h,g){var c=this._maskArr[g];if(!c)return h;var e=parseFloat(h.toString().replace(/[^0-9]*/g,""));return"-"==h.toString().substr(0,1)&&(e*=-1),0<c[0]&&(e/=Math.pow(10,c[0])),e},_aplNF:function(l,h){var e=this._maskArr[h];if(!e)return l;var m=(parseFloat(l)<0?"-":"")+e[2];if((l=((l=Math.abs(Math.round(parseFloat(l)*Math.pow(10,0<e[0]?e[0]:0))).toString()).length<e[0]?Math.pow(10,e[0]+1-l.length).toString().substr(1,e[0]+1)+l.toString():l).split("").reverse())[e[0]]=(l[e[0]]||"0")+e[4],0<e[1])for(var g=(0<e[0]?0:1)+e[0]+e[1];g<l.length;g+=e[1])l[g]+=e[5];return m+l.reverse().join("")+e[3]},_launchCommands:function(a){for(var g=0;g<a.length;g++){for(var e=new Array,c=0;c<a[g].childNodes.length;c++)1==a[g].childNodes[c].nodeType&&(e[e.length]=a[g].childNodes[c].firstChild.data);this[a[g].getAttribute("command")].apply(this,e)}},_parseHead:function(h){var g=dhx4.ajax.xpath("./head",h);if(g.length){var l=dhx4.ajax.xpath("./column",g[0]),m=dhx4.ajax.xpath("./settings",g[0]),C="setInitWidths",w=!1;if(m[0])for(var n=0;n<m[0].childNodes.length;n++)switch(m[0].childNodes[n].tagName){case"colwidth":m[0].childNodes[n].firstChild&&"%"==m[0].childNodes[n].firstChild.data&&(C="setInitWidthsP");break;case"splitat":w=!!m[0].childNodes[n].firstChild&&m[0].childNodes[n].firstChild.data}if(this._launchCommands(dhx4.ajax.xpath("./beforeInit/call",g[0])),0<l.length){0<this.hdr.rows.length&&this.clearAll(!0);for(var a=[[],[],[],[],[],[],[],[],[]],v=["","width","type","align","sort","color","format","hidden","id"],u=["",C,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"],A=0;A<l.length;A++){for(var y=1;y<v.length;y++)a[y].push(l[A].getAttribute(v[y]));a[0].push((l[A].firstChild?l[A].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}this.setHeader(a[0]);for(A=0;A<u.length;A++)u[A]&&this[u[A]](a[A].join(this.delim));for(A=0;A<l.length;A++)if(0==this.cellType[A].indexOf("co")||"clist"==this.cellType[A]){var o=dhx4.ajax.xpath("./option",l[A]);if(o.length){var x=new Array;if("clist"==this.cellType[A]){for(y=0;y<o.length;y++)x[x.length]=o[y].firstChild?o[y].firstChild.data:"";this.registerCList(A,x)}else{var D=this.getCombo(A);for(y=0;y<o.length;y++)D.put(o[y].getAttribute("value"),o[y].firstChild?o[y].firstChild.data:"")}}}else a[6][A]&&(-1!=this.cellType[A].toLowerCase().indexOf("calendar")||"date"==this.fldSort[A]?this.setDateFormat(a[6][A]):this.setNumberFormat(a[6][A],A));this.init();var e=a[7].join(this.delim);this.setColHidden&&""!=e.replace(/,/g,"")&&this.setColHidden(e),w&&this.splitAt&&this.splitAt(w)}this._launchCommands(dhx4.ajax.xpath("./afterInit/call",g[0]))}var c=dhx4.ajax.xpath("//rows/userdata",h);if(0<c.length){this.UserData.gridglobaluserdata||(this.UserData.gridglobaluserdata=new Hashtable);for(y=0;y<c.length;y++){for(var E="",r=0;r<c[y].childNodes.length;r++)E+=c[y].childNodes[r].nodeValue;this.UserData.gridglobaluserdata.put(c[y].getAttribute("name"),E)}}},getCheckedRows:function(a){var c=new Array;return this.forEachRowA(function(g){var e=this.cells(g,a);e.changeState&&0!=e.getValue()&&c.push(g)},!0),c.join(",")},checkAll:function(){for(var c=arguments.length?arguments[0]:1,a=0;a<this.getColumnsNum();a++)"ch"==this.getColType(a)&&this.setCheckedRows(a,c)},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(c,a){this.forEachRowA(function(e){this.cells(e,c).isCheckbox()&&this.cells(e,c).setValue(a)})},_drawTooltip:function(l){var m=this.grid.getFirstParentOfType(l?l.target:event.srcElement,"TD");if(!m||this.grid.editor&&this.grid.editor.cell==m)return!0;var h=m.parentNode;if(h.idd&&"__filler__"!=h.idd){var g=l?l.target:event.srcElement;if(h.idd==window.unknown)return!0;if(!this.grid.callEvent("onMouseOver",[h.idd,m._cellIndex,l||window.event]))return!0;if(this.grid._enbTts&&!this.grid._enbTts[m._cellIndex])return g.title&&(g.title=""),!0;if(!(m._cellIndex>=this.grid._cCount)){var a=this.grid.cells3(h,m._cellIndex);if(a&&a.cell&&a.cell._attrs)return g._title&&(a.cell.title=""),a.cell._attrs.title||(g._title=!0),a&&(g.title=a.cell._attrs.title||(a.getTitle?a.getTitle():(a.getValue()||"").toString().replace(/<[^>]*>/gi,""))),!0}}},enableCellWidthCorrection:function(a){_isFF&&(this._wcorr=parseInt(a))},getAllRowIds:function(e){for(var a=[],c=0;c<this.rowsBuffer.length;c++)this.rowsBuffer[c]&&a.push(this.rowsBuffer[c].idd);return a.join(e||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(e,x,g){if(this._ecspn){var a=this.getRowById(e);if(a._childIndexes&&a.childNodes[a._childIndexes[x]]){var o=a._childIndexes[x],h=a.childNodes[o],l=h.colSpan;if(h.colSpan=1,l&&1!=l)for(var u=1;u<l;u++){var w=document.createElement("TD");h.nextSibling?a.insertBefore(w,h.nextSibling):a.appendChild(w),a._childIndexes[x+u]=o+u,w._cellIndex=x+u,w.style.textAlign=this.cellAlign[u],w.style.verticalAlign=this.cellVAlign[u],h=w,this.cells3(a,x+u).setValue("")}for(var v=1*x+1*l;v<a._childIndexes.length;v++)a._childIndexes[v]+=1*(l-1)}if(g&&1<g){if(a._childIndexes)o=a._childIndexes[x];else{o=x;a._childIndexes=new Array;for(v=0;v<a.childNodes.length;v++)a._childIndexes[v]=v}a.childNodes[o].colSpan=g;for(v=1;v<g;v++)a._childIndexes[a.childNodes[o+1]._cellIndex]=o,a.removeChild(a.childNodes[o+1]);for(v=1*a.childNodes[a._childIndexes[x]]._cellIndex+1*g;v<a._childIndexes.length;v++)a._childIndexes[v]-=g-1}}},preventIECaching:function(a){dhx4.ajax.cache=!a},enableColumnAutoSize:function(a){this._eCAS=dhx4.s2b(a)},_onHeaderDblClick:function(g){var c=this.grid,a=c.getFirstParentOfType(_isIE?event.srcElement:g.target,"TD");if(!c._eCAS)return!1;c.adjustColumnSize(a._cellIndexS)},adjustColumnSize:function(r,e){if(!this._hrrar||!this._hrrar[r]){this._notresize=!0;var g=0;this._setColumnSizeR(r,20);for(var n=1;n<this.hdr.rows.length;n++){var u=this.hdr.rows[n];(u=u.childNodes[u._childIndexes?u._childIndexes[r]:r])&&(!u.colSpan||u.colSpan<2)&&u._cellIndex==r&&(u.childNodes[0]&&"hdrcell"==u.childNodes[0].className&&(u=u.childNodes[0]),g=Math.max(g,u.scrollWidth))}for(var h=this.obj.rows.length,s=0,w=this.cellType._dhx_find("tree"),o=1;o<h;o++){var v=this.obj.rows[o],c=r;if(this.rowsAr[v.idd]){if(v._childIndexes){if(v._childIndexes[r]==v._childIndexes[r+1])continue;c=v._childIndexes[r]}v.childNodes[c]&&v.childNodes[c]._cellIndex==r&&(s=(v.childNodes[c].innerText||v.childNodes[c].textContent||"").length*this.fontWidth,this._h2&&r==w&&(s+=22*this._h2.get[v.idd].level),g<s&&(g=s))}}g+=20+(e||0),this._setColumnSizeR(r,g),this._notresize=!1,this.setSizes()}},detachHeader:function(a,e){var c=(e=e||this.hdr).rows[a+1];c&&c.parentNode.removeChild(c),this.setSizes()},detachFooter:function(a){this.detachHeader(a,this.ftr)},attachHeader:function(a,g,c){if("string"==typeof a&&(a=this._eSplit(a)),"string"==typeof g&&(g=g.split(this.delim)),c=c||"_aHead",this.hdr.rows.length){if(a)this._createHRow([a,g],this["_aHead"==c?"hdr":"ftr"]);else if(this[c])for(var e=0;e<this[c].length;e++)this.attachHeader.apply(this,this[c][e])}else this[c]||(this[c]=new Array),this[c][this[c].length]=[a,g,c]},_createHRow:function(e,r){if(!r){"absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative"),(m=document.createElement("DIV")).className="c_ftr".substr(2),this.entBox.appendChild(m),(v=document.createElement("TABLE")).cellPadding=v.cellSpacing=0,_isIE&&8!=_isIE||(v.width="100%",v.style.paddingRight="20px"),v.style.marginRight="20px",v.style.tableLayout="fixed",m.appendChild(v),v.appendChild(document.createElement("TBODY")),this.ftr=r=v;for(var l=v.insertRow(0),a=this.hdrLabels.length<=1?e[0].length:this.hdrLabels.length,g=0;g<a;g++)l.appendChild(document.createElement("TH")),l.childNodes[g]._cellIndex=g;_isIE&&_isIE<8?l.style.position="absolute":l.style.height="auto"}var h=e[1],m=document.createElement("TR");r.rows[0].parentNode.appendChild(m);for(g=0;g<e[0].length;g++){if("#cspan"!=e[0][g])if("#rspan"==e[0][g]&&1<r.rows.length){for(var y=r.rows.length-2,x=!1,n=null;!x;){n=r.rows[y];for(var c=0;c<n.cells.length;c++)if(n.cells[c]._cellIndex==g){x=c+1;break}y--}(n=n.cells[x-1]).rowSpan=(n.rowSpan||1)+1}else{var v,o=document.createElement("TD");if(o._cellIndex=o._cellIndexS=g,this._hrrar&&this._hrrar[g]&&!_isIE&&(o.style.display="none"),"object"==typeof e[0][g])o.appendChild(e[0][g]);else if(this.forceDivInHeader?o.innerHTML="<div class='hdrcell'>"+(e[0][g]||"&nbsp;")+"</div>":o.innerHTML=e[0][g]||"&nbsp;",-1!=(e[0][g]||"").indexOf("#"))if(v=e[0][g].match(/(^|{)#([^}]+)(}|$)/)){var s="_in_header_"+v[2];this[s]&&this[s](this.forceDivInHeader?o.firstChild:o,g,e[0][g].split(v[0]))}h&&(o.style.cssText=h[g]),m.appendChild(o)}else(n=m.cells[m.cells.length-1]).colSpan=(n.colSpan||1)+1}_isKHTML&&(r._kTimer&&window.clearTimeout(r._kTimer),r._kTimer=window.setTimeout(function(){r.rows[1].style.display="none",window.setTimeout(function(){r.rows[1].style.display=""},1)},500))},attachFooter:function(a,c){this.attachHeader(a,c,"_aFoot")},setCellExcellType:function(e,a,c){this.changeCellType(this.getRowById(e),a,c)},changeCellType:function(e,g,c){c=c||this.cellType[g];var h,a=(h=this.cells3(e,g)).getValue();h.cell._cellType=c,(h=this.cells3(e,g)).setValue(a)},setRowExcellType:function(e,c){for(var g=this.rowsAr[e],a=0;a<g.childNodes.length;a++)this.changeCellType(g,a,c)},setColumnExcellType:function(a,e){for(var c=0;c<this.rowsBuffer.length;c++)this.rowsBuffer[c]&&"TR"==this.rowsBuffer[c].tagName&&this.changeCellType(this.rowsBuffer[c],a,e);"math"==this.cellType[a]?this._strangeParams[c]=e:this.cellType[a]=e},forEachRow:function(e){for(var c in this.rowsAr)this.rowsAr[c]&&this.rowsAr[c].idd&&e.apply(this,[this.rowsAr[c].idd])},forEachRowA:function(e){for(var c=0;c<this.rowsBuffer.length;c++)this.rowsBuffer[c]&&e.call(this,this.render_row(c).idd)},forEachCell:function(e,c){var g=this.getRowById(e);if(g)for(var a=0;a<this._cCount;a++)c(this.cells3(g,a),a)},enableAutoWidth:function(e,a,c){this._awdth=[dhx4.s2b(e),parseInt(a||99999),parseInt(c||0)],1==arguments.length&&(this.objBox.style.overflowX=e?"hidden":"auto")},updateFromXML:function(a,g,c,e){void 0===g&&(g=!0),this._refresh_mode=[!0,g,c],this.load(a,e)},_refreshFromXML:function(g){this._f_rowsBuffer&&this.filterBy(0,""),reset=!1,window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(v){this.grid._h2.get[this.cell.parentNode.idd]&&this.cell.parentNode.valTag?this.setLabel(v):this.setValueX(v)});var s=this.cellType._dhx_find("tree"),l=dhx4.ajax.xmltop("rows",g),h=l.getAttribute("parent")||0,n={};this._refresh_mode[2]&&(-1!=s?this._h2.forEachChild(h,function(u){n[u.id]=!0},this):this.forEachRow(function(u){n[u]=!0}));for(var r=dhx4.ajax.xpath("//row",l),e=0;e<r.length;e++){var o=r[e],a=o.getAttribute("id");n[a]=!1;h=o.parentNode.getAttribute("id")||h;if(this.rowsAr[a]&&"TR"!=this.rowsAr[a].tagName)this._h2?this._h2.get[a].buff.data=o:this.rowsBuffer[this.getRowIndex(a)].data=o,this.rowsAr[a]=o;else if(this.rowsAr[a])this._process_xml_row(this.rowsAr[a],o,-1),this._postRowProcessing(this.rowsAr[a],!0),this._fake&&this._fake.rowsAr[a]&&this._fake._process_xml_row(this._fake.rowsAr[a],o,-1);else if(this._refresh_mode[1]){var m={idd:a,data:o,_parser:this._process_xml_row,_locator:this._get_xml_data},c=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(m),c=0):this.rowsBuffer.push(m),this._h2?(reset=!0,this._h2.add(a,o.parentNode.getAttribute("id")||o.parentNode.getAttribute("parent")).buff=this.rowsBuffer[this.rowsBuffer.length-1]):this._srnd&&(reset=!0),this.rowsAr[a]=o,o=this.render_row(c),this._insertRowAt(o,c?-1:0)}}if(this._refresh_mode[2])for(a in n)n[a]&&this.rowsAr[a]&&this.deleteRow(a);this._refresh_mode=null,window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX),reset&&(this._h2?this._renderSort():this.render_dataset()),this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},getCustomCombo:function(e,c){var a=this.cells(e,c).cell;return a._combo||(a._combo=new dhtmlXGridComboObject),a._combo},setTabOrder:function(c){var g=c.split(this.delim);this._tabOrder=[];for(var a=this._cCount||c.length,e=0;e<a;e++)g[e]={c:parseInt(g[e]),ind:e};g.sort(function(l,h){return l.c>h.c?1:-1});for(e=0;e<a;e++)g[e+1]&&void 0!==g[e].c?this._tabOrder[g[e].ind]=g[e+1].ind:this._tabOrder[g[e].ind]=-1*(g[0].ind+1)},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a+1],this.cell._cellIndex,!0)},k13_0_1:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a-1],this.cell._cellIndex,!0)},k13_0_0:function(){this.editStop(),this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]),this._still_active=!0},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;var a=this._getNextCell(null,1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0)},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!1;var a=this._getNextCell(null,-1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0)},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||!1===a.changeState())return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor||!this.isTreeGrid())return!1;this.collapseKids(this.row)},k39_0_0:function(){if(this.editor||!this.isTreeGrid())return!1;this.expandKids(this.row)},k40_0_0:function(){var c=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var a=Math.max(c._r_select||0,this.getRowIndex(this.row.idd)),e=this._nextRow(a,1);if(e)c._r_select=null,this.selectCell(e,this.cell._cellIndex,!0),c.pagingOn&&c.showRow(e.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[]),this.pagingOn&&this.rowsCol[a+1]&&this.selectCell(a+1,0,!0)}}this._still_active=!0},k38_0_0:function(){var c=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var a=this.getRowIndex(this.row.idd)+1;if(-1==a||this.pagingOn&&1==a)this._key_events.k33_0_0.apply(this,[]);else{var e=this._nextRow(a-1,-1);this.selectCell(e,this.cell._cellIndex,!0),c.pagingOn&&e&&c.showRow(e.idd)}}this._still_active=!0}},_build_master_row:function(){for(var e=document.createElement("DIV"),c=["<table><tr>"],a=0;a<this._cCount;a++)c.push("<td></td>");c.push("</tr></table>"),e.innerHTML=c.join(""),this._master_row=e.firstChild.rows[0]},_prepareRow:function(a){this._master_row||this._build_master_row();for(var e=this._master_row.cloneNode(!0),c=0;c<e.childNodes.length;c++)e.childNodes[c]._cellIndex=c,this._enbCid&&(e.childNodes[c].id="c_"+a+"_"+c),this.dragAndDropOff&&this.dragger.addDraggableItem(e.childNodes[c],this);return e.idd=a,e.grid=this,e},_process_jsarray_row:function(c,e){c._attrs={};for(var a=0;a<c.childNodes.length;a++)c.childNodes[a]._attrs={};return this._fillRow(c,this._c_order?this._swapColumns(e):e),c},_get_jsarray_data:function(c,a){return c[a]},_process_json_row:function(a,c){return c=this._c_order?this._swapColumns(c.data):c.data,this._process_some_row(a,c)},_process_some_row:function(c,e){c._attrs={};for(var a=0;a<c.childNodes.length;a++)c.childNodes[a]._attrs={};return this._fillRow(c,e),c},_get_json_data:function(c,a){return c.data[a]},_process_js_row:function(e,g){for(var a=[],c=0;c<this.columnIds.length;c++)a[c]=g[this.columnIds[c]],a[c]||0===a[c]||(a[c]="");return this._process_some_row(e,a),e._attrs=g,e},_get_js_data:function(c,a){return c[this.columnIds[a]]},_process_csv_row:function(c,e){c._attrs={};for(var a=0;a<c.childNodes.length;a++)c.childNodes[a]._attrs={};return this._fillRow(c,this._c_order?this._swapColumns(e.split(this.csv.cell)):e.split(this.csv.cell)),c},_get_csv_data:function(c,a){return c.split(this.csv.cell)[a]},_process_store_row:function(h,g){for(var a=[],e=0;e<this.columnIds.length;e++)a[e]=g[this.columnIds[e]];for(var c=0;c<h.childNodes.length;c++)h.childNodes[c]._attrs={};h._attrs=g,this._fillRow(h,a)},_process_xml_row:function(a,l){var u=dhx4.ajax.xpath(this.xml.cell,l),o=[];if(a._attrs=this._xml_attrs(l),this._ud_enabled)for(var s=dhx4.ajax.xpath("./userdata",l),h=s.length-1;0<=h;h--){for(var n="",e=0;e<s[h].childNodes.length;e++)n+=s[h].childNodes[e].nodeValue;this.setUserData(a.idd,s[h].getAttribute("name"),n)}for(e=0;e<u.length;e++){var g=u[this._c_order?this._c_order[e]:e];if(g){var c=a._childIndexes?a._childIndexes[e]:e,m=g.getAttribute("type");a.childNodes[c]&&(m&&(a.childNodes[c]._cellType=m),a.childNodes[c]._attrs=this._xml_attrs(g)),g.getAttribute("xmlcontent")||(g=g.firstChild?g.firstChild.wholeText||g.firstChild.data:""),o.push(g)}}for(u.length;e<a.childNodes.length;e++)a.childNodes[e]._attrs={};return a.parentNode&&"row"==a.parentNode.tagName&&(a._attrs.parent=a.parentNode.getAttribute("idd")),this._fillRow(a,o),a},_get_xml_data:function(c,a){for(c=c.firstChild;;){if(!c)return"";if("cell"==c.tagName&&a--,a<0)break;c=c.nextSibling}return c.firstChild?c.firstChild.data:""},_fillRow:function(g,l){this.editor&&this.editor.parentNode&&this.editor.parentNode.idd==g.idd&&this.editStop();for(var c=0;c<g.childNodes.length;c++)if(c<l.length||this.defVal[c]){var e=g.childNodes[c]._cellIndex,h=l[e],a=this.cells4(g.childNodes[c]);!this.defVal[e]||""!=h&&void 0!==h||(h=this.defVal[e]),a&&a.setValue(h)}else g.childNodes[c].innerHTML="&nbsp;",g.childNodes[c]._clearCell=!0;return g},_postRowProcessing:function(l,n){l._attrs.class&&(l._css=l.className=l._attrs.class),l._attrs.locked&&(l._locked=!0),l._attrs.bgColor&&(l.bgColor=l._attrs.bgColor);for(var m=0,e=0;e<l.childNodes.length;e++){var o=l.childNodes[e],h=o._cellIndex,g=o._attrs.style||l._attrs.style;g&&(o.style.cssText+=";"+g),o._attrs.class&&(o.className=o._attrs.class),(g=o._attrs.align||this.cellAlign[h])&&(o.align=g),o.vAlign=o._attrs.valign||this.cellVAlign[h];var a=o._attrs.bgColor||this.columnColor[h];a&&(o.bgColor=a),o._attrs.colspan&&!n&&(this.setColspan(l.idd,e+m,o._attrs.colspan),m+=o._attrs.colspan-1),this._hrrar&&this._hrrar[h]&&!n&&(o.style.display="none")}this.callEvent("onRowCreated",[l.idd,l,null])},load:function(a,e,c){this.callEvent("onXLS",[this]),2==arguments.length&&"function"!=typeof e&&(c=e,e=null),c=c||"xml",this.xmlFileUrl||(this.xmlFileUrl=a),this._data_type=c,this.xmlLoader=this.doLoadDetails;var g=this;return this.xmlLoader=function(h){g.callEvent&&(g["_process_"+c](h.xmlDoc),g._contextCallTimer||g.callEvent("onXLE",[g,0,0,h.xmlDoc,c]),e&&(e(),e=null))},dhx4.ajax.get(a,this.xmlLoader)},loadXMLString:function(c,a){window.console&&window.console.info&&window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.parse({responseXML:dhx4.ajax.parse(c)},a,"xml")},loadXML:function(a,c){window.console&&window.console.info&&window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.load(a,c,"xml")},parse:function(e,c,a){2==arguments.length&&"function"!=typeof c&&(a=c,c=null),a=a||"xml","xml"==(this._data_type=a)&&"string"==typeof e&&(e={responseXML:dhx4.ajax.parse(e)}),this["_process_"+a](e),this._contextCallTimer||this.callEvent("onXLE",[this,0,0,e,a]),c&&c()},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(c){var e={};if(c.attributes.length)for(var a=0;a<c.attributes.length;a++)e[c.attributes[a].name]=c.attributes[a].value;return e},_process_xml:function(r){if(this._refresh_mode)return this._refreshFromXML(r);this._parsing=!0;var m=dhx4.ajax.xmltop(this.xml.top,r);if(m.tagName==this.xml.top){var o=m.getAttribute("dhx_security");o&&(dhtmlx.security_key=o),this._parseHead(m);var s=dhx4.ajax.xpath(this.xml.row,m),l=parseInt(m.getAttribute("pos")||0),n=parseInt(m.getAttribute("total_count")||0);if(!this.pagingOn)n=Math.min(n,32e6/this._srdh);var g=!1;if(n&&n!=this.rowsBuffer.length&&(this.rowsBuffer[n-1]||(this.rowsBuffer.length&&(g=!0),this.rowsBuffer[n-1]=null),n<this.rowsBuffer.length&&(this.rowsBuffer.splice(n,this.rowsBuffer.length-n),g=!0)),this.isTreeGrid())return this._process_tree_xml(m);for(var c=0;c<s.length;c++)if(!this.rowsBuffer[c+l]){var a=s[c].getAttribute("id")||c+l+1;this.rowsBuffer[c+l]={idd:a,data:s[c],_parser:this._process_xml_row,_locator:this._get_xml_data},this.rowsAr[a]=s[c]}if(this.callEvent("onDataReady",[]),g&&this._srnd){var e=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=e}else this.render_dataset();this._parsing=!1}},_process_jsarray:function(data){this._parsing=!0,data=data.responseText||data,"string"==typeof data&&(eval("dhtmlx.temp="+data+";"),data=dhtmlx.temp);for(var i=0;i<data.length;i++){var id=i+1;this.rowsBuffer.push({idd:id,data:data[i],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data}),this.rowsAr[id]=data[i]}this.render_dataset(),this._parsing=!1},_process_csv:function(g){if(this._parsing=!0,g=(g=(g=g.responseText||g).replace(/\r/g,"")).split(this.csv.row),this._csvHdr){this.clearAll();var e=g.splice(0,1)[0].split(this.csv.cell);this._csvAID||e.splice(0,1),this.setHeader(e.join(this.delim)),this.init()}for(var c=0;c<g.length;c++)if(g[c]||c!=g.length-1){if(this._csvAID){var h=c+1;this.rowsBuffer.push({idd:h,data:g[c],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var a=g[c].split(this.csv.cell);h=a.splice(0,1)[0];this.rowsBuffer.push({idd:h,data:a,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[h]=g[c]}this.render_dataset(),this._parsing=!1},_process_js:function(a){return this._process_json(a,"js")},_process_json:function(data,mode){this._parsing=!0;var data=data.responseText||data;if("string"==typeof data&&(eval("dhtmlx.temp="+data+";"),data=dhtmlx.temp),"js"==mode){data.data&&(data=data.data);for(var i=0;i<data.length;i++){var row=data[i],id=row.id||i+1;this.rowsBuffer.push({idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data}),this.rowsAr[id]=data[i]}}else if(data.rows)for(var i=0;i<data.rows.length;i++){var id=data.rows[i].id;this.rowsBuffer.push({idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data}),this.rowsAr[id]=data.rows[i]}data.dhx_security&&(dhtmlx.security_key=data.dhx_security),this.callEvent("onDataReady",[]),this.render_dataset(),this._parsing=!1},render_dataset:function(g,o){if(this._srnd){if(this._fillers)return this._update_srnd_view();o=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length)}this.pagingOn?(g=Math.max(g||0,(this.currentPage-1)*this.rowsBufferOutSize),o=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(g=g||0,o=o||this.rowsBuffer.length);for(var h=g;h<o;h++){var a=this.render_row(h);if(-1==a){this.xmlFileUrl&&this.callEvent("onDynXLS",[h,this._dpref?this._dpref:o-h])&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+h+"&count="+(this._dpref?this._dpref:o-h),this._data_type),o=h;break}if(a.parentNode&&a.parentNode.tagName||(this._insertRowAt(a,h),(a._attrs.selected||a._attrs.select)&&(this.selectRow(a,!!a._attrs.call,!0),a._attrs.selected=a._attrs.select=null)),this._ads_count&&h-g==this._ads_count){var n=this;return this._context_parsing=this._context_parsing||this._parsing,this._contextCallTimer=window.setTimeout(function(){n._contextCallTimer=null,n.render_dataset(h,o),n._contextCallTimer||(n._context_parsing?n.callEvent("onXLE",[]):n._fixAlterCss(),n._context_parsing=!1)},this._ads_time)}}if(this._ads_count&&h==o&&this.callEvent("onDistributedEnd",[]),this._srnd&&!this._fillers){var c=this.rowsBuffer.length-o;this._fillers=[],this._fake&&!this._realfake&&(this._fake._fillers=[]);for(var e=Math.round(99e4/this._srdh);0<c;){var l=_isIE||window._FFrv?Math.min(c,e):c,m=this._add_filler(o,l);m&&this._fillers.push(m),c-=l,o+=l}}this.setSizes()},render_row:function(c){if(!this.rowsBuffer[c])return-1;if(this.rowsBuffer[c]._parser){var a=this.rowsBuffer[c];if(this.rowsAr[a.idd]&&"TR"==this.rowsAr[a.idd].tagName)return this.rowsBuffer[c]=this.rowsAr[a.idd];var e=this._prepareRow(a.idd);return this.rowsBuffer[c]=e,this.rowsAr[a.idd]=e,a._parser.call(this,e,a.data),this._postRowProcessing(e),e}return this.rowsBuffer[c]},_get_cell_value:function(c,a,e){return c._locator?(this._c_order&&(a=this._c_order[a]),c._locator.call(this,c.data,a)):this.cells3(c,a)[e||"getValue"]()},sortRows:function(e,l,c){if(this.editStop(),c=(c||"asc").toLowerCase(),l=l||this.fldSort[e],e=e||0,this.isTreeGrid())this.sortTreeRows(e,l,c);else{var a={},h=this.cellType[e],m="getValue";"link"==h&&(m="getContent"),"dhxCalendar"!=h&&"dhxCalendarA"!=h||(m="getDate");for(var g=0;g<this.rowsBuffer.length;g++)a[this.rowsBuffer[g].idd]=this._get_cell_value(this.rowsBuffer[g],e,m);this._sortRows(e,l,c,a)}this.callEvent("onAfterSorting",[e,l,c])},_sortCore:function(e,l,c,a,h){var g="sort";if(this._sst&&(h.stablesort=this.rowsCol.stablesort,g="stablesort"),4<l.length&&(l=window[l]),"cus"==l){var m=this._customSorts[e];h[g](function(o,n){return m(a[o.idd],a[n.idd],c,o.idd,n.idd)})}else"function"==typeof l?h[g](function(o,n){return l(a[o.idd],a[n.idd],c,o.idd,n.idd)}):"str"==l?h[g](function(o,n){return"asc"==c?a[o.idd]>a[n.idd]?1:a[o.idd]<a[n.idd]?-1:0:a[o.idd]<a[n.idd]?1:a[o.idd]>a[n.idd]?-1:0}):"int"==l?h[g](function(r,o){var n=parseFloat(a[r.idd]);n=isNaN(n)?-99999999999999:n;var s=parseFloat(a[o.idd]);return s=isNaN(s)?-99999999999999:s,"asc"==c?n-s:s-n}):"date"==l&&h[g](function(r,o){var n=Date.parse(a[r.idd])||Date.parse("01/01/1900"),s=Date.parse(a[o.idd])||Date.parse("01/01/1900");return"asc"==c?n-s:s-n})},_sortRows:function(e,g,c,a){this._sortCore(e,g,c,a,this.rowsBuffer),this._reset_view(),this.callEvent("onGridReconstructed",[])},_reset_view:function(e){if(this.obj.rows[0]){this._lahRw&&this._unsetRowHover(0,!0),this.callEvent("onResetView",[]);var a=this.obj.rows[0].parentNode,g=a.removeChild(a.childNodes[0],!0);if(_isKHTML)for(var c=a.parentNode.childNodes.length-1;0<=c;c--)"TR"==a.parentNode.childNodes[c].tagName&&a.parentNode.removeChild(a.parentNode.childNodes[c],!0);else if(_isIE)for(c=a.childNodes.length-1;0<=c;c--)a.childNodes[c].removeNode(!0);else a.innerHTML="";a.appendChild(g),this.rowsCol=dhtmlxArray(),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,e||(_isIE&&this._srnd,this.render_dataset())}},deleteRow:function(c,g){if(g||(g=this.getRowById(c)),g){if(this.editStop(),!this._realfake&&0==this.callEvent("onBeforeRowDeleted",[c]))return!1;var a=0;if(-1==this.cellType._dhx_find("tree")||this._realfake){g.parentNode&&g.parentNode.removeChild(g);var l=this.rowsCol._dhx_find(g);-1!=l&&this.rowsCol._dhx_removeAt(l);for(var e=0;e<this.rowsBuffer.length;e++)if(this.rowsBuffer[e]&&this.rowsBuffer[e].idd==c){this.rowsBuffer._dhx_removeAt(e),l=e;break}}else a=this._h2.get[c].parent.id,this._removeTrGrRow(g);this.rowsAr[c]=null;for(e=0;e<this.selectedRows.length;e++)this.selectedRows[e].idd==c&&this.selectedRows._dhx_removeAt(e);if(this._srnd){for(e=0;e<this._fillers.length;e++){var h=this._fillers[e];h&&(h[0]>=l?this._update_fillers(e,0,-1):h[0]+h[1]>l&&this._update_fillers(e,-1,0))}this._update_srnd_view()}return this.pagingOn&&this.changePage(),this._realfake||this.callEvent("onAfterRowDeleted",[c,a]),this.callEvent("onGridReconstructed",[]),this._ahgr&&this.setSizes(),!0}},_addRow:function(l,m,c){-1!=c&&void 0!==c||(c=this.rowsBuffer.length),"string"==typeof m&&(m=m.split(this.delim));var n=this._prepareRow(l);n._attrs={};for(var e=0;e<n.childNodes.length;e++)n.childNodes[e]._attrs={};if(this.rowsAr[n.idd]=n,this._h2&&(this._h2.get[n.idd].buff=n),this._fillRow(n,m),this._postRowProcessing(n),this._skipInsert)return this._skipInsert=!1,this.rowsAr[n.idd]=n;if(this.pagingOn)return this.rowsBuffer._dhx_insertAt(c,n),this.rowsAr[n.idd]=n;if(this._fillers){this.rowsCol._dhx_insertAt(c,null),this.rowsBuffer._dhx_insertAt(c,n),this._fake&&this._fake.rowsCol._dhx_insertAt(c,null),this.rowsAr[n.idd]=n;for(var o=!1,g=0;g<this._fillers.length;g++){var h=this._fillers[g];if(h&&h[0]<=c&&h[0]+h[1]>=c){h[1]=h[1]+1;var a=h[2].firstChild.style.height=parseInt(h[2].firstChild.style.height)+this._srdh+"px";o=!0,this._fake&&(this._fake._fillers[g][1]++,this._fake._fillers[g][2].firstChild.style.height=a)}h&&h[0]>c&&(h[0]=h[0]+1,this._fake&&this._fake._fillers[g][0]++)}return o||this._fillers.push(this._add_filler(c,1,0==c?{parentNode:this.obj.rows[0].parentNode,nextSibling:this.rowsCol[1]}:this.rowsCol[c-1])),n}return this.rowsBuffer._dhx_insertAt(c,n),this._insertRowAt(n,c)},addRow:function(a,g,e){var c=this._addRow(a,g,e);return this.dragContext||this.callEvent("onRowAdded",[a]),this.pagingOn&&this.changePage(this.currentPage),this._srnd&&this._update_srnd_view(),c._added=!0,this._srnd&&!this._fillers&&(this._fillers=[]),this._ahgr&&this.setSizes(),this.callEvent("onGridReconstructed",[]),c},_insertRowAt:function(e,g,c){if(this.rowsAr[e.idd]=e,this._skipInsert)return this._skipInsert=!1,e;if(g<0||!g&&0!==parseInt(g)?g=this.rowsCol.length:g>this.rowsCol.length&&(g=this.rowsCol.length),this._cssEven){var a=e.className.replace(this._cssUnEven,"");(this._cssSP?this.getLevel(e.idd):g)%2==1?e.className=a+" "+this._cssUnEven+(this._cssSU?" "+this._cssUnEven+"_"+this.getLevel(e.idd):""):e.className=a+" "+this._cssEven+(this._cssSU?" "+this._cssEven+"_"+this.getLevel(e.idd):"")}return c||(g!=this.obj.rows.length-1&&this.rowsCol[g]?this.rowsCol[g].parentNode.insertBefore(e,this.rowsCol[g]):_isKHTML?this.obj.appendChild(e):this.obj.firstChild.appendChild(e)),this.rowsCol._dhx_insertAt(g,e),this.callEvent("onRowInserted",[e,g]),e},getRowById:function(e){var c=this.rowsAr[e];if(c){if("TR"!=c.tagName){for(var a=0;a<this.rowsBuffer.length;a++)if(this.rowsBuffer[a]&&this.rowsBuffer[a].idd==e)return this.render_row(a);if(this._h2)return this.render_row(null,c.idd)}return c}return null},cellById:function(c,a){return this.cells(c,a)},cells:function(g,e){if(0==arguments.length)return this.cells4(this.cell);var h=this.getRowById(g),a=h._childIndexes?h.childNodes[h._childIndexes[e]]:h.childNodes[e];return!a&&h._childIndexes&&(a=h.firstChild||{}),this.cells4(a)},cellByIndex:function(c,a){return this.cells2(c,a)},cells2:function(g,e){var h=this.render_row(g),a=h._childIndexes?h.childNodes[h._childIndexes[e]]:h.childNodes[e];return!a&&h._childIndexes&&(a=h.firstChild||{}),this.cells4(a)},cells3:function(e,c){var a=e._childIndexes?e.childNodes[e._childIndexes[c]]:e.childNodes[c];return this.cells4(a)},cells4:function(a){var c=window["eXcell_"+(a._cellType||this.cellType[a._cellIndex])];if(c)return new c(a)},cells5:function(a,e){e=e||a._cellType||this.cellType[a._cellIndex];if(!this._ecache[e]){if(window["eXcell_"+e])c=window["eXcell_"+e];else var c=eXcell_ro;this._ecache[e]=new c(a)}return this._ecache[e].cell=a,this._ecache[e]},dma:function(a){this._ecache||(this._ecache={}),a&&!this._dma?(this._dma=this.cells4,this.cells4=this.cells5):!a&&this._dma&&(this.cells4=this._dma,this._dma=null)},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(a){0<arguments.length?this.smartTabOrder=dhx4.s2b(a):this.smartTabOrder=!0},setExternalTabOrder:function(h,a){var c=this;this.tabStart="object"==typeof h?h:document.getElementById(h);var e=this.tabStart.onkeydown;this.tabStart.onkeydown=function(m){e&&e.call(this,m);var l=m||window.event;if(9==l.keyCode&&!l.shiftKey)return l.cancelBubble=!0,c.selectCell(0,0,0,0,1),c.smartTabOrder&&c.cells2(0,0).isDisabled()&&c._key_events.k9_0_0.call(c),this.blur(),!1},_isOpera&&(this.tabStart.onkeypress=this.tabStart.onkeydown),this.tabEnd="object"==typeof a?a:document.getElementById(a);var g=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(m){g&&g.call(this,m);var l=m||window.event;if(9==l.keyCode&&l.shiftKey)return l.cancelBubble=!0,c.selectCell(c.getRowsNum()-1,c.getColumnCount()-1,0,0,1),c.smartTabOrder&&c.cells2(c.getRowsNum()-1,c.getColumnCount()-1).isDisabled()&&c._key_events.k9_0_1.call(c),this.blur(),!1},_isOpera&&(this.tabEnd.onkeypress=this.tabEnd.onkeydown)},uid:function(){return this._ui_seed||(this._ui_seed=(new Date).valueOf()),this._ui_seed++},setIconset:function(a){this.iconset=a},clearAndLoad:function(){if(this._last_load_request){var c=this._last_load_request.xmlDoc;if(4!=c.readyState)try{c.onreadystatechange=function(){},c.abort()}catch(g){}}var a=this._pgn_skin;this._pgn_skin=null,this.clearAll(),this._pgn_skin=a,this._last_load_request=this.load.apply(this,arguments)},getStateOfView:function(){if(this.pagingOn){var a=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,a,Math.min(a+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}return[Math.floor(this.objBox.scrollTop/this._srdh),Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.rowsBuffer.length]}},function(){function g(m,n){this[m]=n}function l(m,n){this[m].call(this,n)}function e(m,n){this[m].call(this,n.join(this.delim))}var c=[{name:"label",def:"&nbsp;",operation:"setHeader",type:function(m,w,r){var v=[];function x(C,A,D){v[A]||(v[A]=[]),"object"==typeof D&&(D.toString=function(){return this.text}),v[A][C]=D}for(var s=0;s<w.length;s++)if("object"==typeof w[s]&&w[s].length)for(var o=0;o<w[s].length;o++)x(s,o,w[s][o]);else x(s,0,w[s]);for(s=0;s<v.length;s++)for(o=0;o<v[0].length;o++){var u=v[s][o];if(v[s][o]=(u||"").toString()||"&nbsp;",u&&u.colspan)for(var n=1;n<u.colspan;n++)x(o+n,s,"#cspan");if(u&&u.rowspan)for(n=1;n<u.rowspan;n++)x(o,s+n,"#rspan")}for(this.setHeader(v[0]),s=1;s<v.length;s++)this.attachHeader(v[s])}},{name:"id",def:"",operation:"columnIds",type:g},{name:"width",def:"*",operation:"setInitWidths",type:e},{name:"align",def:"left",operation:"cellAlign",type:g},{name:"valign",def:"middle",operation:"cellVAlign",type:g},{name:"sort",def:"na",operation:"fldSort",type:g},{name:"type",def:"ro",operation:"setColTypes",type:e},{name:"options",def:"",operation:"",type:function(m,r){for(var o=0;o<r.length;o++)if("object"==typeof r[o]){var s=this.getCombo(o);for(var n in r[o])s.put(n,r[o][n])}}}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(m){return[m.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(s){for(var m=0;m<c.length;m++){for(var r=[],n=0;n<s.length;n++)r[n]=s[n][c[m].name]||c[m].def;(c[m].type||l).call(this,c[m].operation,r,s)}this.init()},rows:function(m){},headers:function(n){for(var m=0;m<n.length;m++)this.attachHeader(n[m])}})}(),dhtmlXGridObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(c,g){this.obj._h2?this.obj.addRow(g,e,null,parent):this.obj.addRow(g,[],0);var e=this.obj.getRowById(g);e&&(this.obj._process_xml_row(e,c.firstChild),this.obj._postRowProcessing(e))}),a.attachEvent("updateCallback",function(c,g){var e=this.obj.getRowById(g);e&&(this.obj._process_xml_row(e,c.firstChild),this.obj._postRowProcessing(e))}),a.attachEvent("deleteCallback",function(c,e){this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj.deleteRow(e)}),a._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"],this.attachEvent("onEditCell",function(g,h,e){if(a._columns&&!a._columns[e])return!0;var c=this.cells(h,e);return 1==g?c.isCheckbox()&&a.setUpdated(h,!0):2==g&&c.wasChanged()&&a.setUpdated(h,!0),!0}),this.attachEvent("onRowPaste",function(c){a.setUpdated(c,!0)}),this.attachEvent("onUndo",function(c){a.setUpdated(c,!0)}),this.attachEvent("onRowIdChange",function(g,c){var e=a.findRow(g);e<a.updatedRows.length&&(a.updatedRows[e]=c)}),this.attachEvent("onSelectStateChanged",function(c){return"row"==a.updateMode&&a.sendData(),!0}),this.attachEvent("onEnter",function(e,c){return"row"==a.updateMode&&a.sendData(),!0}),this.attachEvent("onBeforeRowDeleted",function(c){if(a._silent_mode||!this.rowsAr[c])return!0;if(this.dragContext&&a.dnd)return window.setTimeout(function(){a.setUpdated(c,!0)},1),!0;var e=a.getState(c);return this._h2&&this._h2.forEachChild(c,function(g){a.setUpdated(g.id,!1),a.markRow(g.id,!0,"deleted")},this),"inserted"==e?(a.set_invalid(c,!1),a.setUpdated(c,!1),!0):"deleted"!=e&&("true_deleted"==e?(a.setUpdated(c,!1),!0):(a.setUpdated(c,!0,"deleted"),!1))}),this.attachEvent("onBindUpdate",function(e,c,g){a.setUpdated(g,!0)}),this.attachEvent("onRowAdded",function(c){return this.dragContext&&a.dnd||a.setUpdated(c,!0,"inserted"),!0}),a._getRowData=function(g,u){var h,m=[];m.gr_id=g,this.obj.isTreeGrid()&&(m.gr_pid=this.obj.getParentId(g));for(var e=this.obj.getRowById(g),n=0;n<this.obj._cCount;n++){if(this.obj._c_order)var o=this.obj._c_order[n];else o=n;var s=this.obj.cells(e.idd,n);this._changed&&!s.wasChanged()||(this._endnm?m[this.obj.getColumnId(n)]=s.getValue():m["c"+o]=s.getValue())}if(h=this.obj.UserData[g])for(var l=0;l<h.keys.length;l++)h.keys[l]&&0!=h.keys[l].indexOf("__")&&(m[h.keys[l]]=h.values[l]);if(h=this.obj.UserData.gridglobaluserdata)for(l=0;l<h.keys.length;l++)m[h.keys[l]]=h.values[l];return m},a._clearUpdateFlag=function(e){if(this.obj.getRowById(e))for(var c=0;c<this.obj._cCount;c++)this.obj.cells(e,c).cell.wasChanged=!1},a.checkBeforeUpdate=function(l){for(var h=!0,c=[],g=0;g<this.obj._cCount;g++)if(this.mandatoryFields[g]){var e=this.mandatoryFields[g].call(this.obj,this.obj.cells(l,g).getValue(),l,g);"string"==typeof e?(this.messages.push(e),h=!1):(h&=e,c[g]=!e)}return h||(this.set_invalid(l,"invalid",c),this.setUpdated(l,!1)),h}},dhx4.attachEvent("onGridCreated",function(c){c._con_f_used=[].concat(c._con_f_used),dhtmlXGridObject.prototype._con_f_used=[];var h=function(l){return function(l){return(l=l.replace(/(\?|\&)connector[^\f]*/g,""))+(-1!=l.indexOf("?")?"&":"?")+"connector=true"+(0<this.hdr.rows.length?"&dhx_no_header=1":"")}.call(this,l)+(this._connector_sorting||"")+(this._connector_filter||"")};c.attachEvent("onCollectValues",function(l){return!this._con_f_used[l]||"object"==typeof this._con_f_used[l]&&this._con_f_used[l]}),c.attachEvent("onDynXLS",function(){return this.xmlFileUrl&&(this.xmlFileUrl=h.call(this,this.xmlFileUrl)),!0}),c.attachEvent("onBeforeSorting",function(o,n,m){if("connector"==n){var l=this;return this.clearAndLoad(function(m,n,l){return this._connector_sorting="&dhx_sort["+n+"]="+l,h.call(this,m)}.call(this,this.xmlFileUrl,o,m),function(){l.setSortImgState(!0,o,m)}),!1}return!0}),c.attachEvent("onFilterStart",function(m,l){if(this._con_f_used.length){var o=this.getSortingState();return this.clearAndLoad(function(m,l,o){for(var r=[],n=0;n<l.length;n++)r[n]="dhx_filter["+l[n]+"]="+encodeURIComponent(o[n]);return this._connector_filter="&"+r.join("&"),h.call(this,m)}.call(this,this.xmlFileUrl,m,l)),o.length&&this.setSortImgState(!0,o[0],o[1]),!1}return!0})}),dhtmlXGridObject.prototype._con_f_used=[],dhtmlXGridObject.prototype._in_header_connector_text_filter=function(c,a){return this._con_f_used[a]||(this._con_f_used[a]=1),this._in_header_text_filter(c,a)},dhtmlXGridObject.prototype._in_header_connector_select_filter=function(c,a){return this._con_f_used[a]||(this._con_f_used[a]=2),this._in_header_select_filter(c,a)},dhtmlXGridObject.prototype.load_connector||(dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load,dhtmlXGridObject.prototype.load=function(c,h,g){if(!this._colls_loaded&&this.cellType){for(var a=[],e=0;e<this.cellType.length;e++)0!=this.cellType[e].indexOf("co")&&0!=this.cellType[e].indexOf("clist")&&2!=this._con_f_used[e]||a.push(e);a.length&&(c+=(-1!=c.indexOf("?")?"&":"?")+"connector=true&dhx_colls="+a.join(","))}return this.load_connector.apply(this,arguments)},dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead,dhtmlXGridObject.prototype._parseHead=function(c,w,r){if(this._parseHead_connector.apply(this,arguments),!this._colls_loaded){for(var s=dhx4.ajax.xpath("./coll_options",c),m=0;m<s.length;m++){var o=s[m].getAttribute("for"),u=[],g=null;"combo"==this.cellType[o]?g=this.getColumnCombo(o):0==this.cellType[o].indexOf("co")&&(g=this.getCombo(o));for(var l=dhx4.ajax.xpath("./item",s[m]),a=[],h=0;h<l.length;h++){var e=l[h].getAttribute("value");if(g){var n=l[h].getAttribute("label")||e;g.addOption?a.push([e,n]):g.put(e,n),u[u.length]=n}else u[u.length]=e}a.length?g&&g.addOption(a):u.length&&!g&&this.registerCList&&this.registerCList(1*o,u),this._con_f_used[1*o]&&(this._con_f_used[1*o]=u)}this._colls_loaded=!0}}),dhtmlXGridCellObject.prototype={getAttribute:function(a){return this.cell._attrs[a]},setAttribute:function(a,c){this.cell._attrs[a]=c},getInput:function(){if(this.obj&&("INPUT"==this.obj.tagName||"TEXTAREA"==this.obj.tagName))return this.obj;var a=(this.obj||this.cell).getElementsByTagName("TEXTAREA");return a.length||(a=(this.obj||this.cell).getElementsByTagName("INPUT")),a[0]}},dhtmlXGridCellObject.prototype.setValue=function(a){"number"==typeof a||a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a="&nbsp;",this.cell._clearCell=!0),this.setCValue(a)},dhtmlXGridCellObject.prototype.getTitle=function(){return _isIE?this.cell.innerText:this.cell.textContent},dhtmlXGridCellObject.prototype.setCValue=function(c,a){this.cell.innerHTML=c,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,1<arguments.length?a:c])},dhtmlXGridCellObject.prototype.setCTxtValue=function(a){this.cell.innerHTML="",this.cell.appendChild(document.createTextNode(a)),this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])},dhtmlXGridCellObject.prototype.setLabel=function(a){this.cell.innerHTML=a},dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()},eXcell.prototype=new dhtmlXGridCellObject,eXcell_ed.prototype=new eXcell,eXcell_edtxt.prototype=new eXcell_ed,eXcell_edn.prototype=new eXcell_ed,eXcell_edn.prototype.setValue=function(a){if(!a||""==a.toString()._dhx_trim())return this.cell._clearCell=!0,this.setCValue("&nbsp;",0);this.cell._clearCell=!1,this.cell._orig_value=a,this.setCValue(this.grid._aplNF(a,this.cell._cellIndex),a)},eXcell_ch.prototype=new eXcell,eXcell_ch.prototype.setValue=function(c){this.cell.style.verticalAlign="middle",c&&("false"!=(c=c.toString()._dhx_trim())&&"0"!=c||(c="")),c?(c="1",this.cell.chstate="1"):(c="0",this.cell.chstate="0");this.cell.setAttribute("excell","ch"),this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+c+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)},eXcell_ra.prototype=new eXcell_ch,eXcell_ra.prototype.setValue=function(c){if(this.cell.style.verticalAlign="middle",c&&("false"!=(c=c.toString()._dhx_trim())&&"0"!=c||(c="")),c){if(this.grid._RaSeCol||(this.grid._RaSeCol=[]),this.grid._RaSeCol[this.cell._cellIndex]){var a=this.grid.cells(this.grid._RaSeCol[this.cell._cellIndex],this.cell._cellIndex);a.setValue("0"),this.grid.rowsAr[a.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,a.cell.parentNode.idd,a.cell._cellIndex])}this.grid._RaSeCol[this.cell._cellIndex]=this.cell.parentNode.idd,c="1",this.cell.chstate="1"}else c="0",this.cell.chstate="0";this.cell.setAttribute("excell","ra"),this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+c+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)},eXcell_txt.prototype=new eXcell,eXcell_txttxt.prototype=new eXcell_txt,eXcell_txt.prototype.setValue=function(a){(this.cell._brval=a)&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a="&nbsp;",this.cell._clearCell=!0),!this.grid.multiLine||this.cell._clearCell?this.setCValue(a,this.cell._brval):this.setCValue(a.replace(/\n/g,"<br/>"),a)},eXcell_co.prototype=new eXcell,eXcell_co.prototype.getText=function(){return this.cell.innerHTML},eXcell_co.prototype.setValue=function(g){if("object"==typeof g){var e=dhx4.ajax.xpath("./option",g);e.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var c=0;c<e.length;c++)this.cell._combo.put(e[c].getAttribute("value"),e[c].firstChild?e[c].firstChild.data:"");g=g.firstChild.data}if(""==(g||"").toString()._dhx_trim()&&(g=null),null!==(this.cell.combo_value=g)){var a=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(g);this.setCValue(null===a?g:a,g)}else this.setCValue("&nbsp;",g)},eXcell_coro.prototype=new eXcell_co,eXcell_cotxt.prototype=new eXcell_co,eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent},eXcell_cotxt.prototype.setValue=function(e){if("object"==typeof e){var c=dhx4.ajax.xpath("./option",e);c.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var a=0;a<c.length;a++)this.cell._combo.put(c[a].getAttribute("value"),c[a].firstChild?c[a].firstChild.data:"");e=e.firstChild.data}""==(e||"").toString()._dhx_trim()&&(e=null),null!==e?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(e)||e,e):this.setCTxtValue(" ",e),this.cell.combo_value=e},eXcell_corotxt.prototype=new eXcell_cotxt,eXcell_cp.prototype=new eXcell,eXcell_cp.prototype.setValue=function(a){this.setCValue("<div style='width:100%;height:"+(this.grid.multiLine?"100%":23)+";background-color:"+(a||"")+";border:0px;'>&nbsp;</div>",a),this.cell.firstChild._bg=a},eXcell_img.prototype=new eXcell,eXcell_img.prototype.getTitle=function(){return this.cell._brval},eXcell_img.prototype.setValue=function(e){var c=e;if(-1!=(e||"").indexOf("^")){var a=e.split("^");e=a[0],c=this.cell._attrs.title||a[1],2<a.length&&(this.cell.lnk=a[2],a[3]&&(this.cell.trg=a[3])),this.cell.titFl="1"}this.grid.multiLine?this.setCValue("<img src='"+this.grid.iconURL+(e||"")._dhx_trim()+"' border='0'>",e):this.setCValue("<img src='"+this.grid.iconURL+(e||"")._dhx_trim()+"' border='0' style='max-height:"+(this.grid._srdh-4)+"px'>",e),this.cell.lnk&&(this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>"),this.cell._brval=c},eXcell_icon.prototype=new eXcell_ed,eXcell_price.prototype=new eXcell_ed,eXcell_price.prototype.setValue=function(c){isNaN(parseFloat(c))&&(c=this.val||0);var a="green";c<0&&(a="red"),this.setCValue("<span>$</span><span style='padding-right:2px;color:"+a+";'>"+c+"</span>",c)},eXcell_dyn.prototype=new eXcell_ed,eXcell_dyn.prototype.setValue=function(e){if(e&&!isNaN(Number(e))||""!==e&&(e=0),0<e)var c="green",a="dyn_up.gif";else if(0==e)c="black",a="dyn_.gif";else c="red",a="dyn_down.gif";this.setCValue("<div class='grid_cell_dyn'><img src='"+this.grid.imgURL+a+"'><span style='color:"+c+";'>"+e+"</span></div>",e)},eXcell_ro.prototype=new eXcell,window.eXcell_hidden=function(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell.val}},eXcell_hidden.prototype=new eXcell,eXcell_hidden.prototype.setValue=function(a){this.cell.val=a},eXcell_ron.prototype=new eXcell,eXcell_ron.prototype.setValue=function(a){if(0===a);else if(!a||""==a.toString()._dhx_trim())return this.setCValue("&nbsp;"),this.cell._clearCell=!0;this.cell._orig_value=a,this.cell._clearCell=!1,this.setCValue(a?this.grid._aplNF(a,this.cell._cellIndex):"0")},eXcell_rotxt.prototype=new eXcell,Hashtable.prototype=new dhtmlXGridComboObject,void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachGrid=function(){this.callEvent("_onBeforeContentAttach",["grid"]);var a=document.createElement("DIV");return a.style.width="100%",a.style.height="100%",a.style.position="relative",a.style.overflow="hidden",this._attachObject(a),this.dataType="grid",this.dataObj=new dhtmlXGridObject(a),this.dataObj.setSkin(this.conf.skin),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&null!=navigator.userAgent.match(/7[\.\d]* mobile/gi)&&null!=navigator.userAgent.match(/AppleWebKit/gi)&&(this.dataObj.objBox.style.webkitOverflowScrolling="auto"),"material"==this.conf.skin&&"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&(this.cell.childNodes[this.conf.idx.cont].style.overflow="hidden"),"dhx_skyblue"==this.conf.skin&&"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2),a=null,this.callEvent("_onContentAttach",[]),this.dataObj}),dhtmlXGridObject.prototype.enableDragAndDrop=function(a){"temporary_disabled"==a?a=!(this.dADTempOff=!1):this.dADTempOff=!0,this.dragAndDropOff=dhx4.s2b(a),this._drag_validate=!0,a&&(this.objBox.ondragstart=function(c){return!((c||event).cancelBubble=!0)})},dhtmlXGridObject.prototype.setDragBehavior=function(a){switch(this.dadmodec=this.dadmodefix=0,a){case"child":this.dadmode=0,this._sbmod=!1;break;case"sibling":this.dadmode=1,this._sbmod=!1;break;case"sibling-next":this.dadmode=1,this._sbmod=!0;break;case"complex":this.dadmode=2,this._sbmod=!1;break;case"complex-next":this.dadmode=2,this._sbmod=!0}},dhtmlXGridObject.prototype.enableDragOrder=function(a){this._dndorder=dhx4.s2b(a)},dhtmlXGridObject.prototype._checkParent=function(g,c){var e=this._h2.get[g.idd].parent;if(e.parent){for(var a=0;a<c.length;a++)if(c[a]==e.id)return!0;return this._checkParent(this.rowsAr[e.id],c)}},dhtmlXGridObject.prototype._createDragNode=function(g,h){if(this.editStop(),window.dhtmlDragAndDrop.dragNode)return null;if(!this.dADTempOff)return null;g.parentObject=new Object;var o=(g.parentObject.treeNod=this).callEvent("onBeforeDrag",[g.parentNode.idd,g._cellIndex,h]);if(!o)return null;var l=new Array;l=(l=this.getSelectedId())&&""!=l?l.split(this.delim):[];for(var m=!1,c=0;c<l.length;c++)l[c]==g.parentNode.idd&&(m=!0);if(m||(this.selectRow(this.rowsAr[g.parentNode.idd],!1,h.ctrlKey,!1),h.ctrlKey||(l=[]),l[this.selMultiRows?l.length:0]=g.parentNode.idd),this.isTreeGrid())for(c=l.length-1;0<=c;c--)this._checkParent(this.rowsAr[l[c]],l)&&l.splice(c,1);var r=this;l.length&&this._dndorder&&l.sort(function(s,e){return r.rowsAr[s].rowIndex>r.rowsAr[e].rowIndex?1:-1});var a=this.getFirstParentOfType(_isIE?h.srcElement:h.target,"TD");a&&(this._dndExtra=a._cellIndex),this._dragged=new Array;for(c=0;c<l.length;c++)this.rowsAr[l[c]]&&(this._dragged[this._dragged.length]=this.rowsAr[l[c]],this.rowsAr[l[c]].treeNod=this);g.parentObject.parentNode=g.parentNode;var n=document.createElement("div");return n.innerHTML=!0!==o?o:this.rowToDragElement(g.parentNode.idd),n.style.position="absolute",n.className="dragSpanDiv",n},dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV"),this._sdrgc.innerHTML="&nbsp;",this._sdrgc.className="gridDragLine",this.objBox.appendChild(this._sdrgc)},dragContext.prototype.valid=function(){if(this.sobj!=this.tobj)return!0;if(this.sid==this.tid)return!1;if("treeGrid"==this.target)for(var a=this.tid;a=this.tobj.getParentId(a);)if(this.sid==a)return!1;return!0},dragContext.prototype.close=function(){this.sobj=null,this.tobj=null},dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra,this.before)},dragContext.prototype.set=function(e,c){return this[e]=c,this},dragContext.prototype.uid=function(e,c){for(this.nid=this.sid;this.tobj.rowsAr[this.nid];)this.nid=this.nid+(new Date).valueOf();return this},dragContext.prototype.data=function(){return this.sobj==this.tobj?this.sobj._getRowArray(this.sobj.rowsAr[this.sid]):"tree"==this.source?this.tobj.treeToGridElement(this.sobj,this.sid,this.tid):this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)},dragContext.prototype.attrs=function(){return"tree"==this.source?{}:this.sobj.rowsAr[this.sid]._attrs},dragContext.prototype.childs=function(){return"treeGrid"==this.source&&this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null},dragContext.prototype.pid=function(){if(!this.tid)return 0;if(!this.tobj._h2)return 0;if("treeGrid"==this.target){if("child"==this.dropmode)return this.tid;var c=this.tobj.rowsAr[this.tid],a=this.tobj._h2.get[c.idd].parent.id;if(this.alfa&&this.tobj._sbmod&&c.nextSibling){var e=this.tobj._h2.get[c.nextSibling.idd].parent.id;if(e==this.tid)return this.tid;if(e!=a)return e}return a}},dragContext.prototype.ind=function(){if(this.tid==window.unknown)return this.tobj.rowsBuffer.length;"treeGrid"==this.target&&("child"==this.dropmode?this.tobj.openItem(this.tid):this.tobj.openItem(this.tobj.getParentId(this.tid)));var a=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);if(this.alfa&&this.tobj._sbmod&&"sibling"==this.dropmode){var c=this.tobj.rowsAr[this.tid];if(c.nextSibling&&this._h2.get[c.nextSibling.idd].parent.id==this.tid)return a+1}return a+1+("treeGrid"==this.target&&0<=a&&"minus"==this.tobj._h2.get[this.tobj.rowsBuffer[a].idd].state?this.tobj._getOpenLenght(this.tobj.rowsBuffer[a].idd,0):0)},dragContext.prototype.img=function(){return"grid"!=this.target&&this.sobj._h2?this.sobj.getItemImage(this.sid):null},dragContext.prototype.slist=function(){for(var c=new Array,a=0;a<this.sid.length;a++)c[c.length]=this.sid[a]["tree"==this.source?"id":"idd"];return c.join(",")},dhtmlXGridObject.prototype._drag=function(s,h,r,u){if(this._realfake)return this._fake._drag();this.lastLanding;this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);var g=r.parentNode,e=s.parentObject;g.idd||((g.grid=this).dadmodefix=0);var n=new dragContext(0,0,0,1==g.grid.dadmode||g.grid.dadmodec?"sibling":"child");if(e&&e.childNodes)n.set("source","tree").set("sobj",e.treeNod).set("sid",n.sobj._dragged);else{if(!e)return!0;e.treeNod.isTreeGrid&&e.treeNod.isTreeGrid()&&n.set("source","treeGrid"),n.set("sobj",e.treeNod).set("sid",n.sobj._dragged)}g.grid.isTreeGrid()?n.set("target","treeGrid"):n.set("dropmode","sibling"),n.set("tobj",g.grid).set("tid",g.idd),2==n.tobj.dadmode&&1==n.tobj.dadmodec&&n.tobj.dadmodefix<0&&(n.tobj.obj.rows[1].idd!=n.tid?n.tid=g.previousSibling.idd:this._h2&&n.tid?n.before=!0:n.tid=0);var a=this.getFirstParentOfType(u,"TD");if(a&&n.set("tExtra",a._cellIndex),a&&n.set("sExtra",n.sobj._dndExtra),n.sobj.dpcpy&&n.set("mode","copy"),n.tobj._realfake&&(n.tobj=n.tobj._fake),n.sobj._realfake&&(n.sobj=n.sobj._fake),n.tobj._clearMove(),e&&e.treeNod&&e.treeNod._nonTrivialRow)e.treeNod._nonTrivialRow(this,n.tid,n.dropmode,e);else{if(!(n.tobj.dragContext=n).tobj.callEvent("onDrag",[n.slist(),n.tid,n.sobj,n.tobj,n.sExtra,n.tExtra]))return n.tobj.dragContext=null;var v=new Array;if("object"==typeof n.sid){for(var m=n.copy(),l=0;l<n.sid.length;l++)m.set("alfa",!l).set("sid",n.sid[l]["tree"==n.source?"id":"idd"]).valid()&&(m.tobj._dragRoutine(m),"treeGrid"==m.target&&"child"==m.dropmode&&m.tobj.openItem(m.tid),v[v.length]=m.nid,m.set("dropmode","sibling").set("tid",m.nid));m.close()}else n.tobj._dragRoutine(n);n.tobj.laterLink&&n.tobj.laterLink(),n.tobj.callEvent("onDrop",[n.slist(),n.tid,v.join(","),n.sobj,n.tobj,n.sExtra,n.tExtra])}n.tobj.dragContext=null,n.close()},dhtmlXGridObject.prototype._dragRoutine=function(s){if(s.sobj==s.tobj&&"grid"==s.source&&"move"==s.mode&&!this._fake){if(s.sobj._dndProblematic)return;var o=s.sobj.rowsAr[s.sid],r=s.sobj.rowsCol._dhx_find(o);if(s.sobj.rowsCol._dhx_removeAt(s.sobj.rowsCol._dhx_find(o)),s.sobj.rowsBuffer._dhx_removeAt(s.sobj.rowsBuffer._dhx_find(o)),s.sobj.rowsBuffer._dhx_insertAt(s.ind(),o),s.tobj._fake){s.tobj._fake.rowsCol._dhx_removeAt(r);var u=s.tobj._fake.rowsAr[s.sid];u.parentNode.removeChild(u)}return s.sobj._insertRowAt(o,s.ind()-(this.pagingOn?(this.currentPage-1)*this.rowsBufferOutSize:0)),s.nid=s.sid,void s.sobj.callEvent("onGridReconstructed",[])}var n;if(this._h2&&void 0!==s.tid&&"sibling"==s.dropmode&&(this._sbmod||s.tid)?s.before?n=s.uid().tobj.addRowBefore(s.nid,s.data(),s.tid,s.img(),s.childs()):s.alfa&&this._sbmod&&this._h2.get[s.tid].childs.length?(this.openItem(s.tid),n=s.uid().tobj.addRowBefore(s.nid,s.data(),this._h2.get[s.tid].childs[0].id,s.img(),s.childs())):n=s.uid().tobj.addRowAfter(s.nid,s.data(),s.tid,s.img(),s.childs()):n=s.uid().tobj.addRow(s.nid,s.data(),s.ind(),s.pid(),s.img(),s.childs()),n._attrs=s.attrs(),"tree"==s.source){this.callEvent("onRowAdded",[s.nid]);var a=s.sobj._globalIdStorageFind(s.sid);if(a.childsCount){for(var m=s.copy().set("tid",s.nid).set("dropmode","grid"==s.target?"sibling":"child"),g=0;g<a.childsCount;g++)s.tobj._dragRoutine(m.set("sid",a.childNodes[g].id)),"move"==s.mode&&g--;m.close()}}else if(s.tobj._copyUserData(s),this.callEvent("onRowAdded",[s.nid]),"treeGrid"==s.source){s.sobj==s.tobj&&(n._xml=s.sobj.rowsAr[s.sid]._xml);var h=s.sobj._h2.get[s.sid];if(h&&h.childs.length){m=s.copy().set("tid",s.nid);"grid"==s.target?m.set("dropmode","sibling"):(m.tobj.kidsXmlFile||m.tobj.openItem(s.tid),m.set("dropmode","child"));var e=h.childs.length;if(!m.tobj.kidsXmlFile)for(g=0;g<e;g++)s.sobj.render_row_tree(null,h.childs[g].id),s.tobj._dragRoutine(m.set("sid",h.childs[g].id)),e!=h.childs.length&&(g--,e=h.childs.length);m.close()}}"move"==s.mode&&(s.sobj["tree"==s.source?"deleteItem":"deleteRow"](s.sid),s.sobj!=s.tobj||s.tobj.rowsAr[s.sid]||(s.tobj.changeRowId(s.nid,s.sid),s.nid=s.sid))},dhtmlXGridObject.prototype.gridToGrid=function(g,a,e){for(var h=new Array,c=0;c<a.hdr.rows[0].cells.length;c++)h[c]=a.cells(g,c).getValue();return h},dhtmlXGridObject.prototype.checkParentLine=function(a,c){return!!(this._h2&&c&&a)&&(a.id==c||this.checkParentLine(a.parent,c))},dhtmlXGridObject.prototype._dragIn=function(l,g,c,m){if(!this.dADTempOff)return 0;var a=this.isTreeGrid(),h=g.parentNode.idd?g.parentNode:g.parentObject;if(this._drag_validate){if(l.parentNode==g.parentNode)return 0;if(a&&this==h.grid&&this.checkParentLine(this._h2.get[l.parentNode.idd],g.parentNode.idd))return 0}if(!this.callEvent("onDragIn",[h.idd||h.id,l.parentNode.idd,h.grid||h.treeNod,l.grid||l.parentNode.grid]))return this._setMove(l,c,m,!0);if(this._setMove(l,c,m),a&&""!=l.parentNode.expand){var e=this;this._autoOpenTimer=window.setTimeout(function(){e._autoOpenItem(null,e),e=null},1e3),this._autoOpenId=l.parentNode.idd}else this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);return l},dhtmlXGridObject.prototype._autoOpenItem=function(a,c){c.openItem(c._autoOpenId)},dhtmlXGridObject.prototype._dragOut=function(c){this._clearMove();var a=c.parentNode.parentObject?c.parentObject.id:c.parentNode.idd;this.callEvent("onDragOut",[a]),this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer)},dhtmlXGridObject.prototype._setMove=function(l,c,n,h){if(l.parentNode.idd){var e=dhx4.absTop(l),a=dhx4.absTop(this.objBox);if(e-a>parseInt(this.objBox.offsetHeight)-50&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20),e-a+parseInt(this.objBox.scrollTop)<parseInt(this.objBox.scrollTop)+30&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20),h)return 0;if(2==this.dadmode){var m=n-e+(document.body.scrollTop||document.documentElement.scrollTop)-2-l.offsetHeight/2;0<Math.abs(m)-l.offsetHeight/6?(this.dadmodec=1,this.dadmodefix=m<0?-1:1):this.dadmodec=0}else this.dadmodec=this.dadmode;if(this.dadmodec)this._sdrgc||this._createSdrgc(),this._sdrgc.style.display="block",this._sdrgc.style.top=e-a+parseInt(this.objBox.scrollTop)+(0<=this.dadmodefix?l.offsetHeight:0)+"px";else if("TR"==(this._llSelD=l).parentNode.tagName)for(var g=0;g<l.parentNode.childNodes.length;g++){(m=l.parentNode.childNodes[g])._bgCol=m.style.backgroundColor,m.style.backgroundColor="#FFCCCC"}}},dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc&&(this._sdrgc.style.display="none"),this._llSelD&&"TR"==this._llSelD.parentNode.tagName)for(var c=this._llSelD.parentNode.childNodes,a=0;a<c.length;a++)c[a].style.backgroundColor=c[a]._bgCol;this._llSelD=null},dhtmlXGridObject.prototype.rowToDragElement=function(a){return this.cells(a,0).getValue()},dhtmlXGridObject.prototype._copyUserData=function(g){if(!g.tobj.UserData[g.nid]||g.tobj!=g.sobj){g.tobj.UserData[g.nid]=new Hashtable;var e=g.sobj.UserData[g.sid],a=g.tobj.UserData[g.nid];e&&(a.keys=a.keys.concat(e.keys),a.values=a.values.concat(e.values))}},dhtmlXGridObject.prototype.moveRow=function(e,g,a,c){switch(g){case"row_sibling":this.moveRowTo(e,a,"move","sibling",this,c);break;case"up":this.moveRowUp(e);break;case"down":this.moveRowDown(e)}},dhtmlXGridObject.prototype._nonTrivialNode=function(s,r,m,n,e){if(s.callEvent&&!e&&!s.callEvent("onDrag",[n.idd,r.id,m?m.id:null,this,s]))return!1;for(var o=n.idd,a=o;s._idpull[a];)a+=(new Date).getMilliseconds().toString();var h=this.isTreeGrid()?this.getItemImage(o):"";if(m){for(g=0;g<r.childsCount&&r.childNodes[g]!=m;g++);0!=g?m=r.childNodes[g-1]:(st="TOP",m="")}var c=s._attachChildNode(r,a,this.gridToTreeElement(s,a,o),"",h,h,h,"","",m);if(this._h2){var l=this._h2.get[o];if(l.childs.length)for(var g=0;g<l.childs.length;g++)this._nonTrivialNode(s,c,0,this.rowsAr[l.childs[g].id],1),this.dpcpy||g--}this.dpcpy||this.deleteRow(o),s.callEvent&&!e&&s.callEvent("onDrop",[a,r.id,m?m.id:null,this,s])},dhtmlXGridObject.prototype.gridToTreeElement=function(c,e,a){return this.cells(a,0).getValue()},dhtmlXGridObject.prototype.treeToGridElement=function(g,h,a){var c=new Array,l=this.cellType._dhx_find("tree");-1==l&&(l=0);for(var e=0;e<this.getColumnCount();e++)c[c.length]=e!=l?g.getUserData(h,this.getColumnId(e))||"":g.getItemText(h);return c},dhtmlXGridObject.prototype.moveRowTo=function(g,e,m,l,a,h){var n=new dragContext((a||this).isTreeGrid()?"treeGrid":"grid",(h||this).isTreeGrid()?"treeGrid":"grid",m,l||"sibling",g,e,a||this,h||this);return n.tobj._dragRoutine(n),n.close(),n.nid},dhtmlXGridObject.prototype.enableMercyDrag=function(a){this.dpcpy=dhx4.s2b(a)},dhtmlXGridObject.prototype.toPDF=function(g,r,w,u,n,D){var h={row:(this.getSelectedRowId()||"").split(this.delim),col:this.getSelectedCellIndex()};if(null===h.row||-1===h.col)h=!1;else if(h.row){for(var x=0;x<h.row.length;x++)if(h.row[x]){var c=this.cells(h.row[x],h.col).cell;c.parentNode.className=c.parentNode.className.replace(" rowselected",""),c.className=c.className.replace(" cellselected",""),h.row[x]=c}}else h=!1;var y="full_color"==(r=r||"color"),a=this;function m(F,E){return(window.getComputedStyle?window.getComputedStyle(F,null)[E]:F.currentStyle?F.currentStyle[E]:null)||""}function v(I){if(!a.rowsBuffer[I])return"";var E=a.render_row(I);if("none"==E.style.display)return"";for(var M="<row"+(a.isTreeGrid()?' level="'+a.getLevel(E.idd)+'"':"")+">",K=0;K<a._cCount;K++)if((!a._srClmn||a._srClmn[K])&&(!a._hrrar[K]||a._fake&&K<a._fake.hdrLabels.length)){var Q=a.cells(E.idd,K);if(y){var J=m(Q.cell,"color"),P=m(Q.cell,"backgroundColor");"transparent"!=P&&"rgba(0, 0, 0, 0)"!=P||(P="rgb(255,255,255)"),M+="<cell bgColor='"+P+"' textColor='"+J+"' bold='"+(m(Q.cell,"font-weight")||m(Q.cell,"fontWeight"))+"' italic='"+(m(Q.cell,"font-style")||m(Q.cell,"fontStyle"))+"' align='"+(m(Q.cell,"text-align")||m(Q.cell,"textAlign"))+"' font='"+(m(Q.cell,"font-family")||m(Q.cell,"fontFamily"))+"'>"}else M+="<cell>";M+="<![CDATA["+(Q.getContent?Q.getContent():Q.getTitle())+"]]></cell>"}return M+"</row>"}a._asCDATA=!0,this.target=void 0===D?' target="_blank"':D,eXcell_ch.prototype.getContent=function(){return this.getValue()},eXcell_ra.prototype.getContent=function(){return this.getValue()};var A=document.createElement("div");A.style.display="none",document.body.appendChild(A);var l="form_"+a.uid();if(A.innerHTML='<form id="'+l+'" method="post" action="'+g+'" accept-charset="utf-8"  enctype="application/x-www-form-urlencoded"'+this.target+'><input type="hidden" name="grid_xml" id="grid_xml"/> </form>',document.getElementById(l).firstChild.value=encodeURIComponent(function(H){for(var N=[],L=1;L<a.hdr.rows.length;L++){N[L]=[];for(var K=0;K<a._cCount;K++){var P=a.hdr.rows[L].childNodes[K];N[L][K]||(N[L][K]=[0,0]),P&&(N[L][P._cellIndexS]=[P.colSpan,P.rowSpan])}}var M="<rows profile='"+H+"'";for(w&&(M+=" header='"+w+"'"),u&&(M+=" footer='"+u+"'"),M+="><head>"+a._serialiseExportConfig(N).replace(/^<head/,"<columns").replace(/head>$/,"columns>"),L=2;L<a.hdr.rows.length;L++){var E=0,T=a.hdr.rows[L],O="";for(K=0;K<a._cCount;K++)if(a._srClmn&&!a._srClmn[K]||a._hrrar[K]&&(!a._fake||K>=a._fake.hdrLabels.length))E++;else{var S=N[L][K],Q=S[0]&&1<S[0]?' colspan="'+S[0]+'" ':"";S[1]&&1<S[1]&&(Q+=' rowspan="'+S[1]+'" ',E=-1);var F="",J=T;a._fake&&K<a._fake._cCount&&(J=a._fake.hdr.rows[L]);for(var I=0;I<J.cells.length;I++)if(J.cells[I]._cellIndexS==K){F=(F=J.cells[I].getElementsByTagName("SELECT").length?"":_isIE?J.cells[I].innerText:J.cells[I].textContent).replace(/[ \n\r\t\xA0]+/," ");break}F&&" "!=F||E++,O+="<column"+Q+"><![CDATA["+F+"]]></column>"}E!=a._cCount&&(M+="\n<columns>"+O+"</columns>")}return M+="</head>\n",M+=function(){var H=["<foot>"];if(!a.ftr)return"";for(var I=1;I<a.ftr.rows.length;I++){H.push("<columns>");for(var L=a.ftr.rows[I],F=0;F<a._cCount;F++)if((!a._srClmn||a._srClmn[F])&&(!a._hrrar[F]||a._fake&&!(F>=a._fake.hdrLabels.length))){for(var E=0;E<L.cells.length;E++){var K="",J="";if(L.cells[E]._cellIndexS==F){K=(K=_isIE?L.cells[E].innerText:L.cells[E].textContent).replace(/[ \n\r\t\xA0]+/," "),L.cells[E].colSpan&&1!=L.cells[E].colSpan&&(J=" colspan='"+L.cells[E].colSpan+"' "),L.cells[E].rowSpan&&1!=L.cells[E].rowSpan&&(J=" rowspan='"+L.cells[E].rowSpan+"' ");break}}H.push("<column"+J+"><![CDATA["+K+"]]></column>")}H.push("</columns>")}return H.push("</foot>"),H.join("\n")}()}(r).replace("–","-")+function(){var E=[];if(n)for(var F=0;F<n.length;F++)E.push(v(a.getRowIndex(n[F])));else for(F=0;F<a.getRowsNum();F++)E.push(v(F));return E.join("\n")}()+"</rows>"),document.getElementById(l).submit(),A.parentNode.removeChild(A),a=null,h&&h.row.length)for(x=0;x<h.row.length;x++)h.row[x].parentNode.className+=" rowselected",1==h.row.length&&(h.row[x].className+=" cellselected");h=null},dhtmlXGridObject.prototype._serialiseExportConfig=function(l){for(var r,c="<head>",e=0;e<this.hdr.rows[0].cells.length;e++)if((!this._srClmn||this._srClmn[e])&&(!this._hrrar[e]||this._fake&&!(e>=this._fake.hdrLabels.length))){var g=this.fldSort[e];"cus"==g&&(g=(g=this._customSorts[e].toString()).replace(/function[\ ]*/,"").replace(/\([^\f]*/,""));var o=l[1][e];c+="<column "+((o[1]&&1<o[1]?' rowspan="'+o[1]+'" ':"")+(o[0]&&1<o[0]?' colspan="'+o[0]+'" ':""))+" width='"+this.getColWidth(e)+"' align='"+this.cellAlign[e]+"' type='"+this.cellType[e]+"' hidden='"+(this.isColumnHidden&&this.isColumnHidden(e)?"true":"false")+"' sort='"+(g||"na")+"' color='"+(this.columnColor[e]||"")+"'"+(this.columnIds[e]?" id='"+this.columnIds[e]+"'":"")+">",this._asCDATA?c+="<![CDATA["+this.getColumnLabel(e)+"]]>":c+=this.getColumnLabel(e);var n=this.combos[e]?this.getCombo(e):null;if(n)for(var a=0;a<n.keys.length;a++)c+="<option value='"+("string"!=typeof(r=n.keys[a])?r:r=(r=(r=(r=(r=r.replace(/&/g,"&amp;")).replace(/"/g,"&quot;")).replace(/'/g,"&apos;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"))+"'><![CDATA["+n.values[a]+"]]></option>";c+="</column>"}return c+"</head>"},window.eXcell_sub_row_grid&&(window.eXcell_sub_row_grid.prototype.getContent=function(){return""}),dhtmlXGridObject.prototype.toExcel=function(a,g,m,l,c){if(!document.getElementById("ifr")){var h=document.createElement("iframe");h.style.display="none",h.setAttribute("name","dhx_export_iframe"),h.setAttribute("src",""),h.setAttribute("id","dhx_export_iframe"),document.body.appendChild(h)}this.toPDF(a,g,m,l,c,' target="dhx_export_iframe"')},dhtmlXGridObject.prototype.filterBy=function(e,g,c){if(this.isTreeGrid())return this.filterTreeBy(e,g,c);if(this._f_rowsBuffer?c||(this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer)),this._fake&&(this._fake.rowsBuffer=this.rowsBuffer)):this._f_rowsBuffer=[].concat(this.rowsBuffer),this.rowsBuffer.length){if(this.dma(!0),"object"==typeof e)for(var a=0;a<g.length;a++)this._filterA(e[a],g[a]);else this._filterA(e,g);this.dma(!1),this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<this.currentPage-1&&this.changePage(0),this._reset_view(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._filterA=function(c,e){if(""!=e){var g=!0;if("function"==typeof e?g=!1:e=(e||"").toString().toLowerCase(),this.rowsBuffer.length)for(var a=this.rowsBuffer.length-1;0<=a;a--)(g?-1!=this._get_cell_value(this.rowsBuffer[a],c).toString().toLowerCase().indexOf(e):e.call(this,this._get_cell_value(this.rowsBuffer[a],c),this.rowsBuffer[a].idd))||this.rowsBuffer.splice(a,1)}},dhtmlXGridObject.prototype.getFilterElement=function(a){if(this.filters){for(var c=0;c<this.filters.length;c++)if(this.filters[c][1]==a)return this.filters[c][0].combo||this.filters[c][0];return null}},dhtmlXGridObject.prototype.collectValues=function(g){var u=this.dhxevs.data.oncollectvalues;if(u){var r=!0;for(var s in u){var v=u[s].call(this,g);!0!==v&&(r=v||r)}if(!0!==r)return r}if(this.isTreeGrid())return this.collectTreeValues(g);this.dma(!0),this._build_m_order(),g=this._m_order?this._m_order[g]:g;for(var n={},l=[],e=this._f_rowsBuffer||this.rowsBuffer,h=0;h<e.length;h++){var a=this._get_cell_value(e[h],g);!a||e[h]._childIndexes&&e[h]._childIndexes[g]==e[h]._childIndexes[g-1]||(n[a]=!0)}this.dma(!1);var o=this.combos[g]||!!this._col_combos&&this._col_combos[g];for(var m in n)!0===n[m]&&(o&&(o.get&&o.get(m)?m=o.get(m):o.getOption&&o.getOption(m)&&(m=o.getOption(m).text)),l.push(m));return l.sort()},dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var a=0;a<this._c_order.length;a++)this._m_order[this._c_order[a]]=a}},dhtmlXGridObject.prototype.filterByAll=function(){var e=[],c=[];this._build_m_order();for(var g=0;g<this.filters.length;g++){var l=this._m_order?this._m_order[this.filters[g][1]]:this.filters[g][1];if(!(l>=this._cCount)){c.push(l);var h,m=this.filters[g][0].old_value=this.filters[g][0].value;this.filters[g][0]._filter&&(m=this.filters[g][0]._filter()),"function"!=typeof m&&(h=this.combos[l]||!!this._col_combos&&this._col_combos[l])&&(h.values?m=-1==(l=h.values._dhx_find(m))?m:h.keys[l]:h.getOptionByLabel&&(m=h.getOptionByLabel(m)?h.getOptionByLabel(m).value:m)),e.push(m)}}this.callEvent("onFilterStart",[c,e])&&(this.filterBy(c,e),this._cssEven&&this._fixAlterCss(),this.callEvent("onFilterEnd",[this.filters]),this._f_rowsBuffer&&this.rowsBuffer.length==this._f_rowsBuffer.length&&(this._f_rowsBuffer=null))},dhtmlXGridObject.prototype.makeFilter=function(h,e,c){if(this.filters||(this.filters=[]),"object"!=typeof h&&(h=document.getElementById(h)),h){var a=this;if(h.style.width||(h.style.width="90%"),"SELECT"==h.tagName)this.filters.push([h,e]),this._loadSelectOptins(h,e),h.onchange=function(){a.filterByAll()},_isIE&&(h.style.marginTop="1px"),this.attachEvent("onEditCell",function(m,l,n){return this._build_m_order(),2==m&&this.filters&&(this._m_order?n==this._m_order[e]:n==e)&&this._loadSelectOptins(h,e),!0});else if("INPUT"==h.tagName)this.filters.push([h,e]),h.old_value=h.value="",h.onkeydown=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){h.value!=h.old_value&&(a.filterByAll(),h.old_value=h.value)},500)};else if("DIV"==h.tagName){this.filters.push([h,e]),h.style.padding="0px",h.style.margin="0px",window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL);var g=new dhtmlXCombo(h,"_filter","90%");g.filterSelfA=g.filterSelf,g.filterSelf=function(){0==this.getSelectedIndex()&&this.setComboText(""),this.filterSelfA.apply(this,arguments),this.optionsArr[0].hide(!1)},g.enableFilteringMode(!0),h.combo=g,h.value="",this._loadComboOptins(h,e),g.attachEvent("onChange",function(){h.value=g.getSelectedValue(),null===h.value&&(h.value=""),a.filterByAll()})}h.parentNode&&(h.parentNode.className+=" filter"),this._filters_ready()}},dhtmlXGridObject.prototype.findCell=function(l,m,g,h){!0===(h=h||function(o,n){return-1!=n.toString().toLowerCase().indexOf(o)})&&(h=function(o,n){return n.toString().toLowerCase()==o});var e=new Array;if(l=l.toString().toLowerCase(),"number"!=typeof g&&(g=g?1:0),!this.rowsBuffer.length)return e;for(var c=m||0;c<this._cCount;c++){if(this._h2)this._h2.forEachChild(0,function(n){if(g&&e.length==g)return e;h(l,this._get_cell_value(n.buff,c))&&e.push([n.id,c])},this);else for(var a=0;a<this.rowsBuffer.length;a++)if(h(l,this._get_cell_value(this.rowsBuffer[a],c))&&(e.push([this.rowsBuffer[a].idd,c]),g&&e.length==g))return e;if(void 0!==m)return e}return e},dhtmlXGridObject.prototype.makeSearch=function(g,e,a){if("object"!=typeof g&&(g=document.getElementById(g)),g){var c=this;"INPUT"==g.tagName&&(g.onkeypress=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){if(""!=g.value){var h=c.findCell(g.value,e,!0,a);h.length&&(c._h2&&c.openItem(h[0][0]),c.selectCell(c.getRowIndex(h[0][0]),e||0))}},500)}),g.parentNode&&(g.parentNode.className+=" filter")}},dhtmlXGridObject.prototype._loadSelectOptins=function(h,n){var a=this.collectValues(n),e=h.value;h.innerHTML="",h.options[0]=new Option("","");for(var m=this._filter_tr?this._filter_tr[n]:null,g=0;g<a.length;g++)h.options[h.options.length]=new Option(m?m(a[g]):a[g],a[g]);h.value=e},dhtmlXGridObject.prototype.setSelectFilterLabel=function(c,a){this._filter_tr||(this._filter_tr=[]),this._filter_tr[c]=a},dhtmlXGridObject.prototype._loadComboOptins=function(g,m){if(g.combo){var a=this.collectValues(m);g.combo.clearAll();for(var h=[["",""]],e=0;e<a.length;e++)h.push([a[e],a[e]]);g.combo.addOption(h)}},dhtmlXGridObject.prototype.refreshFilters=function(){if(this.filters)for(var a=0;a<this.filters.length;a++)switch(this.filters[a][0].tagName.toLowerCase()){case"input":break;case"select":this._loadSelectOptins.apply(this,this.filters[a]);break;case"div":this._loadComboOptins.apply(this,this.filters[a])}},dhtmlXGridObject.prototype._filters_ready=function(c,a){this.attachEvent("onXLE",this.refreshFilters),this.attachEvent("onRowCreated",function(h,g){if(this._f_rowsBuffer)for(var e=0;e<this._f_rowsBuffer.length;e++)if(this._f_rowsBuffer[e].idd==h)return this._f_rowsBuffer[e]=g}),this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null,this.hdr.rows.length||(this.filters=[])}),this.attachEvent("onSetSizes",this._filters_resize_combo),this.attachEvent("onResize",this._filters_resize_combo),this._filters_ready=function(){}},dhtmlXGridObject.prototype._filters_resize_combo=function(){if(this.filters){for(var a=0;a<this.filters.length;a++)null!=this.filters[a][0].combo&&this.filters[a][0].combo.setSize(Math.round(90*this.filters[a][0].offsetWidth/100));return!0}},dhtmlXGridObject.prototype._in_header_text_filter=function(c,a){c.innerHTML="<input type='text'>",c.onclick=c.onmousedown=function(g){return(g||event).cancelBubble=!0},c.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(c.firstChild,a)},dhtmlXGridObject.prototype._in_header_text_filter_inc=function(c,a){c.innerHTML="<input type='text'>",c.onclick=c.onmousedown=function(g){return(g||event).cancelBubble=!0},c.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(c.firstChild,a),c.firstChild._filter=function(){return""==c.firstChild.value?"":function(e){return 0==e.toString().toLowerCase().indexOf(c.firstChild.value.toLowerCase())}},this._filters_ready()},dhtmlXGridObject.prototype._in_header_select_filter=function(c,a){c.innerHTML="<select></select>",c.onclick=function(g){return!((g||event).cancelBubble=!0)},this.makeFilter(c.firstChild,a)},dhtmlXGridObject.prototype._in_header_select_filter_strict=function(e,c){e.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>",e.onclick=function(g){return!((g||event).cancelBubble=!0)},this.makeFilter(e.firstChild,c);var a=this.combos;e.firstChild._filter=function(){var g=e.firstChild.value;return g?(a[c]&&(g=a[c].keys[a[c].values._dhx_find(g)]),g=g.toLowerCase(),function(h){return h.toString().toLowerCase()==g}):""},this._filters_ready()},dhtmlXGridObject.prototype._in_header_combo_filter=function(c,a){c.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'></div>",c.onselectstart=function(){return event.cancelBubble=!0},c.onclick=c.onmousedown=function(g){return(g||event).cancelBubble=!0},this.makeFilter(c.firstChild,a)},dhtmlXGridObject.prototype._search_common=function(c,a){c.innerHTML="<input type='text' style='width:90%; '>",c.onclick=c.onmousedown=function(g){return(g||event).cancelBubble=!0},c.onselectstart=function(){return event.cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_text_search=function(e,c,a){this._search_common(e,c),this.makeSearch(e.firstChild,c)},dhtmlXGridObject.prototype._in_header_text_search_strict=function(c,a){this._search_common(c,a),this.makeSearch(c.firstChild,a,!0)},dhtmlXGridObject.prototype._in_header_numeric_filter=function(c,a){this._in_header_text_filter.call(this,c,a),c.firstChild._filter=function(){var h,e=this.value,m="==",g=parseFloat(e.replace("=","")),l=null;return e?-1!=e.indexOf("..")?(e=e.split(".."),g=parseFloat(e[0]),l=parseFloat(e[1]),function(n){return g<=n&&n<=l}):((h=e.match(/>=|<=|>|</))&&(m=h[0],g=parseFloat(e.replace(m,""))),Function("v"," if (v "+m+" "+g+" ) return true; return false;")):""}},dhtmlXGridObject.prototype._in_header_master_checkbox=function(g,e,h){g.innerHTML=h[0]+"<input type='checkbox' />"+h[1];var a=this;g.getElementsByTagName("input")[0].onclick=function(l){a._build_m_order();var c=a._m_order?a._m_order[e]:e,m=this.checked?1:0;a.forEachRowA(function(o){var n=this.cells(o,c);n.isCheckbox()&&!n.isDisabled()&&(n.setValue(m),n.cell.wasChanged=!0),this.callEvent("onEditCell",[1,o,c,m]),this.callEvent("onCheckbox",[o,c,m]),this.callEvent("onCheck",[o,c,m])}),(l||event).cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_stat_total=function(e,a,h){this._stat_in_header(e,function(){var n=0;this._build_m_order();for(var m=this._m_order?this._m_order[a]:a,l=0;l<this.rowsBuffer.length;l++){var c=parseFloat(this._get_cell_value(this.rowsBuffer[l],m));n+=isNaN(c)?0:c}return this._maskArr[m]?this._aplNF(n,m):Math.round(100*n)/100},a,h,h)},dhtmlXGridObject.prototype._in_header_stat_multi_total=function(h,g,o){var n=o[1].split(":");o[1]="";for(var e=0;e<n.length;e++)n[e]=parseInt(n[e]);for(var a=[],m=0;m<n.length;m++)a[n[m]]=!0;this._stat_in_header(h,function(){for(var u=0,s=0;s<this.rowsBuffer.length;s++){for(var r=1,c=0;c<n.length;c++)r*=parseFloat(this._get_cell_value(this.rowsBuffer[s],n[c]));u+=isNaN(r)?0:r}return this._maskArr[g]?this._aplNF(u,g):Math.round(100*u)/100},a,o,o)},dhtmlXGridObject.prototype._in_header_stat_max=function(e,a,h){this._stat_in_header(e,function(){this._build_m_order();var l=this._m_order?this._m_order[a]:a,m=-999999999;if(0==this.getRowsNum())return"&nbsp;";for(var c=0;c<this.rowsBuffer.length;c++)m=Math.max(m,parseFloat(this._get_cell_value(this.rowsBuffer[c],l)));return this._maskArr[a]?this._aplNF(m,a):m},a,h)},dhtmlXGridObject.prototype._in_header_stat_min=function(e,a,h){this._stat_in_header(e,function(){this._build_m_order();var l=this._m_order?this._m_order[a]:a,m=999999999;if(0==this.getRowsNum())return"&nbsp;";for(var c=0;c<this.rowsBuffer.length;c++)m=Math.min(m,parseFloat(this._get_cell_value(this.rowsBuffer[c],l)));return this._maskArr[a]?this._aplNF(m,a):m},a,h)},dhtmlXGridObject.prototype._in_header_stat_average=function(e,a,h){this._stat_in_header(e,function(){this._build_m_order();var m=this._m_order?this._m_order[a]:a,o=0,n=0;if(0==this.getRowsNum())return"&nbsp;";for(var l=0;l<this.rowsBuffer.length;l++){var c=parseFloat(this._get_cell_value(this.rowsBuffer[l],m));isNaN(c)||(o+=c,n++)}return this._maskArr[a]?this._aplNF(o/n,a):Math.round(o/n*100)/100},a,h)},dhtmlXGridObject.prototype._in_header_stat_count=function(e,a,h){this._stat_in_header(e,function(){return this.getRowsNum()},a,h)},dhtmlXGridObject.prototype._stat_in_header=function(e,g,a,m){var l=function(){this.dma(!0),e.innerHTML=(m[0]?m[0]:"")+g.call(this)+(m[1]?m[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var n=0;n<this._stat_events.length;n++)for(var c=0;c<4;c++)this.detachEvent(this._stat_events[n][c]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",l),this.attachEvent("onXLE",l),this.attachEvent("onFilterEnd",l),this.attachEvent("onEditCell",function(c,o,n){return 2==c&&(n==a||a&&a[n])&&l.call(this),!0})]),e.innerHTML=""},dhtmlXGridObject.prototype.loadCSVFile=function(c,a){this.load(c,a,"csv")},dhtmlXGridObject.prototype.enableCSVAutoID=function(a){this._csvAID=dhx4.s2b(a)},dhtmlXGridObject.prototype.enableCSVHeader=function(a){this._csvHdr=dhx4.s2b(a)},dhtmlXGridObject.prototype.setCSVDelimiter=function(a){this.csv.cell=a},dhtmlXGridObject.prototype._csvAID=!0,dhtmlXGridObject.prototype.loadCSVString=function(a){this.parse(a,"csv")},dhtmlXGridObject.prototype.serializeToCSV=function(n){this.editStop(),this._mathSerialization?this._agetm="getMathValue":this._strictText||n?this._agetm="getTitle":this._agetm="getValue";var l=[];if(this._csvHdr)for(var h=1;h<this.hdr.rows.length;h++){for(var c=[],m=0;m<this._cCount;m++)this._srClmn&&!this._srClmn[m]||c.push(this.getColumnLabel(m,h-1));l.push(this.csvParser.str(c,this.csv.cell,this.csv.row))}m=0;for(var g=this.rowsBuffer.length;m<g;m++){var e=this._serializeRowToCVS(null,m);""!=e&&l.push(e)}return this.csvParser.block(l,this.csv.row)},dhtmlXGridObject.prototype._serializeRowToCVS=function(a,o,e,m){var n=new Array;a||(a=this.render_row(o),this._fake&&!this._fake.rowsAr[a.idd]&&this._fake.render_row(o)),this._csvAID||(n[n.length]=a.idd),e=e||0,m=m||this._cCount;for(var v=!1,g=e;a.childNodes[e]._cellIndex>g&&e;)e--;for(var s=e;g<m&&a.childNodes[s];s++){var c=a.childNodes[s]._cellIndex;if(this._srClmn&&!this._srClmn[c]||this._serialize_visible&&this._hrrar[c])g++;else{for(var h=a.childNodes[s],l=this.cells(a.idd,c);g!=c&&(g++,n.push(""),!(m<=g)););if(m<=g)break;if(g++,l.cell?zxVal=l[this._agetm]():zxVal="",this._chAttr&&l.wasChanged()&&(v=!0),n[n.length]=null===zxVal?"":zxVal,this._ecspn&&h.colSpan&&1<h.colSpan){h=h.colSpan-1;for(var w=0;w<h;w++)n[n.length]="",g++}}}return this._onlChAttr&&!v?"":this.csvParser.str(n,this.csv.cell,this.csv.row)},dhtmlXGridObject.prototype.toClipBoard=function(a){window.clipboardData?window.clipboardData.setData("Text",a):(new Clipboard).copy(a)},dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()},dhtmlXGridObject.prototype.cellToClipboard=function(e,c){if(!e||!c&&0!==c){if(!this.selectedRows[0])return;e=this.selectedRows[0].idd,c=this.cell._cellIndex}var a=this.cells(e,c);this.toClipBoard(((a.getLabel?a.getLabel():a.getValue())||"").toString())},dhtmlXGridObject.prototype.updateCellFromClipboard=function(e,c){if(!e||!c){if(!this.selectedRows[0])return;e=this.selectedRows[0].idd,c=this.cell._cellIndex}var a=this.cells(e,c);a[a.setImage?"setLabel":"setValue"](this.fromClipBoard())},dhtmlXGridObject.prototype.rowToClipboard=function(g){var a="";if(this._mathSerialization?this._agetm="getMathValue":this._strictText?this._agetm="getTitle":this._agetm="getValue",this._serialize_visible=!this._fake,g)a=this._serializeRowToCVS(this.getRowById(g));else for(var e=[],c=0;c<this.selectedRows.length;c++)e[e.length]=this._serializeRowToCVS(this.selectedRows[c]),a=this.csvParser.block(e,this.csv.row);this._serialize_visible=!1,this.toClipBoard(a)},dhtmlXGridObject.prototype.updateRowFromClipboard=function(h){var a=this.fromClipBoard();if(a){if(h)var g=this.getRowById(h);else g=this.selectedRows[0];if(g){a=this.csvParser.unblock(a,this.csv.cell,this.csv.row)[0],this._csvAID||a.splice(0,1);for(var e=0;e<a.length;e++){var c=this.cells3(g,e);c[c.setImage?"setLabel":"setValue"](a[e])}}}},dhtmlXGridObject.prototype.csvParser={block:function(a,c){return a.join(c)},unblock:function(l,a,h){for(var g=(l||"").split(h),c=0;c<g.length;c++)g[c]=(g[c]||"").split(a);var e=g.length-1;return 1==g[e].length&&""==g[e][0]&&g.splice(e,1),g},str:function(c,a,e){return c.join(a)}},dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('""',"g"),block:function(a,c){return a.join(c)},unblock:function(n,s,v){var e=[[]],c=0;if(!n)return e;for(var o=/^[ ]*"/,m=/"[ ]*$/,a=new RegExp(".*"+v+".*$"),h=n.split(s),g=0;g<h.length;g++)if(h[g].match(o)){for(var u=h[g].replace(o,"");!h[g].match(m);)u+=h[++g];e[c].push(u.replace(m,"").replace(this._quote_esc,'"'))}else if(h[g].match(a)){var l=h[g].indexOf(v);e[c].push(h[g].substr(0,l)),e[++c]=[],h[g]=h[g].substr(l+1),g--}else(h[g]||g!=h.length-1)&&e[c].push(h[g]);var r=e.length-1;return 0<r&&!e[r].length&&e.splice(r,1),e},str:function(e,a,g){for(var c=0;c<e.length;c++)e[c]='"'+e[c].replace(this._quote,'""')+'"';return e.join(a)}},dhtmlXGridObject.prototype.addRowFromClipboard=function(){var a=this.fromClipBoard();if(a)for(var e=this.csvParser.unblock(a,this.csv.cell,this.csv.row),c=0;c<e.length;c++)if(e[c]){if(!(a=e[c]).length)continue;this._csvAID?this.addRow(this.getRowsNum()+2,a):(this.rowsAr[a[0]]&&(a[0]=this.uid()),this.addRow(a[0],a.slice(1)))}},dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())},dhtmlXGridObject.prototype.gridFromClipboard=function(){var a=this.fromClipBoard();a&&this.loadCSVString(a)},dhtmlXGridObject.prototype.getXLS=function(m){if(!this.xslform){this.xslform=document.createElement("FORM"),this.xslform.action=(m||"")+"xls.php",this.xslform.method="post",this.xslform.target=_isIE?"_blank":"",document.body.appendChild(this.xslform);var h=document.createElement("INPUT");h.type="hidden",h.name="csv",this.xslform.appendChild(h);var g=document.createElement("INPUT");g.type="hidden",g.name="csv_header",this.xslform.appendChild(g)}var n=this.serializeToCSV();this.xslform.childNodes[0].value=n;for(var e=[],a=this._cCount,c=0;c<a;c++)e.push(this.getHeaderCol(c));e=e.join(","),this.xslform.childNodes[1].value=e,this.xslform.submit()},dhtmlXGridObject.prototype.printView=function(v,e){var r="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }\t\n  </style>",E=null;if(this._fake){E=[].concat(this._hrrar);for(var D=0;D<this._fake._cCount;D++)this._hrrar[D]=null}var o=document.location.port,s=document.location.hostname;r+="<base  href='"+document.location.protocol+"//"+s+(o?":"+o:"")+document.location.pathname+"'></base>",this.parentGrid||(r+=v||""),r+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var u=Math.max(this.rowsBuffer.length,this.rowsCol.length),n=this._cCount,w=this._printWidth();r+='<tr class="header_row_1">';for(D=0;D<n;D++)if(!this._hrrar||!this._hrrar[D]){for(var h=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(D)]:D],a=h.colSpan||1,J=h.rowSpan||1,C=1;C<a;C++)w[D]+=w[C];r+='<td rowspan="'+J+'" width="'+w[D]+'%" style="background-color:lightgrey;" colspan="'+a+'">'+this.getHeaderCol(D)+"</td>",D+=a-1}r+="</tr>";for(D=2;D<this.hdr.rows.length;D++)if(_isIE){r+="<tr style='background-color:lightgrey' class='header_row_"+D+"'>";var g=this.hdr.rows[D].childNodes;for(C=0;C<g.length;C++)this._hrrar&&this._hrrar[g[C]._cellIndex]||(r+=g[C].outerHTML);r+="</tr>"}else r+="<tr class='header_row_"+D+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[D].innerHTML:"")+this.hdr.rows[D].innerHTML+"</tr>";for(D=0;D<u;D++)if(r+="<tr>",this.rowsCol[D]&&this.rowsCol[D]._cntr)r+=this.rowsCol[D].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";else if(!this.rowsCol[D]||"none"!=this.rowsCol[D].style.display){var m;if(this.rowsCol[D])m=this.rowsCol[D].idd;else{if(!this.rowsBuffer[D])continue;m=this.rowsBuffer[D].idd}for(C=0;C<n;C++)if(!this._hrrar||!this._hrrar[C]){if(this.rowsAr[m]&&"TR"==this.rowsAr[m].tagName){var I=this.cells(m,C);if(I._setState)var x="";else if(I.getContent)x=I.getContent();else if(I.getImage||I.combo)x=I.cell.innerHTML;else x=I.getValue()}else x=this._get_cell_value(this.rowsBuffer[D],C);var y=this.columnColor[C]?"background-color:"+this.columnColor[C]+";":"",A=this.cellAlign[C]?"text-align:"+this.cellAlign[C]+";":"",F=I.getAttribute("colspan");r+='<td style="'+y+A+'" '+(F?'colSpan="'+F+'"':"")+">"+(""===x?"&nbsp;":x)+"</td>",F&&(C+=F-1)}if(r+="</tr>",this.rowsCol[D]&&this.rowsCol[D]._expanded){var l=this.cells4(this.rowsCol[D]._expanded.ctrl);l.getSubGrid?r+='<tr><td colspan="'+n+'">'+l.getSubGrid().printView()+"</td></tr>":r+='<tr><td colspan="'+n+'">'+this.rowsCol[D]._expanded.innerHTML+"</td></tr>"}}if(this.ftr)for(D=1;D<this.ftr.childNodes[0].rows.length;D++)r+="<tr style='background-color:lightgrey'>"+(this._fake?this._fake.ftr.childNodes[0].rows[D].innerHTML:"")+this.ftr.childNodes[0].rows[D].innerHTML+"</tr>";if(r+="</table>",this.parentGrid)return r;r+=e||"";var H=window.open("","_blank");H.document.write(r),H.document.write("<script>window.onerror=function(){return true;}<\/script>"),H.document.close(),this._fake&&(this._hrrar=E)},dhtmlXGridObject.prototype._printWidth=function(){for(var h=[],g=0,e=0;e<this._cCount;e++){var a=this.getColWidth(e);h.push(a),g+=a}var m=[],c=0;for(e=0;e<h.length;e++){var l=Math.floor(h[e]/g*100);c+=l,m.push(l)}return m[m.length-1]+=100-c,m},dhtmlXGridObject.prototype.enableBlockSelection=function(e){if(void 0===this._bs_mode){var a=this;this.obj.onmousedown=function(g){return a._bs_mode&&a._OnSelectionStart(g||event,this),!0},this._CSVRowDelimiter=this.csv.row,this.attachEvent("onResize",function(){return a._HideSelection(),!0}),this.attachEvent("onGridReconstructed",function(){return a._HideSelection(),!0}),this.attachEvent("onFilterEnd",this._HideSelection)}if(!1===e)return this._bs_mode=!1,this._HideSelection();if(this._bs_mode=!0,!window.dhx4.isIPad){var c=this._clip_area=document.createElement("textarea");c.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;",c.onkeydown=function(g){86==(g=g||event).keyCode&&(g.ctrlKey||g.metaKey)&&a.pasteBlockFromClipboard()},document.body.insertBefore(this._clip_area,document.body.firstChild),dhtmlxEvent(this.entBox,"click",function(){!a.editor&&a._clip_area&&a._clip_area.select()})}},dhtmlXGridObject.prototype.forceLabelSelection=function(a){this._strictText=dhx4.s2b(a)},dhtmlXGridObject.prototype.selectBlock=function(g,e,c,a){e=this.getRowIndex(e),a=this.getRowIndex(a),myGrid._CreateSelection(e,g),myGrid._selectionArea=myGrid._RedrawSelectionPos(myGrid.cells2(e,g).cell,myGrid.cells2(a,c).cell),myGrid._ShowSelection()},dhtmlXGridObject.prototype._OnSelectionStart=function(e,g){var c=this;if(2!=e.button){var h=e.srcElement||e.target;if(this.editor){if(h.tagName&&("INPUT"==h.tagName||"TEXTAREA"==h.tagName))return;this.editStop()}c.setActive(!0);var m=this.getPosition(this.obj),a=e.clientX-m[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),l=e.clientY-m[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(this._CreateSelection(a-4,l-4),h==this._selectionObj)this._HideSelection(),this._startSelectionCell=null;else{for(;h&&(!h.tagName||"td"!=h.tagName.toLowerCase());)h=h.parentNode;this._startSelectionCell=h}if(this._startSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex]))return this._startSelectionCell=null;this.obj.onmousedown=null,this.obj[_isIE?"onmouseleave":"onmouseout"]=function(n){c._blsTimer&&window.clearTimeout(c._blsTimer)},this.obj.onmmold=this.obj.onmousemove,this._init_pos=[a,l],this._selectionObj.onmousemove=this.obj.onmousemove=function(n){(n=n||e).preventDefault?n.preventDefault():n.returnValue=!1,c._OnSelectionMove(n)},this._oldDMP=document.body.onmouseup,document.body.onmouseup=function(n){return n=n||e,c._OnSelectionStop(n,this),!0},this.callEvent("onBeforeBlockSelection",[]),document.body.onselectstart=function(){return!1}}},dhtmlXGridObject.prototype._getCellByPos=function(a,g){a=a,this._fake&&(a+=this._fake.objBox.scrollWidth),g=g;for(var c=0,e=0;e<this.obj.rows.length;e++)if((g-=this.obj.rows[e].offsetHeight)<=0){c=this.obj.rows[e];break}if(!c||!c.idd)return null;for(e=0;e<this._cCount;e++)if((a-=this.getColWidth(e))<=0)for(;;){if(!c._childIndexes||c._childIndexes[e+1]!=c._childIndexes[e])return this.cells(c.idd,e).cell;c=c.previousSibling}return null},dhtmlXGridObject.prototype._OnSelectionMove=function(g){var x=this;this._ShowSelection();var s=this.getPosition(this.obj),m=g.clientX-s[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),l=g.clientY-s[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(Math.abs(this._init_pos[0]-m)<5&&Math.abs(this._init_pos[1]-l)<5)return this._HideSelection();var v=this._endSelectionCell;if(null==this._startSelectionCell)this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(g.srcElement||g.target,"TD");else if(g.srcElement||g.target)if("dhtmlxGrid_selection"==(g.srcElement||g.target).className)this._endSelectionCell=this._getCellByPos(m,l)||this._endSelectionCell;else{var w=this.getFirstParentOfType(g.srcElement||g.target,"TD");w.parentNode.idd&&(this._endSelectionCell=w)}this._endSelectionCell&&(this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])||(this._endSelectionCell=v));var h=this.objBox.scrollLeft+this.objBox.clientWidth,c=this.objBox.scrollTop+this.objBox.clientHeight,o=this.objBox.scrollLeft,n=this.objBox.scrollTop,e=!1;if(this._blsTimer&&window.clearTimeout(this._blsTimer),h<=m+20?(this.objBox.scrollLeft=this.objBox.scrollLeft+20,e=!0):m-20<o&&(this.objBox.scrollLeft=this.objBox.scrollLeft-20,e=!0),c<=l+20&&!this._realfake?(this.objBox.scrollTop=this.objBox.scrollTop+20,e=!0):l-20<n&&!this._realfake&&(this.objBox.scrollTop=this.objBox.scrollTop-20,e=!0),this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell),e){var u=g.clientX,r=g.clientY;this._blsTimer=window.setTimeout(function(){x._OnSelectionMove({clientX:u,clientY:r})},100)}},dhtmlXGridObject.prototype._OnSelectionStop=function(c){var a=this;if(this._blsTimer&&window.clearTimeout(this._blsTimer),this.obj.onmousedown=function(g){return a._bs_mode&&a._OnSelectionStart(g||c,this),!0},this.obj.onmousemove=this.obj.onmmold||null,this._selectionObj.onmousemove=null,document.body.onmouseup=this._oldDMP||null,parseInt(this._selectionObj.style.width)<2&&parseInt(this._selectionObj.style.height)<2)this._HideSelection();else{var e=this.getFirstParentOfType(c.srcElement||c.target,"TD");for(e&&e.parentNode.idd||(e=this._endSelectionCell);e&&(!e.tagName||"td"!=e.tagName.toLowerCase());)e=e.parentNode;if(!e)return this._HideSelection();this._stopSelectionCell=e,this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell),this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}},dhtmlXGridObject.prototype._RedrawSelectionPos=function(u,m){if(u.parentNode.grid!=m.parentNode.grid)return this._selectionArea;var r={};r.LeftTopCol=u._cellIndex,r.LeftTopRow=this.getRowIndex(u.parentNode.idd),r.RightBottomCol=m._cellIndex,r.RightBottomRow=this.getRowIndex(m.parentNode.idd);var g=u.offsetWidth,e=u.offsetHeight;u=this.getPosition(u,this.obj);var v=m.offsetWidth,n=m.offsetHeight;if(m=this.getPosition(m,this.obj),u[0]<m[0])var h=u[0],l=m[0]+v;else{var o=r.RightBottomCol;r.RightBottomCol=r.LeftTopCol,r.LeftTopCol=o;h=m[0],l=u[0]+g}if(u[1]<m[1])var s=u[1],a=m[1]+n;else{o=r.RightBottomRow;r.RightBottomRow=r.LeftTopRow,r.LeftTopRow=o;s=m[1],a=u[1]+e}var w=l-h,c=a-s;return this._selectionObj.style.left=h+"px",this._selectionObj.style.top=s+"px",this._selectionObj.style.width=w+"px",this._selectionObj.style.height=c+"px",r},dhtmlXGridObject.prototype._CreateSelection=function(a,e){if(null==this._selectionObj){var c=document.createElement("div");c.style.position="absolute",c.style.display="none",c.className="dhtmlxGrid_selection",this._selectionObj=c,this._selectionObj.onmousedown=function(g){if(2==(g=g||event).button||_isMacOS&&g.ctrlKey)return this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",g])},this._selectionObj.oncontextmenu=function(g){return!((g||event).cancelBubble=!0)},this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px",this._selectionObj.style.height="0px",this._selectionObj.style.left=a+"px",this._selectionObj.style.top=e+"px",this._selectionObj.startX=a,this._selectionObj.startY=e},dhtmlXGridObject.prototype._ShowSelection=function(){this._selectionObj&&(this._selectionObj.style.display="")},dhtmlXGridObject.prototype._HideSelection=function(){this._selectionObj&&(this._selectionObj.style.display="none"),this._selectionArea=null,this._clip_area&&(this._clip_area.value="",this._clip_area.blur())},dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(this._clip_area&&null!=this._selectionArea){var e=new Array;this._mathSerialization?this._agetm="getMathValue":this._strictText?this._agetm="getTitle":this._agetm="getValue",this._serialize_visible=!0;for(var a=this._selectionArea.LeftTopRow;a<=this._selectionArea.RightBottomRow;a++){var c=this._serializeRowToCVS(this.rowsBuffer[a],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);this._csvAID?e[e.length]=c:e[e.length]=c.substr(c.indexOf(this.csv.cell)+1)}e=e.join(this._CSVRowDelimiter),this._clip_area.value=e,this._clip_area.select(),this._serialize_visible=!1}},dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){if(this._clip_area){this._clip_area.select();var a=this;window.setTimeout(function(){a._pasteBlockFromClipboard(),a=null},1)}},dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var m=this._clip_area.value;if(m){if(null!=this._selectionArea)var w=this._selectionArea.LeftTopRow,a=this._selectionArea.LeftTopCol;else{if(null==this.cell||this.editor)return!1;w=this.getRowIndex(this.cell.parentNode.idd),a=this.cell._cellIndex}var o=w+(m=this.csvParser.unblock(m,this.csv.cell,this.csv.row)).length,u=a+m[0].length;u>this._cCount&&(u=this._cCount);for(var g=0,r=w;r<o;r++){var x=this.render_row(r);if(-1!=x){for(var e=0,h=a;h<u;h++)if(!this._hrrar[h]||this._fake){var s=this.cells3(x,h);if(s.isDisabled())e++;else{if(this._onEditUndoRedo&&this._onEditUndoRedo(2,x.idd,h,m[g][e],s.getValue()),s.combo){for(var v=s.combo.values,c=0;c<v.length;c++)if(m[g][e]==v[c]){s.setValue(s.combo.keys[c]),v=null;break}null!=v&&s.editable?s.setValue(m[g][e++]):e++}else s[s.setImage?"setLabel":"setValue"](m[g][e++]);s.cell.wasChanged=!0}}else u=Math.min(u+1,this._cCount);this.callEvent("onRowPaste",[x.idd]),g++}}}},dhtmlXGridObject.prototype.getSelectedBlock=function(){return this._selectionArea?this._selectionArea:null!==this.getSelectedRowId()?{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}:null},dhtmlXGridObject.prototype.enableSmartRendering=function(e,c,a){2<arguments.length&&(c&&!this.rowsBuffer[c-1]&&(this.rowsBuffer[c-1]=0),c=a),this._srnd=dhx4.s2b(e),this._srdh=this._srdh||20,this._dpref=c||0},dhtmlXGridObject.prototype.enablePreRendering=function(a){this._srnd_pr=parseInt(a||50)},dhtmlXGridObject.prototype.forceFullLoading=function(a,h){for(var e=0;e<this.rowsBuffer.length;e++)if(!this.rowsBuffer[e]){var g=a||this.rowsBuffer.length-e;if(this.callEvent("onDynXLS",[e,g])){var c=this;this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+e+"&count="+g,function(){window.setTimeout(function(){c.forceFullLoading(a,h)},100)},this._data_type)}return}h&&h.call(this)},dhtmlXGridObject.prototype.setAwaitedRowHeight=function(a){this._srdh=parseInt(a)},dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2},dhtmlXGridObject.prototype._add_filler=function(m,a,c,g){if(!a)return null;var h=this._prepareRow("__filler__");h.firstChild.style.width="1px",h.firstChild.style.borderWidth=h.firstChild.style.padding=h.firstChild.style.margin="0px";for(var e=1;e<h.childNodes.length;e++)h.childNodes[e].style.display="none";return h.firstChild.style.height=a*this._srdh+"px",(c=c||this.rowsCol[m])&&c.nextSibling?c.parentNode.insertBefore(h,c.nextSibling):_isKHTML?this.obj.appendChild(h):this.obj.rows[0].parentNode.appendChild(h),this.callEvent("onAddFiller",[m,a,h,c,g]),[m,a,h]},dhtmlXGridObject.prototype._update_srnd_view=function(){var l=Math.floor(this.objBox.scrollTop/this._srdh),c=l+this._get_view_size();if(this.multiLine){var m=this.objBox.scrollTop;for(l=0;0<m;)m-=this.rowsCol[l]?this.rowsCol[l].offsetHeight:this._srdh,l++;c=l+this._get_view_size(),0<l&&l--}(c+=this._srnd_pr||0)>this.rowsBuffer.length&&(c=this.rowsBuffer.length);for(var g=l;g<c;g++)if(!this.rowsCol[g]){if(-1==this._add_from_buffer(g)){if(this.xmlFileUrl){if(this._dpref&&this.rowsBuffer[c-1]){this._dpref&&this._dpref;var a=Math.max(0,Math.min(g,c-this._dpref));this._current_load=[a,c-a]}else this._current_load=[g,this._dpref?this._dpref:c-g];this.callEvent("onDynXLS",this._current_load)&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type)}return}this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[g].idd],this.rowsBuffer[g]),this._updateParentLine(this._h2.get[this.rowsBuffer[g].idd],this.rowsBuffer[g])),g&&g==(this._realfake?this._fake:this)._r_select&&this.selectCell(g,this.cell?this.cell._cellIndex:0,!0)}this._fake&&!this._realfake&&this.multiLine&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)},dhtmlXGridObject.prototype._add_from_buffer=function(g){var h=this.render_row(g);if(-1==h)return-1;if((h._attrs.selected||h._attrs.select)&&(this.selectRow(h,!1,!0),h._attrs.selected=h._attrs.select=null),this._cssSP){if(this._h2){var a=this._h2.get[h.idd];h.className+=" "+(a.level%2?this._cssUnEven+" "+this._cssUnEven:this._cssEven+" "+this._cssEven)+"_"+a.level+(this.rowsAr[a.id]._css||"")}}else this._cssEven&&g%2==0?h.className=this._cssEven+(-1!=h.className.indexOf("rowselected")?" rowselected ":" ")+(h._css||""):this._cssUnEven&&g%2==1&&(h.className=this._cssUnEven+(-1!=h.className.indexOf("rowselected")?" rowselected ":" ")+(h._css||""));for(var c=0;c<this._fillers.length;c++){var e=this._fillers[c];if(e&&e[0]<=g&&e[0]+e[1]>g){var l=g-e[0];return void(0==l?(this._insert_before(g,h,e[2]),this._update_fillers(c,-1,1)):l==e[1]-1?(this._insert_after(g,h,e[2]),this._update_fillers(c,-1,0)):(this._fillers.push(this._add_filler(g+1,e[1]-l-1,e[2],1)),this._insert_after(g,h,e[2]),this._update_fillers(c,-e[1]+l,0)))}}},dhtmlXGridObject.prototype._update_fillers=function(e,a,g){var c=this._fillers[e];c[1]=c[1]+a,c[0]=c[0]+g,c[1]?(c[2].firstChild.style.height=parseFloat(c[2].firstChild.style.height)+a*this._srdh+"px",this.callEvent("onUpdateFiller",[c[2]])):(this.callEvent("onRemoveFiller",[c[2]]),c[2].parentNode.removeChild(c[2]),this._fillers.splice(e,1))},dhtmlXGridObject.prototype._insert_before=function(c,e,a){a.parentNode.insertBefore(e,a),this.rowsCol[c]=e,this.callEvent("onRowInserted",[e,null,a,"before"])},dhtmlXGridObject.prototype._insert_after=function(c,e,a){a.nextSibling?a.parentNode.insertBefore(e,a.nextSibling):a.parentNode.appendChild(e),this.rowsCol[c]=e,this.callEvent("onRowInserted",[e,null,a,"after"])},void 0!==window.dhtmlxValidation&&(dhtmlxValidation.trackInput=function(e,g,c,a){dhtmlxEvent(e,"keyup",function(h){dhtmlxValidation._timer&&(window.clearTimeout(dhtmlxValidation._timer),dhtmlxValidation._timer=null),dhtmlxValidation._timer=window.setTimeout(function(){dhtmlxValidation.checkInput(e,g)?(e.className=e.className.replace(/[ ]*dhtmlx_live_validation_error/g,""),a&&a(e,e.value,g)):c&&!c(e,e.value,g)||(e.className+=" dhtmlx_live_validation_error")},250)})},dhtmlxValidation.checkInput=function(a,c){return dhtmlxValidation.checkValue(a.value,c)},dhtmlxValidation.checkValue=function(e,g){"string"==typeof g&&(g=g.split(","));for(var a=!0,c=0;c<g.length;c++)this["is"+g[c]]?a=a&&this["is"+g[c]](e):alert("Incorrect validation rule: "+g[c]);return a}),dhtmlXGridObject.prototype.enableValidation=function(c,a){c=dhx4.s2b(c),this._validators=!!c&&{data:[]},1<arguments.length&&(this._validators._live=a),this._validators._event||(this._validators._event=this.attachEvent("onEditCell",this.validationEvent))},dhtmlXGridObject.prototype.setColValidators=function(a){this._validators||this.enableValidation(!0),"string"==typeof a&&(a=a.split(this.delim)),this._validators.data=a},dhtmlXGridObject.prototype.validationEvent=function(l,c,g,e,n){var o=this._validators;if(!o)return!0;var m=o.data[g]||this.cells(c,g).getAttribute("validate")||"";if(1==l&&m){var h=this.editor||(this._fake||{}).editor;if(!h)return!0;if(h.cell.className=h.cell.className.replace(/[ ]*dhtmlx_validation_error/g,""),o._live){var a=this;dhtmlxValidation.trackInput(h.getInput(),m,function(r,s,u){return a.callEvent("onLiveValidationError",[c,g,s,r,u])},function(r,s,u){return a.callEvent("onLiveValidationCorrect",[c,g,s,r,u])})}}return 2==l&&this.validateCell(c,g,m,e),!0},dhtmlXGridObject.prototype.validateCell=function(m,h,l,g){if(l=l||this._validators.data[h]||this.cells(m,h).getAttribute("validate"),g=g||this.cells(m,h).getValue(),l){var c=this.cells(m,h).cell,a=!0;"string"==typeof l&&(l=l.split(this.delim));for(var e=0;e<l.length;e++)dhtmlxValidation.checkValue(g,l[e])||(this.callEvent("onValidationError",[m,h,g,l[e]])&&(c.className+=" dhtmlx_validation_error"),a=!1);return a&&(this.callEvent("onValidationCorrect",[m,h,g,l]),c.className=c.className.replace(/[ ]*dhtmlx_validation_error/g,"")),a}},eXcell_stree.prototype=new eXcell,dhtmlXGridObject.prototype.setSubTree=function(a,c){this._sub_trees||(this._sub_trees=[]),this._sub_trees[c]=[a],a.parentObject.style.display="none";var e=this;a.parentObject.onclick=function(g){return!((g||window.event).cancelBubble=!0)},a.ev_onDblClick=null,a.attachEvent("onDblClick",function(g){return e._sub_id=g,e.editStop(),!0}),a._chRRS=!0},eXcell_link.prototype=new eXcell,eXcell_link.prototype.getTitle=function(){var a=this.cell.firstChild;return a&&a.tagName?a.getAttribute("href"):""},eXcell_link.prototype.getContent=function(){var a=this.cell.firstChild;return a&&a.tagName?a.innerHTML:""},eXcell_grid.prototype=new eXcell,dhtmlXGridObject.prototype.setSubGrid=function(c,a,g){this._sub_grids||(this._sub_grids=[]),this._sub_grids[a]=[c,g],c.entBox.style.display="none";var e=this;c.entBox.onclick=function(h){return!((h||window.event).cancelBubble=!0)},c.attachEvent("onRowSelect",function(h){return e.editStop(),!0}),c._chRRS=!1},eXcell_dhxCalendar.prototype=new eXcell,eXcell_dhxCalendar.prototype.edit=function(){var c=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1),this.grid._grid_calendarA.setPosition(c[0],c[1]+this.cell.offsetHeight),this.grid._grid_calendarA._last_operation_calendar=!1,this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]),this.cell._cediton=!0,this.val=this.cell.val,this._val=this.cell.innerHTML;var a=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){},this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y"),this.grid._grid_calendarA.setDate(this.val||new Date),this.grid._grid_calendarA.draw=a},eXcell_dhxCalendar.prototype.getDate=function(){return this.cell.val?this.cell.val:null},eXcell_dhxCalendar.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()},eXcell_dhxCalendar.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){if(this.cell._cediton=!1,this.grid._grid_calendarA._last_operation_calendar){var e=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),c=this.grid._grid_calendarA.getDate();this.cell.val=new Date(c),this.setCValue(e,c),this.cell._clearCell=!e;var a=this.val;return this.val=this._val,this.cell.val.valueOf()!=(a||"").valueOf()}return!1}},eXcell_dhxCalendar.prototype.setValue=function(a){if(a&&"object"==typeof a)return this.cell.val=a,this.cell._clearCell=!1,void this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",a).toString(),this.cell.val);a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",a.toString(),null,!0)),this.grid._dtmask_inc&&(a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(a="&nbsp",this.cell._clearCell=!0,this.cell.val=""),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell._clearCell=!0,this.cell.val=new Date,this.setCValue("&nbsp;",0)):this.setCValue((a||"").toString(),this.cell.val)},eXcell_dhxCalendarA.prototype=new eXcell,eXcell_dhxCalendarA.prototype.edit=function(){var c=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1),this.grid._grid_calendarA.setPosition(1*c[0]+this.cell.offsetWidth,1*c[1]),this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid._grid_calendarA._last_operation_calendar=!1,this.cell._cediton=!0,this.val=this.cell.val,this._val=this.cell.innerHTML;var a=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){},this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y"),this.grid._grid_calendarA.setDate(this.val),this.grid._grid_calendarA.draw=a,this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.obj=document.createElement(this.cell.atag),this.obj.style.height=this.cell.offsetHeight-4+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.align,this.obj.onclick=function(g){(g||event).cancelBubble=!0},this.obj.onmousedown=function(g){(g||event).cancelBubble=!0},this.obj.value=this.getValue(),this.cell.innerHTML="",this.cell.appendChild(this.obj),window.dhx4.isIE&&(this.obj.style.overflow="visible",this.grid.multiLine&&18<=this.obj.offsetHeight&&this.obj.offsetHeight<40&&(this.obj.style.height="36px",this.obj.style.overflow="scroll")),this.obj.onselectstart=function(g){return g||(g=event),g.cancelBubble=!0},this.obj.focus(),this.obj.focus()},eXcell_dhxCalendarA.prototype.getDate=function(){return this.cell.val?this.cell.val:null},eXcell_dhxCalendarA.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()},eXcell_dhxCalendarA.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){if(this.cell._cediton=!1,this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=!1;var e=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),c=this.grid._grid_calendarA.getDate();this.cell.val=new Date(c),this.setCValue(e,c),this.cell._clearCell=!e;var a=this.val;return this.val=this._val,this.cell.val.valueOf()!=(a||"").valueOf()}this.setValue(this.obj.value);a=this.val;return this.val=this._val,this.cell.val.valueOf()!=(a||"").valueOf()}},eXcell_dhxCalendarA.prototype.setValue=function(a){if(a&&"object"==typeof a)return this.cell.val=a,this.cell._clearCell=!1,void this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",a).toString(),this.cell.val);a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",a.toString(),null,!0)),this.grid._dtmask_inc&&(a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(a="&nbsp",this.cell._clearCell=!0,this.cell.val=""),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell.val=new Date,this.cell._clearCell=!0,this.setCValue("&nbsp;",0)):this.setCValue((a||"").toString(),this.cell.val)},dhtmlXGridObject.prototype.resetCounter=function(c){this._fake&&!this._realfake&&c<this._fake._cCount&&this._fake.resetCounter(c,this.currentPage);var a=c||0;for(this.currentPage&&(a=(this.currentPage-1)*this.rowsBufferOutSize),a=0;a<this.rowsBuffer.length;a++)this.rowsBuffer[a]&&"TR"==this.rowsBuffer[a].tagName&&this.rowsAr[this.rowsBuffer[a].idd]&&(this.rowsAr[this.rowsBuffer[a].idd].childNodes[c].innerHTML=a+1)},eXcell_cntr.prototype=new eXcell,eXcell_acheck.prototype=new eXcell,eXcell_acheck.prototype.setValue=function(c){-1!=(c=(c||"").toString()).indexOf("1")||-1!=c.indexOf("true")?(c="1",this.cell.chstate="1"):(c="0",this.cell.chstate="0");this.setCValue(this.drawCurrentState(),this.cell.chstate)},eXcell_context.prototype=new eXcell,dhtmlXGridObject.prototype.setSubContext=function(a,c,g){var e=this;a.attachEvent("onClick",function(l,h){return e._sub_id=l,e.editStop(),a.hideContextMenu(),!0}),this._sub_context||(this._sub_context=[]),this._sub_context[c]=[a,g],a.hideContextMenu()},dhtmlXGridObject.prototype._process_html=function(c){if(c.tagName&&"TABLE"==c.tagName)return this._process_inner_html(c,0);var a=document.createElement("DIV");a.innerHTML=c.xmlDoc.responseText;var e=a.getElementsByTagName("TABLE")[0];this._process_inner_html(e,0)},dhtmlXGridObject.prototype._process_inner_html=function(e,h){for(var c=e.rows.length,a=h;a<c;a++){var g=e.rows[a].getAttribute("id")||a;this.rowsBuffer.push({idd:g,data:e.rows[a],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset(),this.setSizes()},dhtmlXGridObject.prototype._process_html_row=function(n,h){var m=h.getElementsByTagName("TD"),c=[];n._attrs=this._xml_attrs(h);for(var g=0;g<m.length;g++){var l=m[g],a=l.getAttribute("type");if(n.childNodes[g]&&(a&&(n.childNodes[g]._cellType=a),n.childNodes[g]._attrs=this._xml_attrs(m[g])),l.firstChild?c.push(l.innerHTML):c.push(""),1<l.colSpan){n.childNodes[g]._attrs.colspan=l.colSpan;for(var e=1;e<l.colSpan;e++)c.push("")}}for(m.length;g<n.childNodes.length;g++)n.childNodes[g]._attrs={};return this._fillRow(n,this._c_order?this._swapColumns(c):c),n},dhtmlXGridObject.prototype._get_html_data=function(c,a){for(c=c.firstChild;;){if(!c)return"";if("TD"==c.tagName&&a--,a<0)break;c=c.nextSibling}return c.firstChild?c.firstChild.data:""},dhtmlxEvent(window,"load",function(){for(var e=document.getElementsByTagName("table"),c=0;c<e.length;c++)"dhtmlxGrid"==e[c].className&&dhtmlXGridFromTable(e[c])}),dhtmlXGridObject.prototype._process_xmlA=function(a){this._parsing=!0;var l=dhx4.ajax.xmltop(this.xml.top,a);this._parseHead(l);var h=dhx4.ajax.xpath(this.xml.row,l),g=parseInt(l.getAttribute("pos")||0),e=parseInt(l.getAttribute("total_count")||0);if(e&&!this.rowsBuffer[e-1]&&(this.rowsBuffer[e-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataA,this._process_xml_row=this._process_xml_rowA,this._process_tree_xml(a);for(var c=0;c<h.length;c++)if(!this.rowsBuffer[c+g]){var m=h[c].getAttribute("id")||this.uid();this.rowsBuffer[c+g]={idd:m,data:h[c],_parser:this._process_xml_rowA,_locator:this._get_xml_dataA},this.rowsAr[m]=h[c]}this.render_dataset(),this._parsing=!1},dhtmlXGridObject.prototype._process_xmlB=function(a){this._parsing=!0;var l=dhx4.ajax.xmltop(this.xml.top,a);this._parseHead(l);var h=dhx4.ajax.xpath(this.xml.row,l),g=parseInt(l.getAttribute("pos")||0),e=parseInt(l.getAttribute("total_count")||0);if(e&&!this.rowsBuffer[e-1]&&(this.rowsBuffer[e-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataB,this._process_xml_row=this._process_xml_rowB,this._process_tree_xml(a);for(var c=0;c<h.length;c++)if(!this.rowsBuffer[c+g]){var m=h[c].getAttribute("id")||this.uid();this.rowsBuffer[c+g]={idd:m,data:h[c],_parser:this._process_xml_rowB,_locator:this._get_xml_dataB},this.rowsAr[m]=h[c]}this.render_dataset(),this._parsing=!1},dhtmlXGridObject.prototype._process_xml_rowA=function(h,e){var a=[];h._attrs=this._xml_attrs(e);for(var c=0;c<this.columnIds.length;c++){var l=this.columnIds[c],g=h._attrs[l]||"";h.childNodes[c]&&(h.childNodes[c]._attrs={}),a.push(g)}return this._fillRow(h,this._c_order?this._swapColumns(a):a),h},dhtmlXGridObject.prototype._get_xml_dataA=function(c,a){return c.getAttribute(this.getColumnId(a))},dhtmlXGridObject.prototype._process_xml_rowB=function(a,h){var n=[];if(a._attrs=this._xml_attrs(h),this._ud_enabled)for(var o=dhx4.ajax.xpath("./userdata",h),e=o.length-1;0<=e;e--)this.setUserData(o[e].getAttribute("name"),o[e].firstChild?o[e].firstChild.data:"");for(var m=0;m<h.childNodes.length;m++){var g=h.childNodes[m];if(g.tagName){var c=this.getColIndexById(g.tagName);if(!isNaN(c)){var l=g.getAttribute("type");l&&(a.childNodes[c]._cellType=l),a.childNodes[c]._attrs=this._xml_attrs(g),g.getAttribute("xmlcontent")||(g=g.firstChild?g.firstChild.data:""),n[c]=g}}}for(e=0;e<a.childNodes.length;e++)a.childNodes[e]._attrs||(a.childNodes[e]._attrs={});return this._fillRow(a,n),a},dhtmlXGridObject.prototype._get_xml_dataB=function(c,a){var e=this.getColumnId(a);for(c=c.firstChild;;){if(!c)return"";if(c.tagName==e)return c.firstChild?c.firstChild.data:"";c=c.nextSibling}return""},dhtmlXGridObject.prototype.startFastOperations=function(){this._disF=["setSizes","callEvent","_fixAlterCss","cells4","forEachRow","_correctMonolite"],this._disA=[];for(var a=this._disF.length-1;0<=a;a--)this._disA[a]=this[this._disF[a]],this[this._disF[a]]=function(){return!0};this._cellCache=[],this.cells4=function(e){var g=this._cellCache[e._cellIndex];return g||((g=this._cellCache[e._cellIndex]=this._disA[3].apply(this,[e])).destructor=function(){return!0},g.setCValue=function(c){g.cell.innerHTML=c}),g.cell=e,g.combo=e._combo||this.combos[e._cellIndex],g}},dhtmlXGridObject.prototype.stopFastOperations=function(){if(this._disF){for(var a=this._disF.length-1;0<=a;a--)this[this._disF[a]]=this._disA[a];this._correctMonolite&&this._correctMonolite(),this.setSizes(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._in_header_number_filter=function(e,c){this._in_header_text_filter.call(this,e,c);var a=this;e.firstChild._filter=function(){var g=a._get_filters(this.value,"num");return function(m){for(var h=!(0<g.length),l=0;l<g.length;l++)h=h||g[l](m);return h}}},dhtmlXGridObject.prototype._in_header_string_filter=function(e,c){this._in_header_text_filter.call(this,e,c);var a=this;e.firstChild._filter=function(){var g=a._get_filters(this.value,"str");return function(m){for(var h=!(0<g.length),l=0;l<g.length;l++)h=h||g[l](m);return h}}},dhtmlXGridObject.prototype._get_filters=function(l,e){for(var a=l.split(","),g=[],c=0;c<a.length;c++)if(""!=a[c]){var h=this["_get_"+e+"_filter"](a[c]);g.push(h)}return g},dhtmlXGridObject.prototype._get_str_filter=function(c){if("null"==c||"empty"==c)return new Function("value",'if (value == null || value == "") return true; return false;');if("!null"==c||"!empty"==c)return new Function("value",'if (value == null || value == "") return false; return true;');if("!"===c.substr(0,1)){var a=c.substr(1);return new Function("value",'if (value !== "'+a+'") return true; return false;')}if("~"===c.substr(0,1)){a=c.substr(1);return new Function("value",'if (value.indexOf("'+a+'") !== -1) return true; return false;')}if("^"===c.substr(0,1)&&"&"===c.substr(c.length-1,1)&&(c="="+c.substr(1,c.length-2)),"^"===c.substr(0,1)){a=c.substr(1);return new Function("value","if (value.substr(0, "+a.length+') === "'+a+'") return true; return false;')}if("&"===c.substr(c.length-1,1)){a=c.substr(0,c.length-1);return new Function("value","if (value.substr(value.length - "+a.length+') === "'+a+'") return true; return false;')}if("="===c.substr(0,1))a=c.substr(1);else a=c;return new Function("value",'if (value === "'+a+'") return true; return false;')},dhtmlXGridObject.prototype._get_num_filter=function(h){if("null"==h||"empty"==h)return new Function("value",'if (value == null || value == "") return true; return false;');if("!null"==h||"!empty"==h)return new Function("value",'if (value == null || value == "") return false; return true;');var a=h.split("..");if(2==a.length){var l=parseFloat(a[0]),g=parseFloat(a[1]);return new Function("value","if (value >= "+l+" && value <= "+g+") return true; return false;")}var e=h.match(/<>|>=|<=|>|<|=/);if(e)var m=e[0],c=parseFloat(h.replace(m,""));else{m="==";c=parseFloat(h)}return"<>"==m&&(m="!="),"="==m&&(m="=="),new Function("value"," if (value "+m+" "+c+" ) return true; return false;")},dhtmlXGridObject.prototype.attachHeaderA=dhtmlXGridObject.prototype.attachHeader,dhtmlXGridObject.prototype.attachHeader=function(){if(this.attachHeaderA.apply(this,arguments),this._realfake)return!0;this.formAutoSubmit(),void 0===this.FormSubmitOnlyChanged&&this.submitOnlyChanged(!0),void 0===this._submitAR&&this.submitAddedRows(!0);var a=this;this._added_rows=[],this._deleted_rows=[],this.attachEvent("onRowAdded",function(c){return a._added_rows.push(c),a.forEachCell(c,function(e){e.cell.wasChanged=!0}),!0}),this.attachEvent("onBeforeRowDeleted",function(c){return a._deleted_rows.push(c),!0}),this.attachHeader=this.attachHeaderA},dhtmlXGridObject.prototype.formAutoSubmit=function(){if(this.parentForm=this.detectParentFormPresent(),!1===this.parentForm)return!1;if(!this.formEventAttached){this.formInputs=new Array;var a=this;dhtmlxEvent(this.parentForm,"submit",function(){a.entBox&&a.parentFormOnSubmit()}),this.formEventAttached=!0}},dhtmlXGridObject.prototype.parentFormOnSubmit=function(){if(this.formCreateInputCollection(),!this.callEvent("onBeforeFormSubmit",[]))return!1},dhtmlXGridObject.prototype.submitOnlyChanged=function(a){this.FormSubmitOnlyChanged=dhx4.s2b(a)},dhtmlXGridObject.prototype.submitColumns=function(a){"string"==typeof a&&(a=a.split(this.delim)),this._submit_cols=a},dhtmlXGridObject.prototype.setFieldName=function(a){a=(a=(a=(a=(a=a.replace(/\{GRID_ID\}/g,"'+a1+'")).replace(/\{ROW_ID\}/g,"'+a2+'")).replace(/\{ROW_INDEX\}/g,"'+this.getRowIndex(a2)+'")).replace(/\{COLUMN_INDEX\}/g,"'+a3+'")).replace(/\{COLUMN_ID\}/g,"'+this.getColumnId(a3)+'"),this._input_mask=Function("a1","a2","a3","return '"+a+"';")},dhtmlXGridObject.prototype.submitSerialization=function(a){this.FormSubmitSerialization=dhx4.s2b(a)},dhtmlXGridObject.prototype.submitAddedRows=function(a){this._submitAR=dhx4.s2b(a)},dhtmlXGridObject.prototype.submitOnlySelected=function(a){this.FormSubmitOnlySelected=dhx4.s2b(a)},dhtmlXGridObject.prototype.submitOnlyRowID=function(a){this.FormSubmitOnlyRowID=dhx4.s2b(a)},dhtmlXGridObject.prototype.createFormInput=function(c,e){var a=document.createElement("input");a.type="hidden",this._input_mask&&"string"!=typeof c?a.name=this._input_mask.apply(this,c):a.name=((this.globalBox||this.entBox).id||"dhtmlXGrid")+"_"+c,a.value=e,this.parentForm.appendChild(a),this.formInputs.push(a)},dhtmlXGridObject.prototype.createFormInputRow=function(e){for(var g=(this.globalBox||this.entBox).id,c=0;c<this._cCount;c++){var a=this.cells3(e,c);this.FormSubmitOnlyChanged&&!a.wasChanged()||this._submit_cols&&!this._submit_cols[c]||this.createFormInput(this._input_mask?[g,e.idd,c]:e.idd+"_"+c,a.getValue())}},dhtmlXGridObject.prototype.formCreateInputCollection=function(){if(0==this.parentForm)return!1;for(var a=0;a<this.formInputs.length;a++)this.parentForm.removeChild(this.formInputs[a]);if(this.formInputs=new Array,this.FormSubmitSerialization)this.createFormInput("serialized",this.serialize());else if(this.FormSubmitOnlySelected)if(this.FormSubmitOnlyRowID)this.createFormInput("selected",this.getSelectedId());else for(a=0;a<this.selectedRows.length;a++)this.createFormInputRow(this.selectedRows[a]);else this._submitAR&&(this._added_rows.length&&this.createFormInput("rowsadded",this._added_rows.join(",")),this._deleted_rows.length&&this.createFormInput("rowsdeleted",this._deleted_rows.join(","))),this.forEachRow(function(c){-1!==this.getRowById(c)&&this.createFormInputRow(this.rowsAr[c])})},dhtmlXGridObject.prototype.detectParentFormPresent=function(){for(var a=!1,c=this.entBox;c&&c.tagName&&c!=document.body;){if("form"==c.tagName.toLowerCase()){a=c;break}c=c.parentNode}return a},dhtmlXGridObject.prototype.unGroup=function(){this._groups&&(this._dndProblematic=!1,delete this._groups,delete this._gIndex,this._fake&&this._mirror_rowsCol(),this.forEachRow(function(a){this.rowsAr[a].style.display=""}),this._reset_view(),this.callEvent("onGridReconstructed",[]),this.callEvent("onUnGroup",[]))},dhtmlXGridObject.prototype._mirror_rowsCol=function(){this._fake._groups=this._groups,this._fake._gIndex=this._gIndex,this.rowsBuffer=dhtmlxArray();for(var a=0;a<this.rowsCol.length;a++)this.rowsCol[a]._cntr||this.rowsBuffer.push(this.rowsCol[a]);this._fake.rowsBuffer=dhtmlxArray();for(a=0;a<this._fake.rowsCol.length;a++)this._fake.rowsCol[a]._cntr||this._fake.rowsBuffer.push(this._fake.rowsCol[a])},dhtmlXGridObject.prototype.groupBy=function(m,g){if(this._groups&&this.unGroup(),this._dndProblematic=!0,this._groups={},!g){g=["#title"];for(var h=1;h<this._cCount;h++)g.push("#cspan")}this._gmask=document.createElement("TR"),this._gmask.origin=g;var l,e=0;for(h=0;h<g.length;h++)"#cspan"==g[h]?l.colSpan=(parseInt(l.colSpan)||1)+1:((l=document.createElement("TD"))._cellIndex=h,this._hrrar[h]&&(l.style.display="none"),l.className="group_row",l.innerHTML="&nbsp;","#title"==g[h]?this._gmask._title=e:l.align=this.cellAlign[h]||"left",this._gmask.appendChild(l),0==g[h].indexOf("#stat")&&(this._gmask._math=!0,l._counter=[this["_g_"+g[h].replace("#","")],h,e]),e++);for(var c in this._groups)this._groups[c]=this.undefined;if(this._gIndex=m,this._fake&&!this._realfake&&(this._fake._groups=[],this._fake._gIndex=this._gIndex),this._nextRow=function(o,a){var n=this.rowsCol[o+a];return n&&("none"==n.style.display||n._cntr)?this._nextRow(o+a,a):n},this.__sortRowsBG||(this._key_events=dhtmlx.extend({},this._key_events),this._key_events.k38_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{var a=this.row.rowIndex;if(!a)return;var n=this._nextRow(a-1,-1);n&&this.selectCell(n,this.cell._cellIndex,!0)}},this._key_events.k13_1_0=this._key_events.k13_0_1=function(){},this._key_events.k40_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{var a=this.row.rowIndex;if(!a)return;var n=this._nextRow(a-1,1);n&&this.selectCell(n,this.cell._cellIndex,!0)}},this.attachEvent("onFilterStart",function(){return this._groups&&(this._groups=this.undefined),!0}),this.attachEvent("onFilterEnd",function(){void 0!==this._gIndex&&this.groupBy(this._gIndex,this._gmask.origin)}),this.sortRows_bg=this.sortRows,this.sortRows=function(o,n,a){if(void 0===this._groups)return this.sortRows_bg.apply(this,arguments);if(n=n||"str",a=a||"asc",this.callEvent("onBeforeSorting",[o,n,a])){if(void 0===this._groups)return!0;o==this._gIndex?this._sortByGroup(o,n,a):this._sortInGroup(o,n,a),this.setSortImgState(!0,o,a),this._fake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.setSortImgState(!0,o,a),this.callEvent("onAfterSorting",[o,n,a])}return!1},this.attachEvent("onClearAll",function(){this.unGroup()}),this.attachEvent("onBeforeRowDeleted",function(o){if(!this._groups)return!0;if(!this.rowsAr[o])return!0;var n=this.cells(o,this._gIndex).getValue();""===n&&(n=" ");var a=this._groups[n];return this._dec_group(a),!0}),this.attachEvent("onAfterRowDeleted",function(a){this.updateGroups()}),this.attachEvent("onCheckbox",function(o,a,n){this.callEvent("onEditCell",[2,o,a,n?1:0,n?0:1])}),this.attachEvent("onXLE",this.updateGroups),this.attachEvent("onColumnHidden",this.hideGroupColumn),this.attachEvent("onEditCell",function(D,u,A,y,E){if(!this._groups)return!0;if(2==D&&y!=E&&A==this._gIndex){""===E&&(E=" "),this._dec_group(this._groups[E]);var a=this.rowsAr[u],C=this.rowsCol._dhx_find(a),w=this._inc_group(y),x=this.rowsCol[w];a==x&&(x=x.nextSibling);var s=a.parentNode;a.rowIndex;s.removeChild(a),x?s.insertBefore(a,x):s.appendChild(a),this.rowsCol._dhx_insertAt(w,a),w<C&&C++,this.rowsCol._dhx_removeAt(C,a),this._fixAlterCss()}else 2==D&&y!=E&&(this.updateGroups(),this._updateGroupView(this._groups[this.cells(u,this._gIndex).getValue()||" "]));return!0}),this.__sortRowsBG=!0),this._groupExisting(),this._hrrar)for(h=0;h<this._hrrar.length;h++)this._hrrar[h]&&this.hideGroupColumn(h,!0);this.callEvent("onGroup",[]),(this._ahgr||this._awdth)&&this.setSizes()},dhtmlXGridObject.prototype._sortInGroup=function(e,n,g){var o=this._groups_get();o.reverse();for(var l=0;l<o.length;l++){for(var m=o[l]._cntr._childs,r={},h=0;h<m.length;h++){var s=this.cells3(m[h],e);r[m[h].idd]=s.getDate?s.getDate():s.getValue()}this._sortCore(e,n,g,r,m)}this._groups_put(o),this.setSizes(),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._sortByGroup=function(h,m,e){for(var c=this._groups_get(),g=[],l=0;l<c.length;l++)c[l].idd="_sort_"+l,g["_sort_"+l]=c[l]._cntr.text;this._sortCore(h,m,e,g,c),this._groups_put(c),this.callEvent("onGridReconstructed",[]),this.setSizes()},dhtmlXGridObject.prototype._inc_group=function(h,e,a){""===h&&(h=" "),this._groups[h]||(this._groups[h]={text:h,row:this._addPseudoRow(),count:0,state:e?"plus":"minus"});var g=this._groups[h];g.row._cntr=g;var c=this.rowsCol._dhx_find(g.row)+g.count+1;return g.count++,a||(this._updateGroupView(g),this.updateGroups()),c},dhtmlXGridObject.prototype._dec_group=function(a){if(a)return a.count--,0==a.count?(a.row.parentNode.removeChild(a.row),this.rowsCol._dhx_removeAt(this.rowsCol._dhx_find(a.row)),delete this._groups[a.text]):this._updateGroupView(a),this._fake&&!this._realfake&&this._fake._dec_group(this._fake._groups[a.text]),this.updateGroups(),!0},dhtmlXGridObject.prototype._insertRowAt_gA=dhtmlXGridObject.prototype._insertRowAt,dhtmlXGridObject.prototype._insertRowAt=function(e,g,c){if(void 0!==this._groups){if(this._realfake)var h=this._fake._bfs_cells(e.idd,this._gIndex).getValue();else if(this._bfs_cells3)h=this._bfs_cells3(e,this._gIndex).getValue();else h=this.cells3(e,this._gIndex).getValue();h||(h=" "),g=this._inc_group(h,"none"==e.style.display)}var a=this._insertRowAt_gA(e,g,c);return void 0!==this._groups&&(this.expandGroup(h),this._updateGroupView(this._groups[h]),this.updateGroups()),a},dhtmlXGridObject.prototype._updateGroupView=function(e){if(this._fake&&!this._realfake)return e.row.firstChild.innerHTML="&nbsp;";var a=this._gmask||this._fake._gmask,c="<img style='margin-bottom:-4px' src='"+this.imgURL+e.state+".gif'> ";this.customGroupFormat?c+=this.customGroupFormat(e.text,e.count):c+=e.text+" ( "+e.count+" ) ",e.row.childNodes[a._title].innerHTML=c},dhtmlXGridObject.prototype._addPseudoRow=function(h){for(var a=this._gmask||this._fake._gmask,g=a.cloneNode(!0),c=0;c<g.childNodes.length;c++)g.childNodes[c]._cellIndex=a.childNodes[c]._cellIndex,this._realfake&&(g.childNodes[c].style.display="");var e=this;return g.onclick=function(l){e.callEvent("onGroupClick",[this._cntr.text])&&(e._fake&&e._realfake?e._fake._switchGroupState(e._fake._groups[this._cntr.text].row):e._switchGroupState(this),(l||event).cancelBubble="true")},g.ondblclick=function(l){(l||event).cancelBubble="true"},h||(_isKHTML?this.obj.appendChild(g):this.obj.firstChild.appendChild(g),this.rowsCol.push(g)),g},dhtmlXGridObject.prototype._groups_get=function(){var c=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var e=[],g=this.rowsCol.length-1;0<=g;g--)this.rowsCol[g]._cntr?(this.rowsCol[g]._cntr._childs=e,e=[],c.push(this.rowsCol[g])):e.push(this.rowsCol[g]),this.rowsCol[g].parentNode.removeChild(this.rowsCol[g]);return c},dhtmlXGridObject.prototype._groups_put=function(a){var h=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray(0),this.rowsCol.stablesort=h;for(var g=0;g<a.length;g++){var e=a[g]._cntr;this.obj.firstChild.appendChild(e.row),this.rowsCol.push(e.row),e.row.idd=null;for(var c=0;c<e._childs.length;c++)this.obj.firstChild.appendChild(e._childs[c]),this.rowsCol.push(e._childs[c]);delete e._childs}this._temp_par.appendChild(this.obj)},dhtmlXGridObject.prototype._groupExisting=function(c){if(this.getRowsNum()){c=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var g=this.rowsCol.length,h=0;h<g;h++){var m=this.cells4(this.rowsCol[h].childNodes[this._gIndex]).getValue();if(this.rowsCol[h].style.display="",m||(m=" "),!this._groups[m]){this._groups[m]={text:m,row:this._addPseudoRow(!0),count:0,state:"minus"};var l=this._groups[m];l.row._cntr=l,this._groups[m]._childs=[],c.push(l.row)}this._groups[m].count++,this._groups[m]._childs.push(this.rowsCol[h]),this.rowsCol[h].parentNode.removeChild(this.rowsCol[h])}for(h=0;h<c.length;h++)this._updateGroupView(c[h]._cntr);this._groups_put(c),this._fake&&!this._realfake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.callEvent("onGridReconstructed",[]),this.updateGroups()}},dhtmlXGridObject.prototype._switchGroupState=function(g){var e=g._cntr;this._fake&&!this._realfake&&(e.state=this._fake._groups[g._cntr.text].row._cntr.state,this._fake._switchGroupState(this._fake._groups[g._cntr.text].row));var c=this.rowsCol._dhx_find(e.row)+1;e.state="minus"==e.state?"plus":"minus";for(var a="plus"==e.state?"none":"";this.rowsCol[c]&&!this.rowsCol[c]._cntr;)this.rowsCol[c].style.display=a,c++;this._updateGroupView(e),this.callEvent("onGroupStateChanged",[e.text,"minus"==e.state]),this.setSizes()},dhtmlXGridObject.prototype.expandGroup=function(a){"plus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.collapseGroup=function(a){"minus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.expandAllGroups=function(){for(var a in this._groups)this._groups[a]&&"plus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.collapseAllGroups=function(){for(var a in this._groups)this._groups[a]&&"minus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.hideGroupColumn=function(l,h){if(!this._fake){for(var g=-1,m=this._gmask.childNodes,e=0;e<m.length;e++)if(m[e]._cellIndex==l){g=e;break}if(-1!=g)for(var c in this._groups)this._groups[c].row.childNodes[g].style.display=h?"none":""}},dhtmlXGridObject.prototype.groupStat=function(c,g,e){e=this["_g_"+(e||"stat_total")];var h=0,a=0;return this.forEachRowInGroup(c,function(l){h=e(h,1*this.cells(l,g).getValue(),a),a++}),h},dhtmlXGridObject.prototype.forEachRowInGroup=function(a,g){var h=this._groups[a].row.nextSibling;if(h)for(;h&&!h._cntr;)g.call(this,h.idd),h=h.nextSibling;else{var e=this._groups[a]._childs;if(e)for(var c=0;c<e.length;c++)g.call(this,e[c].idd)}},dhtmlXGridObject.prototype.updateGroups=function(){if(this._gmask&&this._gmask._math&&!this._parsing)for(var c=this._gmask.childNodes,a=0;a<c.length;a++)c[a]._counter&&this._b_processing.apply(this,c[a]._counter)},dhtmlXGridObject.prototype._b_processing=function(e,m,l){var n=0,g=0;this._ecache[this.cellType[m]]||this.cells5({parentNode:{grid:this}},this.cellType[m]);for(var h=this.rowsCol.length-1;0<=h;h--)this.rowsCol[h]._cntr?(this.cells5(this.rowsCol[h].childNodes[l],this.cellType[m]).setValue(n),g=n=0):(n=e(n,1*this.cells3(this.rowsCol[h],m).getValue(),g),g++)},dhtmlXGridObject.prototype._g_stat_total=function(g,e,a){return g+e},dhtmlXGridObject.prototype._g_stat_min=function(g,e,a){return a||(g=1/0),Math.min(g,e)},dhtmlXGridObject.prototype._g_stat_max=function(g,e,a){return a||(g=-1/0),Math.max(g,e)},dhtmlXGridObject.prototype._g_stat_average=function(g,e,a){return(g*a+e)/(a+1)},dhtmlXGridObject.prototype._g_stat_count=function(g,e,a){return g++},dhtmlXGridObject.prototype._in_header_collapse=function(h,g,n){var a="TD"==h.tagName?h:h.parentNode;g=a._cellIndexS,this._column_groups||(this._column_groups=[]);var m=n[1].split(":");m=[(m=n[1].split(":")).shift(),m.join(":")];var l=parseInt(m[0]);h.innerHTML=n[0]+"<img src='"+this.imgURL+"minus.gif' style='padding-right:10px;height:16px'/><span style='position:relative; top:-6px;'>"+(m[1]||"")+"<span>",h.style.paddingBottom="0px";var e=this;this._column_groups[g]=h.getElementsByTagName("IMG")[0],this._column_groups[g].onclick=function(o){(o||event).cancelBubble=!0,this._cstate=!this._cstate;for(var c=g+1;c<g+l;c++)e.setColumnHidden(c,this._cstate);if(this._cstate){if(a.colSpan&&0<a.colSpan){a._exp_colspan=a.colSpan;var u=Math.max(1,a.colSpan-l);if(!_isFF)for(var r=0;r<a.colSpan-u;r++){var s=document.createElement("TD");a.nextSibling?a.parentNode.insertBefore(s,a.nextSibling):a.parentNode.appendChild(s)}a.colSpan=u}e.callEvent("onColumnCollapse",[g,this._cstate])}else if(a._exp_colspan){if(a.colSpan=a._exp_colspan,!_isFF)for(r=1;r<a._exp_colspan;r++)a.parentNode.removeChild(a.nextSibling);e.callEvent("onColumnCollapse",[g,this._cstate])}this.src=e.imgURL+(this._cstate?"plus.gif":"minus.gif"),"none"!=e.sortImg.style.display&&e.setSortImgPos()}},dhtmlXGridObject.prototype.collapseColumns=function(a){this._column_groups[a]&&!this._column_groups[a]._cstate&&this._column_groups[a].onclick({})},dhtmlXGridObject.prototype.expandColumns=function(a){this._column_groups[a]&&this._column_groups[a]._cstate&&this._column_groups[a].onclick({})},dhtmlXGridObject.prototype.enableHeaderMenu=function(a){if(!window.dhtmlXMenuObject)return dhtmlx.message("You need to include DHTMLX Menu");if(!this._header_menu){var e=this._header_menu=new dhtmlXMenuObject;e.renderAsContextMenu();var c=this;e.attachEvent("onBeforeContextMenu",function(){return c._showHContext(a),!0}),e.attachEvent("onClick",function(r){for(var m=this.getCheckboxState(r),n=c.hdr.rows[1],h=0;h<n.cells.length;h++){var o=n.cells[h];if(o._cellIndexS==r)for(var g=o.colSpan||1,l=0;l<g;l++)c.setColumnHidden(1*r+l,!m)}}),this.attachEvent("onInit",function(){e.addContextZone(this.hdr)}),this.hdr.rows.length&&this.callEvent("onInit",[])}},dhtmlXGridObject.prototype.getHeaderMenu=function(a){return this._header_menu},dhtmlXGridObject.prototype._hideHContext=function(){this._header_menu&&this._header_menu.hide()},dhtmlXGridObject.prototype._showHContext=function(g){"string"==typeof g&&(g=g.split(this.delim));var h=0,a=0;this._header_menu.clearAll();for(var e=0;e<this.hdr.rows[1].cells.length;e++){var n=this.hdr.rows[1].cells[e];if(!g||g[h]&&"false"!=g[h]){if(n.firstChild&&"DIV"==n.firstChild.tagName)var m=n.firstChild.innerHTML;else m=n.innerHTML;m=m.replace(/<[^>]*>/gi,"");var l=!(this.isColumnHidden(h)||0==this.getColWidth(h));this._header_menu.addCheckbox("child",this._header_menu.topId,a,h,m,l),a++}h+=n.colSpan||1}},dhtmlXGridObject.prototype._process_json_row=function(h,l){h._attrs=l;for(var e=0;e<h.childNodes.length;e++)h.childNodes[e]._attrs={};if(l.userdata)for(var c in l.userdata)this.setUserData(h.idd,c,l.userdata[c]);l=this._c_order?this._swapColumns(l.data):l.data;for(var g=0;g<l.length;g++)"object"==typeof l[g]&&null!=l[g]&&(h.childNodes[g]._attrs=l[g],l[g].type&&(h.childNodes[g]._cellType=l[g].type),l[g]=l[g].value);return this._fillRow(h,l),h},dhtmlXGridObject.prototype._process_js_row=function(l,m){l._attrs=m;for(var g=0;g<l.childNodes.length;g++)l.childNodes[g]._attrs={};if(m.userdata)for(var e in m.userdata)this.setUserData(l.idd,e,m.userdata[e]);for(var c=[],h=0;h<this.columnIds.length;h++)c[h]=m[this.columnIds[h]],"object"==typeof c[h]&&null!=c[h]&&(l.childNodes[h]._attrs=c[h],c[h].type&&(l.childNodes[h]._cellType=c[h].type),c[h]=c[h].value),c[h]||0===c[h]||(c[h]="");return this._fillRow(l,c),l},dhtmlXGridObject.prototype.updateFromJSON=function(a,g,c,e){void 0===g&&(g=!0),this._refresh_mode=[!0,g,c],this.load(a,e,"json")},dhtmlXGridObject.prototype._refreshFromJSON=function(e){this._f_rowsBuffer&&this.filterBy(0,""),reset=!1,window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(u){this.grid._h2.get[this.cell.parentNode.idd]&&this.cell.parentNode.valTag?this.setLabel(u):this.setValueX(u)});var r=this.cellType._dhx_find("tree"),h=e.parent||0,m={};this._refresh_mode[2]&&(-1!=r?this._h2.forEachChild(h,function(s){m[s.id]=!0},this):this.forEachRow(function(s){m[s]=!0}));for(var o=e.rows,g=0;g<o.length;g++){var n=o[g],a=n.id;if(m[a]=!1,this.rowsAr[a]&&"TR"!=this.rowsAr[a].tagName)this._h2?this._h2.get[a].buff.data=n:this.rowsBuffer[this.getRowIndex(a)].data=n,this.rowsAr[a]=n;else if(this.rowsAr[a])this._process_json_row(this.rowsAr[a],n,-1),this._postRowProcessing(this.rowsAr[a],!0);else if(this._refresh_mode[1]){var l={idd:a,data:n,_parser:this._process_json_row,_locator:this._get_json_data},c=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(l),c=0):this.rowsBuffer.push(l),this._h2&&(reset=!0,this._h2.add(a,h).buff=this.rowsBuffer[this.rowsBuffer.length-1]),this.rowsAr[a]=n,n=this.render_row(c),this._insertRowAt(n,c?-1:0)}}if(this._refresh_mode[2])for(a in m)m[a]&&this.rowsAr[a]&&this.deleteRow(a);this._refresh_mode=null,window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX),reset&&this._renderSort(),this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},dhtmlXGridObject.prototype._process_js=function(a){return this._process_json(a,"js")},dhtmlXGridObject.prototype._parseHeadJson=function(s){if(s.head&&s.head.length){var a=s.head,g=s.settings,m="setInitWidths",o=!1;g&&"%"==g.colwidth&&(m="setInitWidthsP"),g&&"%"==g.splitat&&(o=g.splitat),0<this.hdr.rows.length&&this.clearAll(!0);for(var n=[[],[],[],[],[],[],[]],r=["value","width","type","align","sort","hidden","id"],v=["",m,"setColTypes","setColAlign","setColSorting","","setColumnIds"],l=0;l<a.length;l++)for(var h=0;h<r.length;h++)n[h].push(a[l][r[h]]);this.setHeader(n[0]);for(l=0;l<v.length;l++)v[l]&&this[v[l]](n[l].join(this.delim));for(l=0;l<a.length;l++){var u=a[l].options;if(a[l].options)if("clist"==this.cellType[l])this.registerCList(l,u);else{var c=this.getCombo(l);for(h=0;h<u.length;h++)c.put(u[h].id,u[h].value)}}this.init();var e=n[5].join(this.delim);this.setColHidden&&""!=e.replace(/,/g,"")&&this.setColHidden(e),o&&this.splitAt&&this.splitAt(o)}},dhtmlXGridObject.prototype._process_json=function(data,mode){this._parsing=!0;try{var data=data.responseText||data;"string"==typeof data&&(eval("dhtmlx.temp="+data+";"),data=dhtmlx.temp)}catch(e){dhx4.callEvent("onLoadXMLError",["Incorrect JSON",data.xmlDoc||data,this]),data={rows:[]}}if(this._refresh_mode)return this._refreshFromJSON(data);data.head&&this._parseHeadJson(data);var cr=parseInt(data.pos||0),total=parseInt(data.total_count||0),reset=!1;total&&(this.rowsBuffer[total-1]||(this.rowsBuffer.length&&(reset=!0),this.rowsBuffer[total-1]=null),total<this.rowsBuffer.length&&(this.rowsBuffer.splice(total,this.rowsBuffer.length-total),reset=!0));var userdata="js"===mode?data.userdata:data;for(var key in userdata)"js"!==mode&&"rows"==key||this.setUserData("",key,userdata[key]);if("js"==mode&&data.collections)for(var colkey in data.collections){var index=this.getColIndexById(colkey),colrecs=data.collections[colkey];if(index!==window.undefined)if("clist"==this.cellType[index]){colplaindata=[];for(var j=0;j<colrecs.length;j++)colplaindata.push(colrecs[j].label);this.registerCList(index,colplaindata)}else for(var combo=this.getCombo(index),j=0;j<colrecs.length;j++)combo.put(colrecs[j].value,colrecs[j].label)}if(this.isTreeGrid())return this._process_tree_json(data,null,null,mode);if("js"==mode){data.data&&(data=data.data);for(var i=0;i<data.length;i++)if(!this.rowsBuffer[i+cr]){var row=data[i],id=row.id||i+1;this.rowsBuffer[i+cr]={idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data},this.rowsAr[id]=data[i]}}else for(var i=0;i<data.rows.length;i++)if(!this.rowsBuffer[i+cr]){var id=data.rows[i].id;this.rowsBuffer[i+cr]={idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data},this.rowsAr[id]=data.rows[i]}if(this.callEvent("onDataReady",[]),reset&&this._srnd){var h=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=h}else this.render_dataset();this._parsing=!1},dhtmlXGridObject.prototype._get_json_data=function(c,a){return"object"==typeof c.data[a]?c.data[a].value:c.data[a]},dhtmlXGridObject.prototype._process_tree_json=function(g,h,c,m){var a=!(this._parsing=!0);if(h||(this.render_row=this.render_row_tree,a=!0,"0"==(c=(h=g).parent||0)&&(c=0),this._h2||(this._h2=this._createHierarchy()),this._fake&&(this._fake._h2=this._h2)),"js"==m){h.data&&!c&&(g=h.data),h.rows&&(h=h.rows);for(var e=0;e<h.length;e++){var n=h[e].id;(l=this._h2.add(n,c)).buff={idd:n,data:h[e],_parser:this._process_js_row,_locator:this._get_js_data},h[e].open&&(l.state="minus"),this.rowsAr[n]=l.buff,this._process_tree_json(h[e],h[e],n,m)}}else if(h.rows)for(e=0;e<h.rows.length;e++){var l;n=h.rows[e].id;(l=this._h2.add(n,c)).buff={idd:n,data:h.rows[e],_parser:this._process_json_row,_locator:this._get_json_data},h.rows[e].open&&(l.state="minus"),this.rowsAr[n]=l.buff,this._process_tree_json(h.rows[e],h.rows[e],n,m)}a&&(0!=c&&this._h2.change(c,"state","minus"),this._updateTGRState(this._h2.get[c]),this._h2_to_buff(),this.callEvent("onDataReady",[]),0!=c&&(this._srnd||this.pagingOn)?this._renderSort():this.render_dataset(),!1===this._slowParse&&this.forEachRow(function(o){this.render_row_tree(0,o)}),this._parsing=!1,0==c||this._srnd||this.callEvent("onOpenEnd",[c,1]))},dhtmlXGridObject.prototype.enableMarkedCells=function(a){this.markedRowsArr=new dhtmlxArray(0),this.markedCellsArr=new Array(0),this.lastMarkedRow=null,this.lastMarkedColumn=null,this.markedCells=!0,(this.lastMarkMethod=0)<arguments.length&&(dhx4.s2b(a)||(this.markedCells=!1))},dhtmlXGridObject.prototype.doMark=function(e,m){var l=e.parentNode.idd;if(this.setActive(!0),l){this.editStop(),this.cell=e,this.row=e.parentNode;var o=e._cellIndex;if(m||(m=0),0==m)this.unmarkAll();else if(1==m){if(this.lastMarkedRow)for(var c=Math.min(this.getRowIndex(l),this.getRowIndex(this.lastMarkedRow)),n=Math.max(this.getRowIndex(l),this.getRowIndex(this.lastMarkedRow)),a=Math.min(o,this.lastMarkedColumn),r=Math.max(o,this.lastMarkedColumn),h=c;h<n+1;h++)for(var g=a;g<r+1;g++)this.mark(this.getRowId(h),g,!0)}else if(2==m&&-1!=this.markedRowsArr._dhx_find(l))for(var s=0;s<this.markedCellsArr[l].length;s++)if(this.markedCellsArr[l][s]==o)return this.mark(l,o,!1),!0;this.markedCellsArr[l]||(this.markedCellsArr[l]=new dhtmlxArray(0)),1!=m&&this.mark(l,o),this.moveToVisible(this.cells(l,o).cell),this.lastMarkedRow=l,this.lastMarkedColumn=o,this.lastMarkMethod=m}},dhtmlXGridObject.prototype.mark=function(e,c,g){if(2<arguments.length&&!dhx4.s2b(g)){if(this.cells(e,c).cell.className=this.cells(e,c).cell.className.replace(/cellselected/g,""),-1!=this.markedRowsArr._dhx_find(e)){var a=this.markedCellsArr[e]._dhx_find(c);-1!=a&&(this.markedCellsArr[e]._dhx_removeAt(a),0==this.markedCellsArr[e].length&&this.markedRowsArr._dhx_removeAt(this.markedRowsArr._dhx_find(e)),this.callEvent("onCellUnMarked",[e,c]))}return!0}this.cells(e,c).cell.className+=" cellselected",-1==this.markedRowsArr._dhx_find(e)&&(this.markedRowsArr[this.markedRowsArr.length]=e),this.markedCellsArr[e]||(this.markedCellsArr[e]=new dhtmlxArray(0)),-1==this.markedCellsArr[e]._dhx_find(c)&&(this.markedCellsArr[e][this.markedCellsArr[e].length]=c,this.callEvent("onCellMarked",[e,c]))},dhtmlXGridObject.prototype.unmarkAll=function(){if(this.markedRowsArr){for(var a=0;a<this.markedRowsArr.length;a++){var e=this.markedRowsArr[a];if(this.rowsAr[e])for(var c=0;c<this.markedCellsArr[e].length;c++)this.callEvent("onCellUnMarked",[e,this.markedCellsArr[e][c]]),this.cells(e,this.markedCellsArr[e][c]).cell.className=this.cells(e,this.markedCellsArr[e][c]).cell.className.replace(/cellselected/g,"")}this.markedRowsArr=new dhtmlxArray(0),this.markedCellsArr=new Array(0)}return!0},dhtmlXGridObject.prototype.getMarked=function(){var e=new Array;if(this.markedRowsArr)for(var a=0;a<this.markedRowsArr.length;a++)for(var g=this.markedRowsArr[a],c=0;c<this.markedCellsArr[g].length;c++)e[e.length]=[g,this.markedCellsArr[g][c]];return e},eXcell_math.prototype=new eXcell,dhx4.attachEvent("onGridCreated",function(a){a._reset_math(),a.attachEvent("onClearAll",a._reset_math),a.attachEvent("onCellChanged",function(m,l){if(this._mat_links[m]){var c=this._mat_links[m][l];if(c)for(var h=0;h<c.length;h++)c[h].parentNode&&this.cells5(c[h]).setValue(this._calcSCL(c[h]))}if(!this._parsing&&this._aggregators[l]){var g=this._h2.get[m].parent.id;if(0!=g){var e=this.cells(g,l);e.setValue(this._calcSCL(e.cell))}}}),a.attachEvent("onAfterRowDeleted",function(h,e){if(0!=e&&!this._parsing&&this._aggregators.length)for(var g=0;g<this._aggregators.length;g++)if(this._aggregators[g]){var c=this.cells(e,g);c.setValue(this._calcSCL(c.cell))}return!0}),a.attachEvent("onXLE",a._refresh_math)}),dhtmlXGridObject.prototype._reset_math=function(){this._mat_links={},this._aggregators=[]},dhtmlXGridObject.prototype._refresh_math=function(){for(var a=0;a<this._aggregators.length;a++)this._aggregators[a]&&this._h2.forEachChild(0,function(e){if(0!=e.childs.length){var c=this.cells(e.id,a);c.setValue(this._calcSCL(c.cell))}},this)},dhtmlXGridObject.prototype.refreshMath=function(a){this._mat_links={};for(var c=0;c<this.getColumnsNum();c++)"math"==this.getColType(c)&&this.forEachRow(function(g){var e=this.cells(g,c);e.setValue(e.cell.original||e.getValue())})},dhtmlXGridObject.prototype.enableMathSerialization=function(a){this._mathSerialization=dhx4.s2b(a)},dhtmlXGridObject.prototype.setMathRound=function(a){this._roundDl=a,this._roundD=Math.pow(10,a)},dhtmlXGridObject.prototype.enableMathEditing=function(a){this._mathEdit=dhx4.s2b(a)},dhtmlXGridObject.prototype._calcSCL=function(cell){if(!cell._code)return this.cells5(cell).getValue();try{dhtmlx.agrid=this;var z=eval(cell._code)}catch(e){return"#SCL"}if(this._roundD){var pre=Math.abs(z)<1?"0":"";if(z<0&&(pre="-"+pre),z=Math.round(Math.abs(z)*this._roundD).toString(),0==z)return 0;if(0<this._roundDl){var n=z.length-this._roundDl;return n<0&&(z=("000000000"+z).substring(9+n),n=0),pre+z.substring(0,n)+"."+z.substring(n,z.length)}return pre+z}return z},dhtmlXGridObject.prototype._countTotal=function(l,c){for(var a=0,h=this._h2.get[l],e=0;e<h.childs.length;e++){if(!h.childs[e].buff)return a;if(h.childs[e].buff._parser)return a=0,this._h2.forEachChild(l,function(m){if(0==m.childs.length){var n=parseFloat(this._get_cell_value(m.buff,c),10);n&&(a+=n)}},this),a;var g=parseFloat(this._get_cell_value(h.childs[e].buff,c),10);g&&(a+=g)}return a},dhtmlXGridObject.prototype._compileSCL=function(e,c,a){if(null===e||e===window.undefined)return e;if(0!=(e=e.toString()).indexOf("=")||!c.parentNode)return this._reLink([],c),a&&(c._code=c.original=null),e;c.original=e;var l=null;if(-1!=(e=e.replace("=","")).indexOf("sum"))return e=e.replace("sum","(dhtmlx.agrid._countTotal('"+c.parentNode.idd+"',"+c._cellIndex+"))"),this._aggregators||(this._aggregators=[]),this._aggregators[c._cellIndex]="sum",c._code=e,this._parsing?"":this._calcSCL(c);if(-1!=e.indexOf("[[")){var h=/(\[\[([^\,]*)\,([^\]]*)]\])/g;dhtmlx.agrid=this,l=l||new Array,e=e.replace(h,function(n,m,r,o){return"-"==r&&(r=c.parentNode.idd),0==r.indexOf("#")&&(r=dhtmlx.agrid.getRowId(r.replace("#",""))),l[l.length]=[r,o],'(parseFloat(dhtmlx.agrid.cells("'+r+'",'+o+").getValue(),10))"})}if(-1!=e.indexOf(":")){h=/:(\w+)/g;dhtmlx.agrid=this;var g=c.parentNode.idd;l=l||new Array,e=e.replace(h,function(n,m,r,o){return l[l.length]=[g,dhtmlx.agrid.getColIndexById(m)],'(parseFloat(dhtmlx.agrid.cells("'+g+'",dhtmlx.agrid.getColIndexById("'+m+'")).getValue(),10))'})}else{h=/c([0-9]+)/g;dhtmlx.agrid=this;g=c.parentNode.idd;l=l||new Array,e=e.replace(h,function(n,m,r,o){return l[l.length]=[g,m],'(parseFloat(dhtmlx.agrid.cells("'+g+'",'+m+").getValue(),10))"})}return this._reLink(l,c),c._code=e,this._calcSCL(c)},dhtmlXGridObject.prototype._reLink=function(c,a){if(c.length)for(var g=0;g<c.length;g++){this._mat_links[c[g][0]]||(this._mat_links[c[g][0]]={});var e=this._mat_links[c[g][0]];e[c[g][1]]||(e[c[g][1]]=[]),e[c[g][1]].push(a)}},_isKHTML&&function(){var a=String.prototype.replace;String.prototype.replace=function(r,e){if("function"!=typeof e)return a.apply(this,arguments);var h=""+this,n=e;if(!(r instanceof RegExp))return-1==(m=h.indexOf(r))?h:a.apply(h,[r,n(r,m,h)]);for(var o,c=r,s=[],l=c.lastIndex;null!=(o=c.exec(h));){var m=o.index,g=o.concat(m,h);if(s.push(h.slice(l,m),n.apply(null,g).toString()),!c.global){l+=RegExp.lastMatch.length;break}l=c.lastIndex}return s.push(h.slice(l)),s.join("")}}(),dhtmlXGridObject.prototype.insertColumn=function(e,n,r,a,m,o,u,c,h){if((e=parseInt(e))>this._cCount&&(e=this._cCount),this._cMod||(this._cMod=this._cCount),this._processAllArrays(this._cCount,e-1,[n||"&nbsp;",a||100,r||"ed",o||"left",u||"",m||"na",h||"","",this._cMod,a||100]),this._processAllRows("_addColInRow",e),"object"==typeof n)for(var l=1;l<this.hdr.rows.length;l++)if("#rspan"==n[l-1]){for(var w=l-1,v=!1,s=null;!v;){s=this.hdr.rows[w];for(var g=0;g<s.cells.length;g++)if(s.cells[g]._cellIndex==e){v=g;break}w--}this.hdr.rows[w+1].cells[g].rowSpan=(this.hdr.rows[w].cells[g].rowSpan||1)+1}else this.setHeaderCol(e,n[l-1]||"&nbsp;",l);else this.setHeaderCol(e,n||"&nbsp;");this.hdr.rows[0].cells[e],this._cCount++,this._cMod++,this._master_row=null,this.setSizes()},dhtmlXGridObject.prototype.deleteColumn=function(a){a=parseInt(a),0!=this._cCount&&(this._cMod||(this._cMod=this._cCount),a>=this._cCount||(this._processAllArrays(a,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]),this._processAllRows("_deleteColInRow",a),this._cCount--,this._master_row=null,this.setSizes()))},dhtmlXGridObject.prototype._processAllRows=function(h,a,c){this[h](this.obj.rows[0],a,c,0);for(var g=this.hdr.rows.length,e=0;e<g;e++)this[h](this.hdr.rows[e],a,c,e);if(this.ftr)for(g=this.ftr.firstChild.rows.length,e=0;e<g;e++)this[h](this.ftr.firstChild.rows[e],a,c,e);this.forEachRow(function(l){this.rowsAr[l]&&"TR"==this.rowsAr[l].tagName&&this[h](this.rowsAr[l],a,c,-1)})},dhtmlXGridObject.prototype._processAllArrays=function(r,a,o){var h=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor","_hrrar","_c_order"];this.cellWidthPX.length&&h.push("cellWidthPX"),this.cellWidthPC.length&&h.push("cellWidthPC"),this._col_combos&&h.push("_col_combos"),this._mCols&&(h[h.length]="_mCols"),this.columnIds&&(h[h.length]="columnIds"),this._maskArr&&h.push("_maskArr"),this._drsclmW&&h.push("_drsclmW"),this._RaSeCol&&h.push("_RaSeCol"),this._hm_config&&h.push("_hm_config"),this._drsclmn&&h.push("_drsclmn"),this.clists&&h.push("clists"),this._validators&&this._validators.data&&h.push(this._validators.data),h.push("combos"),this._customSorts&&h.push("_customSorts"),this._aggregators&&h.push("_aggregators");var n=r<=a;if(!this._c_order){this._c_order=new Array;for(var e=this._cCount,m=0;m<e;m++)this._c_order[m]=m}for(m=0;m<h.length;m++){var s=this[h[m]]||h[m];if(s){if(n){for(var c=s[r],g=r;g<a;g++)s[g]=s[g+1];s[a]=c}else{for(c=s[r],g=r;a+1<g;g--)s[g]=s[g-1];s[a+1]=c}o&&(s[a+(n?0:1)]=o[m])}}},dhtmlXGridObject.prototype.moveColumn=function(a,c){if(c--,a=parseInt(a),(c=parseInt(c))<a)var e=c+1;else e=c;if(!this.callEvent("onBeforeCMove",[a,e]))return!1;a!=e&&(this.editStop(),this._processAllRows("_moveColInRow",a,c),this._processAllArrays(a,c),this.fldSorted&&this.setSortImgPos(this.fldSorted._cellIndex),this.callEvent("onAfterCMove",[a,e]))},dhtmlXGridObject.prototype._swapColumns=function(c){for(var e=new Array,a=0;a<this._cCount;a++){var g=c[this._c_order[a]];void 0===g&&(g=""),e[a]=g}return e},dhtmlXGridObject.prototype._moveColInRow=function(l,a,e){var m=l.childNodes[a],h=l.childNodes[e+1];if(m){h?l.insertBefore(m,h):l.appendChild(m);for(var g=0;g<l.childNodes.length;g++)l.childNodes[g]._cellIndex=l.childNodes[g]._cellIndexS=g}},dhtmlXGridObject.prototype._addColInRow=function(n,l,a,g){var h=l;if(n._childIndexes){if(n._childIndexes[l-1]!=n._childIndexes[l]&&n.childNodes[n._childIndexes[l-1]])for(e=n._childIndexes.length;l<=e;e--)n._childIndexes[e]=e?n._childIndexes[e-1]+1:0;else{for(var e=n._childIndexes.length;l<=e;e--)n._childIndexes[e]=e?n._childIndexes[e-1]+1:0;n._childIndexes[l]--}h=n._childIndexes[l]}var o=n.childNodes[h],m=document.createElement(g?"TD":"TH");g?m._attrs={}:m.style.width=(parseInt(this.cellWidthPX[l])||"100")+"px",o?n.insertBefore(m,o):n.appendChild(m),this.dragAndDropOff&&n.idd&&this.dragger.addDraggableItem(n.childNodes[h],this);for(e=h+1;e<n.childNodes.length;e++)n.childNodes[e]._cellIndex=n.childNodes[e]._cellIndexS=n.childNodes[e]._cellIndex+1;n.childNodes[h]&&(n.childNodes[h]._cellIndex=n.childNodes[h]._cellIndexS=l),n.idd||void 0!==n.idd?(this.cells3(n,l).setValue(""),m.align=this.cellAlign[l],m.style.verticalAlign=this.cellVAlign[l],m.bgColor=this.columnColor[l]):"TD"==m.tagName&&(!n.idd&&this.forceDivInHeader?m.innerHTML="<div class='hdrcell'>&nbsp;</div>":m.innerHTML="&nbsp;")},dhtmlXGridObject.prototype._deleteColInRow=function(n,m){var e=m;n._childIndexes&&(m=n._childIndexes[m]);var o=n.childNodes[m];if(o){if(o.colSpan&&1<o.colSpan&&o.parentNode.idd){var h=o.colSpan-1,a=this.cells4(o).getValue();if(this.setColspan(o.parentNode.idd,o._cellIndex,1),1<h){var l=1*o._cellIndex;this.setColspan(o.parentNode.idd,l+1,h),this.cells(o.parentNode.idd,1*o._cellIndex+1).setValue(a),n._childIndexes.splice(l,1);for(var g=l;g<n._childIndexes.length;g++)n._childIndexes[g]-=1}}else if(n._childIndexes){n._childIndexes.splice(e,1);for(g=e;g<n._childIndexes.length;g++)n._childIndexes[g]--}o&&n.removeChild(o);for(g=m;g<n.childNodes.length;g++)n.childNodes[g]._cellIndex=n.childNodes[g]._cellIndexS=n.childNodes[g]._cellIndex-1}},dhtmlXGridObject.prototype.enableColumnMove=function(c,a){this._mCol=dhx4.s2b(c),void 0!==a&&(this._mCols=a.split(",")),this._mmevTrue||(dhtmlxEvent(this.hdr,"mousedown",this._startColumnMove),dhtmlxEvent(document.body,"mousemove",this._onColumnMove),dhtmlxEvent(document.body,"mouseup",this._stopColumnMove),this._mmevTrue=!0)},dhtmlXGridObject.prototype._startColumnMove=function(h){for(var g=(h=h||event).target||h.srcElement,a=g;"TABLE"!=a.tagName;)a=a.parentNode;var c=a.grid;if(c&&(c.setActive(),c._mCol&&2!=h.button))return"default"!=(g=c.getFirstParentOfType(g,"TD")).style.cursor||(c&&!c._colInMove&&(c.resized=null,c._mCols&&"true"!=c._mCols[g._cellIndex]||(c._colInMove=g._cellIndex+1)),c._colInMovePos={x:h.clientX,y:h.clientY}),!0},dhtmlXGridObject.prototype._onColumnMove=function(m){m=m||event;var a=window.globalActiveDHTMLGridObject;if(a&&a._colInMove){if(Math.max(Math.abs(m.clientX-a._colInMovePos.x),Math.abs(m.clientY-a._colInMovePos.y))<20)return;if(a._hideHContext&&a._hideHContext(),"object"!=typeof a._colInMove)(n=document.createElement("DIV"))._aIndex=a._colInMove-1,n._bIndex=null,n.innerHTML=a.getHeaderCol(n._aIndex),n.className="dhx_dragColDiv",n.style.position="absolute",document.body.appendChild(n),a._colInMove=n;var h=[];h[0]=document.body.scrollLeft||document.documentElement.scrollLeft,h[1]=document.body.scrollTop||document.documentElement.scrollTop,a._colInMove.style.left=m.clientX+h[0]+8+"px",a._colInMove.style.top=m.clientY+h[1]+8+"px";for(var c=m.target||m.srcElement;c&&void 0===c._cellIndexS;)c=c.parentNode;if(a._colInMove._oldHe&&(a._colInMove._oldHe.className=a._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,""),a._colInMove._oldHe=null,a._colInMove._bIndex=null),c){if(a.hdr.rows[1]._childIndexes)var g=a.hdr.rows[1].cells[a.hdr.rows[1]._childIndexes[c._cellIndexS]];else g=a.hdr.rows[1].cells[c._cellIndexS];var n;.5<(n=m.clientX-(dhx4.absLeft(g)-a.hdrBox.scrollLeft))/g.offsetWidth?(g.className+=" columnTargetR",a._colInMove._bIndex=c._cellIndexS):(g.className+=" columnTargetL",a._colInMove._bIndex=c._cellIndexS-1),g.offsetLeft<a.objBox.scrollLeft+20&&(a.objBox.scrollLeft=Math.max(0,g.offsetLeft-20)),g.offsetLeft+g.offsetWidth-a.objBox.scrollLeft>a.objBox.offsetWidth-20&&(a.objBox.scrollLeft=Math.min(a.objBox.scrollLeft+g.offsetWidth+20,a.objBox.scrollWidth-a.objBox.offsetWidth)),a._colInMove._oldHe=g}return!(m.cancelBubble=!0)}return!0},dhtmlXGridObject.prototype._stopColumnMove=function(c){c=c||event;var a=window.globalActiveDHTMLGridObject;return a&&a._colInMove&&("object"==typeof a._colInMove&&(a._colInMove.parentNode.removeChild(a._colInMove),null!=a._colInMove._bIndex&&a.moveColumn(a._colInMove._aIndex,a._colInMove._bIndex+1),a._colInMove._oldHe&&(a._colInMove._oldHe.className=a._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"")),a._colInMove._oldHe=null,a._colInMove.grid=null,a.resized=!0),a._colInMove=0),!0},dhtmlXGridObject.prototype.mouseOverHeader=function(c){var a=this;dhtmlxEvent(this.hdr,"mousemove",function(h){var g=(h=h||window.event).target||h.srcElement;"TD"!=g.tagName&&(g=a.getFirstParentOfType(g,"TD")),g&&void 0!==g._cellIndex&&c(g.parentNode.rowIndex,g._cellIndex)})},dhtmlXGridObject.prototype.mouseOver=function(c){var a=this;dhtmlxEvent(this.obj,"mousemove",function(h){var g=(h=h||window.event).target||h.srcElement;"TD"!=g.tagName&&(g=a.getFirstParentOfType(g,"TD")),g&&void 0!==g._cellIndex&&c(g.parentNode.rowIndex,g._cellIndex)})},dhtmlXGridObject.prototype.enablePaging=function(l,g,c,h,a,e){this._pgn_parentObj="string"==typeof h?document.getElementById(h):h,this._pgn_recInfoParentObj="string"==typeof e?document.getElementById(e):e,this.pagingOn=l,this.showRecInfo=a,this.rowsBufferOutSize=parseInt(g),this.currentPage=1,this.pagesInGroup=parseInt(c),this._init_pgn_events(),this.setPagingSkin("default")},dhtmlXGridObject.prototype.setXMLAutoLoading=function(a,c){this.xmlFileUrl=a,this._dpref=c},dhtmlXGridObject.prototype.changePageRelative=function(a){this.changePage(this.currentPage+a)},dhtmlXGridObject.prototype.changePage=function(a){0==arguments.length&&(a=this.currentPage||0),a=parseInt(a),a=Math.max(1,Math.min(a,Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))),this.callEvent("onBeforePageChanged",[this.currentPage,a])&&(this.currentPage=parseInt(a),this._reset_view(),this._fixAlterCss(),this.callEvent("onPageChanged",this.getStateOfView()))},dhtmlXGridObject.prototype.setPagingSkin=function(a){this._pgn_skin=this["_pgn_"+a],"toolbar"==a&&(this._pgn_skin_tlb=arguments[1])},dhtmlXGridObject.prototype.setPagingTemplates=function(e,c){this._pgn_templateA=this._pgn_template_compile(e),this._pgn_templateB=this._pgn_template_compile(c),this._page_skin_update()},dhtmlXGridObject.prototype._page_skin_update=function(a){this.pagesInGroup||(this.pagesInGroup=Math.ceil(Math.min(5,this.rowsBuffer.length/this.rowsBufferOutSize)));var c=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(c&&c<this.currentPage)return this.changePage(c);this.pagingOn&&this._pgn_skin&&this._pgn_skin.apply(this,this.getStateOfView())},dhtmlXGridObject.prototype._init_pgn_events=function(a){this.attachEvent("onXLE",this._page_skin_update),this.attachEvent("onClearAll",this._page_skin_update),this.attachEvent("onPageChanged",this._page_skin_update),this.attachEvent("onGridReconstructed",this._page_skin_update),this._init_pgn_events=function(){}},dhtmlXGridObject.prototype._pgn_default=function(e,g,a){if(!this.pagingBlock){if(this.pagingBlock=document.createElement("DIV"),this.pagingBlock.className="pagingBlock",this.recordInfoBlock=document.createElement("SPAN"),this.recordInfoBlock.className="recordsInfoBlock",!this._pgn_parentObj)return;this._pgn_parentObj.appendChild(this.pagingBlock),this._pgn_recInfoParentObj&&this.showRecInfo&&this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock),this._pgn_templateA||(this._pgn_templateA=this._pgn_template_compile("[prevpages:&lt;:&nbsp;] [currentpages:,&nbsp;] [nextpages:&gt;:&nbsp;]"),this._pgn_templateB=this._pgn_template_compile("Results <b>[from]-[to]</b> of <b>[total]</b>"))}var c=this.getStateOfView();this.pagingBlock.innerHTML=this._pgn_templateA.apply(this,c),this.recordInfoBlock.innerHTML=this._pgn_templateB.apply(this,c),this._pgn_template_active(this.pagingBlock),this._pgn_template_active(this.recordInfoBlock),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_block=function(c){for(var h=Math.floor((this.currentPage-1)/this.pagesInGroup)*this.pagesInGroup,a=Math.min(Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize),h+this.pagesInGroup),g=[],e=h+1;e<=a;e++)e==this.currentPage?g.push("<a class='dhx_not_active'><b>"+e+"</b></a>"):g.push("<a onclick='this.grid.changePage("+e+"); return false;'>"+e+"</a>");return g.join(c)},dhtmlXGridObject.prototype._pgn_link=function(g,c,e){if("prevpages"==g||"prev"==g)return 1==this.currentPage?e:"<a onclick='this.grid.changePageRelative(-1*"+("prev"==g?"1":"this.grid.pagesInGroup")+"); return false;'>"+c+"</a>";if("nextpages"==g||"next"==g)return this.rowsBuffer.length/this.rowsBufferOutSize<=this.currentPage?e:this.rowsBuffer.length/(this.rowsBufferOutSize*("next"==g?"1":this.pagesInGroup))<=1?e:"<a onclick='this.grid.changePageRelative("+("next"==g?"1":"this.grid.pagesInGroup")+"); return false;'>"+c+"</a>";if("current"==g){var a=this.currentPage+(c?parseInt(c):0);return a<1||Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)<a?e:"<a "+(a==this.currentPage?"class='dhx_active_page_link' ":"")+"onclick='this.grid.changePage("+a+"); return false;'>"+a+"</a>"}return c},dhtmlXGridObject.prototype._pgn_template_active=function(e){var a=e.getElementsByTagName("A");if(a)for(var c=0;c<a.length;c++)a[c].grid=this},dhtmlXGridObject.prototype._pgn_template_compile=function(a){return a=a.replace(/\[([^\]]*)\]/g,function(e,c){switch((c=c.split(":"))[0]){case"from":return'"+(arguments[1]*1+(arguments[2]*1?1:0))+"';case"total":return'"+arguments[3]+"';case"to":return'"+arguments[2]+"';case"current":case"prev":case"next":case"prevpages":case"nextpages":return"\"+this._pgn_link('"+c[0]+"','"+c[1]+"','"+c[2]+"')+\"";case"currentpages":return"\"+this._pgn_block('"+c[1]+"')+\""}}),new Function('return "'+a+'";')},dhtmlXGridObject.prototype.i18n.paging={results:"Results",records:"Records from ",to:" to ",page:"Page ",perpage:"rows per page",first:"To first Page",previous:"Previous Page",found:"Found records",next:"Next Page",last:"To last Page",of:" of ",notfound:"No Records Found"},dhtmlXGridObject.prototype.setPagingWTMode=function(a,c,e,g){this._WTDef=[a,c,e,g]},dhtmlXGridObject.prototype._pgn_bricks=function(n,a,e){var h=(this.skin_name||"").split("_")[1],c="";"light"!=h&&"modern"!=h&&"skyblue"!=h||(c="_"+h),this.pagerElAr=new Array,this.pagerElAr.pagerCont=document.createElement("DIV"),this.pagerElAr.pagerBord=document.createElement("DIV"),this.pagerElAr.pagerLine=document.createElement("DIV"),this.pagerElAr.pagerBox=document.createElement("DIV"),this.pagerElAr.pagerInfo=document.createElement("DIV"),this.pagerElAr.pagerInfoBox=document.createElement("DIV");var m=this.globalBox||this.objBox;if(this.pagerElAr.pagerCont.style.width=m.clientWidth+"px",this.pagerElAr.pagerCont.style.overflow="hidden",this.pagerElAr.pagerCont.style.clear="both",this.pagerElAr.pagerBord.className="dhx_pbox"+c,this.pagerElAr.pagerLine.className="dhx_pline"+c,this.pagerElAr.pagerBox.style.clear="both",this.pagerElAr.pagerInfo.className="dhx_pager_info"+c,this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo),this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox),this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox),this._pgn_parentObj.innerHTML="",this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont),0<this.rowsBuffer.length){var l=20;if(n>this.pagesInGroup){var r=document.createElement("DIV"),o=document.createElement("DIV");r.className="dhx_page"+c,o.innerHTML="&larr;",r.appendChild(o),this.pagerElAr.pagerBox.appendChild(r);var s=this;r.pgnum=(Math.ceil(n/this.pagesInGroup)-1)*this.pagesInGroup,r.onclick=function(){s.changePage(this.pgnum)},l+=22}for(var g=1;g<=this.pagesInGroup;g++){r=document.createElement("DIV"),o=document.createElement("DIV");if(r.className="dhx_page"+c,pageNumber=(Math.ceil(n/this.pagesInGroup)-1)*this.pagesInGroup+g,pageNumber>Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))break;if(o.innerHTML=pageNumber,r.appendChild(o),n==pageNumber)r.className+=" dhx_page_active"+c,o.className="dhx_page_active"+c;else{s=this;r.pgnum=pageNumber,r.onclick=function(){s.changePage(this.pgnum)}}l+=parseInt(22/3)*pageNumber.toString().length+15,o.style.width=parseInt(22/3)*pageNumber.toString().length+8+"px",this.pagerElAr.pagerBox.appendChild(r)}if(Math.ceil(n/this.pagesInGroup)*this.pagesInGroup<Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)){r=document.createElement("DIV"),o=document.createElement("DIV");r.className="dhx_page"+c,o.innerHTML="&rarr;",r.appendChild(o),this.pagerElAr.pagerBox.appendChild(r);s=this;r.pgnum=Math.ceil(n/this.pagesInGroup)*this.pagesInGroup+1,r.onclick=function(){s.changePage(this.pgnum)},l+=22}this.pagerElAr.pagerLine.style.width=l+"px"}0<this.rowsBuffer.length&&this.showRecInfo?this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.records+(a+1)+this.i18n.paging.to+e+this.i18n.paging.of+this.rowsBuffer.length:0==this.rowsBuffer.length&&(this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.notfound),this.pagerElAr.pagerBox.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerBord.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerCont.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_toolbar=function(l,m,c){this.aToolBar||(this.aToolBar=this._pgn_createToolBar());var h=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(this._WTDef[0]&&(this.aToolBar.enableItem("right"),this.aToolBar.enableItem("rightabs"),this.aToolBar.enableItem("left"),this.aToolBar.enableItem("leftabs"),this.currentPage>=h&&(this.aToolBar.disableItem("right"),this.aToolBar.disableItem("rightabs")),1==this.currentPage&&(this.aToolBar.disableItem("left"),this.aToolBar.disableItem("leftabs"))),this._WTDef[2]){var g=this;this.aToolBar.forEachListOption("pages",function(n){g.aToolBar.removeListOption("pages",n)});for(var a={dhx_skyblue:4,dhx_web:0,dhx_terrace:14}[this.aToolBar.conf.skin],e=0;e<h;e++)this.aToolBar.addListOption("pages","pages_"+(e+1),NaN,"button","<span style='padding: 0px "+a+"px 0px 0px;'>"+this.i18n.paging.page+(e+1)+"</span>","paging_page.gif");this.aToolBar.setItemText("pages",this.i18n.paging.page+l)}this._WTDef[1]&&(this.getRowsNum()?this.aToolBar.setItemText("results","<div style='width:100%; text-align:center'>"+this.i18n.paging.records+(m+1)+this.i18n.paging.to+c+"</div>"):this.aToolBar.setItemText("results",this.i18n.paging.notfound)),this._WTDef[3]&&this.aToolBar.setItemText("perpagenum",this.rowsBufferOutSize.toString()+" "+this.i18n.paging.perpage),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_createToolBar=function(){this.aToolBar=new dhtmlXToolbarObject({parent:this._pgn_parentObj,skin:this._pgn_skin_tlb||this.skin_name,icons_path:this.imgURL}),this._WTDef||this.setPagingWTMode(!0,!0,!0,!0);var a,g=this;if(this.aToolBar.attachEvent("onClick",function(h){switch((h=h.split("_"))[0]){case"leftabs":g.changePage(1);break;case"left":g.changePage(g.currentPage-1);break;case"rightabs":g.changePage(99999);break;case"right":g.changePage(g.currentPage+1);break;case"perpagenum":if(h[1]===this.undefined)return;g.rowsBufferOutSize=parseInt(h[1]),g.changePage(),g.aToolBar.setItemText("perpagenum",h[1]+" "+g.i18n.paging.perpage);break;case"pages":if(h[1]===this.undefined)return;g.changePage(h[1]),g.aToolBar.setItemText("pages",g.i18n.paging.page+h[1])}}),this._WTDef[0]&&(this.aToolBar.addButton("leftabs",NaN,null,"ar_left_abs.gif","ar_left_abs_dis.gif"),this.aToolBar.addButton("left",NaN,null,"ar_left.gif","ar_left_dis.gif")),this._WTDef[1]&&(this.aToolBar.addText("results",NaN,this.i18n.paging.results),this.aToolBar.setWidth("results","150"),this.aToolBar.disableItem("results")),this._WTDef[0]&&(this.aToolBar.addButton("right",NaN,null,"ar_right.gif","ar_right_dis.gif"),this.aToolBar.addButton("rightabs",NaN,null,"ar_right_abs.gif","ar_right_abs_dis.gif")),this._WTDef[2]&&("dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("pages",NaN,"select page",[],"paging_pages.gif",null,!1,!0)),a=this._WTDef[3]){"dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("perpagenum",NaN,"select size",[],"paging_rows.gif",null,!1,!0),"object"!=typeof a&&(a=[5,10,15,20,25,30]);for(var c={dhx_skyblue:4,dhx_web:0,dhx_terrace:18}[this.aToolBar.conf.skin],e=0;e<a.length;e++)this.aToolBar.addListOption("perpagenum","perpagenum_"+a[e],NaN,"button","<span style='padding: 0px "+c+"px 0px 0px;'>"+a[e]+" "+this.i18n.paging.perpage+"</span>","paging_page.gif")}return this.aToolBar},dhtmlXGridObject.prototype.post=function(a,c,g,e){this.callEvent("onXLS",[this]),2==arguments.length&&"function"!=typeof g&&(e=g,g=null),e=e||"xml",this.xmlFileUrl||(this.xmlFileUrl=a),this._data_type=e,this.xmlLoader=this.doLoadDetails;var h=this;this.xmlLoader=function(l){h.callEvent&&(h["_process_"+e](l.xmlDoc),h._contextCallTimer||h.callEvent("onXLE",[h,0,0,l.xmlDoc]),g&&(g(),g=null))},dhx4.ajax.post(a,c||"",this.xmlLoader)},dhtmlXGridObject.prototype.setRowspan=function(s,v,h){var u=this[this._bfs_cells?"_bfs_cells":"cells"](s,v).cell,a=this.rowsAr[s];if(u.rowSpan&&1!=u.rowSpan)for(var l=a.nextSibling,n=1;n<u.rowSpan;n++){var m=l.childNodes[l._childIndexes[u._cellIndex+1]],e=document.createElement("TD");e.innerHTML="&nbsp;",e._cellIndex=u._cellIndex,e._clearCell=!0,m?m.parentNode.insertBefore(e,m):l.parentNode.appendChild(e),this._shiftIndexes(l,u._cellIndex,-1),l=l.nextSibling}u.rowSpan=h,a=this._h2?this.rowsAr[this._h2.get[a.idd].parent.childs[this._h2.get[a.idd].index+1].id]:a.nextSibling||this.rowsCol[this.rowsCol._dhx_find(a)+1];var g=[];for(n=1;n<h;n++){var o=null;if(o=this._fake&&!this._realfake?this._bfs_cells3(a,v).cell:this.cells3(a,v).cell,this._shiftIndexes(a,u._cellIndex,1),o&&o.parentNode.removeChild(o),g.push(a),this._h2)(a=this._h2.get[a.idd].parent.childs[this._h2.get[a.idd].index+1])&&(a=this.rowsAr[a.id]);else a=a.nextSibling||this.rowsCol[this.rowsCol._dhx_find(a)+1]}this.rowsAr[s]._rowSpan=this.rowsAr[s]._rowSpan||{},this.rowsAr[s]._rowSpan[v]=g,this._fake&&!this._realfake&&v<this._fake._cCount&&this._fake.setRowspan(s,v,h)},dhtmlXGridObject.prototype._shiftIndexes=function(a,g,c){if(!a._childIndexes){a._childIndexes=new Array;for(var e=0;e<a.childNodes.length;e++)a._childIndexes[e]=e}for(e=0;e<a._childIndexes.length;e++)g<e&&(a._childIndexes[e]=a._childIndexes[e]-c)},dhtmlXGridObject.prototype.enableRowspan=function(){this._erspan=!0,this.enableRowspan=function(){},this.attachEvent("onAfterSorting",function(){if(!this._dload){for(var h=1;h<this.obj.rows.length;h++)if(this.obj.rows[h]._rowSpan){var a=this.obj.rows[h];for(var l in a._rowSpan)for(var o=a,c=o._rowSpan[l],e=0;e<c.length;e++){if(o.nextSibling?o.parentNode.insertBefore(c[e],o.nextSibling):o.parentNode.appendChild(c[e]),this._fake){var g=this._fake.rowsAr[o.idd],m=this._fake.rowsAr[c[e].idd];g.nextSibling?g.parentNode.insertBefore(m,g.nextSibling):g.parentNode.appendChild(m),this._correctRowHeight(o.idd)}o=o.nextSibling}}var n=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray,this.rowsCol.stablesort=n;for(h=1;h<this.obj.rows.length;h++)this.rowsCol.push(this.obj.rows[h])}}),this.attachEvent("onXLE",function(g,e,r,l){for(var m=0;m<this.rowsBuffer.length;m++)for(var o=this.render_row(m),n=o.childNodes,h=0;h<n.length;h++)n[h]._attrs.rowspan&&this.setRowspan(o.idd,n[h]._cellIndex,n[h]._attrs.rowspan)})},dhx4.attachEvent("onGridCreated",function(a){a._split_later&&a.splitAt(a._split_later)}),dhtmlXGridObject.prototype.splitAt=function(m){if(!this.obj.rows[0])return this._split_later=m;m=parseInt(m);var x=document.createElement("DIV");this.entBox.appendChild(x);var y=document.createElement("DIV");this.entBox.appendChild(y);for(var v=this.entBox.childNodes.length-3;0<=v;v--)y.insertBefore(this.entBox.childNodes[v],y.firstChild);if(this.entBox.style.position="relative",this.globalBox=this.entBox,(this.entBox=y).grid=this,x.style.cssText+="border:0px solid red !important;",y.style.cssText+="border:0px solid red !important;",y.style.top="0px",y.style.position="absolute",x.style.position="absolute",x.style.top="0px",x.style.left="0px",x.style.zIndex=11,y.style.height=x.style.height=this.globalBox.clientHeight,this._fake=new dhtmlXGridObject(x),this.globalBox=this._fake.globalBox=this.globalBox,(this._fake._fake=this)._fake._realfake=!0,this._treeC=this.cellType._dhx_find("tree"),this._fake.delim=this.delim,this._fake.customGroupFormat=this.customGroupFormat,this._fake.setImagesPath(this._imgURL),this._fake.iconURL=this.iconURL,this._fake._customSorts=this._customSorts,this._fake.noHeader=this.noHeader,this._fake._enbTts=this._enbTts,this._fake._drsclmW=this._drsclmW,this._fake._htkebl=this._htkebl,this._fake.clists=this.clists,this._fake.fldSort=new Array,this._fake.selMultiRows=this.selMultiRows,this._fake.multiLine=this.multiLine,this._fake._key_events=this._key_events,this._fake.smartTabOrder=this.smartTabOrder,this._fake._RaSeCol=this._RaSeCol,this.multiLine||this._erspan){this.attachEvent("onCellChanged",this._correctRowHeight),this.attachEvent("onRowAdded",this._correctRowHeight);var c=function(){this.forEachRow(function(D){this._correctRowHeight(D)})};this.attachEvent("onPageChanged",c),this.attachEvent("onXLE",c),this.attachEvent("onResizeEnd",c),this._ads_count||this.attachEvent("onAfterSorting",c),this._srnd&&this.attachEvent("onFilterEnd",c),this.attachEvent("onDistributedEnd",c)}this.attachEvent("onGridReconstructed",function(){this._fake.objBox.scrollTop=this.objBox.scrollTop}),this._fake.loadedKidsHash=this.loadedKidsHash,this._h2&&(this._fake._h2=this._h2),this._fake._dInc=this._dInc;var n=[[],[],[],[],[],[],[]],s=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor"],h=["setHeader","setInitWidths","setColTypes","setColAlign","setColVAlign","setColSorting","setColumnColor"];this._fake.callEvent=function(){var D=!0;this._fake._split_event=!0;var E="onScroll"==arguments[0];return("onGridReconstructed"==arguments[0]||E)&&this._fake.callEvent.apply(this,arguments),E||(D=this._fake.callEvent.apply(this._fake,arguments)),this._fake._split_event=!1,D},this._elmn&&this._fake.enableLightMouseNavigation(!0),(this._cssEven||this._cssUnEven)&&this._fake.attachEvent("onGridReconstructed",function(){this._fixAlterCss()}),this._fake._cssSP=this._cssSP,this._fake.isEditable=this.isEditable,this._fake._edtc=this._edtc,this._sst&&this._fake.enableStableSorting(!0),this._fake._sclE=this._sclE,this._fake._dclE=this._dclE,this._fake._f2kE=this._f2kE,this._fake._maskArr=this._maskArr,this._fake._dtmask=this._dtmask,this._fake.combos=this.combos;var o=0,a=this.globalBox.offsetWidth;for(v=0;v<m;v++){for(var u=0;u<s.length;u++)this[s[u]]&&(n[u][v]=this[s[u]][v]),"string"==typeof n[u][v]&&(n[u][v]=n[u][v].replace(new RegExp("\\"+this.delim,"g"),"\\"+this.delim));_isFF&&(n[1][v]=1*n[1][v]),"%"==this.cellWidthType?(n[1][v]=Math.round(parseInt(this[s[1]][v])*a/100),o+=n[1][v]):o+=parseInt(this[s[1]][v]),this.setColumnHidden(v,!0)}for(u=0;u<s.length;u++){var r=n[u].join(this.delim);"setHeader"!=h[u]?""!=r&&this._fake[h[u]](r):this._fake[h[u]](r,null,this._hstyles)}this._fake._strangeParams=this._strangeParams,this._fake._drsclmn=this._drsclmn,o=Math.min(this.globalBox.offsetWidth,o),y.style.left=o+"px",x.style.width=o+"px",y.style.width=Math.max(this.globalBox.offsetWidth-o,0),this._ecspn&&(this._fake._ecspn=!0),this._fake.init(),this.dragAndDropOff&&this.dragger.addDragLanding(this._fake.entBox,this),this._fake.objBox.style.overflow="hidden",dhtmlx.$customScroll?this._fake.objBox._custom_scroll_mode="":this._fake.objBox.style.overflowX="scroll",this._fake._srdh=this._srdh||20,this._fake._srnd=this._srnd,this._fake._cssEven=this._cssEven,this._fake._cssUnEven=this._cssUnEven,this.skin_name!=this._fake.skin_name&&this._fake.setSkin(this.skin_name);var A=this;function C(F){var D=A.objBox;if(2<D.scrollHeight-D.offsetHeight){var E=F.wheelDelta/-40;F.wheelDelta===window.undefined&&(E=F.detail),D.scrollTop+=40*E,F.preventDefault&&F.preventDefault()}}function g(E,D){D.style.whiteSpace="";var I=D.nextSibling,F=D.parentNode;E.parentNode.insertBefore(D,E),I?F.insertBefore(E,I):F.appendChild(E);var H=E.style.display;E.style.display=D.style.display,D.style.display=H}function w(L,T,M,E){var F=new Array(m).join(this.delim),N=[];if(2==L)for(var J=0;J<m;J++){var D=T[L-1].cells[T[L-1]._childIndexes?T[L-1]._childIndexes[J]:J];D.rowSpan&&1<D.rowSpan&&(N[D._cellIndex]=D.rowSpan-1,E[L-1].cells[E[L-1]._childIndexes?E[L-1]._childIndexes[J]:J].rowSpan=D.rowSpan,D.rowSpan=1)}for(;L<T.length;L++){this._fake.attachHeader(F,null,M),E=E||this._fake.ftr.childNodes[0].rows;for(var Q=m,H=0,K=0;K<Q;K++)if(N[K]){if(N[K]=N[K]-1,_isIE||_isOpera){var I=document.createElement("TD");_isFF&&(I.style.display="none"),T[L].insertBefore(I,T[L].cells[0])}H++}else{var P=E[L].cells[K-H],O=T[L].cells[K-(_isIE?0:H)],S=O.rowSpan;if(g(P,O),1<S&&(N[K]=S-1,O.rowSpan=S),1<E[L].cells[K].colSpan){T[L].cells[K].colSpan=E[L].cells[K].colSpan,Q-=E[L].cells[K].colSpan-1;for(J=1;J<E[L].cells[K].colSpan;J++)E[L].removeChild(E[L].cells[K+1])}}}}dhtmlxEvent(this._fake.objBox,"mousewheel",C),dhtmlxEvent(this._fake.objBox,"DOMMouseScroll",C),2<this.hdr.rows.length&&w.call(this,2,this.hdr.rows,"_aHead",this._fake.hdr.rows),this.ftr&&(w.call(this,1,this.ftr.childNodes[0].rows,"_aFoot"),this._fake.ftr.parentNode.style.bottom=(_isFF?2:1)+"px"),this.saveSizeToCookie&&(this.saveSizeToCookie=function(E,D){if(this._realfake)return this._fake.saveSizeToCookie.apply(this._fake,arguments);E||(E=this.entBox.id);for(var H=new Array,I="cellWidthPX",F=0;F<this[I].length;F++)H[F]=F<m?this._fake[I][F]:this[I][F];H=H.join(","),this.setCookie(E,D,0,H);H=(this.initCellWidth||new Array).join(",");return this.setCookie(E,D,1,H),!0},this.loadSizeFromCookie=function(D){if(D||(D=this.entBox.id),I=this._getCookie(D,1)){this.initCellWidth=I.split(",");var I=this._getCookie(D,0),J="cellWidthPX";this.cellWidthType="px";var F=0;if(I&&I.length){I=I.split(",");for(var E=0;E<I.length;E++)E<m?(this._fake[J][E]=I[E],F+=1*I[E]):this[J][E]=I[E]}this._fake.entBox.style.width=F+"px",this._fake.objBox.style.width=F+"px";var H=this.globalBox.childNodes[1];return H.style.left=F-(_isFF,0)+"px",this.ftr&&(this.ftr.style.left=F-(_isFF,0)+"px"),H.style.width=this.globalBox.offsetWidth-F+"px",this.setSizes(),!0}},this._fake.onRSE=this.onRSE),this.setCellTextStyleA=this.setCellTextStyle,this.setCellTextStyle=function(E,F,D){F<m&&this._fake.setCellTextStyle(E,F,D),this.setCellTextStyleA(E,F,D)},this.setRowTextBoldA=this.setRowTextBold,this.setRowTextBold=function(D){this.setRowTextBoldA(D),this._fake.setRowTextBold(D)},this.setRowColorA=this.setRowColor,this.setRowColor=function(E,D){this.setRowColorA(E,D),this._fake.setRowColor(E,D)},this.setRowHiddenA=this.setRowHidden,this.setRowHidden=function(E,D){this.setRowHiddenA(E,D),this._fake.setRowHidden(E,D)},this.setRowTextNormalA=this.setRowTextNormal,this.setRowTextNormal=function(D){this.setRowTextNormalA(D),this._fake.setRowTextNormal(D)},this.getChangedRows=function(F){var D=new Array;function E(I){for(var H=0;H<I.childNodes.length;H++)if(I.childNodes[H].wasChanged)return D[D.length]=I.idd}return this.forEachRow(function(J){var I=this.rowsAr[J],H=this._fake.rowsAr[J];"TR"==I.tagName&&H&&"TR"==H.tagName&&(F&&I._added?D[D.length]=I.idd:E(I)||E(H))}),D.join(this.delim)},this.setRowTextStyleA=this.setRowTextStyle,this.setRowTextStyle=function(E,D){this.setRowTextStyleA(E,D),this._fake.rowsAr[E]&&this._fake.setRowTextStyle(E,D)},this.lockRowA=this.lockRow,this.lockRow=function(E,D){this.lockRowA(E,D),this._fake.lockRow(E,D)},this.getColWidth=function(D){return D<m?parseInt(this._fake.cellWidthPX[D]):parseInt(this.cellWidthPX[D])},this.getColumnLabel=function(D){return this._fake.getColumnLabel.apply(D<m?this._fake:this,arguments)},this.setColWidthA=this._fake.setColWidthA=this.setColWidth,this.setColWidth=function(D,E){(D*=1)<m?this._fake.setColWidthA(D,E):this.setColWidthA(D,E),D+1<=m&&this._fake._correctSplit(Math.min(this._fake.objBox.offsetWidth,this._fake.obj.offsetWidth))},this.adjustColumnSizeA=this.adjustColumnSize,this.setColumnLabelA=this.setColumnLabel,this.setColumnLabel=function(E,D,I,H){var F=this;return E<m&&(F=this._fake),this.setColumnLabelA.apply(F,[E,D,I,H])},this.adjustColumnSize=function(D,E){if(!(D<m))return this.adjustColumnSizeA(D,E);_isIE&&(this._fake.obj.style.tableLayout=""),this._fake.adjustColumnSize(D,E),_isIE&&(this._fake.obj.style.tableLayout="fixed"),this._fake._correctSplit()};var e="cells";this._bfs_cells=this[e],this[e]=function(){return arguments[1]<m?this._fake.cells.apply(this._fake,arguments):this._bfs_cells.apply(this,arguments)},this._bfs_isColumnHidden=this.isColumnHidden,this.isColumnHidden=function(){return parseInt(arguments[0])<m?this._fake.isColumnHidden.apply(this._fake,arguments):this._bfs_isColumnHidden.apply(this,arguments)},this._bfs_setColumnHidden=this.setColumnHidden,this.setColumnHidden=function(){return parseInt(arguments[0])<m?(this._fake.setColumnHidden.apply(this._fake,arguments),this._fake._correctSplit()):this._bfs_setColumnHidden.apply(this,arguments)};e="cells2";this._bfs_cells2=this[e],this[e]=function(){return arguments[1]<m?this._fake.cells2.apply(this._fake,arguments):this._bfs_cells2.apply(this,arguments)};e="cells3";this._bfs_cells3=this[e],this[e]=function(E,D){return D<m&&this._fake.rowsAr[E.idd]?this._fake.rowsAr[E.idd]&&0==this._fake.rowsAr[E.idd].childNodes.length?this._bfs_cells3.apply(this,arguments):(E=E.idd,this._fake.cells.apply(this._fake,arguments)):this._bfs_cells3.apply(this,arguments)};e="changeRowId";this._bfs_changeRowId=this[e],this[e]=function(){this._bfs_changeRowId.apply(this,arguments),this._fake.rowsAr[arguments[0]]&&this._fake.changeRowId.apply(this._fake,arguments)},this._fake.getRowById=function(F){var E=this.rowsAr[F];if(!E&&this._fake.rowsAr[F]&&(E=this._fake.getRowById(F)),E){if("TR"!=E.tagName){for(var D=0;D<this.rowsBuffer.length;D++)if(this.rowsBuffer[D]&&this.rowsBuffer[D].idd==F)return this.render_row(D);if(this._h2)return this.render_row(null,E.idd)}return E}return null},this.collapseKids&&(this._fake._bfs_collapseKids=this.collapseKids,this._fake.collapseKids=function(){return this._fake.collapseKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]])},this._bfs_collapseKids=this.collapseKids,this.collapseKids=function(){this._bfs_collapseKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._bfs_expandKids=this.expandKids,this._fake.expandKids=function(){this._fake.expandKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]]),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandAll=this.expandAll,this.expandAll=function(){this._bfs_expandAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_collapseAll=this.collapseAll,this.collapseAll=function(){this._bfs_collapseAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandKids=this.expandKids,this.expandKids=function(){this._bfs_expandKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._h2syncModel=function(){this._fake.pagingOn?this._fake._renderSort():this._renderSort()},this._updateTGRState=function(D){return this._fake._updateTGRState(D)}),this._elmnh&&(this._setRowHoverA=this._fake._setRowHoverA=this._setRowHover,this._unsetRowHoverA=this._fake._unsetRowHoverA=this._unsetRowHover,this._setRowHover=this._fake._setRowHover=function(){var D=this.grid;D._setRowHoverA.apply(this,arguments);var E=_isIE?event.srcElement:arguments[0].target;(E=D._fake.rowsAr[D.getFirstParentOfType(E,"TD").parentNode.idd])&&D._fake._setRowHoverA.apply(D._fake.obj,[{target:E.childNodes[0]},arguments[1]])},this._unsetRowHover=this._fake._unsetRowHover=function(){if(arguments[1])var D=this;else D=this.grid;D._unsetRowHoverA.apply(this,arguments),D._fake._unsetRowHoverA.apply(D._fake.obj,arguments)},this._fake.enableRowsHover(!0,this._hvrCss),this.enableRowsHover(!1),this.enableRowsHover(!0,this._fake._hvrCss)),this._updateTGRState=function(D){D.update&&0!=D.id&&(this.rowsAr[D.id].imgTag&&(this.rowsAr[D.id].imgTag.src=this.iconTree+D.state+".gif"),this._fake.rowsAr[D.id]&&this._fake.rowsAr[D.id].imgTag&&(this._fake.rowsAr[D.id].imgTag.src=this.iconTree+D.state+".gif"),D.update=!1)},this.copy_row=function(I){var D=I.cloneNode(!0);D._skipInsert=I._skipInsert;var J=m;if(D._attrs={},D._css=I._css,this._ecspn)for(var H=J=0;J<D.childNodes.length&&H<m;H+=D.childNodes[J].colSpan||1)J++;for(;D.childNodes.length>J;)D.removeChild(D.childNodes[D.childNodes.length-1]);var F=J;for(H=0;H<F;H++)this.dragAndDropOff&&this.dragger.addDraggableItem(D.childNodes[H],this),D.childNodes[H].style.display=this._fake._hrrar&&this._fake._hrrar[H]?"none":"",D.childNodes[H]._cellIndex=H,D.childNodes[H].combo_value=I.childNodes[H].combo_value,D.childNodes[H]._clearCell=I.childNodes[H]._clearCell,D.childNodes[H]._cellType=I.childNodes[H]._cellType,D.childNodes[H]._brval=I.childNodes[H]._brval,D.childNodes[H].val=I.childNodes[H].val,D.childNodes[H]._combo=I.childNodes[H]._combo,D.childNodes[H]._attrs=I.childNodes[H]._attrs,D.childNodes[H].chstate=I.childNodes[H].chstate,I._attrs.style&&(D.childNodes[H].style.cssText=I._attrs.style+";"+D.childNodes[H].style.cssText),1<D.childNodes[H].colSpan&&(D._childIndexes=I._childIndexes);if(this._h2&&this._treeC<m){var E=this._h2.get[I.idd];D.imgTag=D.childNodes[this._treeC].childNodes[0].childNodes[E.level],D.valTag=D.childNodes[this._treeC].childNodes[0].childNodes[E.level+2]}return D.idd=I.idd,D.grid=this._fake,D};e="_insertRowAt";this._bfs_insertRowAt=this[e],this[e]=function(){var E=this._bfs_insertRowAt.apply(this,arguments);arguments[0]=this.copy_row(arguments[0]);var D=this._fake._insertRowAt.apply(this._fake,arguments);return E._fhd&&(D.parentNode.removeChild(D),this._fake.rowsCol._dhx_removeAt(this._fake.rowsCol._dhx_find(D)),E._fhd=!1),E},this._bfs_setSizes=this.setSizes,this.setSizes=function(){if(!this._notresize){this._bfs_setSizes(this,arguments),this.sync_headers(),this.sync_scroll()&&this._ahgr&&this.setSizes();var D=this.dontSetSizes?this.entBox.offsetHeight+"px":this.entBox.style.height;this._fake.entBox.style.height=D,this._fake.objBox.style.height=this.objBox.style.height,this._fake.hdrBox.style.height=this.hdrBox.style.height,this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake.setColumnSizes(this._fake.entBox.clientWidth),this.globalBox.style.width=parseInt(this.entBox.style.width)+parseInt(this._fake.entBox.style.width),this.dontSetSizes||(this.globalBox.style.height=D)}},this.sync_scroll=this._fake.sync_scroll=function(E){var D=this.objBox.style.overflowX;if(this.obj.offsetWidth<=this.objBox.offsetWidth){if(!E)return this._fake.sync_scroll(!0);this.objBox.style.overflowX="hidden",this._fake.objBox.style.overflowX="hidden"}else dhtmlx.$customScroll||(this.objBox.style.overflowX="scroll",this._fake.objBox.style.overflowX="scroll");return D!=this.objBox.style.overflowX},this.sync_headers=this._fake.sync_headers=function(){if(!this.noHeader&&this._fake.hdr.scrollHeight!=this.hdr.offsetHeight&&!this.noHeaderResize){for(var E=1;E<this.hdr.rows.length;E++){for(var I=m;!this.hdr.rows[E].childNodes[I];)I--;var D=Math.min(this.hdr.rows[E].childNodes[I].scrollHeight+2,this.hdr.rows[E].scrollHeight),H=this._fake.hdr.rows[E].scrollHeight;if(D!=H&&(this._fake.hdr.rows[E].style.height=this.hdr.rows[E].style.height=Math.max(D,H)+"px"),window._KHTMLrv){for(var F=0;this._fake._hrrar[F];)F++;this._fake.hdr.rows[E].childNodes[F].style.height=this.hdr.rows[E].childNodes[I].style.height=Math.max(D,H)+"px"}}this._fake.sync_headers}},this._fake._bfs_setSizes=this._fake.setSizes,this._fake.setSizes=function(){this._fake._notresize||this._fake.setSizes()};e="_doOnScroll";this._bfs__doOnScroll=this[e],this[e]=function(){this._bfs__doOnScroll.apply(this,arguments),this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake._doOnScroll.apply(this._fake,arguments)};e="selectAll";this._bfs__selectAll=this[e],this[e]=function(){this._bfs__selectAll.apply(this,arguments),this._bfs__selectAll.apply(this._fake,arguments)};e="doClick";function l(K,J,D,M){for(var E=M.shiftKey?-1:1,F=M.shiftKey?-1:D._cCount,I=!1,H=K+E;H!=F;H+=E)if(!1!==(I=D.smartTabOrder?!D.cells2(J,H).isDisabled()&&H:H)){var L=!D._key_events.k_other;return D.selectCell(J,I,!1,!1,L,!0),M.cancelBubble=!0,M.preventDefault&&M.preventDefault(),!0}}this._bfs_doClick=this[e],this[e]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var D=arguments[0]._cellIndex>=m;if(!arguments[0].parentNode.idd)return;D||(arguments[0].className=arguments[0].className.replace(/cellselected/g,"")),this._fake.rowsAr[arguments[0].parentNode.idd]||this._fake.render_row(this.getRowIndex(arguments[0].parentNode.idd)),arguments[0]=this._fake.cells(arguments[0].parentNode.idd,D?0:arguments[0]._cellIndex).cell,D&&(this._fake.cell=null),this._fake._bfs_doClick.apply(this._fake,arguments),D?this._fake.cell=this.cell:this.cell=this._fake.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),D?(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),(globalActiveDHTMLGridObject=this)._fake.cell=this.cell):this.objBox.scrollTop=this._fake.objBox.scrollTop}},this._fake._bfs_doClick=this._fake[e],this._fake[e]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var D=arguments[0]._cellIndex<m;if(!arguments[0].parentNode.idd)return;arguments[0]=this._fake._bfs_cells(arguments[0].parentNode.idd,D?m:arguments[0]._cellIndex).cell,this._fake.cell=null,this._fake._bfs_doClick.apply(this._fake,arguments),this._fake.cell=this.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),D&&(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),(globalActiveDHTMLGridObject=this)._fake.cell=this.cell,this._fake.objBox.scrollTop=this.objBox.scrollTop)}},this.clearSelectionA=this.clearSelection,this.clearSelection=function(D){D&&this._fake.clearSelection(),this.clearSelectionA()},this.moveRowUpA=this.moveRowUp,this.moveRowUp=function(D){this._h2||this._fake.moveRowUp(D),this.moveRowUpA(D),this._h2&&this._fake._h2syncModel()},this.moveRowDownA=this.moveRowDown,this.moveRowDown=function(D){this._h2||this._fake.moveRowDown(D),this.moveRowDownA(D),this._h2&&this._fake._h2syncModel()},this._fake.getUserData=function(){return this._fake.getUserData.apply(this._fake,arguments)},this._fake.setUserData=function(){return this._fake.setUserData.apply(this._fake,arguments)},this.getSortingStateA=this.getSortingState,this.getSortingState=function(){var D=this.getSortingStateA();return 0!=D.length?D:this._fake.getSortingState()},this.setSortImgStateA=this._fake.setSortImgStateA=this.setSortImgState,this.setSortImgState=function(E,D,H,F){this.setSortImgStateA(E,D,H,F),1*D<m?(this._fake.setSortImgStateA(E,D,H,F),this.setSortImgStateA(!1)):this._fake.setSortImgStateA(!1)},this._fake.doColResizeA=this._fake.doColResize,this._fake.doColResize=function(I,H,F,D,K){var E=-1,J=0;return H._cellIndex==m-1?(E=this._initalSplR+(I.clientX-D),this._initalSplF||(this._initalSplF=D+this.objBox.scrollWidth-this.objBox.offsetWidth),this.objBox.scrollWidth==this.objBox.offsetWidth&&(this._fake.alter_split_resize||0<I.clientX-D)&&(D=this._initalSplF||D)):this.obj.offsetWidth<this.entBox.offsetWidth&&(E=this.obj.offsetWidth),!1!==(J=this.doColResizeA.apply(this,arguments))&&(this._correctSplit(E),this.resized=this._fake.resized=1),J},this._fake.changeCursorState=function(F){var E=F.target||F.srcElement;if("TD"!=E.tagName&&(E=this.getFirstParentOfType(E,"TD")),"TD"!=E.tagName||!this._drsclmn||this._drsclmn[E._cellIndex]){var D=(F.layerX||0)+(_isIE||"DIV"!=F.target.tagName?0:E.offsetLeft),H=parseInt(this.getPosition(E,this.hdrBox));E.offsetWidth-(F.offsetX||-1*(H-D))<(_isOpera?20:10)||this.entBox.offsetWidth-(F.offsetX?F.offsetX+E.offsetLeft:D)+this.objBox.scrollLeft-0<(_isOpera?20:10)?E.style.cursor="E-resize":E.style.cursor="default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this._fake.startColResizeA=this._fake.startColResize,this._fake.startColResize=function(E){var F=this.startColResizeA(E);if(this._initalSplR=this.entBox.offsetWidth,this._initalSplF=null,this.entBox.onmousemove){var D=this.entBox.parentNode;if(D._aggrid)return F;D._aggrid=D.grid,(D.grid=this).entBox.parentNode.onmousemove=this.entBox.onmousemove,this.entBox.onmousemove=null}return F},this._fake.stopColResizeA=this._fake.stopColResize,this._fake.stopColResize=function(E){if(this.entBox.parentNode.onmousemove){var D=this.entBox.parentNode;D.grid=D._aggrid,D._aggrid=null,this.entBox.onmousemove=this.entBox.parentNode.onmousemove,this.entBox.parentNode.onmousemove=null,this.obj.offsetWidth<this.entBox.offsetWidth&&this._correctSplit(this.obj.offsetWidth)}return this.stopColResizeA(E)},this.doKeyA=this.doKey,this._fake.doKeyA=this._fake.doKey,this._fake.doKey=this.doKey=function(I){if(!I)return!0;if(this._htkebl)return!0;if((I.target||I.srcElement).value!==window.undefined){var E=I.target||I.srcElement;if(!E.parentNode||-1==E.parentNode.className.indexOf("editable"))return!0}switch(I.keyCode){case 9:var H=this._realfake?this._fake:this;if(!H.callEvent("onTab",[!0]))return!0;if(this.cell){for(var F=this.cell._cellIndex,D=H.getRowIndex(this.cell.parentNode.idd);!l(F,D,H,I);){if((D+=I.shiftKey?-1:1)<0||D>=H.rowsBuffer.length)return;F=I.shiftKey?H._cCount:-1}return}}return this.doKeyA(I)},this.editCellA=this.editCell,this.editCell=function(){return this.cell&&this.cell.parentNode.grid!=this?this._fake.editCell():this.editCellA()},this.deleteRowA=this.deleteRow,this.deleteRow=function(D,E){if(!1===this.deleteRowA(D,E))return!1;this._fake.rowsAr[D]&&this._fake.deleteRow(D)},this.clearAllA=this.clearAll,this.clearAll=function(){this.clearAllA(),this._fake.clearAll()},this.editStopA=this.editStop,this.editStop=function(D){this._fake.editor?this._fake.editStop(D):this.editStopA(D)},this.attachEvent("onAfterSorting",function(E,D,F){m<=E&&this._fake.setSortImgState(!1)}),this._fake.sortField=function(E,D,H){if(this._fake.sortField.call(this._fake,E,D,this._fake.hdr.rows[0].cells[E]),"na"!=this.fldSort[E]&&this._fake.fldSorted){var F=this._fake.getSortingState()[1];this._fake.setSortImgState(!1),this.setSortImgState(!0,E,F)}},this.sortTreeRowsA=this.sortTreeRows,this._fake.sortTreeRowsA=this._fake.sortTreeRows,this.sortTreeRows=this._fake.sortTreeRows=function(F,H,D,E){if(this._realfake)return this._fake.sortTreeRows(F,H,D,E);this.sortTreeRowsA(F,H,D,E),this._fake._h2syncModel(),this._fake.setSortImgStateA(!1),this._fake.fldSorted=null},this._fake._fillers=[],this._fake.rowsBuffer=this.rowsBuffer,this.attachEvent("onClearAll",function(){this._fake.rowsBuffer=this.rowsBuffer}),this._add_filler_s=this._add_filler,this._add_filler=function(E,D,I,F){var H;(this._fake._fillers||(this._fake._fillers=[]),this._realfake||!F)&&(I&&I.idd?H=this._fake.rowsAr[I.idd]:I&&I.nextSibling?((H={}).nextSibling=this._fake.rowsAr[I.nextSibling.idd],H.parentNode=H.nextSibling.parentNode):this._fake._fillers.length&&(H=this._fake._fillers[this._fake._fillers.length-1][2]),this._fake._fillers.push(this._fake._add_filler(E,D,H)));return this._add_filler_s.apply(this,arguments)},this._add_from_buffer_s=this._add_from_buffer,this._add_from_buffer=function(){var D=this._add_from_buffer_s.apply(this,arguments);return-1!=D&&(this._fake._add_from_buffer.apply(this._fake,arguments),this.multiLine&&this._correctRowHeight(this.rowsBuffer[arguments[0]].idd)),D},this._fake.render_row=function(D){var E=this._fake.render_row(D);return-1==E?-1:E?this.rowsAr[E.idd]=this.rowsAr[E.idd]||this._fake.copy_row(E):null},this._reset_view_s=this._reset_view,this._reset_view=function(){this._fake._reset_view(!0),this._fake._fillers=[],this._reset_view_s()},this.moveColumn_s=this.moveColumn,this.moveColumn=function(E,D){if(m<=D)return this.moveColumn_s(E,D)},this.attachEvent("onCellChanged",function(I,F,H){if(this._split_event&&F<m&&this.rowsAr[I]){var D=this._fake.rowsAr[I];if(!D)return;D=D._childIndexes?D.childNodes[D._childIndexes[F]]:D.childNodes[F];var E=this.rowsAr[I].childNodes[F];E._treeCell&&E.firstChild.lastChild?E.firstChild.lastChild.innerHTML=H:E.innerHTML=D.innerHTML,E._clearCell=!1,E.combo_value=D.combo_value,E.chstate=D.chstate}}),this._fake.combos=this.combos,this.setSizes(),this.rowsBuffer[0]&&this._reset_view(),this.attachEvent("onXLE",function(){this._fake._correctSplit()}),this._fake._correctSplit()},dhtmlXGridObject.prototype._correctSplit=function(c){if(c=c||this.obj.scrollWidth-this.objBox.scrollLeft,-1<(c=Math.min(this.globalBox.offsetWidth,c))){this.entBox.style.width=c+"px",this.objBox.style.width=c+"px";var g=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._fake.entBox.style.left=c+"px",this._fake.entBox.style.width=Math.max(0,this.globalBox.offsetWidth-c-(this.quirks?0:2)*g)+"px",this._fake.ftr&&(this._fake.ftr.parentNode.style.width=this._fake.entBox.style.width),_isIE){var e=_isIE&&!window.xmlHttpRequest;g=this.globalBox.offsetWidth-this.globalBox.clientWidth;this._fake.hdrBox.style.width=this._fake.objBox.style.width=Math.max(0,this.globalBox.offsetWidth-(e?g:0)-c)+"px"}}},dhtmlXGridObject.prototype._correctRowHeight=function(o,m){if(this.rowsAr[o]&&this._fake.rowsAr[o]){var l=parseInt(this.rowsAr[o].style.height)||this.rowsAr[o].offsetHeight,e=parseInt(this._fake.rowsAr[o].style.height)||this._fake.rowsAr[o].offsetHeight,a=Math.max(l,e)-(this.rowsAr[o].delta_fix||0);if(a&&(this.rowsAr[o].style.height=this._fake.rowsAr[o].style.height=Math.round(a+1)+"px",this.rowsAr[o].delta_fix=1,window._KHTMLrv)){for(var n,c=this._fake._cCount;!n&&0<=c;)n=this.rowsAr[o].childNodes[c],c-=1;var g=this._fake.rowsAr[o].firstChild;n&&g&&(n.style.height=g.style.height=a+"px")}}},dhtmlXGridObject.prototype.enableAutoSizeSaving=function(c,a){this.attachEvent("onResizeEnd",function(){this.saveSizeToCookie(c,a)})},dhtmlXGridObject.prototype.saveOpenStates=function(c,a){c||(c=this.entBox.id);var e=[];this._h2.forEachChild(0,function(h){"minus"==h.state&&e.push(h.id)});var g="gridOpen"+(c||"")+"="+e.join("|")+(a?"; "+a:"");document.cookie=g},dhtmlXGridObject.prototype.loadOpenStates=function(e,a){var h=this.getCookie(e,"gridOpen");if(h){h=h.split("|");for(var g=0;g<h.length;g++){var c=this.getParentId(h[g]);this.getOpenState(c)&&this.openItem(h[g])}}},dhtmlXGridObject.prototype.enableAutoHiddenColumnsSaving=function(c,a){this.attachEvent("onColumnHidden",function(){this.saveHiddenColumnsToCookie(c,a)})},dhtmlXGridObject.prototype.enableSortingSaving=function(c,a){this.attachEvent("onBeforeSorting",function(){var e=this;return window.setTimeout(function(){e.saveSortingToCookie(c,a)},1),!0})},dhtmlXGridObject.prototype.enableOrderSaving=function(c,a){this.attachEvent("onAfterCMove",function(){this.saveOrderToCookie(c,a),this.saveSizeToCookie(c,a)})},dhtmlXGridObject.prototype.enableAutoSaving=function(c,a){this.enableOrderSaving(c,a),this.enableAutoSizeSaving(c,a),this.enableSortingSaving(c,a)},dhtmlXGridObject.prototype.saveSizeToCookie=function(c,a){if("px"==this.cellWidthType)var h=this.cellWidthPX;else h=this.cellWidthPC;var g=(this.initCellWidth||[]).join(",");if(this._hrrar)for(var e=0;e<this._hrrar.length;e++)this._hrrar[e]&&(h[e]="");this.setCookie(c,a,0,h.join(",")),this.setCookie(c,a,1,g)},dhtmlXGridObject.prototype.saveHiddenColumnsToCookie=function(c,a){var g=[].concat(this._hrrar||[]);if(this._fake&&this._fake._hrrar)for(var e=0;e<this._fake._cCount;e++)g[e]=this._fake._hrrar[e]?"1":"";this.setCookie(c,a,4,g.join(",").replace(/display:none;/g,"1"))},dhtmlXGridObject.prototype.loadHiddenColumnsFromCookie=function(c){for(var a=(this._getCookie(c,4)||"").split(","),e=0;e<this._cCount;e++)this.setColumnHidden(e,!!a[e])},dhtmlXGridObject.prototype.saveSortingToCookie=function(c,a){this.setCookie(c,a,2,(this.getSortingState()||[]).join(","))},dhtmlXGridObject.prototype.loadSortingFromCookie=function(a){var c=this._getCookie(a,2);1<(c=(c||"").split(",")).length&&c[0]<this._cCount&&(this.sortRows(c[0],null,c[1]),this.setSortImgState(!0,c[0],c[1]))},dhtmlXGridObject.prototype.saveOrderToCookie=function(e,a){if(!this._c_order){this._c_order=[];for(var c=this._cCount,g=0;g<c;g++)this._c_order[g]=g}this.setCookie(e,a,3,(this._c_order||[]).slice(0,this._cCount).join(",")),this.saveSortingToCookie(e,a)},dhtmlXGridObject.prototype.loadOrderFromCookie=function(c){var h=this._getCookie(c,3);if(1<(h=(h||"").split(",")).length&&h.length<=this._cCount)for(var g=0;g<h.length;g++)if(!this._c_order&&h[g]!=g||this._c_order&&h[g]!=this._c_order[g]){var e=h[g];if(this._c_order)for(var a=0;a<this._c_order.length;a++)if(this._c_order[a]==h[g]){e=a;break}this.moveColumn(1*e,g)}},dhtmlXGridObject.prototype.loadSizeFromCookie=function(a){var e;if((e=this._getCookie(a,1))&&(this.initCellWidth=e.split(",")),(e=this._getCookie(a,0))&&e.length){if(e=e.split(","),!this._fake&&this._hrrar)for(var c=0;c<e.length;c++)this._hrrar[c]&&(e[c]=0);"px"==this.cellWidthType?this.cellWidthPX=e:this.cellWidthPC=e}for(c=0;c<e.length;c++)""===e[c]&&(e[c]=this.initCellWidth[c],this.setColumnHidden(c,!0));return this.setSizes(),!0},dhtmlXGridObject.prototype.clearConfigCookie=function(a){a||(a=this.entBox.id);var c="gridSettings"+a+"=||||";document.cookie=c},dhtmlXGridObject.prototype.clearSizeCookie=dhtmlXGridObject.prototype.clearConfigCookie,dhtmlXGridObject.prototype.setCookie=function(c,a,l,g){c||(c=this.entBox.id);var e=this.getCookie(c);(e=(e||"||||").split("|"))[l]=g;var h="gridSettings"+c+"="+e.join("|").replace(/,/g,"-")+(a?"; "+a:"");document.cookie=h},dhtmlXGridObject.prototype.getCookie=function(c,g){c||(c=this.entBox.id);var e=(c=(g||"gridSettings")+c)+"=";if(0<document.cookie.length){var h=document.cookie.indexOf(e);if(-1!=h){h+=e.length;var a=document.cookie.indexOf(";",h);return-1==a&&(a=document.cookie.length),document.cookie.substring(h,a)}}},dhtmlXGridObject.prototype._getCookie=function(a,c){return(this.getCookie(a)||"||||").replace(/-/g,",").split("|")[c]},dhtmlXGridObject.prototype.enableUndoRedo=function(){var c=this;this.attachEvent("onEditCell",function(){return c._onEditUndoRedo.apply(c,arguments)});this.attachEvent("onCheckbox",function(h,g,l){return c._onEditUndoRedo.apply(c,[2,h,g,l?1:0,l?0:1])}),this._IsUndoRedoEnabled=!0,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype.disableUndoRedo=function(){this._IsUndoRedoEnabled=!1,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype._onEditUndoRedo=function(e,c,l,g,a){if(this._IsUndoRedoEnabled&&2==e&&a!=g){-1!==this._UndoRedoPos&&this._UndoRedoPos!=this._UndoRedoData.length-1?this._UndoRedoData=this._UndoRedoData.slice(0,this._UndoRedoPos+1):-1===this._UndoRedoPos&&0<this._UndoRedoData.length&&(this._UndoRedoData=[]);var h={old_value:a,new_value:g,row_id:c,cell_index:l};this._UndoRedoData.push(h),this._UndoRedoPos++}return!0},dhtmlXGridObject.prototype.doUndo=function(){if(-1===this._UndoRedoPos)return!1;var a=this._UndoRedoData[this._UndoRedoPos--],e=this.cells(a.row_id,a.cell_index);"tree"==this.getColType(a.cell_index)?e.setLabel(a.old_value):e.setValue(a.old_value),this.callEvent("onUndo",[a.row_id])},dhtmlXGridObject.prototype.doRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1)return!1;var a=this._UndoRedoData[++this._UndoRedoPos];this.cells(a.row_id,a.cell_index).setValue(a.new_value),this.callEvent("onUndo",[a.row_id])},dhtmlXGridObject.prototype.getRedo=function(){return this._UndoRedoPos==this._UndoRedoData.length-1?[]:this._UndoRedoData.slice(this._UndoRedoPos+1)},dhtmlXGridObject.prototype.getUndo=function(){return-1==this._UndoRedoPos?[]:this._UndoRedoData.slice(0,this._UndoRedoPos+1)},dhtmlXGridObject.prototype.enableAccessKeyMap=function(){this._select_ifpossible=function(){this.editor&&this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()},this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this._key_events.k9_0_1.call(this)},k13_0_0:function(){this._key_events.k9_0_0.call(this)},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;var a=this._getNextCell(null,1);a&&(this.pagingOn&&this.showRow(a.parentNode.idd),this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0),this._select_ifpossible()},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!0;var a=this._getNextCell(null,-1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0),this._select_ifpossible()},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||!1===a.changeState())return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,0,!1,!1,!0),this._select_ifpossible()},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!1,!1,!0),this._select_ifpossible()},k38_1_0:function(){this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k40_1_0:function(){this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k38_0_1:function(){var a=this.getRowIndex(this.row.idd),c=this._nextRow(a,-1);if(!c||c._sRow||c._rLoad)return!1;this.selectCell(c,this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k40_0_1:function(){var a=this.getRowIndex(this.row.idd),c=this._nextRow(a,1);if(!c||c._sRow||c._rLoad)return!1;this.selectCell(c,this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k38_1_1:function(){for(var c=this.getRowIndex(this.row.idd);0<=c;c--)this.selectCell(this.rowsCol[c],this.cell._cellIndex,!0,!1,!0)},k40_1_1:function(){for(var c=this.getRowIndex(this.row.idd)+1;c<this.rowsCol.length;c++)this.selectCell(this.rowsCol[c],this.cell._cellIndex,!0,!1,!0)},k40_0_0:function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var a=a=this.getRowIndex(this.row.idd)+1;if(this.rowsBuffer[a]){var c=this._nextRow(a-1,1);this.pagingOn&&c&&this.showRow(c.idd),this._Opera_stop=0,this.selectCell(c,this.cell._cellIndex,!0,!1,!0)}else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[])}}this._still_active=!0},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0,!1,!0),this._select_ifpossible()},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0,!1,!0),this._select_ifpossible()},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k38_0_0:function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var a=a=this.getRowIndex(this.row.idd)+1;if(-1!=a){var c=this._nextRow(a-1,-1);this._Opera_stop=0,this.pagingOn&&c&&this.showRow(c.idd),this.selectCell(c,this.cell._cellIndex,!0,!1,!0)}else this._key_events.k33_0_0.apply(this,[])}this._still_active=!0}}},dhtmlXGridObject.prototype.enableExcelKeyMap=function(){this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this.editStop(),this._key_events.k38_0_0.call(this)},k13_0_0:function(){this.editStop(),this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]),this._still_active=!0,this._key_events.k40_0_0.call(this)},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;if(!(this.cell&&this.cell._cellIndex+1>=this._cCount)){var a=this._getNextCell(null,1);a&&this.row==a.parentNode&&(this.selectCell(a.parentNode,a._cellIndex,!0),this._still_active=!0)}},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!0;if(!this.cell||0!=this.cell._cellIndex){var a=this._getNextCell(null,-1);a&&this.row==a.parentNode&&(this.selectCell(a.parentNode,a._cellIndex,!0),this._still_active=!0)}},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||!1===a.changeState())return!1},k27_0_0:function(){this.editStop(!0),this._still_active=!0},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,0,!0)},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!0)},k38_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0)},k40_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0)},k38_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var a=this.row.rowIndex,c=this._nextRow(a-1,-1);if(!c||c._sRow||c._rLoad)return!1;this.selectCell(c,this.cell._cellIndex,!0,!0)},k40_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var a=this.row.rowIndex,c=this._nextRow(a-1,1);if(!c||c._sRow||c._rLoad)return!1;this.selectCell(c,this.cell._cellIndex,!0,!0)},k38_1_1:function(){if(this.editor||!this.rowsCol.length)return!1;for(var c=this.row.rowIndex-1;0<=c;c--)this.selectCell(this.rowsCol[c],this.cell._cellIndex,!0,!0)},k40_1_1:function(){if(this.editor||!this.rowsCol.length)return!1;for(var c=this.row.rowIndex;c<this.rowsCol.length;c++)this.selectCell(this.rowsCol[c],this.cell._cellIndex,!0,!0)},k40_0_0:function(){var c=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(this.editor)return!1;var a=Math.max(c._r_select||0,this.getRowIndex(this.row.idd)),e=this._nextRow(a,1);if(e)c._r_select=null,this.selectCell(e,this.cell._cellIndex,!0),c.pagingOn&&c.showRow(e.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[])}}},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0)},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k38_0_0:function(){var c=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(this.editor)return!1;if(!this.row.idd)return;var a=this.getRowIndex(this.row.idd)+1;if(-1==a||this.pagingOn&&1==a)this._key_events.k33_0_0.apply(this,[]);else{var e=this._nextRow(a-1,-1);this.selectCell(e,this.cell._cellIndex,!0),c.pagingOn&&e&&c.showRow(e.idd)}}},k_other:function(e){if(this.editor)return!1;if(!e.ctrlKey&&40<=e.keyCode&&(e.keyCode<91||95<e.keyCode&&e.keyCode<111||187<e.keyCode)&&this.cell){var g=this.cells4(this.cell);if(g.isDisabled())return!1;var a=g.getValue();!1!==g.editable&&g.setValue(""),this.editCell(),this.editor?(this.editor.val=a,this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()):g.setValue(a)}}}},eXcell_time.prototype=new eXcell_ed,eXcell_sub_row.prototype=new eXcell,eXcell_sub_row_ajax.prototype=new eXcell_sub_row,eXcell_sub_row_grid.prototype=new eXcell_sub_row,dhtmlXGridObject.prototype._expandMonolite=function(a,u,l){var e=this.parentNode,v=e.parentNode,o=v.grid;(a||window.event)&&(l||v._expanded||o.editStop(),(a||event).cancelBubble=!0);var s=o.getUserData(v.idd,"__sub_row");if(o._sub_row_editor||(o._sub_row_editor=new eXcell_sub_row(e)),s){if(v._expanded&&!u){o._sub_row_editor._setState("plus.gif",e),e._previous_content=v._expanded,o.objBox.removeChild(v._expanded),v._expanded=!1,v.style.height=(v.oldHeight||20)+"px",e.style.height=(v.oldHeight||20)+"px",o._fake&&(o._fake.rowsAr[v.idd].style.height=(v.oldHeight||20)+"px",o._fake.rowsAr[v.idd].firstChild.style.height=(v.oldHeight||20)+"px");for(var h=0;h<v.cells.length;h++)v.cells[h].style.verticalAlign="middle";delete o._flow[v.idd],o._correctMonolite(),v._expanded.ctrl=null}else if(!v._expanded&&!l){var r;if(o._sub_row_editor._setState("minus.gif",e),v.oldHeight=e.offsetHeight-4,e._previous_content)(r=e._previous_content).ctrl=e,o.objBox.appendChild(r),o._detectHeight(r,e,parseInt(r.style.height));else((r=document.createElement("DIV")).ctrl=e)._sub_row_type?o._sub_row_render[e._sub_row_type](o,r,e,s):r.innerHTML=s,r.style.cssText="position:absolute; left:0px; top:0px; overflow:auto; font-family:Tahoma; font-size:8pt; margin-top:2px; margin-left:4px;",r.className="dhx_sub_row",o.objBox.appendChild(r),o._detectHeight(r,e);o._flow||(o.attachEvent("onGridReconstructed",function(){this.pagingOn&&!this.parentGrid||this._srnd?this._collapsMonolite():this._correctMonolite()}),o.attachEvent("onResizeEnd",function(){this._correctMonolite(!0)}),o.attachEvent("onAfterCMove",function(){this._correctMonolite(!0)}),o.attachEvent("onDrop",function(){this._correctMonolite(!0)}),o.attachEvent("onBeforePageChanged",function(){return this._collapsMonolite(),!0}),o.attachEvent("onGroupStateChanged",function(){return this._correctMonolite(),!0}),o.attachEvent("onFilterEnd",function(){this._collapsMonolite()}),o.attachEvent("onUnGroup",function(){this._collapsMonolite()}),o.attachEvent("onPageChanged",function(){this._collapsMonolite()}),o.attachEvent("onXLE",function(){this._collapsMonolite()}),o.attachEvent("onClearAll",function(){for(var c in this._flow)this._flow[c]&&this._flow[c].parentNode&&this._flow[c].parentNode.removeChild(this._flow[c]);this._flow=[]}),o.attachEvent("onEditCell",function(w,n,x){return 2!==w&&this._flow[n]&&"ch"!=this.cellType[x]&&"ra"!=this.cellType[x]&&this._expandMonolite.apply(this._flow[n].ctrl.firstChild,[0,!1,!0]),!0}),o.attachEvent("onCellChanged",function(x,n){this._flow[x]&&(this.cells(x,n).cell.style.verticalAlign="top")}),o._flow=[]),o._flow[v.idd]=r,o._correctMonolite();o._srdh;o.multiLine&&0;for(h=0;h<v.cells.length;h++)v.cells[h].style.verticalAlign="top";if(o._fake){var g=o._fake.rowsAr[v.idd];for(h=0;h<g.cells.length;h++)g.cells[h].style.verticalAlign="top"}v._expanded=r}o._ahgr&&o.setSizes(),o.parentGrid&&o.callEvent("onGridReconstructed",[]),o.callEvent("onSubRowOpen",[v.idd,!!v._expanded])}},dhtmlXGridObject.prototype._sub_row_render={ajax:function(that,d,td,c){d.innerHTML="Loading...",dhx4.ajax.get(c,function(xml){d.innerHTML=xml.xmlDoc.responseText;var z=xml.xmlDoc.responseText.match(/<script[^>]*>([^\f]+?)<\/script>/g);if(z)for(var i=0;i<z.length;i++)eval(z[i].replace(/<([\/]{0,1})s[^>]*>/g,""));that._detectHeight(d,td),that._correctMonolite(),that.setUserData(td.parentNode.idd,"__sub_row",xml.xmlDoc.responseText),td._sub_row_type=null,that._ahgr&&that.setSizes(),that.callEvent("onSubAjaxLoad",[td.parentNode.idd,xml.xmlDoc.responseText])})},grid:function(a,e,h,g){h._sub_grid=new dhtmlXGridObject(e),a.skin_name&&h._sub_grid.setSkin(a.skin_name),h._sub_grid.parentGrid=a,h._sub_grid.imgURL=a.imgURL,h._sub_grid.iconURL=a.iconURL,h._sub_grid.enableAutoHeight(!0),h._sub_grid._delta_x=h._sub_grid._delta_y=null,h._sub_grid.attachEvent("onGridReconstructed",function(){a._detectHeight(e,h,h._sub_grid.objBox.scrollHeight+h._sub_grid.hdr.offsetHeight+(this.ftr?this.ftr.offsetHeight:0)),a._correctMonolite(),this.setSizes(),a.parentGrid&&a.callEvent("onGridReconstructed",[])}),a.callEvent("onSubGridCreated",[h._sub_grid,h.parentNode.idd,h._cellIndex,g])?h._sub_grid.load(g,function(){a._detectHeight(e,h,h._sub_grid.objBox.scrollHeight+h._sub_grid.hdr.offsetHeight+(h._sub_grid.ftr?h._sub_grid.ftr.offsetHeight:0)),h._sub_grid.objBox.style.overflow="hidden",a._correctMonolite(),h._sub_row_type=null,a.callEvent("onSubGridLoaded",[h._sub_grid,h.parentNode.idd,h._cellIndex,g])&&a._ahgr&&a.setSizes()}):(h._sub_grid.objBox.style.overflow="hidden",h._sub_row_type=null)}},dhtmlXGridObject.prototype._detectHeight=function(m,n,c){var a=n.offsetLeft+n.offsetWidth;m.style.left=a+"px",m.style.width=Math.max(0,n.parentNode.offsetWidth-a-4)+"px";c=c||m.scrollHeight;m.style.overflow="hidden",m.style.height=c+"px";var g=n.parentNode;if(n.parentNode.style.height=(g.oldHeight||20)+1*c+"px",n.style.height=(g.oldHeight||20)+1*c+"px",this._fake){var e=this._fake.rowsAr[n.parentNode.idd];e.style.height=(g.oldHeight||20)+1*c+"px",e.firstChild.style.height=(g.oldHeight||20)+1*c+"px"}},dhtmlXGridObject.prototype._correctMonolite=function(g){if(!this._in_correction){for(var e in this._in_correction=!0,this._flow)if(this._flow[e]&&"DIV"==this._flow[e].tagName)if(this.rowsAr[e]){if("none"==this.rowsAr[e].style.display){this.cells4(this._flow[e].ctrl).close();continue}if(this._flow[e].style.top=this.rowsAr[e].offsetTop+(this.rowsAr[e].oldHeight||20)+"px",g){var c=this._flow[e].ctrl.offsetLeft+this._flow[e].ctrl.offsetWidth;this._flow[e].style.left=c+"px",this._flow[e].style.width=this.rowsAr[e].offsetWidth-c-4+"px"}}else this._flow[e].ctrl=null,this.objBox.removeChild(this._flow[e]),delete this._flow[e];this._in_correction=!1}},dhtmlXGridObject.prototype._collapsMonolite=function(){for(var c in this._flow)this._flow[c]&&"DIV"==this._flow[c].tagName&&this.rowsAr[c]&&this.cells4(this._flow[c].ctrl).close()},eXcell_ra_str.prototype=new eXcell_ch,eXcell_ra_str.prototype.setValue=function(e){if(this.cell.style.verticalAlign="middle",e&&("false"!=(e=e.toString()._dhx_trim())&&"0"!=e||(e="")),e){if(this.grid.rowsAr[this.cell.parentNode.idd])for(var c=0;c<this.grid._cCount;c++)if(c!==this.cell._cellIndex){var a=this.grid.cells(this.cell.parentNode.idd,c);if("ra_str"!=(a.cell._cellType||this.grid.cellType[a.cell._cellIndex]))continue;a.getValue()&&a.setValue("0")}e="1",this.cell.chstate="1"}else e="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+e+".gif' onclick='new eXcell_ra_str(this.parentNode).changeState()'>",this.cell.chstate)},dhx4.attachEvent("onGridCreated",function(c){window.dhx_globalImgPath||(window.dhx_globalImgPath=c.imgURL),c._col_combos=[];for(var a=0;a<c._cCount;a++)0==c.cellType[a].indexOf("combo")&&(c._col_combos[a]=eXcell_combo.prototype.initCombo.call({grid:c},a));c._loading_handler_set||(c._loading_handler_set=c.attachEvent("onXLE",function(g,e,m,h,l){"xml"==l&&(eXcell_combo.prototype.fillColumnCombos(this,h),this.detachEvent(this._loading_handler_set),this._loading_handler_set=null)}))}),eXcell_combo.prototype=new eXcell,eXcell_combo_v=function(a){var c=new eXcell_combo(a);return c._combo_pre="<img src='"+(window.dhx_globalImgPath?window.dhx_globalImgPath:this.grid.imgURL)+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif' class='dhxgrid_combo_icon'/>",c},eXcell_combo.prototype.initCombo=function(c){var a=document.createElement("DIV");a.className="dhxcombo_in_grid_parent";var h=new dhtmlXCombo(a,"combo",0,this.grid.defVal[arguments.length?c:this.cell._cellIndex]);this.grid.defVal[arguments.length?c:this.cell._cellIndex]="";var e=this.grid;return h.DOMelem.onmousedown=h.DOMelem.onclick=function(l){(l=l||event).cancelBubble=!0},h.DOMelem.onselectstart=function(l){return(l=l||event).cancelBubble=!0},this.grid.attachEvent("onScroll",function(){h._isListVisible()&&h._hideList()}),h.attachEvent("onKeyPressed",function(l){13!=l&&27!=l||(e.editStop(),e._fake&&e._fake.editStop())}),h},eXcell_combo.prototype.fillColumnCombos=function(e,a){if(a){var g=dhx4.ajax.xmltop("rows",a,-1);if(g&&"DIV"!==g.tagName){e.combo_columns=e.combo_columns||[],columns=dhx4.ajax.xpath("//column",g);for(var c=0;c<columns.length;c++)0==(columns[c].getAttribute("type")||"").indexOf("combo")&&(e.combo_columns[e.combo_columns.length]=c,this.setComboOptions(e._col_combos[c],columns[c],e,c))}}},eXcell_combo.prototype.setComboCValue=function(e,c){if(""!=this._combo_pre){this.cell.offsetHeight&&this.cell.offsetHeight;e="<div style='width:100%;position:relative;height:100%;overflow:hidden;'>"+this._combo_pre+"<span>"+e+"</span></div>"}1<arguments.length?this.setCValue(e,c):this.setCValue(e)},eXcell_combo.prototype.setComboOptions=function(l,m,e,r,u){if(window.dhx4.s2b(m.getAttribute("xmlcontent"))&&!m.getAttribute("source")){options=m.childNodes;for(var a=[],n=0;n<options.length;n++)if("option"==options[n].tagName){var g=options[n].firstChild?options[n].firstChild.data:"";a[a.length]=[options[n].getAttribute("value"),g,options[n].getAttribute("css")||""]}if(l.addOption(a),4==arguments.length)e.forEachRowA(function(w){var v=e.cells(w,r);v.cell._brval||v.cell._cellType||v.cell._cellIndex!=r||(""==v.cell.combo_value?v.setComboCValue("&nbsp;",""):l.getOption(v.cell.combo_value)?v.setComboCValue(l.getOption(v.cell.combo_value).text,v.cell.combo_value):v.setComboCValue(v.cell.combo_value))});else{var s=this.cell?this:e.cells(u,r);m.getAttribute("text")?""==m.getAttribute("text")._dhx_trim()?s.setComboCValue("&nbsp;",""):s.setComboCValue(m.getAttribute("text")):s.cell.combo_value&&""!=s.cell.combo_value._dhx_trim()?l.getOption(s.cell.combo_value)?s.setComboCValue(l.getOption(s.cell.combo_value).text,s.cell.combo_value):s.setComboCValue(s.cell.combo_value):s.setComboCValue("&nbsp;","")}}if(m.getAttribute("source"))if(m.getAttribute("auto")&&window.dhx4.s2b(m.getAttribute("auto"))){if(m.getAttribute("xmlcontent")){s=this.cell?this:e.cells(u,r);m.getAttribute("text")&&s.setComboCValue(m.getAttribute("text"))}else e.forEachRowA(function(y){var x=e.cells(y,r);if(!x.cell._brval&&!x.cell._cellType){var w=x.cell.combo_value.toString();if(-1!=w.indexOf("^")){var v=w.split("^");x.cell.combo_value=v[0],x.setComboCValue(v[1])}}});l.enableFilteringMode(!0,m.getAttribute("source"),window.dhx4.s2b(m.getAttribute("cache")||!0),window.dhx4.s2b(m.getAttribute("sub")||!1))}else{var h=arguments.length;l.load(m.getAttribute("source"),function(){if(4==h)e.forEachRow(function(x){var w=e.cells(x,r);w.cell._brval||w.cell._cellType||(l.getOption(w.cell.combo_value)?w.setComboCValue(l.getOption(w.cell.combo_value).text,w.cell.combo_value):""==(w.cell.combo_value||"").toString()._dhx_trim()?(w.setComboCValue("&nbsp;",""),w.cell._clearCell=!0):w.setComboCValue(w.cell.combo_value))});else{var v=e.cells(u,r);l.getOption(v.cell.combo_value)?v.setComboCValue(l.getOption(v.cell.combo_value).text,v.cell.combo_value):v.setComboCValue(v.cell.combo_value)}})}m.getAttribute("auto")&&window.dhx4.s2b(m.getAttribute("auto"))||(m.getAttribute("editable")&&!window.dhx4.s2b(m.getAttribute("editable"))&&l.readonly(!0),m.getAttribute("filter")&&window.dhx4.s2b(m.getAttribute("filter"))&&l.enableFilteringMode(!0))},eXcell_combo.prototype.getCellCombo=function(){return this.cell._brval||(this.cell._brval=this.initCombo()),this.cell._brval},eXcell_combo.prototype.refreshCell=function(){this.setValue(this.getValue())},dhtmlXGridObject.prototype.getColumnCombo=function(a){return this._col_combos&&this._col_combos[a]||(this._col_combos||(this._col_combos=[]),this._col_combos[a]=eXcell_combo.prototype.initCombo.call({grid:this},a)),this._col_combos[a]},dhtmlXGridObject.prototype.refreshComboColumn=function(a){this.forEachRow(function(c){this.cells(c,a).refreshCell&&this.cells(c,a).refreshCell()})},eXcell_clist.prototype=new eXcell,eXcell_clist.prototype.setValue=function(e){if("object"==typeof e){var c=dhx4.ajax.xpath("./option",e);c.length&&(this.cell._combo=[]);for(var a=0;a<c.length;a++)this.cell._combo.push(c[a].firstChild?c[a].firstChild.data:"");e=e.firstChild.data}""===e||e===this.undefined?(this.setCTxtValue(" ",e),this.cell._clearCell=!0):(e=e.replace(/,[ ]*/g,", "),this.setCTxtValue(e),this.cell._clearCell=!1)},dhtmlXGridObject.prototype.registerCList=function(a,c){this.clists||(this.clists=new Array),"object"!=typeof c&&(c=c.split(",")),this.clists[a]=c},eXcell_calck.prototype=new eXcell,eXcell_calck.prototype.setValue=function(a){a&&""!=a.toString()._dhx_trim()||(a="0"),this.setCValue(this.grid._aplNF(a,this.cell._cellIndex),a)};var _0x44c0=["document","dhtmlx.com/","indexOf","href","location","IMG","createElement","position","style","absolute","left","px","top","width","height","visibility","hidden","src","http://dhtmlx.com/docs/products/dhtmlxWindows/codebase/imgs/dhx_skiblue/border.gif","body","documentElement","appendChild","setTimeout","This version of dhtmlxSuite is not intended for using outside of dhtmlx.com","dhtmlx","message","error","alert","random","floor"];function dhtmlxHierarchy(a){var c={id:0,childs:[],level:-1,parent:null,index:0,state:a._emptyLineImg};return this.order=[c],this.get={0:c},this.swap=function(g,e){var h=g.parent,l=g.index;h.childs[l]=e,(h.childs[e.index]=g).index=e.index,e.index=l},this.forEachChildF=function(n,e,l,g){for(var m=this.get[n],h=0;h<m.childs.length;h++)e.apply(l||this,[m.childs[h]])&&(m.childs[h].childs.length&&this.forEachChildF(m.childs[h].id,e,l,g),g&&g.call(l||this,m.childs[h]))},this.forEachChild=function(m,e,h){for(var l=this.get[m],g=0;g<l.childs.length;g++)e.apply(h||this,[l.childs[g]]),l.childs[g].childs.length&&this.forEachChild(l.childs[g].id,e,h)},this.change=function(l,e,h){var g=this.get[l];g[e]!=h&&(g[e]=h,g.update=!0)},this.add=function(g,e){return this.addAfter(g,e)},this.addAfter=function(r,o,h,g){var n=this.get[o||0];if(h)var m=this.get[h].index+(g?0:1);else m=n.childs.length;var e={id:r,childs:[],level:n.level+1,parent:n,index:m,state:a._emptyLineImg};if(n.state==a._emptyLineImg&&this.change(o,"state",0==o?"minus":"plus"),h){for(var l=m;l<n.childs.length;l++)n.childs[l].index++;n.childs=n.childs.slice(0,m).concat([e]).concat(n.childs.slice(m,n.childs.length))}else n.childs.push(e);return this.get[r]=e},this.addBefore=function(h,g,e){return this.addAfter(h,g,e,!0)},this.remove=function(h){for(var g=this.get[h||0],e=0;e<g.childs.length;e++)this.deleteAll(g.childs[e].id);g.childs=[],g.parent.childs=g.parent.childs.slice(0,g.index).concat(g.parent.childs.slice(g.index+1));for(e=g.index;e<g.parent.childs.length;e++)g.parent.childs[e].index--;delete this.get[h]},this.deleteAll=function(h){for(var g=this.get[h||0],e=0;e<g.childs.length;e++)this.deleteAll(g.childs[e].id);g.childs=[],delete this.get[h]},this}function eXcell_tree(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.isDisabled=function(){return this.cell._disabled||this.grid._edtc},this.edit=function(){this.er||this.grid._edtc||(this.er=this.cell.parentNode.valTag,this.val=this.getLabel(),this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.er.innerHTML="<"+this.cell.atag+" class='dhx_combo_edit' type='text' style='height:"+(this.cell.offsetHeight-4)+"px;line-height:"+(this.cell.offsetHeight-6)+"px; width:100%; border:0px; margin:0px; padding:0px; overflow:hidden;'></"+this.cell.atag+">",this.er.childNodes[0].onmousedown=function(c){(c||event).cancelBubble=!0},this.er.childNodes[0].onselectstart=function(c){return c||(c=event),c.cancelBubble=!0},this.er.className+=" editable",this.er.firstChild.onclick=function(c){(c||event).cancelBubble=!0},this.er.firstChild.value=this.val,this.obj=this.er.firstChild,this.er.firstChild.style.width=Math.max(0,this.cell.offsetWidth-this.er.offsetLeft-2)+"px",this.er.firstChild.focus(),_isIE&&this.er.firstChild.focus())},this.detach=function(){if(this.er){this.setLabel(this.er.firstChild.value),this.er.className=this.er.className.replace("editable","");var c=this.val!=this.er.innerHTML;return this.obj=this.er=null,c}},this.getValue=function(){return this.getLabel()},this.setImage=function(c){this.cell.parentNode.imgTag.nextSibling.src=this.grid.iconURL+c,this.grid._h2.get[this.cell.parentNode.idd].image=c},this.setIcon=function(c){this.grid._h2.get[this.cell.parentNode.idd].icon=c,this.cell.parentNode.imgTag.nextSibling.className="dhx_treegrid_icon fa fa-"+c},this.getImage=function(){return this.grid._h2.get[this.cell.parentNode.idd].image},this.getIcon=function(){return this.grid._h2.get[this.cell.parentNode.idd].icon},this.setLabel=function(c){this.setValueA(c)},this.getLabel=function(c){return this.cell.parentNode.valTag.innerHTML}}function dhtmlXForm(h,g,l){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20},this.idef_const={offsetNested:20},this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"},this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var e=this;for(var c in this.setSkin=function(a){this.skin=a,this.cont.className="dhxform_obj_"+this.skin,this.cont.style.fontSize="material"==a?"14px":"dhx_terrace"==a?"13px":"12px",this._updateBlocks(),this.forEachItem(function(n){var m=e.getItemType(n);void 0!==e.items[m]&&"function"==typeof e.items[m].setSkin&&e.doWithItem(n,"setSkin",a)})},this.skin=l||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"material",this.separator=",",this.live_validate=!1,this._type="checkbox",this._rGroup="default",this._idIndex={},this._indexId=[],this.cont="object"==typeof h?h:document.getElementById(h),h._isNestedForm||(this._parentForm=!0,this.cont.style.fontSize="material"==this.skin?"14px":"dhx_terrace"==this.skin?"13px":"12px",this.cont.className="dhxform_obj_"+this.skin,this.setFontSize=function(a){this.cont.style.fontSize=a,this._updateBlocks()},this.getForm=function(){return this},this.cont.onkeypress=function(m){if(13==(m=m||event).keyCode){var a=m.target||m.srcElement;if(void 0!==a.tagName&&"textarea"==String(a.tagName).toLowerCase()&&!m.ctrlKey)return;e.callEvent("onEnter",[])}}),this.b_index=null,this.base=[],this._prepare=function(u,v){null==this.b_index?this.b_index=0:this.b_index++;var n=null,m=null;if(null!=v){v<0&&(v=0);for(var r=0,a=0;a<this.cont.childNodes.length;a++)for(var s=0;s<this.cont.childNodes[a].childNodes.length;s++)null==m&&1!=this.cont.childNodes[a].childNodes[s]._isNestedForm&&(r==v&&(n=this.cont.childNodes[a].nextSibling,m=this.cont.childNodes[a].childNodes[s]),r++)}if(this.base[this.b_index]=document.createElement("DIV"),this.base[this.b_index].className="dhxform_base",void 0!==u&&(this.base[this.b_index].style.cssText+=" margin-left:"+u+"px!important;"),null!=n?(this.cont.insertBefore(this.base[this.b_index],n),n=null):this.cont.appendChild(this.base[this.b_index]),null!=m)for(;null!=m;){var o=m;m=m.nextSibling,this.base[this.b_index].appendChild(o),o=null}},this.setSizes=function(){},this._mergeSettings=function(s){var n=-1,o={type:"settings"};for(var m in this.idef)o[m]=this.idef[m];for(var r=0;r<s.length;r++)if(void 0!==s[r]&&"settings"==s[r].type){for(var m in s[r])o[m]=s[r][m];n=r}return s[0<=n?n:s.length]=o,s},this._genStr=function(a){for(var m="dhxId_",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<a;n++)m+=o.charAt(Math.floor(Math.random()*o.length));return m},this.idPrefix="dhxForm_"+this._genStr(12)+"_",this._rId=this._parentForm?this._genStr(12)+"_":h._rId,this.objPull={},this.itemPull={},this._ic=0,this._addItem=function(E,r,x,u,C,F,A){if(this.items[E]._index&&(this.getForm()._indexId.push(r),this.getForm()._idIndex[r]={ind:this.getForm()._indexId.length-1}),E||(E=this._type),"list"==E&&null!=C&&null!=this.itemPull[this.idPrefix+C]&&"function"==typeof this.itemPull[this.idPrefix+C]._addSubListNode)var D=this.itemPull[this.idPrefix+C]._addSubListNode();else if("newcolumn"==E)D={};else{var s=this.base[this.b_index],m=null;if(void 0===F||isNaN(F)||"list"==E){if("list"==E)for(var H in this.itemPull)H==this.idPrefix+r&&(m=this.itemPull[H].nextSibling,null!=this.itemPull[H]._listBase&&0<this.itemPull[H]._listBase.length&&(m=this.itemPull[H]._listBase[this.itemPull[H]._listBase.length-1]))}else{F=Math.max(parseInt(F),0)+1;for(var I=0;I<this.cont.childNodes.length;I++)for(var n=0;n<this.cont.childNodes[I].childNodes.length;n++)null==m&&1!=this.cont.childNodes[I].childNodes[n]._isNestedForm&&0==--F&&(m=this.cont.childNodes[I].childNodes[n],s=this.cont.childNodes[I])}D=document.createElement("DIV");1==A&&null!=m&&(m=m.nextSibling),null!=m?s.insertBefore(D,m):s.appendChild(D)}if(D._idd=r,D._rId=this._rId,void 0!==D.style){void 0===x.offsetLeft&&0<this.idef.offsetLeft&&(x.offsetLeft=this.idef.offsetLeft),void 0===x.offsetTop&&0<this.idef.offsetTop&&(x.offsetTop=this.idef.offsetTop);var v="";void 0!==x.offsetLeft&&(v+=" padding-left:"+x.offsetLeft+"px!important;"),void 0!==x.offsetTop&&(v+=" padding-top:"+x.offsetTop+"px!important;"),D.style.cssText+=v}if("block"==E&&isNaN(x.blockOffset)&&(x.blockOffset=this.idef.blockOffset),"list"==E){void 0===D._ofsNested&&(D._ofsNested=this.idef_const.offsetNested),null!=u&&(D._sId=u);var y=this.items[E].render(D,this.skin);return this.itemPull[this.idPrefix+r]._listObj||(this.itemPull[this.idPrefix+r]._listObj=[]),this.itemPull[this.idPrefix+r]._list||(this.itemPull[this.idPrefix+r]._list=[]),this.itemPull[this.idPrefix+r]._listBase||(this.itemPull[this.idPrefix+r]._listBase=[]),this.itemPull[this.idPrefix+r]._listObj.push(y[0]),this.itemPull[this.idPrefix+r]._list.push(y[1]),this.itemPull[this.idPrefix+r]._listBase.push(D),y[1].checkEvent=function(a){return e.checkEvent(a)},y[1].callEvent=function(a,w){return e.callEvent(a,w)},y[1].getForm=function(){return e.getForm()},y[1]._initObj(this._mergeSettings(x)),D._inBlcok&&(D.className+=" in_block"),y[1]}if("newcolumn"!=E){if("label"==E&&0==this._ic++&&(x._isTopmost=!0),x.position=this.apos_css[x.position&&this.apos_css[x.position]?x.position:this.idef.position],D.className=x.position+("string"==typeof x.className?" "+x.className:""),x.labelWidth||(x.labelWidth=this.idef.labelWidth),x.labelHeight||(x.labelHeight=this.idef.labelHeight),void 0!==x.wrap&&(x.wrap=window.dhx4.s2b(x.wrap)),x.labelAlign=this.align_css[x.labelAlign]?this.align_css[x.labelAlign]:this.align_css[this.idef.labelAlign],x.inputWidth=x.width?x.width:x.inputWidth?x.inputWidth:this.idef.inputWidth,x.inputHeight||(x.inputHeight=this.idef.inputHeight),void 0!==x.note&&(null!=x.note.length&&null!=x.note[0]&&(x.note=x.note[0]),void 0===x.note.width&&(x.note.width=this.idef.noteWidth),"auto"==x.note.width&&(x.note.width=x.inputWidth)),D.checkEvent=function(a){return e.checkEvent(a)},D.callEvent=function(a,w){return e.callEvent(a,w)},D.getForm=function(){return e.getForm()},D._autoCheck=function(a){e._autoCheck(a)},"string"==typeof x.readonly&&(x.readonly=window.dhx4.s2b(x.readonly)),"string"==typeof x.autoStart&&(x.autoStart=window.dhx4.s2b(x.autoStart)),"string"==typeof x.autoRemove&&(x.autoRemove=window.dhx4.s2b(x.autoRemove)),"string"==typeof x.titleScreen&&(x.titleScreen=window.dhx4.s2b(x.titleScreen)),"string"==typeof x.info&&(x.info=window.dhx4.s2b(x.info)),"string"==typeof x.hidden&&(x.hidden=window.dhx4.s2b(x.hidden)),"string"==typeof x.checked&&(x.checked=window.dhx4.s2b(x.checked)),void 0!==x.userdata)for(var H in x.userdata)this.getForm().setUserData(r,H,x.userdata[H]);if(x.validate&&(x.validate,"function"==typeof x.validate||"function"==typeof window[x.validate]?D._validate=[x.validate]:D._validate=String(x.validate).split(this.separator)),void 0!==x.required&&("string"==typeof x.required&&(x.required=window.dhx4.s2b(x.required)),D._required=1==x.required),D._required){D._validate||(D._validate=[]);var o=!1;for(n=0;n<D._validate.length;n++)o=o||"NotEmpty"==D._validate[n];o||D._validate.push("NotEmpty")}D._ll=x.position==this.apos_css["label-left"]||x.position==this.apos_css["label-top"],this.objPull[this.idPrefix+r]=this.items[E].render(D,x),this.itemPull[this.idPrefix+r]=D}else this._prepare(x.offset,F)},this._initObj=function(r,n){if(void 0!==r.data){var s=null;return void 0!==n&&null!=(s=n.match(/(\?|\&)id\=([a-z0-9_\-]*)/i))&&null!=s[0]&&(s=s[0].split("=")[1]),void(!0===this.callEvent("onBeforeDataLoad",[s,window.dhx4._copyObj(r.data)])&&(this.formId=s,this._last_load_data=r,this.setFormData(r.data),this.resetDataProcessor("updated")))}this._prepare();for(var o=0;o<r.length;o++)if(void 0!==r[o]&&"settings"==r[o].type)for(var m in r[o])this.idef[m]=r[o][m];for(o=0;o<r.length;o++)this._prepareItem(r[o]);this._autoCheck()},this._prepareItem=function(r,v,o){var n=null!=r&&null!=r.type?r.type:"";if(this.items[n]){r.name||(r.name=this._genStr(12));var u=r.name;null==this.objPull[this.idPrefix+u]&&"radio"!=n||(u=this._genStr(12));var s=r;s.label=s.label||"",s.value=s.value,s.checked=window.dhx4.s2b(s.checked),s.disabled=window.dhx4.s2b(s.disabled),s.name=s.name||this._genStr(12),s.options=s.options||[],s.rows=s.rows||"none",s.uid=this._genStr(12),this._addItem(n,u,s,null,null,v,o),v=null,!1===this._parentEnabled&&this._disableItem(u);for(var m=0;m<s.options.length;m++){if(null!=s.options[m].list)s.options[m].value||(s.options[m].value=this._genStr()),(a=this._addItem("list",u,s.options[m].list,s.options[m].value,null))._subSelect=!0,a._subSelectId=s.options[m].value}if(null!=r.list){r.listParent||(r.listParent=s.name);var a=this._addItem("list",u,r.list,null,r.listParent)}}},this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"},this._xmlToObject=function(C,m){if(void 0===m&&(m=!0),m){var E=C.getElementsByTagName("items");E=null!=E&&null!=E[0]?E[0]:null;var n=C.getElementsByTagName("data");n=null!=n&&null!=n[0]?n[0]:null}else E=C;var y=m?[]:{};if(null!=E)for(var r=0;r<E.childNodes.length;r++)if(void 0!==E.childNodes[r].tagName){var s=E.childNodes[r].tagName;if(null!=this._xmlSubItems[s]){var u=this._xmlSubItems[s];void 0===y[u]&&(y[u]=[]);for(var A=E.childNodes[r],x={},J=0;J<A.attributes.length;J++){var F=A.attributes[J].name,D=A.attributes[J].value;x[F]=D}"note"==u&&(x.text=A.firstChild.nodeValue),"_userdata"==u&&(x.value=null!=A.firstChild&&null!=A.firstChild.nodeValue?A.firstChild.nodeValue:"");var v=this._xmlToObject(A,!1);for(var H in v)if("_userdata"==H){x.userdata||(x.userdata={});for(J=0;J<v[H].length;J++)x.userdata[v[H][J].name]=v[H][J].value}else x[H]=v[H];A=null,m?y.push(x):y[u].push(x)}}if(null!=n){y={data:{}};for(r=0;r<n.childNodes.length;r++)if(void 0!==n.childNodes[r].tagName){var o=n.childNodes[r].tagName,I=null!=n.childNodes[r].firstChild?n.childNodes[r].firstChild.nodeValue:"";y.data[o]=I}}return y},this._autoCheck=function(s){for(var o in!0===this._locked?s=!1:void 0===s&&(s=!0),this.itemPull){var u=s&&!0!==this.itemPull[o]._udis;this[u?"_enableItem":"_disableItem"](this.itemPull[o]._idd),null!=this.getForm()._idIndex[this.itemPull[o]._idd]&&(this.getForm()._idIndex[this.itemPull[o]._idd].enabled=u);var n=u&&("boolean"!=typeof this.itemPull[o]._checked||this.itemPull[o]._checked);if(this.itemPull[o]._list)for(var y=0;y<this.itemPull[o]._list.length;y++){var x=!0;if(1==this.itemPull[o]._list[y]._subSelect){x=!1;var r=this.getItemValue(this.itemPull[o]._idd);"object"==typeof r&&"number"==typeof r.length||(r=[r]);for(var m=0;m<r.length;m++)x=r[m]==this.itemPull[o]._list[y]._subSelectId||x;this.itemPull[o]._listObj[y][x?"show":"hide"](this.itemPull[o]._listBase[y])}this.itemPull[o]._list[y]._autoCheck(n&&x)}}},this.doWithItem=function(o,m,x,w,v,u){if("object"!=typeof o){if(this.itemPull[this.idPrefix+o])return this.objPull[this.idPrefix+o][m](this.itemPull[this.idPrefix+o],x,w,v,u);s=null;for(var r in this.itemPull)if(this.itemPull[r]._list&&!s)for(n=0;n<this.itemPull[r]._list.length;n++)null==s&&(s=this.itemPull[r]._list[n].doWithItem(o,m,x,w,v,u));return s}var A=o[0],y=o[1],s=null;for(var r in this.itemPull){if((this.itemPull[r]._value==y||null===y)&&this.itemPull[r]._group==A)return this.objPull[r][m](this.itemPull[r],x,w,v,u);if(null!=this.itemPull[r]._list&&!s)for(var n=0;n<this.itemPull[r]._list.length;n++)s=this.itemPull[r]._list[n].doWithItem(o,m,x,w,v)}return null!=s?s:"getType"==m?this.doWithItem(o[0],"getType"):void 0},this._removeItem=function(m,a){null!=a?m=this.doWithItem([m,a],"destruct"):this.doWithItem(m,"destruct"),this._clearItemData(m)},this._clearItemData=function(o){if(this.itemPull[this.idPrefix+o]){o=this.idPrefix+o;try{this.objPull[o]=null,this.itemPull[o]=null,delete this.objPull[o],delete this.itemPull[o]}catch(n){}}else for(var a in this.itemPull)if(this.itemPull[a]._list)for(var m=0;m<this.itemPull[a]._list.length;m++)this.itemPull[a]._list[m]._clearItemData(o)},this.isItem=function(m,a){return null!=a&&(m=[m,a]),this.doWithItem(m,"isExist")},this.getItemType=function(m,a){return m=[m,a||null],this.doWithItem(m,"getType")},this.forEachItem=function(n){for(var m in this.objPull)if("radio"==this.objPull[m].t?n(this.itemPull[m]._group,this.itemPull[m]._value):n(String(m).replace(this.idPrefix,"")),this.itemPull[m]._list)for(var o=0;o<this.itemPull[m]._list.length;o++)this.itemPull[m]._list[o].forEachItem(n)},this.setItemLabel=function(n,a,m){null!=m?n=[n,a]:m=a,this.doWithItem(n,"setText",m)},this.getItemLabel=function(m,a){return null!=a&&(m=[m,a]),this.doWithItem(m,"getText")},this._enableItem=function(a){this.doWithItem(a,"enable")},this._disableItem=function(a){this.doWithItem(a,"disable")},this._isItemEnabled=function(a){return this.doWithItem(a,"isEnabled")},this.checkItem=function(m,a){null!=a&&(m=[m,a]),this.doWithItem(m,"check"),this._autoCheck()},this.uncheckItem=function(m,a){null!=a&&(m=[m,a]),this.doWithItem(m,"unCheck"),this._autoCheck()},this.isItemChecked=function(m,a){return null!=a&&(m=[m,a]),this.doWithItem(m,"isChecked")},this.getCheckedValue=function(a){return this.doWithItem([a,null],"getChecked")},this._getRGroup=function(u,s){for(var m in this.itemPull){if(this.itemPull[m]._group==u&&(null==s||this.itemPull[m]._value==s))return this.itemPull[m]._idd;if(null!=this.itemPull[m]._list)for(var o=0;o<this.itemPull[m]._list.length;o++){var n=this.itemPull[m]._list[o]._getRGroup(u,s);if(null!=n)return n}}return null},this.setItemValue=function(m,a){return this.resetValidateCss(m,a),"radio"==this.getItemType(m)?(null!=this._getRGroup(m,a)?this.checkItem(m,a):this.uncheckItem(m,this.getCheckedValue(m)),null):this.doWithItem(m,"setValue",a)},this.getItemValue=function(m,a){return"radio"==this.getItemType(m)?this.getCheckedValue(m):this.doWithItem(m,"getValue",a)},this.updateValues=function(){this._updateValues()},this.showItem=function(m,a){null!=a&&(m=[m,a]),this.doWithItem(m,"show")},this.hideItem=function(m,a){null!=a&&(m=[m,a]),this.doWithItem(m,"hide")},this.isItemHidden=function(m,a){return null!=a&&(m=[m,a]),this.doWithItem(m,"isHidden")},this.getOptions=function(a){return this.doWithItem(a,"getOptions")},this.setItemWidth=function(m,a){this.doWithItem(m,"setWidth",a)},this.getItemWidth=function(a){return this.doWithItem(a,"getWidth")},this.setItemHeight=function(m,a){this.doWithItem(m,"setHeight",a)},this.setItemFocus=function(m,a){null!=a&&(m=[m,a]),this.doWithItem(m,"setFocus")},this._updateValues=function(){for(var m in this.itemPull)if(this.objPull[m]&&"function"==typeof this.objPull[m].updateValue&&this.objPull[m].updateValue(this.itemPull[m]),this.itemPull[m]._list)for(var n=0;n<this.itemPull[m]._list.length;n++)this.itemPull[m]._list[n]._updateValues()},this._getItemByName=function(s){for(var m in this.itemPull){if(this.itemPull[m]._idd==s)return this.itemPull[m];if(null!=this.itemPull[m]._list)for(var o=0;o<this.itemPull[m]._list.length;o++){var n=this.itemPull[m]._list[o]._getItemByName(s);if(null!=n)return n}}return null},this._resetValidateCss=function(a){a.className=a.className.replace(a._vcss,""),a._vcss=null},this.setValidateCss=function(a,o,n){var m=this._getItemByName(a);m&&(null!=m._vcss&&this._resetValidateCss(m),m._vcss="string"==typeof n?n:"validate_"+(!0===o?"ok":"error"),m.className+=" "+m._vcss)},this.resetValidateCss=function(n){for(var m in this.itemPull)if(null!=this.itemPull[m]._vcss&&this._resetValidateCss(this.itemPull[m]),null!=this.itemPull[m]._list)for(var o=0;o<this.itemPull[m]._list.length;o++)this.itemPull[m]._list[o].resetValidateCss()},this._validateLoop=function(n){for(var m in this.objPull)if(n(String(m).replace(this.idPrefix,"")),this.itemPull[m]._list)for(var o=0;o<this.itemPull[m]._list.length;o++)this.itemPull[m]._list[o]._validateLoop(n)},this.validate=function(m){if(0!=this.callEvent("onBeforeValidate",[])){var a=!0;return this._validateLoop(function(o,r){var n=e.doWithItem(o,"_validate");"boolean"!=typeof n&&(n=!0),a=n&&a},!0),this.callEvent("onAfterValidate",[a]),a}},this.validateItem=function(a,m){return void 0!==m&&(a=[a,m]),this.doWithItem(a,"_validate")},this.enableLiveValidation=function(a){this.live_validate=1==a},this.setReadonly=function(m,a){this.doWithItem(m,"setReadonly",a)},this.isReadonly=function(a){return this.doWithItem(a,"isReadonly")},this.getFirstActive=function(m){for(var o=0;o<this._indexId.length;o++){var a=!0;if(1==m){var n=this.getItemType(this._indexId[o]);dhtmlXForm.prototype.items[n].setFocus||(a=!1)}if(a&&this._idIndex[this._indexId[o]].enabled)return this._indexId[o]}return null},this.setFocusOnFirstActive=function(){var a=this.getFirstActive(!0);null!=a&&this.setItemFocus(a)},this.enableItem=function(m,a){null!=a&&(m=[m,a]),this.doWithItem(m,"userEnable"),this._autoCheck()},this.disableItem=function(m,a){null!=a&&(m=[m,a]),this.doWithItem(m,"userDisable"),this._autoCheck()},this.isItemEnabled=function(m,a){return null!=a&&(m=[m,a]),this.doWithItem(m,"isUserEnabled")},this.clear=function(){var m={};for(var n in this.formId=(new Date).valueOf(),this.resetDataProcessor("inserted"),this.itemPull){var o=this.itemPull[n]._idd;if("ch"==this.itemPull[n]._type&&this.uncheckItem(o),this.itemPull[n]._type in{ta:1,editor:1,calendar:1,pw:1,hd:1}&&this.setItemValue(o,""),"combo"==this.itemPull[n]._type){this.itemPull[n]._apiChange=!0;var v=this.getCombo(o);v.selectOption(0),v=null,this.itemPull[n]._apiChange=!1}if("se"==this.itemPull[n]._type){var s=this.getOptions(o);0<s.length&&(s[0].selected=!0)}if("ra"==this.itemPull[n]._type){var r=this.itemPull[n]._group;m[r]||(this.checkItem(r,this.doWithItem(o,"_getFirstValue")),m[r]=!0)}if(this.itemPull[n]._list)for(var u=0;u<this.itemPull[n]._list.length;u++)this.itemPull[n]._list[u].clear();this["setFormData_"+this.itemPull[n]._type]&&this["setFormData_"+this.itemPull[n]._type](o,"")}m=null,this._parentForm&&this._autoCheck(),this.resetValidateCss()},this.unload=function(){for(var m in window.dhx4._enableDataLoading(this,null,null,null,"clear"),window.dhx4._eventable(this,"clear"),this.objPull)this._removeItem(String(m).replace(this.idPrefix,""));this._ccTm&&window.clearTimeout(this._ccTm),this._formLS=null;for(var n=0;n<this.base.length;n++){for(;0<this.base[n].childNodes.length;)this.base[n].removeChild(this.base[n].childNodes[0]);this.base[n].parentNode&&this.base[n].parentNode.removeChild(this.base[n]),this.base[n]=null}for(var m in this.base=null,this.cont.onkeypress=null,this.cont.className="",this.cont=null,this)this[m]=null;e=null},this.items)this.items[c].t=c,void 0===this.items[c]._index&&(this.items[c]._index=!0),this.items[c].show||(this.items[c].show=function(a){if(a.style.display="",a._listObj)for(var m=0;m<a._listObj.length;m++)a._listObj[m].show(a._listBase[m])}),this.items[c].hide||(this.items[c].hide=function(a){if(a.style.display="none",a._listObj)for(var m=0;m<a._listObj.length;m++)a._listObj[m].hide(a._listBase[m])}),this.items[c].isHidden||(this.items[c].isHidden=function(a){return"none"==a.style.display}),this.items[c].userEnable||(this.items[c].userEnable=function(a){a._udis=!1}),this.items[c].userDisable||(this.items[c].userDisable=function(a){a._udis=!0}),this.items[c].isUserEnabled||(this.items[c].isUserEnabled=function(a){return!0!==a._udis}),this.items[c].getType||(this.items[c].getType=function(){return this.t}),this.items[c].isExist||(this.items[c].isExist=function(){return!0}),this.items[c]._validate||(this.items[c]._validate=function(n){if(!n._validate||!n._enabled)return!0;if("ch"==n._type||"ra"==n._type){var u=this.isChecked(n)?this.getValue(n):0;"ra"==n._type&&void 0===u&&(u=0)}else u=this.getValue(n);for(var m=!0,s=0;s<n._validate.length;s++){var a="is"+n._validate[s];if(null!=u&&0!=u.length||"isNotEmpty"==a||"container"==n._type){var o=dhtmlxValidation[a];"container"==n._type&&"function"==typeof o&&(o=function(){return!0}),"function"!=typeof o&&"function"==typeof n._validate[s]&&(o=n._validate[s]),"function"!=typeof o&&"function"==typeof window[n._validate[s]]&&(o=window[n._validate[s]]),m=("function"==typeof o?o(u,n._idd):new RegExp(n._validate[s]).test(u))&&m,o=null}else;}return!1!==n.callEvent("onValidate"+(m?"Success":"Error"),[n._idd,u,m])&&n.getForm().setValidateCss(n._idd,m),m});return this._locked=!1,this._doLock=function(m){var a=!0===m;this._locked!=a&&(this._locked=a,this._autoCheck(!this._locked))},this.lock=function(){this._doLock(!0)},this.unlock=function(){this._doLock(!1)},this.isLocked=function(){return this._locked},this.setNumberFormat=function(o,m,a,n){return this.doWithItem(o,"setNumberFormat",m,a,n)},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:!0,data:!0}),window.dhx4._eventable(this),this.attachEvent("_onButtonClick",function(a,m){this.callEvent("onButtonClick",[a,m])}),this._updateBlocks=function(){this.forEachItem(function(a){"block"!=e.getItemType(a)&&"combo"!=e.getItemType(a)||e.doWithItem(a,"_setCss",e.skin,e.cont.style.fontSize)})},this._isObj=function(a){return null!=a&&"object"==typeof a&&void 0===a.length},this._copyObj=function(o){if(this._isObj(o)){var n={};for(var m in o)"object"==typeof o[m]&&null!=o[m]?n[m]=this._copyObj(o[m]):n[m]=o[m]}else for(n=[],m=0;m<o.length;m++)"object"==typeof o[m]&&null!=o[m]?n[m]=this._copyObj(o[m]):n[m]=o[m];return n},null!=g&&"object"==typeof g&&this._initObj(this._copyObj(g)),this._parentForm&&this._updateBlocks(),this._ccActive=!1,this._ccTm=null,this}function dhtmlXFileUploader(c,n,m,o,u,l,w,h,x){var r=this;if("string"==typeof o&&"function"==typeof this[o])this.engine=o;else{this.engine="html4";var g=null;if(void 0!==window.FormData&&void 0!==window.XMLHttpRequest&&void 0===(g=new XMLHttpRequest).upload&&(g=null),null!=g)this.engine="html5";else if(void 0!==window.swfobject||!1===g)10<=(g=swfobject.getFlashPlayerVersion()).major&&(this.engine="flash");else this._sl_v=this.getSLVersion(),this._sl_v&&(this.engine="sl");g=null}"string"==typeof c&&(c=document.getElementById(c)),this._upload_mp=void 0===x||1==x,this._upload_dnd=!0,this._swf_file_url=n||"",this._swf_upolad_url=m||"",this._swf_logs=u,this._sl_xap=l,this._sl_upload_url=w,this._sl_logs=h,this.p=document.createElement("DIV"),this.p.className+=" dhx_file_uploader",c.appendChild(this.p),this.p_files=document.createElement("DIV"),this.p_files.className="dhx_upload_files",this.p.appendChild(this.p_files),this.p_controls=document.createElement("DIV"),this.p_controls.className="dhx_upload_controls",this.p.appendChild(this.p_controls),this._files={},this._items={},this._data={},this._autoStart=!1,this._autoRemove=!1,this._titleScreen=!0,this._enabled=!0,this._uploaded_count=0,this._initToolbar=function(){for(var e in this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){r._enabled&&(r._uploading||r._uploadStart())},tooltip:"Upload"},cancel:{onclick:function(){r._enabled&&(r._uploadStop(),r._switchButton(!1))},tooltip:"Stop"},clear:{onclick:function(){r._enabled&&r.clear()},tooltip:"Clear list"}},this.buttons={},this.b_opts){var y=document.createElement("DIV");y.innerHTML="&nbsp;",y.className="dhx_file_uploader_button button_"+e,y.onclick=this.b_opts[e].onclick,this.b_opts[e].tooltip&&(y.title=this.b_opts[e].tooltip),this.p_controls.appendChild(y),this.buttons[e]=y,y=null}this.buttons.cancel.style.display="none"},this._readableSize=function(y){for(var e=!1,a=["b","Kb","Mb","Gb","Tb","Pb","Eb"],A=0;A<a.length;A++)1024<y?y/=1024:!1===e&&(e=A);return!1===e&&(e=a.length-1),Math.round(100*y)/100+" "+a[e]},this._beforeAddFileToList=function(a,e){return!0===this.callEvent("onBeforeFileAdd",[a,e])},this._addFileToList=function(D,e,A,C,a){this._checkTitleScreen();var y=document.createElement("DIV");y._idd=D,y.className="dhx_file dhx_file_"+C,y.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+a+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>",this.p_files.appendChild(y),y.childNodes[0].style.width=y.offsetWidth-127+"px",this._items[D]=y,this._updateFileNameSize(D),y.childNodes[2].onclick=function(){if(r._enabled){var E=this.parentNode._idd;r._removeFileFromQueue(E)}},this.callEvent("onFileAdd",[e])},this._removeFileFromList=function(a){this._items[a]&&(this._items[a].childNodes[2].onclick=null,this._items[a].parentNode.removeChild(this._items[a]),this._items[a]=null,delete this._items[a],this._data[a]&&(this._data[a]=null,delete this._data[a]),this._checkTitleScreen())},this._updateFileNameSize=function(a){this._items[a].childNodes[0].innerHTML=this._files[a].name+(isNaN(this._files[a].size)?"&nbsp;":" ("+this._readableSize(this._files[a].size)+")"),this._items[a].childNodes[0].title=this._files[a].name+(isNaN(this._files[a].size)?"":" ("+this._readableSize(this._files[a].size)+")")},this._updateFileInList=function(y,e,a){this._items[y]&&(this._items[y].className="dhx_file dhx_file_"+e,this._updateProgress(y,e,a),this._updateFileNameSize(y))},this._updateProgress=function(y,e,a){"uploading"==e&&a<100&&"loader"==this._progress_type?(this._items[y].childNodes[1].className="dhx_file_param dhx_file_uploading",this._items[y].childNodes[1].innerHTML="&nbsp;"):(this._items[y].childNodes[1].className="dhx_file_param dhx_file_progress",this._items[y].childNodes[1].innerHTML=a+"%"),this._updateFileNameSize(y)},this._removeFilesByState=function(y){for(var e in this._files)!0!==y&&this._files[e].state!=y||this._removeFileFromQueue(e)},this._switchButton=function(e){if(1==e)this.buttons.upload.style.display="none",this.buttons.cancel.style.display="";else{var a=this._uploaded_count;this.buttons.upload.style.display="",this.buttons.cancel.style.display="none",(this._uploaded_count=0)<a&&this.callEvent("onUploadComplete",[a])}},this._uploadStart=function(){if(this._switchButton(!0),!this._uploading)for(var e in this._files)"fail"==this._files[e].state&&(this._files[e].state="added",this._updateFileInList(e,"added",0));var y=!(this._uploading=!0);for(var e in this._files)y||"added"!=[this._files[e].state]||(y=!0,this._files[e].state="uploading",this._updateFileInList(e,"uploading",0),this._doUploadFile(e));y||(this._uploading=!1,this._switchButton(!1))},this._onUploadSuccess=function(C,A,y,a){if(void 0!==y&&"flash"==this.engine){var e=dhx4.s2j(y.data);if(null==e||1!=e.state||null==e.name)return void this._onUploadFail(C,null!=e&&null!=e.extra?e.extra:null);A=e.name,null!=e.extra&&(a=e.extra)}this._uploaded_count++,this._data[C]={realName:this._files[C].name,serverName:A},this._files[C].state="uploaded",this._updateFileInList(C,"uploaded",100),this.callEvent("onUploadFile",[this._files[C].name,A,a]),this._autoRemove&&this._removeFileFromQueue(C),this._uploading&&this._uploadStart()},this._onUploadFail=function(e,a){this._files[e].state="fail",this._updateFileInList(e,"fail",0),this.callEvent("onUploadFail",[this._files[e].name,a]),this._uploading&&this._uploadStart()},this._onUploadAbort=function(a){this._uploading=!1,this._files[a].state="added",this._updateFileInList(a,"added",0),this.callEvent("onUploadCancel",[this._files[a].name])},this._checkTitleScreen=function(){var y=0;for(var e in this._files)y++;0==y&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen&&(this.p.className+=" dhx_file_uploader_title",this.buttons.info.innerHTML=this._titleText,this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px"),(0<y||!this._titleScreen)&&0<=this.p.className.search("dhx_file_uploader_title")&&(this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,""),this.buttons.info.innerHTML="")},this.callEvent=function(){},this.upload=function(){this._uploading||this._uploadStart()},this.setAutoStart=function(a){this._autoStart=1==a},this.setAutoRemove=function(a){this._autoRemove=1==a},this.enableTitleScreen=function(a){this._titleScreen=1==a,this._checkTitleScreen()},this.setTitleText=function(a){this._titleText=a,0<=this.p.className.search("dhx_file_uploader_title")&&(this.buttons.info.innerHTML=this._titleText)},this.setURL=function(a){this._url=a},this.setSWFURL=function(a){this._swf_upolad_url=a},this.enable=function(){this._enabled=!0,this.p_files.className="dhx_upload_files",this.p_controls.className="dhx_upload_controls"},this.disable=function(){this._enabled=!1,this.p_files.className="dhx_upload_files dhx_uploader_dis",this.p_controls.className="dhx_upload_controls dhx_uploader_dis"},this.getStatus=function(){var y=0;for(var e in this._files){if("uploaded"!=this._files[e].state)return-1;y=1}return y},this.getData=function(){return this._data},this.clear=function(){!0===this.callEvent("onBeforeClear",[])&&(this._uploading&&r._uploadStop(),r._switchButton(!1),r._removeFilesByState(!0),this.callEvent("onClear",[]))},this.unload=function(){for(var e in this._removeFilesByState(!0),this._data=null,this._files=null,this._items=null,this._unloadEngine(),this.buttons)this.buttons[e].onclick=null,this.buttons[e].parentNode.removeChild(this.buttons[e]),this.buttons[e]=null,delete this.buttons[e];for(var e in this.buttons=null,this.b_opts)this.b_opts[e].onclick=null,this.b_opts[e]=null,delete this.b_opts[e];for(var e in this.b_opts=null,this.p_controls.parentNode.removeChild(this.p_controls),this.p_files.parentNode.removeChild(this.p_files),this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,""),this)this[e]=null;r=e=null};var s=new this[this.engine];for(var v in s)this[v]=s[v],s[v]=null;return v=s=c=null,this._initToolbar(),this._initEngine(),this._checkTitleScreen(),this}function dhtmlXAccordion(h,m){var g=this,e=window.dhx4.transDetect();this.conf={skin:m||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxacc")||"material",css:"dhxacc",icons_path:"",icons_css:!1,multi_mode:!1,last_opened:null,on_active_id:null,on_active_click:!1,size_changed:!0,def_height:90,total_count:0,hiden_count:0,cont_w:null},this.conf.tr={prop:e.transProp,ev:e.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4",dnd_top:"top 0.16s"},this.ofs={m:{},s:{},def:{m:{left:0,right:0,first:0,between:8},s:{left:0,right:0,first:0,between:-1,last:0}},base:{s:{},m:{}},skin:{dhx_web:{s:{between:3},m:{between:3}},dhx_terrace:{m:{between:12,left:0,right:0}},material:{m:{between:12,left:0,right:0}}}},0<=navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident"),this.conf.tr.height_open=this.conf.tr.height_close;var l=null;if("object"==typeof h&&!h.tagName){for(var c in l={},h)l[c]=h[c],h[c]=null;h=l.parent,l.parent=null}if(window.dhtmlXCellTop.apply(this,[h,h._ofs]),this._adjustCont(),null!=this.base._ofs)for(var n in this.ofs.base)if(null!=this.base._ofs[n])for(var c in this.base._ofs[n])this.ofs.base[n][c]=this.base._ofs[n][c];return this._applyOffsets=function(){for(var v in this.ofs.def){var s=this.ofs.def[v],u=null!=this.ofs.skin[this.conf.skin]&&null!=this.ofs.skin[this.conf.skin][v]?this.ofs.skin[this.conf.skin][v]:null,r=null!=this.base._ofs?this.base._ofs[v]:null;for(var o in s)null!=u&&null!=u[o]?this.ofs[v][o]=u[o]:null!=r&&null!=r[o]?this.ofs[v][o]=r[o]:this.ofs[v][o]=s[o]}},this._applyOffsets(),this.t={},this.addItem=function(x,w,r,o,v){for(null==x&&(x="a"+window.dhx4.newId());null!=this.t[x];)x="a"+window.dhx4.newId();var a=new dhtmlXAccordionCell(x,this);if(a.conf.skin=this.conf.skin,a.setText(w),null!=v&&a.setIcon(v),a.cell._accId=x,a.cell.childNodes[a.conf.idx.hdr].onselectstart=function(y){return(y=y||event).preventDefault?y.preventDefault():y.returnValue=!1,!1},a.cell.childNodes[a.conf.idx.hdr].onclick=function(A){if((A=A||event).preventDefault?A.preventDefault():A.returnValue=!1,null==g._dnd||1!=g._dnd.ofs){for(var y=A.target||A.srcElement,C=null;y._accId!=this&&null==C;)null!=y._accId?C=y._accId:y=y.parentNode;null!=C&&g._hdrClick(C)}},this.t[x]={cell:a},this.conf.total_count++,this.conf.multi_mode)void 0===r&&(r=!0),this.cont.appendChild(a.cell),a.conf.opened=1==r,void 0===o||null==o||"*"==o?("*"==o&&(a.conf.h_auto=!0),o=this.conf.def_height):o=Math.max(parseInt(o),30),a._setSize(this.ofs.m.left,0,this.conf.cont_w||this._getAvailItemWidth(),a.conf.opened?o:a._getHdrHeight()),a.cell.style.marginTop=(a.cell==this.cont.firstChild?this.ofs.m.first:this.ofs.m.between)+"px",1!=r&&(a.conf.size.h=o,a._adjustCell(),a.cell.className+=" dhx_cell_closed"),this._adjustOpened(),null!=this._dnd&&this._dndAttachEvent(x);else{r=null==this.conf.last_opened||window.dhx4.s2b(r);var u=this._updateCellsHeight();if(null!=this.conf.last_opened)if(r)this._closeItem(this.conf.last_opened,!1);else{var s=this.t[this.conf.last_opened].cell;s._setSize(s.conf.size.x,s.conf.size.y,s.conf.size.w,u),s=null}this.cont.appendChild(a.cell),a.conf.opened=r,a.cell.style.marginTop=String(a.cell==this.cont.firstChild?this.ofs.s.first:this.ofs.s.between)+"px",a._setSize(this.ofs.s.left,0,this.conf.cont_w||this._getAvailItemWidth(),r?u:a._getHdrHeight()),r?this.conf.last_opened=x:(a.conf.size.h=u,a._adjustCell(),a.cell.className+=" dhx_cell_closed")}return a=null,this.t[x].cell},this.removeItem=function(a){this.t[a]&&(this.conf.last_opened==a&&(this.conf.last_opened=null),this.conf.on_active_id==a&&(this.conf.on_active_id=null),null!=this._dnd&&this._dndClearCell(a),this.conf.total_count--,this.conf.multi_mode||this.t[a].cell.conf.visible||this.conf.hiden_count--,this.t[a].cell._unload(),this.t[a].cell=null,this.t[a]=null,delete this.t[a],this.conf.unloading||(this.conf.multi_mode||this._updateCellsMargin(),this.setSizes()))},this.cells=function(a){return this.t[a].cell},this.enableMultiMode=function(a,o){this.conf.multi_mode=!0,isNaN(o)||(this.conf.def_height=o),"auto"==a||"scroll"==a?(this.cont.style.overflowX="hidden",this.cont.style.overflowY=a):this.cont.style.overflow="visible"},this.forEachItem=function(r){for(var o in this.t)"function"==typeof r?r.apply(this,[this.t[o].cell]):"string"==typeof r&&"function"==typeof window[r]&&window[r].apply(this,[this.t[o].cell])},this._openItem=function(o,a){void 0===a&&(a=!0),0==this.t[o].cell.conf.opened&&(this.conf.multi_mode?this.t[o].cell._open(a):(0==this.conf.tr.prop?(null!=this.conf.last_opened&&this.t[this.conf.last_opened].cell._close(!1),this.t[o].cell._open(!1)):(this.conf.on_active_id=o,this.t[o].cell._open(a),null!=this.conf.last_opened&&this.t[this.conf.last_opened].cell._close(a)),this.conf.last_opened=o))},this._closeItem=function(o,a){void 0===a&&(a=!0),1==this.t[o].cell.conf.opened&&(this.t[o].cell._close(a),this.conf.last_opened=null)},this._adjustOpened=function(){if(1==this.conf.multi_mode){if(null==this._openCache){var u=this._getDynData();for(var r in u)this.t[r].cell.conf.size.h=Math.max(u[r],0),this.t[r].cell.cell.style.height=Math.max(u[r],0)+"px"}else{var v=!1;for(var r in this._openCache)v=v||this._openCache[r];if(1==v)return;this._openCache=this._openId=null}var o=this._getAvailItemWidth();for(var r in this.t){var s=!0;o!=this.t[r].cell.conf.size.w||"close"!=this._openMode&&0!=this.t[r].cell.conf.opened||(s=!1),s&&this.t[r].cell._setWidth(o)}this._openMode=null}else if(null!=this.conf.last_opened){var w=this.conf.last_opened;this.t[w].cell._setSize(this.t[w].cell.conf.size.x,this.t[w].cell.conf.size.y,this.t[w].cell.conf.size.w,this.t[w].cell.conf.size.h)}},this._getDynData=function(D,C){void 0!==D&&null!=D||(D={}),void 0!==C&&null!=C||(C={});for(var w={},A=0,v=0,s=0,o=0;o<this.cont.childNodes.length;o++){var r=this.cont.childNodes[o]._accId,F=this.t[r].cell;if(1==F.conf.visible){var x=this.ofs.m[0==s?"first":"between"];if(1==D[r]||1==C[r]||1==F.conf.opened&&1==F.conf.h_auto)if(1==C[r]){var y=F._getHdrHeight();v+=(w[r]=y)+x}else 1==F.conf.h_auto?(w[r]=!0,v+=x,A++):1==D[r]&&(w[r]=F.conf.size.h,v+=F.conf.size.h+x);else v+=F.cell.offsetHeight+x;s++}F=null}if(0<A){var u=this.cont.offsetHeight-v;v=Math.floor(u/A);for(var E in w)1==w[E]&&(1<A?u-=v:v=u,w[E]=v,A--)}return w},this.setSizes=function(){if(this._adjustCont(),1==this.conf.multi_mode)this._adjustOpened();else{this.conf.cont_w=null;var r=this._updateCellsHeight();for(var o in this.t)1==this.t[o].cell.conf.visible&&(this.t[o].cell._setSize(this.ofs.s.left,0,this.conf.cont_w||this._getAvailItemWidth(),this.t[o].cell.conf.opened?r:this.t[o].cell._getHdrHeight()),1!=this.t[o].cell.conf.opened&&(this.t[o].cell.conf.size.h=r,this.t[o].cell._adjustCell()));this.conf.size_changed=!0}this.callEvent("_onSetSizes",[])},this.setSkin=function(r){for(var o in this._setBaseSkin(r),this.conf.skin=r,this.t)this.t[o].cell.conf.cells_cont=null,this.t[o].cell.conf.skin=this.conf.skin;this._applyOffsets(),this._updateCellsMargin(),this.setSizes()},this.setIconsPath=function(a){this.conf.icons_path=a},this._getAvailItemWidth=function(){var o=this.ofs[this.conf.multi_mode?"m":"s"],a=Math.max(this.cont.clientWidth-o.left-o.right,10);return o=null,this.conf.cont_w=a},this._updateCellsHeight=function(){if(1!=this.conf.multi_mode){var r=this.conf.total_count-this.conf.hiden_count,s=this.cont.offsetHeight-this.ofs.s.last;if(0==r)return s;for(var v=!1,u=0;u<this.cont.childNodes.length;u++)if(0==v){var w=this.cont.childNodes[u]._accId;this.t[w].cell.conf.visible&&(s-=this.t[w].cell._getHdrHeight()*(r-1),v=!0)}for(var o in s-=(r-1)*this.ofs.s.between+this.ofs.s.first,this.t)null!=this.t[o].cell.conf.size&&(this.t[o].cell.conf.size.h=s,this.t[o].cell._adjustCell());return s}},this._updateCellsMargin=function(){for(var a=0,o=0;o<this.cont.childNodes.length;o++){var r=this.cont.childNodes[o]._accId;this.t[r].cell.conf.visible&&(this.t[r].cell.cell.style.marginTop=String(this.ofs[this.conf.multi_mode?"m":"s"][0==a++?"first":"between"])+"px")}},this._hdrClick=function(o){if(this.conf.multi_mode||!this.t[o].cell.conf.opened){var a=this.t[o].cell.conf.opened;!0===this.callEvent("onBeforeActive",[o,!a])&&(this.conf.on_active_click=!0,this[a?"_closeItem":"_openItem"](o),this.conf.multi_mode&&0==this.conf.tr.prop&&this._adjustOpened())}},this.unload=function(){for(var o in this.conf.unloading=!0,this.t)this.removeItem(o);for(var o in this.t=null,"function"==typeof this._unloadDND&&this._unloadDND(),this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null),this._unloadTop(),window.dhx4._enableDataLoading(this,null,null,null,"clear"),window.dhx4._eventable(this,"clear"),this.ofs=this.conf=null,this)this[o]=null;g=null},this.setOffset=function(a){this.ofs.s.between=a,this.ofs.m.between=a,this._updateCellsMargin(),this.setSizes()},this._initObj=function(o){if(null!=o.skin&&this.setSkin(o.skin),window.dhx4.s2b(o.multi_mode)&&this.enableMultiMode(),null!=o.icons_path&&this.setIconsPath(o.icons_path),null!=o.icon_path&&this.setIconsPath(o.icon_path),null!=o.iconset&&(this.conf.icons_css="awesome"==o.iconset),null!=o.items)for(var a=0;a<o.items.length;a++)this.addItem(o.items[a].id,o.items[a].text,o.items[a].open,o.items[a].height,o.items[a].icon||o.items[a].img);1==window.dhx4.s2b(o.dnd)&&"function"==typeof this.enableDND&&this.enableDND()},this._xmlToObj=function(u){var r={items:[]},a=u.getElementsByTagName("accordion")[0];null!=a.getAttribute("skin")&&(r.skin=a.getAttribute("skin")),"multi"==a.getAttribute("mode")&&(r.multi_mode=!0),null!=a.getAttribute("multiMode")&&(r.multi_mode=window.dhx4.s2b(a.getAttribute("multiMode"))),null!=a.getAttribute("iconsPath")&&(r.icons_path=a.getAttribute("iconsPath"));for(var s=0;s<a.childNodes.length;s++){var v=a.childNodes[s];if(void 0!==v.tagName&&"cell"==String(v.tagName).toLowerCase()){var o={};null!=v.getAttribute("id")&&(o.id=v.getAttribute("id")),null!=v.getAttribute("icon")&&(o.icon=v.getAttribute("icon")),null!=v.getAttribute("height")&&(o.height=v.getAttribute("height")),null!=v.getAttribute("open")&&(o.open=window.dhx4.s2b(v.getAttribute("open"))),o.text=v.firstChild.nodeValue,r.items.push(o)}v=null}return r},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","accordion",{struct:!0}),window.dhx4._eventable(this),this._callMainEvent=function(o,a){return this.callEvent(o,a)},this.attachEvent("onActive",function(a){null!=a&&null!=this.t[a]&&null!=this.t[a].cell.dataObj&&"editor"==this.t[a].cell.dataType&&this.t[a].cell.dataObj._prepareContent(!0),null!=a&&null!=this.t[a]&&1==this.t[a].cell.conf.opened&&this.t[a].cell._adjustProgress()}),"function"==typeof window.dhtmlXWindows&&(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.conf.skin)),null!=l&&(this._initObj(l),l=null),this}function dhtmlXAccordionCell(g,e){for(var c in dhtmlXCellObject.apply(this,[g,"_acc"]),this.acc=e,this.conf.visible=!0,this.conf.docked=!0,this.attachEvent("_onCellUnload",function(){this._trDetachEv(),this._unloadDocking(),this.acc=null,this.cell._accObj=null,this.cell.childNodes[this.conf.idx.hdr].onselectstart=null,this.cell.childNodes[this.conf.idx.hdr].onclick=null,this._initHeader=null,this._getHdrHeight=null,this._setWidth=null,this._adjustCell=null,this._open=null,this._close=null,this._isOpened=null,this._trInitEv=null,this._trAttachEv=null,this._trDetachEv=null,this._trOnEnd=null,this._onActiveCall=null,this.setText=null,this.getText=null,this.setIcon=null,this.clearIcon=null,this.show=null,this.hide=null,this.isVisible=null,this.setHeight=null,this.moveOnTop=null}),this.acc.attachEvent("onBeforeDrag",function(l){for(var h in null!=this.t[l].cell.dataObj&&"editor"==this.t[l].cell.dataType&&(null==this.conf.editor_data&&(this.conf.editor_data={}),this.conf.editor_data[l]=this.t[l].cell.dataObj.getContent()),this.t)this.t[h].cell._showCellCover();return!0}),this.acc.attachEvent("onDrop",function(l){for(var h in null!=this.t[l].cell.dataObj&&"editor"==this.t[l].cell.dataType&&(this.t[l].cell.dataObj._prepareContent(!0),null!=this.conf.editor_data&&null!=this.conf.editor_data[l]&&(this.t[l].cell.dataObj.setContent(this.conf.editor_data[l]),this.conf.editor_data[l]=null)),this.t)this.t[h].cell._hideCellCover()}),this.attachEvent("_onContentLoaded",function(){this.acc._callMainEvent("onContentLoaded",arguments)}),this.attachEvent("_onBeforeContentAttach",function(a){"sidebar"==a&&"dhx_skyblue"!=this.conf.skin&&this._hideBorders()}),this._initHeader(),this.conf.tr={},this.acc.conf.tr)this.conf.tr[c]=this.acc.conf.tr[c];return 0!=this.conf.tr.prop&&this.attachEvent("_onIdxUpdated",function(){this._cellSetOpacity(this.conf.opened?"open":"close",!1)}),this.open=function(a){1==window.dhx4.s2b(a)&&(this.acc.conf.on_active_click=!0),this.acc._openItem(this._idd)},this.close=function(a){1==window.dhx4.s2b(a)&&(this.acc.conf.on_active_click=!0),this.acc._closeItem(this._idd)},this._setWidth=function(a){a!=this.conf.size.w&&(this.conf.size.w=a,this.cell.style.width=a+"px"),this._adjustCell()},this._adjustCell=function(){this._adjustCont(),null!=this.dataObj&&"function"==typeof this.dataObj.setSizes&&this.dataObj.setSizes()},this._initDocking(),this}function dhtmlXLayoutObject(e,o,w){var u=null;if(null!=e&&"object"==typeof e&&void 0===e.tagName&&1!=e._isCell&&(u={},null!=e.autosize&&(u.autosize=e.autosize),null!=e.cells&&(u.cells=e.cells),null!=e.pattern&&(o=e.pattern),null!=e.skin&&(w=e.skin),null!=e.offsets&&(u.offsets=e.offsets),e=e.parent),this.cdata={},this.conf={skin:w||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxlayout")||"material",css:"dhxlayout",hh:20,autosize:"b",nextCell:{a:"b",b:"a"},inited:!1,b_size:{w:-1,h:-1}},"material"==this.conf.skin&&(this.conf.hh=window.dhx4.readFromCss("dhxlayout_base_material dhxlayout_collapsed_height")),"object"==typeof e&&1==e._isCell){var n=void 0!==u&&null!=u?u:{};return null==n.pattern&&null!=o&&(n.pattern=o),null==n.skin&&null!=w&&(n.skin=w),e.attachLayout(n)}window.dhtmlXCellTop.apply(this,[e,null==u?null:u.offsets]),this.conf.sw=this._detectSW();var m=this;this._getLayout=function(){return this},this.mainInst=null!=e._layoutMainInst?e._layoutMainInst:null,this._getMainInst=function(){return null!=this.mainInst?this.mainInst._getMainInst():this},this._init=function(C){var A="string"==typeof C?this.tplData[C]:C;for(var y in this.conf.mode=A.mode,"c"==this.conf.mode?this.cdata.a=new dhtmlXLayoutCell("a",this):(this.cdata.a=new dhtmlXLayoutCell("a",this),this.cdata.b=new dhtmlXLayoutCell("b",this)),this.cdata)this.cont.appendChild(this.cdata[y].cell),this.cdata[y].conf.init={w:.5,h:.5};if("c"!=this.conf.mode){var x=this._getMainInst();null==x.conf.sep_idx?x.conf.sep_idx=1:x.conf.sep_idx++,this.sep=new dhtmlXLayoutSepObject(this.conf.mode,x.conf.sep_idx),this.cont.appendChild(this.sep.sep),this.sep._getLayout=function(){return m._getLayout()},x=null}if(null!=A.cells)for(var y in A.cells)null!=A.cells[y].width&&(this.cdata[y].conf.init.w=A.cells[y].width),null!=A.cells[y].height&&(this.cdata[y].conf.init.h=A.cells[y].height),null!=A.cells[y].name&&(this.cdata[y].conf.name=A.cells[y].name,this.cdata[y].setText(A.cells[y].name)),null!=A.cells[y].fsize&&(this.cdata[y].conf.fsize=A.cells[y].fsize);for(var y in this.setSizes(),this.cdata)this.cdata[y].conf.init={};if(null!=A.cells)for(var y in A.cells)null!=A.cells[y].layout&&(this.cdata[y].dataNested=!0,(this.cdata[y]._layoutMainInst=this).cdata[y].cell.className+=" dhx_cell_nested_layout",this.cdata[y].attachLayout({pattern:A.cells[y].layout}),this.cdata[y]._layoutMainInst=null)},this.setSizes=function(F,N,J,y){var H=1==this.conf.inited&&this._getMainInst()==this&&1==this.checkEvent("onResizeFinish")&&{};this._adjustCont();var M=this.cont.offsetWidth,D=this.cont.offsetHeight;if("c"==this.conf.mode){var a=0,O=0,x=M,L=D;return this.cdata.a._setSize(a,O,x,L,F,J,y),this.callEvent("_onSetSizes",[]),!H||this.conf.b_size.w==M&&this.conf.b_size.h==D||this._callMainEvent("onResizeFinish",[]),void(this.conf.b_size={w:M,h:D})}if(void 0===N){this.conf.mode;N=this.conf.autosize,this.cdata.a.conf.collapsed?N="b":this.cdata.b.conf.collapsed?N="a":"a"!=F&&"b"!=F||(N=this.conf.nextCell[F])}if("v"==this.conf.mode){if("a"==N){if(null!=this.cdata.b.conf.init.w)var K=Math.round(M*this.cdata.b.conf.init.w-this.conf.sw/2);else K=this.cdata.b.conf.size.w;var C=D;O=E=0,x=(I=M-K)-(a=0)-this.conf.sw,L=C}else{a=0,O=0;if(null!=this.cdata.a.conf.init.w)x=Math.round(M*this.cdata.a.conf.init.w-this.conf.sw/2)-a;else x=this.cdata.a.conf.size.w;L=D-O;var E=O;K=M-(I=a+x+this.conf.sw),C=L}this.cdata.a._setSize(a,O,x,L,F,J,y),this.cdata.b._setSize(I,E,K,C,F,J,y),this.sep._setSize(a+x,O,this.conf.sw,L)}else{if("a"==N){if(null!=this.cdata.b.conf.init.h)C=Math.round(D*this.cdata.b.conf.init.h-this.conf.sw/2);else C=this.cdata.b.conf.size.h;a=I=0,x=K=M-I,L=(E=D-C)-(O=0)-this.conf.sw}else{O=0,x=M-(a=0);if(null!=this.cdata.a.conf.init.h)L=Math.round(D*this.cdata.a.conf.init.h-this.conf.sw/2);else L=this.cdata.a.conf.size.h;var I=a;K=x,C=D-(E=O+L+this.conf.sw)}this.cdata.a._setSize(a,O,x,L,F,J,y),this.cdata.b._setSize(I,E,K,C,F,J,y),this.sep._setSize(a,O+L,x,this.conf.sw)}this.callEvent("_onSetSizes",[]),!H||this.conf.b_size.w==M&&this.conf.b_size.h==D||this._callMainEvent("onResizeFinish",[]),this.conf.b_size={w:M,h:D}},this._getAvailWidth=function(){for(var A=[],E=0;E<this.conf.as_cells.h.length;E++){var x=this.cells(this.conf.as_cells.h[E]),C=x.layout,y=C.conf.autosize;x.conf.collapsed&&(x=C.cdata[C.conf.nextCell[x._idd]],y=C.conf.nextCell[y]),A.push(Math.max(0,x.getWidth()-x._getMinWidth(y))),C=x=null}var D=0<A.length?Math.min.apply(window,A):0;return this.cont.offsetWidth-D},this._getAvailHeight=function(){for(var C=[],E=0;E<this.conf.as_cells.v.length;E++){var x=this.cells(this.conf.as_cells.v[E]),A=x.layout,y=A.conf.autosize;x.conf.collapsed&&(x=A.cdata[A.conf.nextCell[x._idd]],y=A.conf.nextCell[y]),C.push(Math.max(0,x.getHeight()-x._getHdrHeight()-x._getMinHeight(y))),A=x=null}var D=Math.min.apply(window,C);return this.cont.offsetHeight-D},this.setSkin=function(a){this._setBaseSkin(a),this.conf.skin=a},this.unload=function(){if(this.conf.unloading=!0,this.mainInst=null,(this.parentLayout=null)!=this.items){for(var y=0;y<this.items.length;y++)this.items[y]=null;this.items=null}for(var x in null!=this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null),null!=this.sep&&(this.sep._unload(),this.sep=null),this.cdata)this.cdata[x]._unload(),this.cdata[x]=null;for(var x in this._unloadTop(),window.dhx4._eventable(this,"clear"),this)this[x]=null;m=null},this._getWindowMinDimension=function(A){var a=m._getAvailWidth()+7+7,y=m._getAvailHeight()+7+31;return null,{w:Math.max(a,200),h:Math.max(y,140)}},window.dhx4._eventable(this),this._callMainEvent=function(x,a){return this.callEvent(x,a)},this._init(o||"3E");var r=this._availAutoSize[o];if(null!=r&&(this.conf.pattern=o,this.setAutoSize(r.h[r.h.length-1],r.v[r.v.length-1])),"function"==typeof window.dhtmlXWindows&&null==this.mainInst){var g={vp_overflow:1!=this.conf.fs_mode&&"auto"};this.dhxWins=new dhtmlXWindows(g),this.dhxWins.setSkin(this.conf.skin)}if(this.conf.inited=!0,this==this._getMainInst()){var s=0;this.items=[],this.forEachItem(function(a){m.items.push(a),a.conf.index=s++})}if(this==this._getMainInst()&&null!=u&&(null!=u.autosize&&this.setAutoSize.apply(this,u.autosize),null!=u.cells))for(var c=0;c<u.cells.length;c++){var h=u.cells[c],v=this.cells(h.id);h.width&&v.setWidth(h.width),h.height&&v.setHeight(h.height),h.text&&v.setText(h.text),h.collapsed_text&&v.setCollapsedText(h.collapsed_text),h.collapse&&v.collapse(),h.fix_size&&v.fixSize(h.fix_size[0],h.fix_size[1]),void 0!==h.header&&0==window.dhx4.s2b(h.header)&&v.hideHeader()}return u=null,this}function dhtmlXLayoutSepObject(e,a){var c=this;return this.conf={mode:e,idx:a,blocked:!1,locked:!1,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&void 0===window.addEventListener?1:0},window.dhx4.isIE&&0<=navigator.userAgent.indexOf("MSIE 7.0")&&0<=navigator.userAgent.indexOf("Trident")&&(this.conf.btn_left=1),this.sep=document.createElement("DIV"),this.sep.className="dhxlayout_sep",1==window.dhx4.isIE&&(this.sep.onselectstart=function(){return!1}),this.sep.className="dhxlayout_sep dhxlayout_sep_resize_"+this.conf.mode,this._setSize=function(g,n,l,m){this.sep.style.left=g+"px",this.sep.style.top=n+"px",this.sep.style.width=Math.max(l,0)+"px",this.sep.style.height=Math.max(m,0)+"px"},this._lockSep=function(g){this.conf.locked=1==g,this._blockSep()},this._setWH=function(g){var h=this._getLayout();h.conf.sw=null==g?h._detectSW():Math.max(parseInt(g)||-1,-1),h._getMainInst().setSizes(),h=null},this._blockSep=function(){var g=this._getLayout(),h=g.cdata.a.conf.collapsed||g.cdata.b.conf.collapsed||this.conf.locked;g=null,this.conf.blocked!=h&&(this.sep.className="dhxlayout_sep"+(h?"":" dhxlayout_sep_resize_"+this.conf.mode),this.conf.blocked=h)},this._beforeResize=function(h){if(!this.conf.blocked&&(null==this.conf.resize||1!=this.conf.resize.active)){if(h.type==window.dhx4.dnd.evs.start){this.sep.className+=" dhxlayout_sep_resize_actv";var m=h.pageX||h.touches[0].pageX,l=h.pageY||h.touches[0].pageY}else{if(h.button!==this.conf.btn_left)return;m=h.clientX,l=h.clientY}1==window.dhx4.dnd.p_en&&window.dhx4.dnd._touchOff();var g=this._getLayout();this.conf.resize={sx:m,sy:l,tx:h.layerX,ty:h.layerY,sep_x:parseInt(this.sep.style.left),sep_y:parseInt(this.sep.style.top),min_wa:g.cdata.a._getAvailWidth("a"),min_wb:g.cdata.b._getAvailWidth("b"),min_ha:g.cdata.a._getAvailHeight("a"),min_hb:g.cdata.b._getAvailHeight("b")},this.conf.resize.nx=this.conf.resize.sep_x,this.conf.resize.ny=this.conf.resize.sep_y,"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._doOnMouseMove,!1),window.addEventListener("mouseup",this._doOnMouseUp,!1),window.addEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,!1),window.addEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._doOnMouseMove),document.body.attachEvent("onmouseup",this._doOnMouseUp)),g=null}},this._onResize=function(l){if(this.conf.resize.active||(this._initResizeArea(),this.conf.resize.active=!0),"v"==this.conf.mode){var g="mousemove"==l.type?l.clientX:l.pageX||l.touches[0].pageX,h=this.conf.resize.sx-g;this.conf.resize.nx=this.conf.resize.sep_x-h,this.conf.resize.nx>this.conf.resize.sep_x+this.conf.resize.min_wb?this.conf.resize.nx=this.conf.resize.sep_x+this.conf.resize.min_wb:this.conf.resize.nx<this.conf.resize.sep_x-this.conf.resize.min_wa&&(this.conf.resize.nx=this.conf.resize.sep_x-this.conf.resize.min_wa),this.r_sep.style.left=this.conf.resize.nx+"px"}else{var m="mousemove"==l.type?l.clientY:l.pageY||l.touches[0].pageY;h=this.conf.resize.sy-m;this.conf.resize.ny=this.conf.resize.sep_y-h,this.conf.resize.ny>this.conf.resize.sep_y+this.conf.resize.min_hb?this.conf.resize.ny=this.conf.resize.sep_y+this.conf.resize.min_hb:this.conf.resize.ny<this.conf.resize.sep_y-this.conf.resize.min_ha&&(this.conf.resize.ny=this.conf.resize.sep_y-this.conf.resize.min_ha),this.r_sep.style.top=this.conf.resize.ny+"px"}},this._afterResize=function(r){if("function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._doOnMouseMove,!1),window.removeEventListener("mouseup",this._doOnMouseUp,!1),window.removeEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,!1),window.removeEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._doOnMouseMove),document.body.detachEvent("onmouseup",this._doOnMouseUp)),this.conf.resize.active){if(r.type==window.dhx4.dnd.evs.end)this.sep.className=this.sep.className.replace(/\s{0,}dhxlayout_sep_resize_actv/gi,"");else if(r.button!==this.conf.btn_left)return;var m=this._getLayout(),h=m._getMainInst(),n=1==h.checkEvent("onPanelResizeFinish")&&{};!1!==n&&h.forEachItem(function(u){n[u.conf.name]={w:u.conf.size.w,h:u.conf.size.h},u=null});var l=this.conf.resize.nx-this.conf.resize.sep_x,g=this.conf.resize.ny-this.conf.resize.sep_y;if(m.cdata.a._setSize(m.cdata.a.conf.size.x,m.cdata.a.conf.size.y,m.cdata.a.conf.size.w+l,m.cdata.a.conf.size.h+g,"a"),m.cdata.b._setSize(m.cdata.b.conf.size.x+l,m.cdata.b.conf.size.y+g,m.cdata.b.conf.size.w-l,m.cdata.b.conf.size.h-g,"b"),this._setSize(parseInt(this.r_sep.style.left),parseInt(this.r_sep.style.top),parseInt(this.r_sep.style.width),parseInt(this.r_sep.style.height)),window.dhx4.isIE){var s=this;window.setTimeout(function(){s._removeResizeArea(),s=null},1)}else this._removeResizeArea();if(!1!==n){var o=[];h.forEachItem(function(u){var v=n[u.conf.name];v.w==u.conf.size.w&&v.h==u.conf.size.h||o.push(u.conf.name),u=null}),h._callMainEvent("onPanelResizeFinish",[o])}h=m=null,this.conf.resize.active=!1,this.conf.resize=null,1==window.dhx4.dnd.p_en&&window.dhx4.dnd._touchOn()}else this.conf.resize=null},this._initResizeArea=function(){if(null==this.r_sep&&(this.r_sep=document.createElement("DIV"),this.r_sep.className="dhxlayout_resize_sep",this.r_sep.style.left=this.sep.style.left,this.r_sep.style.top=this.sep.style.top,this.r_sep.style.width=this.sep.style.width,this.r_sep.style.height=this.sep.style.height,this.sep.parentNode.appendChild(this.r_sep),window.dhx4.isIE&&(this.r_sep.onselectstart=function(){return!1})),null==this.r_area){if(this.r_area=document.createElement("DIV"),this.r_area.className="dhxlayout_resize_area",this.sep.parentNode.appendChild(this.r_area),window.dhx4.isIE&&(this.r_area.onselectstart=function(){return!1}),"v"==this.conf.mode)var g=parseInt(this.r_sep.style.left)-this.conf.resize.min_wa,n=parseInt(this.r_sep.style.top),l=this.conf.resize.min_wa+this.conf.resize.min_wb+parseInt(this.r_sep.style.width),m=parseInt(this.r_sep.style.height);else g=parseInt(this.r_sep.style.left),n=parseInt(this.r_sep.style.top)-this.conf.resize.min_ha,l=parseInt(this.r_sep.style.width),m=this.conf.resize.min_ha+this.conf.resize.min_hb+parseInt(this.r_sep.style.height);this.r_area.style.left=g+"px",this.r_area.style.top=n+"px",dhtmlXLayoutObject.prototype._confGlob.reszieCover||(dhtmlXLayoutObject.prototype._confGlob.reszieCover={},this.r_area.style.width=l+"px",this.r_area.style.height=m+"px",dhtmlXLayoutObject.prototype._confGlob.reszieCover.w=parseInt(this.r_area.style.width)-this.r_area.offsetWidth,dhtmlXLayoutObject.prototype._confGlob.reszieCover.h=parseInt(this.r_area.style.height)-this.r_area.offsetHeight),this.r_area.style.width=l+dhtmlXLayoutObject.prototype._confGlob.reszieCover.w+"px",this.r_area.style.height=m+dhtmlXLayoutObject.prototype._confGlob.reszieCover.h+"px"}document.body.className+=" dhxlayout_resize_"+this.conf.mode},this._removeResizeArea=function(){this.r_sep.onselectstart=null,this.r_sep.parentNode.removeChild(this.r_sep),this.r_sep=null,this.r_area.onselectstart=null,this.r_area.parentNode.removeChild(this.r_area),this.r_area=null,document.body.className=String(document.body.className).replace(/\s{0,}dhxlayout_resize_[vh]/gi,"")},this._doOnMouseDown=function(g){(g=g||event).preventDefault?g.preventDefault():g.cancelBubble=!0,c._beforeResize(g)},this._doOnBodyMouseDown=function(g){if(g=g||event,null!=c.conf.resize)return 1==c.conf.resize.active&&g.button!==c.conf.btn_left?(g.preventDefault&&g.preventDefault(),g.returnValue=!1,!(g.cancelBubble=!0)):void 0},this._doOnMouseMove=function(g){(g=g||event).preventDefault?g.preventDefault():g.cancelBubble=!0,c._onResize(g)},this._doOnMouseUp=function(g){"mouseup"==(g=g||event).type&&g.button!==c.conf.btn_left||c._afterResize(g)},"function"==typeof window.addEventListener?(this.sep.addEventListener("mousedown",this._doOnMouseDown,!1),this.sep.addEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,!1),document.body.addEventListener("mousedown",this._doOnBodyMouseDown,!1),document.body.addEventListener("contextmenu",this._doOnBodyMouseDown,!1)):(this.sep.attachEvent("onmousedown",this._doOnMouseDown),document.body.attachEvent("onmousedown",this._doOnBodyMouseDown),document.body.attachEvent("oncontextmenu",this._doOnBodyMouseDown)),this._unload=function(){for(var g in"function"==typeof window.addEventListener?(this.sep.removeEventListener("mousedown",this._doOnMouseDown,!1),this.sep.removeEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,!1),document.body.removeEventListener("mousedown",this._doOnBodyMouseDown,!1),document.body.removeEventListener("contextmenu",this._doOnBodyMouseDown,!1)):(this.sep.detachEvent("onmousedown",this._doOnMouseDown),document.body.detachEvent("onmousedown",this._doOnBodyMouseDown),document.body.detachEvent("oncontextmenu",this._doOnBodyMouseDown)),1==window.dhx4.isIE&&(this.sep.onselectstart=null),this.sep.parentNode.removeChild(this.sep),this.sep=null,this)this[g]=null;c=null},this}function dhtmlXTabBar(g,m){var h=this;this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtabbar")||"material",css:"dhxtabbar",lastActive:null,closeButton:!1,align:"left",tabsMode:"bottom"==m?"bottom":"top",tabsContCss:"",contZone:!0,transSpeed:"0.15s",arwMode:"always",tabsOfs:1,tabsTop:0,url_demand:!1,urls:{},autoload:{},tabsWidth:{dhx_terrace:[44,14],dhx_web:[35,9],dhx_skyblue:[35,9],material:[44,14]}},"material"==this.conf.skin&&(this.conf.arwMode="auto");var l,c=navigator.userAgent;0<=c.indexOf("Safari")&&(0<=c.indexOf("5.1.7")||null!=c.match(/7[\.\d]* mobile/gi)&&null!=c.match(/AppleWebKit/gi))&&(this.conf.tabsContCss=" safari_517_fix"),null!=g&&"object"==typeof g&&void 0===g.tagName?(l=g.parent,void 0!==g.skin&&(this.conf.skin=g.skin),void 0!==g.mode&&(this.conf.tabsMode="bottom"==g.mode?"bottom":"top"),void 0!==g.align&&(this.conf.align="right"==g.align?"right":"left"),void 0!==g.close_button&&(this.conf.closeButton=window.dhx4.s2b(g.close_button)),void 0!==g.content_zone&&(this.conf.contZone=window.dhx4.s2b(g.content_zone)),void 0!==g.xml&&(this.conf.autoload.xml=g.xml),void 0!==g.json&&(this.conf.autoload.xml=g.json),void 0!==g.tabs&&(this.conf.autoload.tabs=g.tabs),void 0!==g.onload&&(this.conf.autoload.onload=g.onload),void 0!==g.arrows_mode&&(this.conf.autoload.arrows_mode=g.arrows_mode)):l=g,window.dhtmlXCellTop.apply(this,[l,g.offsets]),null!=this.base._ofs&&null!=this.base._ofs.t&&(this.conf.tabsTop=this.base._ofs.t),this.tabsMode=document.createElement("DIV"),this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode,this.cont.appendChild(this.tabsMode),this.tabsArea=document.createElement("DIV"),this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.innerHTML="<div class='dhxtabbar_tabs_ar_left'><div class='dhxtabbar_arrow_img'></div></div><div class='dhxtabbar_tabs_base'><div class='dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss+"'><div class='dhxtabbar_tabs_line'></div></div></div><div class='dhxtabbar_tabs_ar_right'><div class='dhxtabbar_arrow_img'></div></div>",this.tabsArea.style.top="top"==this.conf.tabsMode?this.conf.tabsTop+"px":"auto",this.tabsMode.appendChild(this.tabsArea),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px",this.tabsArea.childNodes[0].onclick=function(){"left"==h.conf.align?h._moveTabs(1):h._moveTabs(-1)},this.tabsArea.childNodes[2].onclick=function(){"left"==h.conf.align?h._moveTabs(-1):h._moveTabs(1)},this._onTabsAreaClick=function(a){return this._callMainEvent("onTabClose",[a])},this.tabsArea.onclick=function(n){for(var a=(n=n||event).target||n.srcElement;null!=a;){if(void 0!==a._tabCloseId){if(!0!==h._onTabsAreaClick(a._tabCloseId))return;h.t[a._tabCloseId].conf.remove=!0,h._hideTab(a._tabCloseId),a=null}else void 0!==a._tabId&&(h._doOnClick(a._tabId),a=null);null!=a&&(a=a.parentNode)==this&&(a=null)}},this.tabsArea.onselectstart=function(a){(a=a||event).preventDefault?a.preventDefault():a.returnValue=!1},this._doOnClick=function(a){this.callEvent("onTabClick",[a,this.conf.lastActive]),this.t[a].conf.enabled&&this._setTabActive(a)},this.t={},this.addTab=function(a,w,o,u,s,x){x=void 0===x?1==this.conf.closeButton:window.dhx4.s2b(x),s=window.dhx4.s2b(s);var r=document.createElement("DIV");r.className="dhxtabbar_tab",r.innerHTML="<div class='dhxtabbar_tab_text"+(x?" dhxtabbar_tab_text_close":"")+"'>"+w+"</div>"+(x?"<div class='dhxtabbar_tab_close'></div>":""),r._tabId=a,x&&(r.childNodes[1]._tabCloseId=a);var n=this.tabsArea.childNodes[1].firstChild;null!=u&&0<u+1&&u+1<n.childNodes.length?n.insertBefore(r,n.childNodes[u+1]):n.appendChild(r);var y=!1;void 0===o||null==o||"*"==o?(o=this._getLabelWidth(w,x),y=!0):o=parseInt(o),r.style.width=o+"px";var v=new dhtmlXTabBarCell(a,this);this.tabsMode.appendChild(v.cell),this.t[a]={tab:r,cell:v,conf:{text:w,visible:!0,active:!1,enabled:!0,close:x,width:o,autowidth:y}},n=v=null,s?this._setTabActive(a):this._adjustCell(a),1!=this.conf.initSeq&&"auto"==this.conf.arwMode&&this.setSizes()},this.setSizes=function(){this._adjustCont(),null==this.conf.tabsAreaOfs&&(this.tabsArea.style.width=this.cont.offsetWidth+"px",this.conf.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth),this.tabsArea.style.width=this.cont.offsetWidth+this.conf.tabsAreaOfs+"px",this._adjustCell(this.conf.lastActive),this._adjustTabs(!0),this.callEvent("_onSetSizes",[])},this._adjustCell=function(r){if(this.conf.contZone&&null!=r){var o=("top"==this.conf.tabsMode?this.tabsArea.offsetHeight:0)+this.conf.tabsTop,n=this.cont.offsetHeight-this.tabsArea.offsetHeight-this.conf.tabsTop,a=this.t[r].cell.dataType;"dhx_skyblue"!=this.conf.skin||"layout"!=a&&"tabbar"!=a&&"acc"!=a||("top"==this.conf.tabsMode&&(o-=1),n+=1),r!=this.conf.lastActive&&(o=-5e3,this.t[r].cell.cell.style.visibility="hidden",this.t[r].cell.cell.style.zIndex=0),this.t[r].cell._setSize(0,o,this.cont.offsetWidth,n)}},this.setTabsMode=function(a){this.conf.tabsMode="bottom"==a?"bottom":"top",this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.style.top="top"==this.conf.tabsMode?this.conf.tabsTop+"px":"auto",this.setSizes()},this._tabCss=function(u,r){var n=this.t[u].conf.active,s=!this.t[u].conf.enabled;return"dhxtabbar_tab"+(!this.t[u].conf.visible?" dhxtabbar_tab_hidden":n||s?" dhxtabbar_tab"+(n?"_actv":"")+(s?"_dis":""):"")},this._getLabelWidth=function(o,n){null==this.tabsTextTest&&(this.tabsTextTest=document.createElement("SPAN"),this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin),document.body.appendChild(this.tabsTextTest),this.tabsTextTest.innerHTML=o;var a=this.tabsTextTest.offsetWidth;return window.dhx4.isIE&&0==a&&(a=this.tabsTextTest.offsetWidth),a+=this.conf.tabsWidth[this.conf.skin][0],1==n&&(a+=this.conf.tabsWidth[this.conf.skin][1]),document.body.removeChild(this.tabsTextTest),a},this._adjustTabs=function(r){1!=this._checkArrows()&&1!=r||(this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-1+"px",this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+2*this.conf.tabsOfs+"px");var u=this.tabsArea.childNodes[1];if(u.offsetWidth<5)u=null;else{for(var a=parseInt(u.childNodes[0].style[this.conf.align]),o=null,s=0;s<u.childNodes[0].childNodes.length;s++){var v=u.childNodes[0].childNodes[s]._tabId;if(null!=v&&this.t[v].conf.visible){var n=this.t[v].tab.offsetWidth-this.conf.tabsOfs;this.t[v].conf.active&&(a<0||u.offsetWidth<n?o={d:1,id:v}:a+n>u.offsetWidth&&(o={d:-1,id:v})),a+=n}}null!=o?this._moveTabs(o.d,o.id):u.offsetWidth>a+1&&(u.childNodes[0].style[this.conf.align]=Math.min(0,parseInt(u.childNodes[0].style[this.conf.align])+(u.offsetWidth-a))+"px"),u=o=null}},this._moveTabs=function(y,r){for(var o=this.tabsArea.childNodes[1].childNodes[0],v=0,A=[],D=null,a=0;a<o.childNodes.length;a++){var n=o.childNodes[a]._tabId;null!=n&&this.t[n].conf.visible&&(A.push({id:n,w:this.t[n].tab.offsetWidth-this.conf.tabsOfs,ind:v}),n==r&&(D=v),v++)}var C=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]),u=this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth+this.conf.tabsOfs,w=null,s=null;for(a=0;a<A.length;a++)A[a].x=C,null==w&&0<=C&&0<C+A[a].w&&(w=A[a]),C<u&&C+A[a].w<=u&&(s=A[a]),C+=A[a].w;if(null!=D)var E=A[D];else{E=null;0<y?null==w?0<A.length&&(E=A[A.length-1]):0<w.ind&&A.length>=w.ind&&(E=A[w.ind-1]):null==s?0<A.length&&(E=A[0]):A.length>s.ind&&(E=A[s.ind+1])}null!=E&&(o.style[this.conf.align]=0<y?C<u?Math.min(0,parseInt(o.style[this.conf.align])+(u-C))+"px":parseInt(o.style[this.conf.align])-E.x+"px":parseInt(o.style[this.conf.align])-E.x+u-E.w+"px"),o=E=A=null},this._getNextVisible=function(n,a){return this._getNearVisible(n,a,"next")},this._getPrevVisible=function(n,a){return this._getNearVisible(n,a,"previous")},this._getFirstVisible=function(){return this._getNearVisible(null,!1,"first")},this._getNearVisible=function(u,o,s){if("first"==s){var r=this.tabsArea.childNodes[1].childNodes[0].childNodes[1];s="next"}else{if(null==u||null==this.t[u])return o?this._getFirstVisible():null;r=this.t[u].tab[s+"Sibling"]}for(var n=null;null!=r&&null==n;){var a=r._tabId;null!=a&&null==n&&this.t[a].conf.visible?n=a:r=r[s+"Sibling"]}return r=null,n},this._showTab=function(n,a){if(null!=this.t[n]){if(1==this.t[n].conf.transActv){if("show"==this.t[n].conf.transMode)return}else if(1==this.t[n].conf.visible)return;!1!==this.conf.transProp?(this.t[n].conf.transActv=!0,this.t[n].conf.transMode="show",this.t[n].conf.transProp=this.conf.transProp,this.t[n].conf.transActvId=a?n:null,this.t[n].conf.transEv||(this.t[n].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[n].conf.transEv=!0),this.t[n].conf.visible=!0,this.t[n].tab.className=this._tabCss(n),this.t[n].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[n].tab.style.width=this.t[n].conf.width+"px",this.t[n].tab.clientWidth>=this.t[n].conf.width&&(this.t[n].tab.style.visibility="visible")):(this.t[n].conf.visible=!0,this.t[n].tab.style.display="",a||this.t[n].conf.active?(this.t[n].conf.active=!1,this._setTabActive(n)):this._adjustTabs())}},this._hideTab=function(u,a){if(null!=this.t[u]){if(1==this.t[u].conf.transActv){if("hide"==this.t[u].conf.transMode)return}else if(1!=this.t[u].conf.visible)return;var n=!1;this.conf.lastActive==u&&(this.conf.lastActive=null,this.t[u].conf.active=!1,this.t[u].tab.className=this._tabCss(u),n=!0);var r=this._getPrevVisible(u),o=this._getNextVisible(u),s=1==n&&!1!==a?(1==a?null:a)||o||r:null;!1!==this.conf.transProp?(this.t[u].conf.transActv=!0,this.t[u].conf.transMode="hide",this.t[u].conf.transProp=this.conf.transProp,this.t[u].conf.transActvId=s,this.t[u].conf.visible=!1,this.t[u].conf.transEv||(this.t[u].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[u].conf.transEv=!0),this.t[u].tab.style.visibility="hidden",this.t[u].tab.className=h._tabCss(u),this.t[u].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[u].tab.style.width="0px"):(this.t[u].tab.style.display="none",this.t[u].conf.visible=!1,this.conf.contZone&&(this.t[u].cell.cell.style.visibility="hidden",this.t[u].cell.cell.style.top="-5000px"),null!=s&&this._setTabActive(s),this._adjustTabs(),this.t[u].conf.remove&&this._removeTab(u))}},this._isTabVisible=function(a){return 1==this.t[a].conf.visible},this._doOnTrEnd=function(){var o=this._tabId;if(null!=h.t[o]){var a=h.t[o],n=a.conf.transActvId;"hide"==a.conf.transMode?a.conf.remove?h._removeTab(o):(a.tab.style[a.conf.transProp]="",h.conf.contZone&&(a.cell.cell.style.visibility="hidden",a.cell.cell.style.top="-5000px"),a.conf.transActv=!1):"show"==a.conf.transMode&&(a.tab.style[a.conf.transProp]="",a.tab.style.visibility="visible",a.conf.transMode=null,a.conf.transActv=!1),null!=n?h._setTabActive(n):h._adjustTabs(),a=null}},this.enableTabCloseButton=function(a){this.conf.closeButton=window.dhx4.s2b(a)},this.unload=function(){for(var n in this.conf.unloading=!0,this.clearAll(),(this.t=null)!=this.tabsTextTest&&(this.tabsTextTest.parentNode&&this.tabsTextTest.parentNode.removeChild(this.tabsTextTest),this.tabsTextTest=null),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this.tabsArea.childNodes[0].onclick=null,this.tabsArea.childNodes[2].onclick=null,this.tabsArea.onclick=null,this.tabsArea.onselectstart=null,this.tabsArea.parentNode.removeChild(this.tabsArea),this.tabsArea=null,this.tabsMode.parentNode.removeChild(this.tabsMode),this.tabsMode=null,this._unloadTop(),window.dhx4._eventable(this,"clear"),this)this[n]=null;h=null},this.enableContentZone=function(a){this.conf.contZone=1==a},this.setSkin=function(o){for(var n in this._setBaseSkin(o),this.conf.skin=o,null!=this.tabsTextTest&&(this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin),this.t)this.t[n].cell._resetSizeState(),1==this.t[n].conf.autowidth&&(this.t[n].conf.width=this._getLabelWidth(this.t[n].conf.text,this.t[n].conf.close),this.t[n].conf.visible&&(this.t[n].tab.style.width=this.t[n].conf.width+"px"));this.conf.tabsAreaOfs=null,this._fixTabsOfs(),this.setSizes()},this.setAlign=function(a){(a="left"==a?"left":"right")!=this.conf.align?(!1!==this.conf.transProp&&(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=""),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="",this.conf.align=a,this.tabsArea.childNodes[1].childNodes[0].className="dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss,!(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px")!==this.conf.transProp&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos)):this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"},this._initObj=function(r){this.conf.initSeq=!0,this.clearAll();var a=!1;if(null!=r.settings&&(null!=r.settings.skin&&this.setSkin(r.settings.skin),null!=r.settings.close_button?this.enableTabCloseButton(window.dhx4.s2b(r.settings.close_button)):null!=r.settings.closeButton&&this.enableTabCloseButton(window.dhx4.s2b(r.settings.closeButton)),null!=r.settings.align&&this.setAlign(r.settings.align),"ajax"==r.settings.hrefmode&&(a=!0),"ajax-html"==r.settings.hrefmode&&(a=!0,this.conf.url_demand=!0)),null!=r.tabs)for(var o=0;o<r.tabs.length;o++){var n=r.tabs[o];void 0===n.id&&(n.id=window.dhx4.newId()),isNaN(parseInt(n.width))?n.width=null:n.width=parseInt(n.width),this.addTab(n.id,n.text||n.label||"",n.width,n.index,window.dhx4.s2b(n.selected)||window.dhx4.s2b(n.active),n.close),null!=n.content?this.cells(n.id).attachHTMLString(n.content):null!=n.href&&(1==this.conf.url_demand?this.conf.urls[n.id]={href:n.href,ajax:a}:this.cells(n.id).attachURL(n.href,a)),void 0!==n.enabled&&0==window.dhx4.s2b(n.enabled)?this.tabs(n.id).disable():void 0!==n.disabled&&1==window.dhx4.s2b(n.disabled)&&this.tabs(n.id).disable()}this.conf.initSeq=!1,"auto"==this.conf.arwMode&&this.setSizes(),1==this.conf.url_demand&&this._loadURLOnDemand(this.conf.lastActive)},this._xmlToObj=function(v){var u={settings:{},tabs:[]},n=v.getElementsByTagName("tabbar")[0];if(null!=n){for(var x in{skin:1,align:1,closeButton:1,hrefmode:1})null!=n.getAttribute(x)&&(u.settings[x]=n.getAttribute(x));for(var A=n.getElementsByTagName("tab"),o=0;o<A.length;o++){var s={text:A[o].firstChild.nodeValue||""};for(var x in{id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1})null!=A[o].getAttribute(x)&&(s[x]=A[o].getAttribute(x));var C=A[o].getElementsByTagName("content")[0];if(null!=C){s.content="";for(var y=0;y<C.childNodes.length;y++)s.content+=C.childNodes[y].nodeValue||""}u.tabs.push(s)}}return u},dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tabbar",{struct:!0});var e=window.dhx4.transDetect();return this.conf.transProp=e.transProp,this.conf.transEv=e.transEv,this.conf.transValueWidth="width "+this.conf.transSpeed,e=null,!1!==this.conf.transProp&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos),this._callMainEvent=function(n,a){return this.callEvent(n,a)},window.dhx4._eventable(this),null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml?this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload):null!=this.conf.autoload.tabs&&this.loadStruct({tabs:this.conf.autoload.tabs},this.conf.autoload.onload),null!=this.conf.autoload.arrows_mode&&this.setArrowsMode(this.conf.autoload.arrows_mode),this._fixTabsOfs(),this.setSizes(),this}function dhtmlXTabBarInitFromHTML(){for(var z=document.getElementsByTagName("div"),i=0;i<z.length;i++)if(-1!=z[i].className.indexOf("dhtmlxTabBar")){var conf={settings:{},tabs:[]},n=z[i],id=n.id;n.className="";for(var k=new Array,j=0;j<n.childNodes.length;j++)n.childNodes[j].tagName&&"!"!=n.childNodes[j].tagName&&(k[k.length]=n.childNodes[j]);var skin=n.getAttribute("skin");null!=skin&&(conf.settings.skin=skin);var w=new dhtmlXTabBar({parent:id,mode:n.getAttribute("mode")});window[id]=w,acs=n.getAttribute("onbeforeinit"),acs&&eval(acs),align=n.getAttribute("align"),align&&(conf.settings.align=align);for(var cont={},j=0;j<k.length;j++){var m=k[j],tab={id:m.id,text:m.getAttribute("name"),width:m.getAttribute("width"),selected:m.getAttribute("selected"),active:m.getAttribute("active"),close:m.getAttribute("close")},href=m.getAttribute("href");cont[m.id]=href?{href:href}:{cont:m},conf.tabs.push(tab)}for(var a in w.loadStruct(conf),cont)cont[a].href?(w.cells(a).attachURL(cont[a].href),cont[a].href=null):(w.cells(a).attachObject(cont[a].cont),"none"==cont[a].cont.style.display&&(cont[a].cont.style.display=""),cont[a].cont=null),cont[a]=null;var selId=n.getAttribute("select");if(null!=selId)w.tabs(selId).setActive();else if(null==w.getActiveTab()){var v=w._getFirstVisible();null!=v&&w.cells(v).setActive()}acs=n.getAttribute("oninit"),acs&&eval(acs)}"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.detachEvent("onload",dhtmlXTabBarInitFromHTML)}function dhtmlXSideBar(c){var e=this;this.conf={skin:c.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxsidebar")||"material",css:"dhxsidebar",width:c.width||200,scroll_size:12,scroll_mult:20,close_button:!1,icons_path:c.icons_path||"",selected:null,single_cell:void 0!==c.single_cell&&window.dhx4.s2b(c.single_cell),cell:null,header:window.dhx4.s2b(c.header),autohide:window.dhx4.s2b(c.autohide),animate_items:!0},this.setTemplate(c.template),window.dhtmlXCellTop.apply(this,[c.parent,null==c?null:c.offsets]),window.dhx4._eventable(this),1==window.navigator.msPointerEnabled?(this.conf.touch_ms=!0,this.conf.touch_start="MSPointerDown",this.conf.touch_end="MSPointerUp"):(this.conf.touch_ms=!1,this.conf.touch_start="touchstart",this.conf.touch_end="touchend"),this.side=document.createElement("DIV"),this.side.className="dhxsidebar_side dhxsidebar_tpl_"+this.conf.tpl_name,this.side.innerHTML="<div class='dhxsidebar_side_items'></div>",this.cont.appendChild(this.side),this.arw=document.createElement("DIV"),this.arw.className="dhxsidebar_arrows dhxsidebar_arrows_hidden",this.arw.innerHTML="<div class='dhxsidebar_arrow dhxsidebar_arrow_left'><div class='dhxsidebar_arrow_image'></div></div><div class='dhxsidebar_arrow dhxsidebar_arrow_right'><div class='dhxsidebar_arrow_image'></div></div>",this.cont.appendChild(this.arw),1==this.conf.autohide&&(this.hideSide(),this.cont.className+=" dhxsidebar_autohide",this._doOnBodyClick=function(){1!=e.conf.clear_click?e.hideSide():e.conf.clear_click=!1},this._doOnEscDown=function(g){27==(g=g||event).keyCode&&(e.conf.clear_click=!1,e.hideSide())},"function"==typeof window.addEventListener?(window.addEventListener(this.conf.touch_start,this._doOnBodyClick,!1),window.addEventListener("click",this._doOnBodyClick,!1),window.addEventListener("keydown",this._doOnEscDown,!1)):(document.body.attachEvent("onclick",this._doOnBodyClick),document.body.attachEvent("onkeydown",this._doOnEscDown))),window.setTimeout(function(){null!=e&&null!=e.side&&(e.side.firstChild.style.top="0px")},1),this._doOnArwClick=function(h){"click"!=(h=h||event).type&&h.preventDefault&&h.preventDefault(),h.cancelBubble=!0;var g=h.target||h.srcElement;null!=g.className.match(/dhxsidebar_arrow_image/)&&(g=g.parentNode),null!=g.className.match(/dhxsidebar_arrow_left/)?e._scrollSide(-e.conf.scroll_size):null!=g.className.match(/dhxsidebar_arrow_right/)&&e._scrollSide(e.conf.scroll_size),g=null},"function"==typeof window.addEventListener?(this.arw.addEventListener(this.conf.touch_start,this._doOnArwClick,!1),this.arw.addEventListener("click",this._doOnArwClick,!1)):this.arw.attachEvent("onclick",this._doOnArwClick),this._doOnSideClick=function(l){var h=(l=l||event).target||l.srcElement,m=null,g=!1;for(e.conf.clear_click=!0,"touchstart"!=l.type&&"pointerdown"!=l.type&&"MSPointerDown"!=l.type||(l.preventDefault&&l.preventDefault(),null==this.className.match(/dhxsidebar_touch/gi)&&("touchstart"==l.type||"pointerdown"==l.type&&"touch"==l.pointerType)&&(this.className+=" dhxsidebar_touch"));null!=h&&null==m&&"pointerdown"!=l.type&&"MSPointerDown"!=l.type;)void 0!==h.className&&(null!=h.className.match(/^dhxsidebar_item/)&&void 0!==h._idd?m=h._idd:null!=h.className.match(/^dhxsidebar_bubble/)&&(g=!0,m=h.parentNode._idd)),h=h.parentNode;null!=m&&(0==g||1==g&&1==e.callEvent("onBubbleClick",[m,e.t[m].conf.bubble]))&&e._setItemActive(m,!0),h=null},"function"==typeof window.addEventListener?(this.side.addEventListener(this.conf.touch_start,this._doOnSideClick,!1),this.side.addEventListener(this.conf.touch_end,this._doOnSideClick,!1),this.side.addEventListener("mouseup",this._doOnSideClick,!1)):this.side.attachEvent("onclick",this._doOnSideClick),this.side.onmouseover=function(){this.className=this.className.replace(/\s*dhxsidebar_touch/gi,"")},this._doOnSideScroll=function(g){var h="mousewheel"==(g=g||event).type?-g.wheelDelta:g.deltaY;e._scrollSide(h/Math.abs(h)*3)},this._scrollSide=function(g){var h=parseInt(this.side.firstChild.style.top||0)-g*this.conf.scroll_mult;h+this.side.firstChild.offsetHeight<this.side.clientHeight&&(h=this.side.clientHeight-this.side.firstChild.offsetHeight),0<h&&(h=0),this.side.firstChild.style.top=h+"px"},"function"==typeof window.addEventListener?this.side.addEventListener("wheel",this._doOnSideScroll,!1):this.side.attachEvent("onmousewheel",this._doOnSideScroll),this.t={},this.s={},this._adjustCell=function(r,n){if(1==this.conf.single_cell||null!=r){var g=1==this.conf.autohide?0:this.conf.width,l=this.cont.offsetWidth-g,o=0,m=this.cont.offsetHeight;1==this.conf.single_cell?1==n&&this.conf.cell._setSize(g,o,l,m):(r!=this.conf.selected&&(o=-5e3,this.t[r].cell.cell.style.visibility="hidden",this.t[r].cell.cell.style.zIndex=0),this.t[r].cell._setSize(g,o,l,m))}};var a=window.dhx4.transDetect();return this.conf.transProp=a.transProp,this.conf.transEv=a.transEv,this.conf.transValue="all 0.1s",this._doOnTrEnd=function(h){var m=this._idd;if(null!=e.t[m]){var g=e.t[m],l=g.conf.transActvId;"hide"==g.conf.transMode?1==g.conf.remove?e._removeItem(m):(g.item.style[g.conf.transProp]="",1!=e.conf.single_cell&&(g.cell.cell.style.visibility="hidden",g.cell.cell.style.top="-5000px"),g.conf.transActv=!1):"show"==g.conf.transMode&&(g.item.style[g.conf.transProp]="",g.item.style.visibility="visible",g.conf.transMode=null,g.conf.transActv=!1),null!=l?e._setItemActive(l):e._checkHeight(),g=null}},this._initObj=function(g){this.clearAll(),null!=g.items&&this.addItem(g.items)},this._xmlToObj=function(s){var h=[],n=s.getElementsByTagName("sidebar");if(null!=n&&null!=n[0])for(var l=n[0].getElementsByTagName("item"),o=0;o<l.length;o++){for(var m={},g=0;g<l[o].attributes.length;g++)m[l[o].attributes[g].nodeName]=l[o].attributes[g].nodeValue;h.push(m)}return{items:h}},dhx4._enableDataLoading(this,"_initObj","_xmlToObj","sidebar",{struct:!0}),this.unload=function(){for(var g in this.conf.unloading=!0,"function"==typeof window.addEventListener?this.side.removeEventListener("wheel",this._doOnSideScroll,!1):this.side.detachEvent("onmousewheel",this._doOnSideScroll),1==this.conf.autohide&&("function"==typeof window.addEventListener?(window.removeEventListener("click",this._doOnBodyClick,!1),window.removeEventListener("keydown",this._doOnEscDown,!1)):(document.body.detachEvent("onclick",this._doOnBodyClick),document.body.detachEvent("onkeydown",this._doOnEscDown))),"function"==typeof this._sideCoverDetach&&this._sideCoverDetach(),this.clearAll(),this.s=this.t=null,"function"==typeof window.addEventListener?(this.arw.removeEventListener(this.conf.touch_start,this._doOnArwClick,!1),this.arw.removeEventListener("click",this._doOnArwClick,!1)):this.arw.detachEvent("onclick",this._doOnArwClick),this.arw.parentNode.removeChild(this.arw),this.arw=null,"function"==typeof window.addEventListener?(this.side.removeEventListener(this.conf.touch_start,this._doOnSideClick,!1),this.side.removeEventListener(this.conf.touch_end,this._doOnSideClick,!1),this.side.removeEventListener("click",this._doOnSideClick,!1)):this.side.detachEvent("onclick",this._doOnSideClick),this.side.onmouseover=null,this.side.parentNode.removeChild(this.side),this.side=null,this._unloadTop(),1==this.conf.single_cell&&(this.conf.cell._unload(),this.conf.cell=null),window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this)this[g]=null;e=null},1==this.conf.single_cell&&(this.conf.cell=new dhtmlXSideBarCell("master",this),this.cont.appendChild(this.conf.cell.cell),this._cells_native=this.cells,this.cells=function(g){return this.conf.cell._idd=g,this.conf.cell}),this.setSizes(),null!=c.items?this._initObj(c):null!=c.json?this.loadStruct(c.json,c.onload):null!=c.xml&&this.loadStruct(c.xml,c.onload),this}function dhtmlXCarousel(g,l,n){"string"==typeof g||"object"==typeof g&&void 0!==g.tagName?g={parent:"string"==typeof g?document.getElementById(g):g,effect:l,skin:n,delete_conf:!0}:void 0!==g&&null!=g||(g={}),this.conf={skin:g.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcarousel")||"material",css:"dhxcarousel",items_count:0,selected:-1,item_width:Number(g.item_width)||"auto",item_height:Number(g.item_height)||"auto",ofs_item:Number(g.offset_item)||1,ofs_left:Number(g.offset_left)||0,ofs_top:Number(g.offset_top)||0,buttons:void 0===g.buttons||window.dhx4.s2b(g.buttons),drops:!1,keys:void 0===g.keys||window.dhx4.s2b(g.keys),key_data:{left:37,right:39},touch_scroll:void 0===g.touch_scroll||window.dhx4.s2b(g.touch_scroll),arw:["&#9668;","&#9658;"]},this.conf.autowidth="auto"==this.conf.item_width,this.conf.autoheight="auto"==this.conf.item_height;var e=window.dhx4.transDetect();if(this.conf.transProp=e.transProp,this.conf.transEv=e.transEv,this.conf.anim_type=g.effect||"slide",1==this.ef[this.conf.anim_type]){var h=this["_"+this.conf.anim_type+"_init"]();if(!1===h&&(this.conf.anim_type="slide",h=this["_"+this.conf.anim_type+"_init"]()),"object"==typeof h)for(var c in h)void 0===this.conf[c]&&(this.conf[c]=h[c])}this.conf.anim_f=this["_"+this.conf.anim_type+"_f"]();var m=this;if(window.dhtmlXCellTop.apply(this,[g.parent,g.offsets]),this.area=document.createElement("DIV"),this.area.className="dhxcarousel_area",this.cont.appendChild(this.area),"function"==typeof window.addEventListener&&1==m.conf.touch_scroll&&(this._doOnTouchStart=function(a){1!=window.dhx4.dnd._mTouch(a)&&1!=m.conf.animating&&(a.preventDefault&&a.preventDefault(),m.area.className+=" dhxcarousel_area_dnd",m.conf.touch_conf={t:(new Date).getTime(),dx:null,dy:null},null!=a.type.match(/^touch/)?(m.conf.touch_conf.id=a.touches[0].identifier,m.conf.touch_conf.x=a.touches[0].clientX,m.conf.touch_conf.y=a.touches[0].clientY):(m.area.style.touchAction=m.area.style.msTouchAction="none",m.conf.touch_conf.x=a.clientX,m.conf.touch_conf.y=a.clientY),window.addEventListener(window.dhx4.dnd.evs.move,m._doOnTouchMove,!1),window.addEventListener(window.dhx4.dnd.evs.end,m._doOnTouchEnd,!1))},this._doOnTouchMove=function(a){},this._doOnTouchEnd=function(s){if(null!=s.type.match(/^touch/))for(var o=0,r=0;r<s.changedTouches.length;r++)s.changedTouches[r].identifier==m.conf.touch_conf.id&&(o=m.conf.touch_conf.x-s.changedTouches[r].clientX);else o=m.conf.touch_conf.x-s.clientX;if(window.removeEventListener(window.dhx4.dnd.evs.move,m._doOnTouchMove,!1),window.removeEventListener(window.dhx4.dnd.evs.end,m._doOnTouchEnd,!1),m.area.className=m.area.className.replace(/\s*dhxcarousel_area_dnd$/,""),!(0==o||400<(new Date).getTime()-m.conf.touch_conf.t)){var a=o/Math.abs(o);m._animateStart(a)}},this.area.addEventListener(window.dhx4.dnd.evs.start,this._doOnTouchStart,!1)),this.cdata={},this.ind={},this.addCell=function(u,s){for(var r in this.conf.items_count++,-1==this.conf.selected&&(this.conf.selected=0),this.setSizes(),this._checkControls(),void 0===s||null==s?s=this.conf.items_count-1:s<0?s=0:s>this.conf.items_count-1&&(s=this.conf.items_count-1),this.cdata)this.cdata[r].index>=s&&(this.cdata[r].index++,this.ind[this.cdata[r].index]=r,this._adjustCell(r));for(null==u&&(u=String(window.dhx4.newId()));null!=this.cdata[u];)u=String(window.dhx4.newId());var o=new dhtmlXCarouselCell(u,this);return null!=this.area.childNodes[s]?this.area.insertBefore(o.cell,this.area.childNodes[s]):this.area.appendChild(o.cell),this.cdata[u]={index:s,cell:o},this.ind[s]=u,this._adjustCell(u),this._addBar(),this._setBarIndex(this.conf.selected),o=null,this[this.conf.anim_f.cell_added](u),u},this._removeCell=function(v){var s=this.cdata[v].index;if(this.cdata[v].cell._unload(),this.cdata[v].index=this.cdata[v].cell=null,this.cdata[v]=null,delete this.cdata[v],delete this.ind[s],this.conf.items_count--,1!=this.conf.unloading){this.ind={};for(var r in this.cdata)this.cdata[r].index>s&&this.cdata[r].index--,this.ind[this.cdata[r].index]=r;var u=!1;this.conf.selected>s?this.conf.selected--:this.conf.selected==s&&(this.conf.selected=Math.min(this.conf.selected,this.conf.items_count-1),u=!0),this._removeBar(!1),this._setBarIndex(this.conf.selected),1==u&&0<=this.conf.selected&&this[this.conf.anim_f.update_selected](this.ind[this.conf.selected]),this.setSizes(),this._checkControls()}},this.setSizes=function(){this._adjustCont();var v={};for(var r in this.area.style.height=this.cont.offsetHeight-this.controls.offsetHeight+"px",this.conf.width=this.conf.autowidth?this.cont.offsetWidth-2*this.conf.ofs_left:this.conf.item_width,this.conf.height=this.conf.autoheight?this.area.offsetHeight-2*this.conf.ofs_top:this.conf.item_height,this.conf.top=Math.max(0,this.conf.autoheight?this.conf.ofs_top:Math.floor((this.area.offsetHeight-this.conf.height)/2)),this.area.style.width=this[this.conf.anim_f.detect_aw]()*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item+"px",this.area.style.left=Math.round(this.cont.offsetWidth/2-this.conf.width/2-this.conf.ofs_item)+"px",this.cdata){var u={};for(var o in this.cdata[r].cell.conf.size)u[o]=this.cdata[r].cell.conf.size[o];1==this.conf.autowidth&&(u.w=this.conf.width,u.x=this[this.conf.anim_f.detect_x](r)),1==this.conf.autoheight&&(u.h=this.conf.height),v[r]=u}if(this.area.style.left=Math.round(this.cont.offsetWidth/2-this.conf.width/2-this.conf.ofs_item)-(this.conf.width+this.conf.ofs_item)*this.conf.selected+"px",this._adjustControls(),1!=this.conf.autoheight)for(var r in this.conf.top=Math.max(0,Math.floor(this.area.offsetHeight-this.conf.height)/2),v)v[r].y=this.conf.top;for(var r in v)this.cdata[r].cell._setSize(v[r].x,v[r].y,v[r].w,v[r].h);this.callEvent("_onSetSizes",[])},this._adjustCell=function(a){this.cdata[a].cell._setSize(this[this.conf.anim_f.detect_x](a),this.conf.top,this.conf.width,this.conf.height)},this._animateStart=function(o,a){this.conf.selected<=0&&o<0||this.conf.selected>=this.conf.items_count-1&&0<o||1!=this.conf.animating&&(this.conf.animating=!0,this[this.conf.anim_f.prepare](o,a))},this._animateTransEnd=function(a){m[m.conf.anim_f.end](a||event,this)},this._animateEnd=function(a){this.conf.selected=this.conf.selected+a,this._checkControls(),this._setBarIndex(this.conf.selected),this.callEvent("onSelect",[this.ind[this.conf.selected]]),this.conf.animating=!1},this._initControls(),this.setCellSize=function(a,o){this.conf.item_width=null==a?"auto":a,this.conf.item_height=null==o?"auto":o,this.setSizes()},this.setOffset=function(r,o,a){null!=r&&(this.conf.ofs_left=r),null!=o&&(this.conf.ofs_top=o),null!=a&&(this.conf.ofs_item=a),this.setSizes()},this.enableHotKeys=function(a){this.conf.keys=window.dhx4.s2b(a)},this.goFirst=function(){0!=this.conf.selected&&this._animateStart(-this.conf.selected)},this.goLast=function(){this.conf.selected!=this.conf.items_count-1&&this._animateStart(this.conf.items_count-1-this.conf.selected)},this.goNext=function(){this._animateStart(1)},this.goPrev=function(){this._animateStart(-1)},this.getActiveIndex=function(){return this.conf.selected},this.getActiveId=function(){return this.ind[this.conf.selected]},this.getActiveCell=function(){var a=this.getActiveId();return null!=a?this.cdata[a].cell:null},this.unload=function(){for(var o in this.conf.unloading=!0,"function"==typeof window.addEventListener?(window.removeEventListener("keydown",this._doOnWinKeyDown,!1),null!=this._doOnTouchStart&&this.area.removeEventListener(window.dhx4.dnd.evs.start,this._doOnTouchStart,!1)):document.body.detachEvent("onkeydown",this._doOnWinKeyDown),this.cdata)this._removeCell(o);for(var o in this.cdata[o]=null,this.area.parentNode.removeChild(this.area),this.area=null,this._unloadControls(),this._unloadTop(),window.dhx4._eventable(this,"clear"),this)this[o]=null;m=null},window.dhx4._eventable(this),this._callMainEvent=function(o,a){this.callEvent(o,a)},this.conf.ev_coverclick=this.attachEvent("_cellCoverClick",function(a){var o=a-this.conf.selected;1==Math.abs(o)&&this._animateStart(o)}),this._doOnWinKeyDown=function(r){if(r=r||event,1==m.conf.keys&&1==r.ctrlKey&&1!=r.shiftKey&&1!=r.altKey){var o=r.keyCode,a=m.conf.key_data;o!=a.left&&o!=a.right||(r.preventDefault?r.preventDefault():r.returnValue=!1,m._animateStart(o==a.left?-1:1))}},"function"==typeof window.addEventListener?window.addEventListener("keydown",this._doOnWinKeyDown,!1):document.body.attachEvent("onkeydown",this._doOnWinKeyDown),1==g.delete_conf){for(var c in g)g[c]=null;g=null}return this}function dhtmlXWindows(n){var l=this,g={};if(void 0!==n)for(var e in n)g[e]=n[e];n=null,this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxwins")||"material",vp_pos_ofs:20,vp_custom:!1,vp_of_auto:"auto"==g.vp_overflow,vp_of_id:window.dhx4.newId(),ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:"minmax",dblclick_active:!1,dblclick_ev:window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8,fr_cover:0<=navigator.userAgent.indexOf("MSIE 6.0")};var c=window.dhx4.transDetect();if(this.conf.tr={prop:c.transProp,ev:c.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4"},g.viewport?null!=g.viewport.object?this.attachViewportTo(g.viewport.object):null!=g.viewport.left&&null!=g.viewport.top&&null!=g.viewport.width&&null!=g.viewport.height?this.setViewport(g.viewport.left,g.viewport.top,g.viewport.width,g.viewport.height,g.viewport.parent):this.attachViewportTo(document.body):this.attachViewportTo(document.body),this.w={},this.createWindow=function(s,H,E,u,J){var o={};if(1==arguments.length&&"object"==typeof s)o=s;else for(o.id=s,o.left=H,o.top=E,o.width=u,o.height=J,void 0!==o.id&&null!=o.id||(o.id=window.dhx4.newId());null!=this.w[o.id];)o.id=window.dhx4.newId();null==o.left&&(o.left=0),null==o.top&&(o.top=0),o.move=(null==o.move||0!=window.dhx4.s2b(o.move))&&(null==o.deny_move||1!=window.dhx4.s2b(o.deny_move)),o.park=(null==o.park||0!=window.dhx4.s2b(o.park))&&(null==o.deny_park||1!=window.dhx4.s2b(o.deny_park)),o.resize=(null==o.resize||0!=window.dhx4.s2b(o.resize))&&(null==o.deny_resize||1!=window.dhx4.s2b(o.deny_resize)),o.keep_in_viewport=null!=o.keep_in_viewport&&window.dhx4.s2b(o.keep_in_viewport),o.modal=null!=o.modal&&window.dhx4.s2b(o.modal),o.center=null!=o.center&&window.dhx4.s2b(o.center),o.text=null!=o.text?o.text:null!=o.caption?o.caption:"dhtmlxWindow",o.header=!(null!=o.header&&0==window.dhx4.s2b(o.header));var K=document.createElement("DIV");K.className="dhxwin_active",this.vp.appendChild(K),K._isWindow=!0,K._idd=o.id;var A=document.createElement("DIV");A.className="dhxwin_hdr",A.style.zIndex=0,A.innerHTML="<div class='dhxwin_icon'></div><div class='dhxwin_text'><div class='dhxwin_text_inside'>"+o.text+"</div></div><div class='dhxwin_btns'></div>",K.appendChild(A),A.onselectstart=function(a){return(a=a||event).preventDefault?a.preventDefault():a.returnValue=!1,!1},A.oncontextmenu=function(a){return!((a=a||event).cancelBubble=!0)},A._isWinHdr=!0,A.firstChild._isWinIcon=!0;var v=document.createElement("DIV");v.className="dhxwin_brd",K.appendChild(v);var D=document.createElement("DIV");D.className="dhxwin_fr_cover",D.innerHTML="<iframe class='dhxwin_fr_cover_inner' frameborder='0' border='0'></iframe><div class='dhxwin_fr_cover_inner'></div>",K.appendChild(D);var w={help:{title:"Help",visible:!(this.w[o.id]={win:K,hdr:A,brd:v,fr_cover:D,b:{},conf:{z_id:window.dhx4.newId(),actv:!1,modal:!1,maxed:!1,parked:!1,sticked:!1,visible:!0,header:!0,text:o.text,keep_in_vp:o.keep_in_viewport,allow_move:o.move,allow_park:o.park,allow_resize:o.resize,max_w:null,max_h:null,min_w:80,min_h:80}})},stick:{title:"Stick",visible:!1},park:{title:"Park",visible:!0},minmax:{title:"Min/Max",visible:!0},close:{title:"Close",visible:!0}};for(var F in w){var C=new dhtmlXWindowsButton(this,o.id,F,w[F].title,!1);0==w[F].visible&&C.hide(),A.lastChild.appendChild(C.button),this.w[o.id].b[F]=C,C=null}this._winAdjustTitle(o.id),this.w[o.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[o.id].conf.z_id);var I=new dhtmlXWindowsCell(o.id,this);return this.w[o.id].win.insertBefore(I.cell,D),this.w[o.id].cell=I,"function"==typeof window.addEventListener?(this.w[o.id].win.addEventListener("mousedown",this._winOnMouseDown,!1),this.w[o.id].win.addEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&this.w[o.id].win.addEventListener("dblclick",this._winOnMouseDown,!1),1==this.conf.dnd_enabled&&null!=window.dhx4.dnd.evs.start&&(this.w[o.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),1!=window.dhx4.dnd.p_en&&(this.w[o.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),this.w[o.id].win.addEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,!1)))):(this.w[o.id].win.attachEvent("onmousedown",this._winOnMouseDown),this.w[o.id].win.attachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&this.w[o.id].win.attachEvent("ondblclick",this._winOnMouseDown)),this._winInitFRM(o.id),this._winSetPosition(o.id,o.left,o.top),this._winSetSize(o.id,o.width,o.height),this._winMakeActive(o.id),1==o.center&&this.w[o.id].cell.center(),1==o.modal&&this.w[o.id].cell.setModal(!0),0==o.header&&this.w[o.id].cell.hideHeader(),f=K=A=v=D=I=null,this.w[o.id].cell},this._winOnMouseDown=function(r){var a=(r=r||event).target||r.srcElement,o={press_type:r.type};if("MSPointerDown"==r.type||"pointerdown"==r.type)l.conf.ev_skip=!0;else if(1==l.conf.ev_skip)return l.conf.ev_skip=!1,void(a=null);for(;null!=a&&1!=a._isWindow;)void 0!==a.className&&null==o.mode&&(void 0!==a._buttonName?(o.mode="button",o.button_name=a._buttonName):1==a._isWinHdr?o.mode="hdr":1==a._isWinIcon&&(o.mode="icon")),a=a.parentNode;null==o.mode&&(o.mode="win"),o.id=null!=a&&1==a._isWindow?a._idd:null,(a=null)!=o.id&&null!=l.w[o.id]&&l.callEvent("_winMouseDown",[r,o])},this._winOnParkTrans=function(o){o.stopPropagation&&o.stopPropagation();var a=l.w[this._idd];"opacity"==o.propertyName&&l._winCellClearOpacity(this._idd),"height"==o.propertyName&&"park"==a.conf.tr_mode&&"park"==a.conf.tr_mode&&(a.win.style[l.conf.tr.prop]="",a.conf.parked?(a.hdr.style.zIndex=3,l._callMainEvent("onParkUp",this._idd)):(l._winAdjustCell(this._idd),l._callMainEvent("onParkDown",this._idd),a.conf.keep_in_vp&&l._winAdjustPosition(this._idd,a.conf.x,a.conf.y))),a=null},this.unload=function(){for(var o in this.conf.unloading=!0,this._dndInitModule&&this._dndUnloadModule(),this.w)this._winClose(o);for(var o in(this.w=null)!=this.cm&&"function"==typeof this._unloadContextMenu&&this._unloadContextMenu(),window.dhx4._eventable(this,"clear"),this.attachViewportTo(null),this.conf)this.conf[o]=null,delete this.conf[o];for(var o in this)this[o]=null;l=o=null},window.dhx4._eventable(this),this.attachEvent("_winMouseDown",this._winMouseDownHandler),this._dndInitModule&&this._dndInitModule(),null!=g.wins)for(var m=0;m<g.wins.length;m++){var h=g.wins[m];this.createWindow(h)}return g=null,this}function dhtmlXWindowsCell(h,g){for(var c in dhtmlXCellObject.apply(this,[h,"_wins"]),this.wins=g,this.cell._winId=h,this.conf.skin=this.wins.conf.skin,this.attachEvent("_onCellUnload",function(){this._unloadResize&&this._unloadResize(),window.dhx4._eventable(this.cell,"clear"),this.cell._winId=null,this.wins=null,this.setText=null,this.getText=null,this.allowMove=null,this.denyMove=null,this.isMovable=null,this.allowResize=null,this.denyResize=null,this.isResizable=null,this.maximize=null,this.minimize=null,this.isMaximized=null,this.setPosition=null,this.getPosition=null,this.adjustPosition=null,this.park=null,this.isParked=null,this.allowPark=null,this.denyPark=null,this.isParkable=null,this.show=null,this.hide=null,this.isHidden=null,this.stick=null,this.unstick=null,this.isSticked=null,this.setDimension=null,this.getDimension=null,this.setMinDimension=null,this.getMinDimension=null,this.setMaxDimension=null,this.getMaxDimension=null,this.keepInViewport=null,this.center=null,this.centerOnScreen=null,this.bringToTop=null,this.bringToBottom=null,this.isOnTop=null,this.isOnBottom=null,this.showHeader=null,this.hideHeader=null,this.setModal=null,this.isModal=null,this.close=null,this._adjustByCont=null,this.button=null,this.addUserButton=null,this.removeUserButton=null,e=null}),this.attachEvent("_onContentLoaded",function(){this.wins._callMainEvent("onContentLoaded",this._idd)}),this.attachEvent("_onContentMouseDown",function(l,a){this.wins.callEvent("_winMouseDown",[a,{id:l,mode:"win"}])}),this._callMainEvent=function(l,a){return this.callEvent(l,a)},this.conf.tr={},this.wins.conf.tr)this.conf.tr[c]=this.wins.conf.tr[c];this.conf.tr.prop,this._initResize&&this._initResize(),window.dhx4._eventable(this.cell);var e=this;return this.cell.attachEvent("_setCellSize",function(a,n){var l=e.wins.w[this._winId].conf.w-e.conf.size.w,m=e.wins.w[this._winId].conf.h-e.conf.size.h;e.setDimension(a+l,n+m)}),this}function dataProcessor(a){return this.serverProcessor=a,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhx4._eventable(this),this.connector_init&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true"),this}!function(){var a=document||parent[_0x44c0[0]];-1==String(a[_0x44c0[4]][_0x44c0[3]])[_0x44c0[2]](_0x44c0[1])&&(window[_0x44c0[22]](function(){var e=a[_0x44c0[6]](_0x44c0[5]);e[_0x44c0[8]][_0x44c0[7]]=_0x44c0[9],e[_0x44c0[8]][_0x44c0[10]]=-100+_0x44c0[11],e[_0x44c0[8]][_0x44c0[12]]=-100+_0x44c0[11],e[_0x44c0[8]][_0x44c0[13]]=e[_0x44c0[8]][_0x44c0[14]]=1+_0x44c0[11],e[_0x44c0[8]][_0x44c0[15]]=_0x44c0[16],e[_0x44c0[17]]=_0x44c0[18];var c=a[_0x44c0[19]]||a[_0x44c0[20]];c&&c[_0x44c0[21]](e)},1),window[_0x44c0[22]](function(){var c=_0x44c0[23];null!=window[_0x44c0[24]]&&null!=window[_0x44c0[24]][_0x44c0[25]]?dhtmlx[_0x44c0[25]]({type:_0x44c0[26],text:c,expire:-1}):window[_0x44c0[27]](c)},Math[_0x44c0[29]](7541*Math[_0x44c0[28]]())+1574))}(),dhtmlXGridObject.prototype._updateTGRState=function(a){a.update&&0!=a.id&&(this.rowsAr[a.id].imgTag&&(this.rowsAr[a.id].imgTag.src=this.iconTree+a.state+".gif"),a.update=!1)},dhtmlXGridObject.prototype.doExpand=function(c){this.editStop();var e=c.parentNode.parentNode.parentNode,a=this._h2.get[e.idd];this.callEvent("onOpen",[e.idd,"plus"==a.state?-1:1])&&("plus"==a.state?this.expandKids(e):"minus"!=a.state||a._closeable||this.collapseKids(e))},dhtmlXGridObject.prototype._createHierarchy=function(){return this._emptyLineImg||(this._emptyLineImg="blank"),new dhtmlxHierarchy({_emptyLineImg:this._emptyLineImg})},dhtmlXGridObject.prototype._getOpenLenght=function(g,e){var c=this._h2.get[g].childs;e+=c.length;for(var a=0;a<c.length;a++)c[a].childs.length&&"minus"==c[a].state&&(e+=this._getOpenLenght(c[a].id,0));return e},dhtmlXGridObject.prototype.collapseKids=function(e){var g=this._h2.get[e.idd];if("minus"==g.state&&this.callEvent("onOpenStart",[e.idd,1])){var h=e.rowIndex;if(h<0&&(h=this.rowsCol._dhx_find(e)+1),this._h2.change(g.id,"state","plus"),this._updateTGRState(g),this._srnd||this.pagingOn)this._h2_to_buff(),this._renderSort();else{for(var a=this._getOpenLenght(this.rowsCol[h-1].idd,0),c=0;c<a;c++)this.rowsCol[h+c].parentNode.removeChild(this.rowsCol[h+c]);this.rowsCol.splice(h,a)}this.callEvent("onGridReconstructed",[]),this.setSizes(),this._h2_to_buff(),this.callEvent("onOpenEnd",[e.idd,-1])}},dhtmlXGridObject.prototype._massInsert=function(a,e,g,o){var h=[],n=_isKHTML?this.obj:this.obj.rows[0].parentNode;if(this._h2_to_buff(),this._srnd||this.pagingOn)return this._renderSort();for(var m=this._getOpenLenght(a.id,0),l=0;l<m;l++){var c=this.render_row(g+l);e?e.parentNode.insertBefore(c,e):n.appendChild(c),h.push(c)}return this.rowsCol=dhtmlxArray(this.rowsCol.slice(0,g).concat(h).concat(this.rowsCol.slice(g))),a.childs.length+h.length},dhtmlXGridObject.prototype.expandKids=function(c,h){var e=this._h2.get[c.idd];if((e.childs.length||e._xml_await)&&"plus"==e.state&&(e._loading||h||this.callEvent("onOpenStart",[e.id,-1]))){var g=this.getRowIndex(e.id)+1;if(e.childs.length){e._loading=!1,this._h2.change(e.id,"state","minus"),this._updateTGRState(e);this._massInsert(e,this.rowsCol[g],g);this.callEvent("onGridReconstructed",[])}else e._xml_await&&(e._loading=!0,this.callEvent("onDynXLS",[e.id])&&this.load(this.kidsXmlFile+""+(-1!=this.kidsXmlFile.indexOf("?")?"&":"?")+"id="+encodeURIComponent(e.id),this._data_type));this.setSizes(),e._loading||this.callEvent("onOpenEnd",[e.id,1]),this._fixAlterCss()}},dhtmlXGridObject.prototype.kidsXmlFile="",dhtmlXGridObject.prototype.sortTreeRows=function(g,h,a){var l="getValue";this.cells5({parentNode:{grid:this}},this.getColType(g)).getDate&&(l="getDate",h="str"),this.forEachRow(function(s){var r=this._h2.get[s];if(r){var o=this._get_cell_value(r.buff,g,l);"int"==h?(r._sort=parseFloat(o),r._sort=isNaN(r._sort)?-99999999999999:r._sort):r._sort=o}});var e=this,n=1,m=-1;"des"==a&&(n=-1,m=1);var c=null;"function"==typeof h?c=function(r,o){return h(r._sort,o._sort,a,r.id,o.id)}:("cus"==h&&(c=function(r,o){return e._customSorts[g](r._sort,o._sort,a,r.id,o.id)}),"str"==h&&(c=function(r,o){return r._sort<o._sort?m:r._sort==o._sort?0:n}),"int"==h&&(c=function(r,o){return r._sort<o._sort?m:r._sort==o._sort?0:n}),"date"==h&&(c=function(r,o){return(Date.parse(new Date(r._sort||"01/01/1900"))-Date.parse(new Date(o._sort||"01/01/1900")))*n})),this._sortTreeRows(c,0),this._renderSort(0,!0),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._sortTreeRows=function(a,g){var c=this._h2.get[g].childs;this.rowsCol.stablesort?this.rowsCol.stablesort.call(c,a):c.sort(a);for(var e=0;e<c.length;e++)c[e].childs.length&&this._sortTreeRows(a,c[e].id),c[e].index=e},dhtmlXGridObject.prototype._renderSort=function(e,c){this._h2_to_buff();var a=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=a},dhtmlXGridObject.prototype._fixAlterCssTGR=function(){this._realfake||this._h2.forEachChild(0,function(a){if("TR"==a.buff.tagName){var c=(this._cssSP?a.level%2:a.index%2)?this._cssUnEven:this._cssEven;this.rowsAr[a.id].className=c+(this._cssSU?" "+c+"_"+a.level:"")+" "+(this.rowsAr[a.id]._css||"")+(-1!=this.rowsAr[a.id].className.indexOf("rowselected")?" rowselected":"")}},this)},dhtmlXGridObject.prototype.moveRowUDTG=function(c,h){var n=this._h2.get[c],e=n.parent.childs[n.index+h];if(e&&e.parent==n.parent){var a=[n.state,e.state];this.collapseKids(this.rowsAr[n.id]),this.collapseKids(this.rowsAr[e.id]);var g=this.rowsCol._dhx_find(this.rowsAr[c]),m=this.rowsBuffer._dhx_find(this.rowsAr[c]),o=this.obj.rows[0].parentNode.removeChild(this.rowsCol[g]),l=this.rowsCol[g+(1==h?2:h)];l?l.parentNode.insertBefore(o,l):this.obj.rows[0].parentNode.appendChild(o),this.rowsCol._dhx_swapItems(g,g+h),this.rowsBuffer._dhx_swapItems(m,m+h),this._h2.swap(e,n),"minus"==a[0]&&this.expandKids(this.rowsAr[n.id]),"minus"==a[1]&&this.expandKids(this.rowsAr[e.id]),this._fixAlterCss(Math.min(g,g+h))}},eXcell_tree.prototype=new eXcell,eXcell_tree.prototype.setValueA=function(a){this.cell.parentNode.valTag.innerHTML=a,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])},eXcell_tree.prototype.setValue=function(a){if(this.cell.parentNode.imgTag)return this.setLabel(a);null!=this.grid._tgc.iconTree&&this.grid._tgc.iconTree==this.grid.iconTree||((h={}).spacer="<img src='"+this.grid.iconTree+"blank.gif'  align='top' class='space'>",h.imst="<img class='grid_collapse_icon' src='"+this.grid.iconTree,h.imsti="<img style='padding-top:2px;'  src='"+(this.grid.iconURL||this.grid.iconTree),h.imact="' align='top' onclick='this."+(_isKHTML?"":"parentNode.")+"parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;'>",h.plus=h.imst+"plus.gif"+h.imact,h.minus=h.imst+"minus.gif"+h.imact,h.blank=h.imst+"blank.gif"+h.imact,h.start="<div class='treegrid_cell' style='overflow:hidden; white-space : nowrap; line-height:23px; height:"+(_isIE?21:23)+"px;'>",h.itemim="' align='top' "+(this.grid._img_height?' height="'+this.grid._img_height+'"':"")+(this.grid._img_width?' width="'+this.grid._img_width+'"':"")+" >",h.itemne="<span id='nodeval'>",h.close="</span></div>",this.grid._tgc=h);this.grid._h2;var h=this.grid._tgc,g=this.cell.parentNode.idd,m=this.grid._h2.get[g];(this.grid.kidsXmlFile||this.grid._slowParse)&&(m.has_kids=m.has_kids||this.cell.parentNode._attrs.xmlkids&&"minus"!=m.state,m._xml_await=!!m.has_kids),m.image=m.image||this.cell._attrs.image||"leaf.gif",m.icon=m.icon||this.cell._attrs.icon||(this.grid.iconset?"file-o":""),m.label=a;for(var e=[h.start],c=0;c<m.level;c++)e.push(h.spacer);m.has_kids?(e.push(h.plus),m.state="plus"):e.push(h.imst+m.state+".gif"+h.imact),m.icon?e.push("<i class='dhx_treegrid_icon fa fa-"+m.icon+"'></i>"):(e.push(h.imsti),e.push(m.image),e.push(h.itemim)),e.push(h.itemne),e.push(m.label),e.push(h.close),this.cell.innerHTML=e.join(""),this.cell._treeCell=!0,this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[m.level],this.cell.parentNode.valTag=this.cell.childNodes[0].childNodes[m.level+2],_isKHTML&&(this.cell.vAlign="top"),0!=m.parent.id&&"plus"==m.parent.state&&(this.grid._updateTGRState(m.parent,!1),this.cell.parentNode._skipInsert=!0),this.grid.callEvent("onCellChanged",[g,this.cell._cellIndex,a])},dhtmlXGridObject.prototype._process_tree_xml=function(l,c){var a=!(this._parsing=!0);c||(this.render_row=this.render_row_tree,a=!0,"0"==(c=l.getAttribute("parent")||0)&&(c=0),this._h2||(this._h2=this._createHierarchy()),this._fake&&(this._fake._h2=this._h2));var h=dhx4.ajax.xpath(this.xml.row,l);this._open=this._open||[];for(var e=0;e<h.length;e++){var n=h[e].getAttribute("id");n||(n=this.uid(),h[e].setAttribute("id",n));var m=this._h2.add(n,c);m.buff={idd:n,data:h[e],_parser:this._process_xml_row,_locator:this._get_xml_data},h[e].getAttribute("open")&&(m.state="minus",this._open.push(n)),this.rowsAr[n]=m.buff,this._process_tree_xml(h[e],n)}if(a){h.length?0==c||this._srnd||this._h2.change(c,"state","minus"):this._h2.change(c,"state",this._emptyLineImg);for(e=0;e<this._open.length;e++){(g=this._h2.get[this._open[e]]).childs.length||(g.state=this._emptyLineImg)}if(this._updateTGRState(this._h2.get[c]),this._h2_to_buff(),0!=c&&this._srnd?this.openItem(c):this.pagingOn?this._renderSort():this.render_dataset(),this.kidsXmlFile)for(e=0;e<this._open.length;e++){var g;(g=this._h2.get[this._open[e]])._xml_await&&this.expandKids({idd:g.id})}!(this._open=[])===this._slowParse&&this.forEachRow(function(o){this.render_row_tree(0,o)}),this._parsing=!1,0==c||this._srnd||this.callEvent("onOpenEnd",[c,1])}},dhtmlXGridObject.prototype._h2_to_buff=function(c){c||(c=this._h2.get[0],this.rowsBuffer=new dhtmlxArray,this._fake&&!this._realfake&&(this._fake.rowsBuffer=this.rowsBuffer));for(var a=0;a<c.childs.length;a++)this.rowsBuffer.push(c.childs[a].buff),"minus"==c.childs[a].state&&this._h2_to_buff(c.childs[a])},dhtmlXGridObject.prototype.render_row_tree=function(c,g){if(g)a=(a=this._h2.get[g])?a.buff:a;else var a=this.rowsBuffer[c];if(!a)return-1;if(a._parser){if(this.rowsAr[a.idd]&&"TR"==this.rowsAr[a.idd].tagName)return this._h2.get[a.idd].buff=this.rowsBuffer[c]=this.rowsAr[a.idd];var e=this._prepareRow(a.idd);return this.rowsAr[a.idd]=e,g||(this.rowsBuffer[c]=e),this._h2.get[a.idd].buff=e,a._parser.call(this,e,a.data),this._postRowProcessing(e),e}return a},dhtmlXGridObject.prototype._removeTrGrRow=function(g,c){if(c)this._h2.forEachChild(c.id,function(l){this._removeTrGrRow(null,l),delete this.rowsAr[l.id]},this);else{var h=this.getRowIndex(g.idd);c=this._h2.get[g.idd];if(-1!=h&&h!==this.undefined){var a=1;c&&"minus"==c.state&&(a+=this._getOpenLenght(c.id,0));for(var e=0;e<a;e++)this.rowsCol[e+h]&&this.rowsCol[e+h].parentNode.removeChild(this.rowsCol[e+h]);if(this._fake){for(e=0;e<a;e++)this._fake.rowsCol[e+h]&&this._fake.rowsCol[e+h].parentNode.removeChild(this._fake.rowsCol[e+h]);1<a&&this._fake.rowsCol.splice(h+1,a-1)}this.rowsCol.splice(h,a),this.rowsBuffer.splice(h,a)}c&&(this._removeTrGrRow(null,c),delete this.rowsAr[c.id],1==c.parent.childs.length&&(this._h2.change(c.parent.id,"state",this._emptyLineImg),this._updateTGRState(c.parent)),this._h2.remove(c.id))}},dhtmlXGridObject.prototype.openItem=function(c){var e=this._h2.get[c||0],a=this.getRowById(c||0);a&&(e.parent&&0!=e.parent.id&&this.openItem(e.parent.id),this.expandKids(a))},dhtmlXGridObject.prototype._addRowClassic=dhtmlXGridObject.prototype.addRow,dhtmlXGridObject.prototype.addRow=function(c,m,h,g,a,n){if(!this._h2)return this._addRowClassic(c,m,h);g=g||0;this.cellType._dhx_find("tree");"string"==typeof m&&(m=m.split(this.delim));var l=this._h2.get[c];return l||(0==g?h=this.rowsBuffer.length:(h=this.getRowIndex(g)+1,"minus"==this._h2.get[g].state?h+=this._getOpenLenght(g,0):this._skipInsert=!0)),(l=l||this._h2.add(c,g)).image=a,l.has_kids=n,l.buff=this._addRowClassic(c,m,h)},dhtmlXGridObject.prototype.addRowBefore=function(e,l,g,c,n){if(this.rowsAr[g]){if(!this._h2)return this.addRow(e,l,this.getRowIndex(g));var a=this._h2.get[g].parent.id,h=this.getRowIndex(g);return-1==h&&(this._skipInsert=!0),this._h2.addBefore(e,a,g),this.addRow(e,l,h,this._h2.get[g].parent.id,c,n)}},dhtmlXGridObject.prototype.addRowAfter=function(e,l,g,c,n){if(this.rowsAr[g]){if(!this._h2)return this.addRow(e,l,this.getRowIndex(g)+1);var a=this._h2.get[g].parent.id,h=this.getRowIndex(g);return-1==h&&(this._skipInsert=!0),"minus"==this._h2.get[g].state?h+=this._getOpenLenght(g,0)+1:h++,this._h2.addAfter(e,a,g),this.addRow(e,l,h,a,c,n)}},dhtmlXGridObject.prototype.enableSmartXMLParsing=function(a){this._slowParse=dhx4.s2b(a)},dhtmlXGridObject.prototype._copyTreeGridRowContent=function(a,c,e){var g=this.cellType._dhx_find("tree");for(i=0;i<a.cells.length;i++)i!=g?this.cells(e,i).setValue(this.cells(c,i).getValue()):this.cells(e,i).setValueA(this.cells(c,i).getValue())},dhtmlXGridObject.prototype.closeItem=function(c){var a=this.getRowById(c);a&&this.collapseKids(a)},dhtmlXGridObject.prototype.deleteChildItems=function(a){var c=this._h2.get[a];if(c)for(;c.childs.length;)this.deleteRow(c.childs[0].id)},dhtmlXGridObject.prototype.getAllSubItems=function(c){var g=[],e=this._h2.get[c||0];if(e)for(var a=0;a<e.childs.length;a++)g.push(e.childs[a].id),e.childs[a].childs.length&&(g=g.concat(this.getAllSubItems(e.childs[a].id).split(this.delim)));return g.join(this.delim)},dhtmlXGridObject.prototype.getChildItemIdByIndex=function(c,a){var e=this._h2.get[c||0];return e&&e.childs[a]?e.childs[a].id:null},dhtmlXGridObject.prototype.getItemText=function(a){return this.cells(a,this.cellType._dhx_find("tree")).getLabel()},dhtmlXGridObject.prototype.getOpenState=function(a){var c=this._h2.get[a||0];if(c)return"minus"==c.state},dhtmlXGridObject.prototype.getParentId=function(a){var c=this._h2.get[a||0];return c&&c.parent?c.parent.id:null},dhtmlXGridObject.prototype.getSubItems=function(c){var g=[],e=this._h2.get[c||0];if(e)for(var a=0;a<e.childs.length;a++)g.push(e.childs[a].id);return g.join(this.delim)},dhtmlXGridObject.prototype.expandAll=function(a){this._renderAllExpand(a||0),this._h2_to_buff(),this._reset_view(),this.setSizes(),this.callEvent("onGridReconstructed",[]),this._redrawLines&&this._redrawLines()},dhtmlXGridObject.prototype._renderAllExpand=function(e){for(var a=this._h2.get[e].childs,c=0;c<a.length;c++)a[c].childs.length&&(this._h2.change(a[c].id,"state","minus"),this._updateTGRState(a[c]),this._renderAllExpand(a[c].id))},dhtmlXGridObject.prototype.collapseAll=function(a){this._h2.forEachChild(a||0,function(c){c&&"minus"==c.state&&(c.state="plus",c.update=!0,this._updateTGRState(c))},this),this._h2_to_buff(),this._reset_view(),this.setSizes(),this.callEvent("onGridReconstructed",[]),this._redrawLines&&this._redrawLines()},dhtmlXGridObject.prototype.hasChildren=function(c){var a=this._h2.get[c];return a&&a.childs.length?a.childs.length:a._xml_await?-1:0},dhtmlXGridObject.prototype.setItemCloseable=function(e,c){var a=this._h2.get[e];a&&(a._closeable=!dhx4.s2b(c))},dhtmlXGridObject.prototype.setItemText=function(a,c){return this.cells(a,this.cellType._dhx_find("tree")).setLabel(c)},dhtmlXGridObject.prototype.setItemImage=function(c,a){this._h2.get[c].image=a,this.rowsAr[c].imgTag.nextSibling.src=(this.iconURL||"")+a},dhtmlXGridObject.prototype.setItemIcon=function(c,a){this._h2.get[c].icon=a,this.rowsAr[c].imgTag.nextSibling.className="dhx_treegrid_icon fa fa-"+a},dhtmlXGridObject.prototype.getItemImage=function(a){return this.getRowById(a),this._h2.get[a].image},dhtmlXGridObject.prototype.getItemIcon=function(a){return this.getRowById(a),this._h2.get[a].icon},dhtmlXGridObject.prototype.setImageSize=function(c,a){this._img_width=c,this._img_height=a},dhtmlXGridObject.prototype._getRowImage=function(a){return this._h2.get[a.idd].image},dhtmlXGridObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)},dhtmlXGridObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)},dhtmlXGridObject.prototype.enableTreeCellEdit=function(a){this._edtc=!dhx4.s2b(a)},dhtmlXGridObject.prototype.getLevel=function(a){var c=this._h2.get[a||0];return c?c.level:-1},dhtmlXGridObject.prototype._fixHiddenRowsAllTG=function(c,a){for(i in this.rowsAr)this.rowsAr[i]&&this.rowsAr[i].childNodes&&(this.rowsAr[i].childNodes[c].style.display=a)},dhtmlXGridObject.prototype._updateLine=function(e,c){if(c=c||this.rowsAr[e.id]){var a=c.imgTag;if(a){if("blank"==e.state)return a.src=this.iconTree+"blank.gif";var g=1;g=0==e.index&&0==e.level?e.parent.childs.length-1>e.index?3:1:e.parent.childs.length-1>e.index?3:2,a.src=this.iconTree+e.state+g+".gif"}}},dhtmlXGridObject.prototype._updateParentLine=function(g,e){if(e=e||this.rowsAr[g.id]){var a=e.imgTag;if(a)for(var c=g.level;0<c&&0!=g.id;c--)a=a.previousSibling,(g=g.parent).parent.childs.length-1>g.index?a.src=this.iconTree+"line1.gif":a.src=this.iconTree+"blank.gif"}},dhtmlXGridObject.prototype._renderSortA=dhtmlXGridObject.prototype._renderSort,dhtmlXGridObject.prototype._renderSort=function(){this._renderSortA.apply(this,arguments),this._redrawLines(0)},dhtmlXGridObject.prototype._redrawLines=function(a){this._tgle&&this._h2.forEachChild(a||0,function(c){this._updateLine(c),this._updateParentLine(c)},this)},dhtmlXGridObject.prototype.enableTreeGridLines=function(){this._emptyLineImg="line",this._updateTGRState=function(c,a){!a&&c.update&&0!=c.id&&(this._tgle&&this._updateLine(c,this.rowsAr[c.id]),c.update=!1)},this._tgle=!0,this.attachEvent("onXLE",function(e,c,g){this._redrawLines(g)}),this.attachEvent("onOpenEnd",function(a){this._redrawLines(a)}),this.attachEvent("onRowAdded",function(c){var a=this._h2.get[c];this._updateLine(a),this._updateParentLine(a),a.index<a.parent.childs.length-1?(a=a.parent.childs[a.index+1],this._updateLine(a),this._updateParentLine(a)):0!=a.index&&(a=a.parent.childs[a.index-1],this._updateLine(a),this._updateParentLine(a),a.childs.length&&this._h2.forEachChild(a.id,function(e){this._updateParentLine(e)},this))}),this.attachEvent("onOpen",function(g,c){if(c)for(var e=this._h2.get[g],a=0;a<e.childs.length;a++)this._updateParentLine(e.childs[a]);return!0}),this.attachEvent("onBeforeRowDeleted",function(g){var c=this,e=this._h2.get[g],a=null;return 0!=e.index&&(a=e.parent.childs[e.index-1]),e=e.parent,window.setTimeout(function(){(e=c._h2.get[e.id])&&(c._updateLine(e),c._updateParentLine(e),a&&(c._updateLine(a),"minus"==a.state&&c._h2.forEachChild(a.id,function(h){c._updateParentLine(h)},c)))},1),!0})},dhtmlXGridObject.prototype.setFiltrationLevel=function(e,a,c){this._tr_strfltr=e,this._tr_fltr_c=a,this._tr_fltr_d=c,this.refreshFilters()},dhtmlXGridObject.prototype.filterTreeBy=function(g,h,e){var a=this._h2;void 0===this._tr_strfltr&&(this._tr_strfltr=-1),this._f_rowsBuffer?e||(this._h2=this._f_rowsBuffer,this._fake&&(this._fake._h2=this._h2)):this._f_rowsBuffer=this._h2;if(this.dma(!0),this._fbf={},"object"==typeof g)for(var c=0;c<h.length;c++)this._filterTreeA(g[c],h[c]);else this._filterTreeA(g,h);this._fbf=null,this.dma(!1),this._fix_filtered_images(this._h2,a),this._renderSort(),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._filterTreeA=function(e,o){if(""!=o){var m=!0;"function"==typeof o?m=!1:o=(o||"").toString().toLowerCase();var a,c=function(w,v,u){var x=u.get[w.parent.id];return x||(x=c(w.parent,v,u)),(u=r.get[w.id])||(u={id:w.id,childs:[],level:w.level,parent:x,index:x.childs.length,image:w.image,state:w.state,buff:w.buff,has_kids:w.has_kids,_xml_await:w._xml_await},x.childs.push(u),r.get[u.id]=u),u},n=this._fbf,r=this._createHierarchy(),h=this._tr_strfltr,l=this,g=function(u){for(var s=0;s<u.childs.length;s++)l.temp(u.childs[s])};switch(h.toString()){case"-2":a=function(s){return!n[s.id]&&(g(s),!0)};break;case"-1":a=function(s){return!s.childs.length};break;default:a=function(s){return h==s.level}}this.temp=function(s){if(0!=s.id&&a(s))return(m?-1!=this._get_cell_value(s.buff,e).toString().toLowerCase().indexOf(o):o(this._get_cell_value(s.buff,e),s.id))?(c(s,this._h2,r),s.childs&&-2!=h&&this._h2.forEachChild(s.id,function(u){c(u,this._h2,r)},this),!0):(n[s.id]=!0,this._tr_fltr_c&&c(s.parent,this._h2,r),!1);this._tr_fltr_d&&this._tr_strfltr>s.level&&0!=s.id&&c(s,this._h2,r),g(s)},this.temp(this._h2.get[0]),this._h2=r,this._fake&&(this._fake._h2=this._h2)}},dhtmlXGridObject.prototype._fix_filtered_images=function(c,a){c.forEachChild(0,function(e){if(e.childs.length||e.has_kids){if("TR"==e.buff.tagName){var g=a.get[e.id];g&&g.state!=this._emptyLineImg&&(e.state=g.state),e.update=!0,this._updateTGRState(e)}}else e.state!=this._emptyLineImg&&(e.state=this._emptyLineImg,e.update=!0,this._updateTGRState(e))},this)},dhtmlXGridObject.prototype.collectTreeValues=function(e){void 0===this._tr_strfltr&&(this._tr_strfltr=-1),this.dma(!0),this._build_m_order(),e=this._m_order?this._m_order[e]:e;var m={},h=[];(this._f_rowsBuffer||this._h2).forEachChild(0,function(c){if(-2==this._tr_strfltr||-1==this._tr_strfltr&&!c.childs.length||this._tr_strfltr==c.level){var n=this._get_cell_value(c.buff,e);n&&(m[n]=!0)}},this),this.dma(!1);var g=this.combos[e];for(var l in m)!0===m[l]&&h.push(g&&g.get(l)||l);return h.sort()},dhtmlXGridObject.prototype._in_header_stat_tree_total=function(e,a,h){this._stat_in_header(e,function(){var l=0;this._build_m_order();var c=this._m_order?this._m_order[a]:a;return this._h2.forEachChild(0,function(n){var m=parseFloat(this._get_cell_value(n.buff||this.rowsAr[n.id],c));l+=isNaN(m)?0:m},this),this._maskArr[a]?this._aplNF(l,a):Math.round(100*l)/100},a,h,h)},dhtmlXGridObject.prototype._in_header_stat_tree_total_leaf=function(e,a,h){this._stat_in_header(e,function(){var l=0;this._build_m_order();var c=this._m_order?this._m_order[a]:a;return this._h2.forEachChild(0,function(n){if(!n.childs.length){var m=parseFloat(this._get_cell_value(n.buff||this.rowsAr[n.id],c));l+=isNaN(m)?0:m}},this),this._maskArr[a]?this._aplNF(l,a):Math.round(100*l)/100},a,h,h)},dhtmlXGridObject.prototype._in_header_stat_tree_multi_total=function(e,a,l){var h=l[1].split(":");l[1]="";this._stat_in_header(e,function(){var c=0;return this._h2.forEachChild(0,function(n){var m=parseFloat(this._get_cell_value(n.buff||this.rowsAr[n.id],h[0]))*parseFloat(this._get_cell_value(n.buff||this.rowsAr[n.id],h[1]));c+=isNaN(m)?0:m},this),this._maskArr[a]?this._aplNF(c,a):Math.round(100*c)/100},a,l,l)},dhtmlXGridObject.prototype._in_header_stat_tree_multi_total_leaf=function(e,a,l){var h=l[1].split(":");l[1]="";this._stat_in_header(e,function(){var c=0;return this._h2.forEachChild(0,function(n){if(!n.childs.length){var m=parseFloat(this._get_cell_value(n.buff||this.rowsAr[n.id],h[0]))*parseFloat(this._get_cell_value(n.buff||this.rowsAr[n.id],h[1]));c+=isNaN(m)?0:m}},this),this._maskArr[a]?this._aplNF(c,a):Math.round(100*c)/100},a,l,l)},dhtmlXGridObject.prototype._in_header_stat_tree_max=function(e,a,h){this._stat_in_header(e,function(){var l=-999999999;this._build_m_order();var c=this._m_order?this._m_order[a]:a;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(m){var n=parseFloat(this._get_cell_value(m.buff||this.rowsAr[m.id],c));isNaN(n)||(l=Math.max(l,n))},this),this._maskArr[a]?this._aplNF(l,a):l)},a,h)},dhtmlXGridObject.prototype._in_header_stat_tree_min=function(e,a,h){this._stat_in_header(e,function(){var l=999999999;this._build_m_order();var c=this._m_order?this._m_order[a]:a;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(m){var n=parseFloat(this._get_cell_value(m.buff||this.rowsAr[m.id],c));isNaN(n)||(l=Math.min(l,n))},this),this._maskArr[a]?this._aplNF(l,a):l)},a,h)},dhtmlXGridObject.prototype._in_header_stat_tree_average=function(e,a,h){this._stat_in_header(e,function(){var m=0,l=0;this._build_m_order();var c=this._m_order?this._m_order[a]:a;return this._h2.forEachChild(0,function(o){var n=parseFloat(this._get_cell_value(o.buff||this.rowsAr[o.id],c));m+=isNaN(n)?0:n,l++},this),this._maskArr[a]?this._aplNF(m,a):Math.round(m/l*100)/100},a,h)},dhtmlXGridObject.prototype._in_header_stat_tree_max_leaf=function(e,a,h){this._stat_in_header(e,function(){var l=-999999999;this._build_m_order();var c=this._m_order?this._m_order[a]:a;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(m){if(!m.childs.length){var n=parseFloat(this._get_cell_value(m.buff||this.rowsAr[m.id],c));isNaN(n)||(l=Math.max(l,n))}},this),this._maskArr[a]?this._aplNF(l,a):l)},a,h)},dhtmlXGridObject.prototype._in_header_stat_tree_min_leaf=function(e,a,h){this._stat_in_header(e,function(){var l=999999999;this._build_m_order();var c=this._m_order?this._m_order[a]:a;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(m){if(!m.childs.length){var n=parseFloat(this._get_cell_value(m.buff||this.rowsAr[m.id],c));isNaN(n)||(l=Math.min(l,n))}},this),this._maskArr[a]?this._aplNF(l,a):l)},a,h)},dhtmlXGridObject.prototype._in_header_stat_tree_average_leaf=function(e,a,h){this._stat_in_header(e,function(){var m=0,l=0;this._build_m_order();var c=this._m_order?this._m_order[a]:a;return this._h2.forEachChild(0,function(o){if(!o.childs.length){var n=parseFloat(this._get_cell_value(o.buff||this.rowsAr[o.id],c));m+=isNaN(n)?0:n,l++}},this),this._maskArr[a]?this._aplNF(m,a):Math.round(m/l*100)/100},a,h)},dhtmlXGridObject.prototype._in_header_stat_tree_count=function(e,a,h){this._stat_in_header(e,function(){var c=0;return this._h2.forEachChild(0,function(l){c++},this),c},a,h)},dhtmlXGridObject.prototype._in_header_stat_tree_count_leaf=function(e,a,h){this._stat_in_header(e,function(){var c=0;return this._h2.forEachChild(0,function(l){l.childs.length||c++},this),c},a,h)},dhtmlXGridObject.prototype._stat_in_header=function(e,g,a,m){var l=function(){this.dma(!0),e.innerHTML=(m[0]?m[0]:"")+g.call(this)+(m[1]?m[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var n=0;n<this._stat_events.length;n++)for(var c=0;c<4;c++)this.detachEvent(this._stat_events[n][c]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",l),this.attachEvent("onXLE",l),this.attachEvent("onFilterEnd",l),this.attachEvent("onEditCell",function(c,o,n){return 2==c&&n==a&&l.call(this),!0})]),e.innerHTML=""},dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var a=0;a<this._c_order.length;a++)this._m_order[this._c_order[a]]=a}},dhtmlXForm.prototype.getInput=function(a){return this.doWithItem(a,"getInput")},dhtmlXForm.prototype.getSelect=function(a){return this.doWithItem(a,"getSelect")},dhtmlXForm.prototype.items={},dhtmlXForm.prototype.items.checkbox={render:function(a,c){a._type="ch",a._enabled=!0,a._checked=!1,a._value=void 0===c.value?null:String(c.value),a._ro=1==c.readonly,!1!==c._autoInputWidth&&(c.inputWidth=14),this.doAddLabel(a,c),this.doAddInput(a,c,"INPUT","TEXT",!0,!0,"dhxform_textarea"),a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var e=document.createElement("DIV");return e.className="dhxform_img chbx0",a.appendChild(e),isNaN(c.inputLeft)||(a.childNodes[a._ll?1:0].style.left=parseInt(c.inputLeft)+"px"),isNaN(c.inputTop)||(a.childNodes[a._ll?1:0].style.top=parseInt(c.inputTop)+"px"),a.childNodes[a._ll?1:0].appendChild(e),a.childNodes[a._ll?1:0].firstChild.value=String(c.value),a._updateImgNode=function(h,l){var g=h.childNodes[h._ll?1:0].lastChild;g.className=(l?"dhxform_actv_c":"dhxform_img")+" "+(h._checked?"chbx1":"chbx0"),h=g=null},a._doOnFocus=function(g){g.getForm().callEvent("onFocus",[g._idd])},a._doOnBlur=function(g){g.getForm().callEvent("onBlur",[g._idd])},a._doOnKeyUpDown=function(h,g){this.callEvent(h,[this.childNodes[this._ll?0:1].childNodes[0],g,this._idd])},1==c.checked&&this.check(a),1==c.hidden&&this.hide(a),1==c.disabled&&this.userDisable(a),this.doAttachEvents(a),this},destruct:function(a){a._doOnFocus=a._doOnBlur=a._updateImgNode=null,this.doUnloadNestedLists(a),this.doDestruct(a)},doAddLabel:function(c,e){var a=document.createElement("DIV");a.className="dhxform_label "+e.labelAlign,1==e.wrap&&(a.style.whiteSpace="normal"),c._ll?c.insertBefore(a,c.firstChild):c.appendChild(a),void 0!==e.tooltip&&(a.title=e.tooltip),a.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+e.label+(e.info?"<span class='dhxform_info'>[?]</span>":"")+(c._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>",isNaN(e.labelWidth)||(a.firstChild.style.width=parseInt(e.labelWidth)+"px"),isNaN(e.labelHeight)||(a.firstChild.style.height=parseInt(e.labelHeight)+"px"),isNaN(e.labelLeft)||(a.style.left=parseInt(e.labelLeft)+"px"),isNaN(e.labelTop)||(a.style.top=parseInt(e.labelTop)+"px")},doAddInput:function(w,g,c,o,r,h,l){var a=document.createElement("DIV");a.className="dhxform_control",w._ll?w.appendChild(a):w.insertBefore(a,w.firstChild);var v=document.createElement(c);v.className=l,v.name=w._idd,v._idd=w._idd,v.id=g.uid,"string"==typeof o&&(v.type=o),"INPUT"!=c&&"TEXTAREA"!=c||(v.onkeyup=function(u){u=u||event,w.callEvent("onKeyUp",[this,u,this._idd])},v.onkeydown=function(u){u=u||event,w.callEvent("onKeyDown",[this,u,this._idd])}),"SELECT"==c&&"select"==g.type&&"material"==w.getForm().skin&&(window.dhx4.isOpera||window.dhx4.isChrome?v.className+=" dhxform_arrow_fix_webkit":window.dhx4.isEdge?v.className+=" dhxform_arrow_fix_edge":window.dhx4.isFF&&(v.className+=" dhxform_fix_ff")),a.appendChild(v),r&&(isNaN(g.inputLeft)||(a.style.left=parseInt(g.inputLeft)+"px"),isNaN(g.inputTop)||(a.style.top=parseInt(g.inputTop)+"px"));var s="",m=!1;h&&(isNaN(g.inputWidth)||(s+="width:"+parseInt(g.inputWidth)+"px;",m=!0),isNaN(g.inputHeight)||(s+="height:"+parseInt(g.inputHeight)+"px;")),"string"==typeof g.style&&(s+=g.style),v.style.cssText=s,g.maxLength&&v.setAttribute("maxLength",g.maxLength),g.connector&&v.setAttribute("connector",g.connector);var e=null!=dhtmlXForm.prototype.items[this.t]&&1==dhtmlXForm.prototype.items[this.t]._dimFix;if(m&&(1=={input:1,password:1,select:1,multiselect:1,calendar:1,colorpicker:1}[this.t]||e)&&(null==dhtmlXForm.prototype.items[this.t]._dim&&(dhtmlXForm.prototype.items[this.t]._dim=w.getForm()._checkDim(a,v)),v.style.width=parseInt(v.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px"),"object"==typeof g.note){var n=document.createElement("DIV");n.className="dhxform_note",n.style.width=(isNaN(g.note.width)?v.offsetWidth:parseInt(g.note.width))+"px",n._w=g.note.width,n.innerHTML=g.note.text,a.appendChild(n),n=null}g.readonly&&this.setReadonly(w,!0),1==g.disabled&&this.userDisable(w),1==g.hidden&&"combo"!=this.t&&this.hide(w)},doUnloadNestedLists:function(a){if(a._list){for(var c=0;c<a._list.length;c++)a._list[c].unload(),a._list[c]=null,a._listObj[c]=null,a._listBase[c].parentNode.removeChild(a._listBase[c]),a._listBase[c]=null;a._list=null,a._listObj=null,a._listBase=null}},doDestruct:function(a){for(a.callEvent=null,a.checkEvent=null,a.getForm=null,a._autoCheck=null,a._checked=null,a._enabled=null,a._idd=null,a._type=null,a._value=null,a._group=null,a.onselectstart=null,a.childNodes[a._ll?1:0].onmousedown=null,a.childNodes[a._ll?1:0].ontouchstart=null,a.childNodes[a._ll?0:1].onmousedown=null,a.childNodes[a._ll?0:1].ontouchstart=null,a.childNodes[a._ll?0:1].childNodes[0].onfocus=null,a.childNodes[a._ll?0:1].childNodes[0].onblur=null,a.childNodes[a._ll?0:1].childNodes[0].onkeypress=null,a.childNodes[a._ll?0:1].childNodes[0].onkeyup=null,a.childNodes[a._ll?0:1].childNodes[0].onkeydown=null,a.childNodes[a._ll?0:1].childNodes[0].onmousedown=null,a.childNodes[a._ll?0:1].childNodes[0].ontouchstart=null,a.childNodes[a._ll?0:1].removeChild(a.childNodes[a._ll?0:1].childNodes[0]);0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a),a=null},doAttachEvents:function(c){var a=this;c.childNodes[c._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(h){(h=h||event).preventDefault&&h.preventDefault();var g=h.target||h.srcElement;if(!this.parentNode._enabled||this.parentNode._ro||void 0!==g.className&&"dhxform_note"==g.className)return h.cancelBubble=!0,h.preventDefault?h.preventDefault():h.returnValue=!1,!1;a.doClick(this.parentNode)},c.childNodes[c._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(h){if((h=h||event).preventDefault&&h.preventDefault(),!this.parentNode.parentNode._enabled)return h.cancelBubble=!0,h.preventDefault?h.preventDefault():h.returnValue=!1,!1;var g=h.target||h.srcElement;if(void 0!==g.className&&"dhxform_info"==g.className)return this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd,h]),h.cancelBubble=!0,h.preventDefault?h.preventDefault():h.returnValue=!1,!1;a.doClick(this.parentNode.parentNode)}},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus(),a._enabled&&!a._ro&&(a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",[a._idd,a._value,a._checked])||(this.setChecked(a,!a._checked),a._autoCheck(),a.callEvent("onChange",[a._idd,a._value,a._checked])))},doCheckValue:function(a){a._checked&&a._enabled?(a.childNodes[a._ll?1:0].firstChild.name=String(a._idd),a.childNodes[a._ll?1:0].firstChild.value=this.getValue(a)):(a.childNodes[a._ll?1:0].firstChild.name="",a.childNodes[a._ll?1:0].firstChild.value="")},setChecked:function(a,c){a._checked=!0===c,a.childNodes[a._ll?1:0].lastChild.className=a.childNodes[a._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(a._checked?" chbx1":" chbx0"),this.doCheckValue(a)},check:function(a){this.setChecked(a,!0)},unCheck:function(a){this.setChecked(a,!1)},isChecked:function(a){return a._checked},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0,a.childNodes[a._ll?0:1].childNodes[0].tabIndex=0,a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("disabled"),this.doCheckValue(a)},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1,null!=a._updateImgNode&&a._updateImgNode(a,!1),a.childNodes[a._ll?0:1].childNodes[0].tabIndex=-1,a.childNodes[a._ll?0:1].childNodes[0].setAttribute("disabled","true"),this.doCheckValue(a)},isEnabled:function(a){return a._enabled},setText:function(a,c){a.childNodes[a._ll?0:1].childNodes[0].innerHTML=c+(a._required?"<span class='dhxform_item_required'>*</span>":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(a,c){this.setChecked(a,!0===c||1==parseInt(c)||"true"==c||a._value===c)},getValue:function(a,c){return"realvalue"==c?a._value:void 0===a._value||null==a._value?a._checked?1:0:a._value},setReadonly:function(a,c){a._ro=!0===c},isReadonly:function(a){return a._ro},setFocus:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus()}},dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(e,g,c){e._type="ra",e._enabled=!0,e._checked=!1,e._group=g.name,e._value=g.value,e._uid=c,e._ro=1==g.readonly,e._rName=e._rId+e._group,this.r[e._idd]=e,g.inputWidth=14,this.doAddLabel(e,g),this.doAddInput(e,g,"INPUT","TEXT",!0,!0,"dhxform_textarea"),e.childNodes[e._ll?1:0].className+=" dhxform_img_node";var h=document.createElement("DIV");if(h.className="dhxform_img rdbt0",e.appendChild(h),isNaN(g.inputLeft)||(e.childNodes[e._ll?1:0].style.left=parseInt(g.inputLeft)+"px"),isNaN(g.inputTop)||(e.childNodes[e._ll?1:0].style.top=parseInt(g.inputTop)+"px"),e.childNodes[e._ll?1:0].appendChild(h),e.childNodes[e._ll?1:0].firstChild.name="",e.childNodes[e._ll?1:0].firstChild.value="",e._updateImgNode=function(m,n){var l=m.childNodes[m._ll?1:0].lastChild;l.className=(n?"dhxform_actv_r":"dhxform_img")+" "+(m._checked?"rdbt1":"rdbt0"),m=l=null},e._doOnFocus=function(l){l.getForm().callEvent("onFocus",[l._group,l._value])},e._doOnBlur=function(l){l.getForm().callEvent("onBlur",[l._group,l._value])},e._doOnKeyUpDown=function(m,l){this.callEvent(m,[this.childNodes[this._ll?0:1].childNodes[0],l,this._group,this._value])},null==this.input[e._rName]){var a=document.createElement("INPUT");a.type="HIDDEN",a.name=g.name,a.firstValue=e._value,e.appendChild(a),this.input[e._rName]=a}return this.firstValue[e._rName]||(this.firstValue[e._rName]=g.value),1==g.checked&&this.check(e),1==g.hidden&&this.hide(e),1==g.disabled&&this.userDisable(e),this.doAttachEvents(e),this},destruct:function(g,h){if(g.lastChild==this.input[g._rName]){var e=!1;for(var c in this.r)e||this.r[c]._group!=g._group||this.r[c]._idd==g._idd||(this.r[c].appendChild(this.input[g._rName]),e=!0);e||(this.input[g._rName].parentNode.removeChild(this.input[g._rName]),this.input[g._rName]=null,this.firstValue[g._rName]=null)}this.r[g._idd]=null,delete this.r[g._idd],g._doOnFocus=g._doOnBlur=g._updateImgNode=null,this.doUnloadNestedLists(g),this.doDestruct(g);var l=g._idd;return g=null,l},doClick:function(c){if(c.childNodes[c._ll?0:1].childNodes[0].focus(),c._enabled&&!c._checked&&!c._ro){var a=[c._group,c._value,!0];c.checkEvent("onBeforeChange")&&!0!==c.callEvent("onBeforeChange",a)||(this.setChecked(c,!0),c.getForm()._autoCheck(),c.callEvent("onChange",a))}},doCheckValue:function(e){var g=null;for(var c in this.r)this.r[c]._checked&&this.r[c]._group==e._group&&this.r[c]._rId==e._rId&&(g=this.r[c]._value);null!=g&&this.r[c]._enabled?(this.input[e._rName].name=String(e._group),this.input[e._rName].value=g):(this.input[e._rName].name="",this.input[e._rName].value=""),this.input[e._rName]._value=g},setChecked:function(h,l){for(var c in l=!0===l,this.r)if(this.r[c]._group==h._group&&this.r[c]._rId==h._rId){var g=!1;if(this.r[c]._idd==h._idd?this.r[c]._checked!=l&&(this.r[c]._checked=l,g=!0):this.r[c]._checked&&(g=!(this.r[c]._checked=!1)),g){var e=this.r[c].childNodes[this.r[c]._ll?1:0].childNodes[1];e.className=e.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[c]._checked?" rdbt1":" rdbt0"),e=null}}this.doCheckValue(h)},getChecked:function(a){return this.input[a._rName]._value},_getFirstValue:function(a){return this.firstValue[a._rName]},_getId:function(a){return a._idd},setValue:function(a,c){}},function(){for(var c in{doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1})dhtmlXForm.prototype.items.radio[c]=dhtmlXForm.prototype.items.checkbox[c]}(),dhtmlXForm.prototype.items.select={render:function(a,c){return a._type="se",a._enabled=!0,a._value=null,a._newValue=null,this.doAddLabel(a,c),this.doAddInput(a,c,"SELECT",null,!0,!0,"dhxform_select"),this.doAttachEvents(a),this.doLoadOpts(a,c),null!=c.connector&&this.doLoadOptsConnector(a,c.connector),void 0!==c.value&&null!=c.value&&this.setValue(a,c.value),this},destruct:function(a){for(this.doUnloadNestedLists(a),a.callEvent=null,a.checkEvent=null,a.getForm=null,a._autoCheck=null,a._enabled=null,a._idd=null,a._type=null,a._value=null,a._newValue=null,a.onselectstart=null,a.childNodes[a._ll?1:0].childNodes[0].onclick=null,a.childNodes[a._ll?1:0].childNodes[0].onkeydown=null,a.childNodes[a._ll?1:0].childNodes[0].onchange=null,a.childNodes[a._ll?1:0].childNodes[0].onfocus=null,a.childNodes[a._ll?1:0].childNodes[0].onblur=null,a.childNodes[a._ll?1:0].childNodes[0].onkeyup=null,a.childNodes[a._ll?1:0].removeChild(a.childNodes[a._ll?1:0].childNodes[0]);0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a),a=null},doAddLabel:function(c,e){var a=document.createElement("DIV");a.className="dhxform_label "+e.labelAlign,a.innerHTML="<label for='"+e.uid+"'>"+e.label+(e.info?"<span class='dhxform_info'>[?]</span>":"")+(c._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>",1==e.wrap&&(a.style.whiteSpace="normal"),void 0!==e.tooltip&&(a.title=e.tooltip),c.appendChild(a),void 0!==e.label&&null!=e.label&&0!=e.label.length||(a.style.display="none"),isNaN(e.labelWidth)||(a.style.width=parseInt(e.labelWidth)+"px"),isNaN(e.labelHeight)||(a.style.height=parseInt(e.labelHeight)+"px"),isNaN(e.labelLeft)||(a.style.left=parseInt(e.labelLeft)+"px"),isNaN(e.labelTop)||(a.style.top=parseInt(e.labelTop)+"px"),e.info&&(a.onclick=function(h){var g=(h=h||event).target||h.srcElement;if(void 0!==g.className&&"dhxform_info"==g.className)return this.parentNode.callEvent("onInfo",[this.parentNode._idd,h]),h.cancelBubble=!0,h.preventDefault?h.preventDefault():h.returnValue=!1,!1})},doAttachEvents:function(e){var a=e.childNodes[e._ll?1:0].childNodes[0],c=this;a.onclick=function(){c.doOnChange(this)},a.onkeydown=function(g){g=g||event,c.doOnChange(this),this.parentNode.parentNode.callEvent("onKeyDown",[this,g,this.parentNode.parentNode._idd])},a.onchange=function(){c.doOnChange(this)},a.onkeyup=function(g){g=g||event,this.parentNode.parentNode.callEvent("onKeyUp",[this,g,this.parentNode.parentNode._idd])},a=null,this.doAttachChangeLS(e)},doAttachChangeLS:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];a.onfocus=function(){var e=this.parentNode.parentNode;e.getForm()._ccActivate(e._idd,this,e.getForm().getItemValue(e._idd,!0)),e.getForm().callEvent("onFocus",[e._idd]),e=null},a.onblur=function(){var e=this.parentNode.parentNode;e.getForm()._ccDeactivate(e._idd),e.getForm().callEvent("onBlur",[e._idd]),e=null},a=null},doValidate:function(a){a.getForm().live_validate&&this._validate(a)},doLoadOpts:function(m,h,o){for(var n=m.childNodes[m._ll?1:0].childNodes[0],a=h.options,g=!1,c=0;c<a.length;c++){var l=a[c].text||a[c].label;l&&void 0!==l||(l="");var e=new Option(l,a[c].value);"string"==typeof a[c].img_src&&e.setAttribute("img_src",a[c].img_src),n.options.add(e),void 0!==a[c].selected&&1==window.dhx4.s2b(a[c].selected)&&(e.selected=!0,m._value=a[c].value,g=!0),void 0!==a[c].checked&&1==window.dhx4.s2b(a[c].checked)&&e.setAttribute("checked","1"),void 0!==a[c].img&&e.setAttribute("img",a[c].img),void 0!==a[c].img_dis&&e.setAttribute("img_dis",a[c].img_dis),void 0!==a[c].css&&e.setAttribute("css",a[c].css)}!g&&0<=n.selectedIndex&&(m._value=n.options[n.selectedIndex].value),!0===o&&m.callEvent("onOptionsLoaded",[m._idd]),this._checkNoteWidth(m)},doLoadOptsConnector:function(e,a){var c=this;e._connector_working=!0,window.dhx4.ajax.get(a,function(m){if(null!=(m=m.xmlDoc.responseXML)){var g=m.getElementsByTagName("data");if(null!=g&&null!=g[0]){g=g[0];for(var l=[],n=0;n<g.childNodes.length;n++)if(void 0!==g.childNodes[n].tagName&&"item"==String(g.childNodes[n].tagName).toLowerCase()){var h=g.childNodes[n];l.push({label:h.getAttribute("label"),value:h.getAttribute("value"),selected:null!=h.getAttribute("selected")}),h=null}c.doLoadOpts(e,{options:l},!0),e._connector_working=!1,null!=e._connector_value&&(c.setValue(e,e._connector_value),e._connector_value=null),c=e=null}}})},doOnChange:function(e){var a=e.parentNode.parentNode;if(a._newValue=0<=e.selectedIndex?e.options[e.selectedIndex].value:null,a._newValue!=a._value){if(a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",[a._idd,a._value,a._newValue])){for(var c=0;c<e.options.length;c++)e.options[c].value==a._value&&(e.options[c].selected=!0);return}a._value=a._newValue,a.callEvent("onChange",[a._idd,a._value]),"se"==a._type&&a.getForm().live_validate&&this._validate(a)}a._autoCheck()},setText:function(a,c){c||(c=""),a.childNodes[a._ll?0:1].childNodes[0].innerHTML=c+(a._required?"<span class='dhxform_item_required'>*</span>":""),a.childNodes[a._ll?0:1].style.display=0==c.length||null==c?"none":""},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0,a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1,a.childNodes[a._ll?1:0].childNodes[0].setAttribute("disabled",!0)},getOptions:function(a){return a.childNodes[a._ll?1:0].childNodes[0].options},setValue:function(c,g){if(c._connector_working)c._connector_value=g;else{for(var a=this.getOptions(c),e=0;e<a.length;e++)a[e].value==g&&(a[e].selected=!0,c._value=a[e].value);null!=c._list&&0<c._list.length&&c.getForm()._autoCheck(),c.getForm()._ccReload(c._idd,c._value)}},getValue:function(e){for(var a=-1,c=this.getOptions(e),g=0;g<c.length;g++)c[g].selected&&(a=c[g].value);return a},setWidth:function(c,a){c.childNodes[c._ll?1:0].childNodes[0].style.width=a+"px"},getSelect:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setFocus:function(a){a.childNodes[a._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(c){var a;null!=c.childNodes[c._ll?1:0].childNodes[1]&&null!=(a=c.childNodes[c._ll?1:0].childNodes[1]).className&&0<=a.className.search(/dhxform_note/gi)&&"auto"==a._w&&(a.style.width=c.childNodes[c._ll?1:0].childNodes[0].offsetWidth+"px"),a=null}},function(){for(var c in{doAddInput:1,doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.select[c]=dhtmlXForm.prototype.items.checkbox[c]}(),dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(g,l,m){var c=g.childNodes[g._ll?1:0].childNodes[0];c.multiple=!0,isNaN(l.size)||(c.size=Number(l.size)),g._value=[],g._newValue=[];for(var e=l.options,h=0;h<e.length;h++){var a=new Option(e[h].text||e[h].label,e[h].value);c.options.add(a),1!=e[h].selected&&"true"!=e[h].selected||(a.selected=!0,g._value.push(e[h].value))}!0===m&&g.callEvent("onOptionsLoaded",[g._idd]),this._checkNoteWidth(g)},doAttachEvents:function(e){var a=e.childNodes[e._ll?1:0].childNodes[0],c=this;a.onfocus=function(){c.doOnChange(this);var g=this.parentNode.parentNode;g.getForm().callEvent("onFocus",[g._idd]),g=null},a.onblur=function(){c.doOnChange(this);var g=this.parentNode.parentNode;g.getForm().callEvent("onBlur",[g._idd]),g=null},a.onclick=function(){c.doOnChange(this);var g=this.parentNode.parentNode;g._autoCheck(),g=null}},doOnChange:function(g){var c=g.parentNode.parentNode;c._newValue=[];for(var e=0;e<g.options.length;e++)g.options[e].selected&&c._newValue.push(g.options[e].value);if(c._value.sort().toString()!=c._newValue.sort().toString()){if(c.checkEvent("onBeforeChange")&&!0!==c.callEvent("onBeforeChange",[c._idd,c._value,c._newValue])){var a={};for(e=0;e<c._value.length;e++)a[c._value[e]]=!0;for(e=0;e<g.options.length;e++)g.options[e].selected=1==a[g.options[e].value];return void(a=null)}c._value=[];for(e=0;e<c._newValue.length;e++)c._value.push(c._newValue[e]);c.callEvent("onChange",[c._idd,c._value])}c._autoCheck()},setValue:function(e,h){var a={};"string"==typeof h&&(h=h.split(",")),"object"!=typeof h&&(h=[h]);for(var g=0;g<h.length;g++)a[h[g]]=!0;var c=this.getOptions(e);for(g=0;g<c.length;g++)c[g].selected=1==a[c[g].value];e._autoCheck()},getValue:function(e){for(var a=[],c=this.getOptions(e),g=0;g<c.length;g++)c[g].selected&&a.push(c[g].value);return a}},function(){for(var c in dhtmlXForm.prototype.items.select)dhtmlXForm.prototype.items.multiselect[c]||(dhtmlXForm.prototype.items.multiselect[c]=dhtmlXForm.prototype.items.select[c])}(),dhtmlXForm.prototype.items.input={render:function(l,m){var h=!isNaN(m.rows);if(l._type="ta",l._enabled=!0,this.doAddLabel(l,m),this.doAddInput(l,m,h?"TEXTAREA":"INPUT",h?null:"TEXT",!0,!0,"dhxform_textarea"),this.doAttachEvents(l),h&&(l.childNodes[l._ll?1:0].childNodes[0].rows=Number(m.rows)+(window.dhx4.isIE6?1:0)),void 0!==m.numberFormat){var g,e=null,n=null;"string"!=typeof m.numberFormat?(g=m.numberFormat[0],e=m.numberFormat[1]||null,n=m.numberFormat[2]||null):(g=m.numberFormat,"string"==typeof m.groupSep&&(e=m.groupSep),"string"==typeof m.decSep&&(n=m.decSep)),this.setNumberFormat(l,g,e,n,!1)}return this.setValue(l,m.value),this},doAttachEvents:function(e){var c=e.childNodes[e._ll?1:0].childNodes[0];if(void 0!==c.tagName&&1=={input:1,textarea:1,select:1}[c.tagName.toLowerCase()]){var a=this;c.onfocus=function(){var g=this.parentNode.parentNode;null!=g._df&&(this.value=g._value||""),g.getForm()._ccActivate(g._idd,this,this.value),g.getForm().callEvent("onFocus",[g._idd]),g=null},c.onblur=function(){var g=this.parentNode.parentNode;g.getForm()._ccDeactivate(g._idd),a.updateValue(g,!0),g.getForm().live_validate&&a._validate(g),g.getForm().callEvent("onBlur",[g._idd]),g=null}}c=null},updateValue:function(h,a){var l=h.childNodes[h._ll?1:0].childNodes[0].value,g=h.getForm(),c=1==g._ccActive&&null!=g._formLS&&null!=g._formLS[h._idd];if(g=null,(c||null==h._df||l!=window.dhx4.template._getFmtValue(h._value,h._df))&&(a||null==h._df||h._value!=l||l!=window.dhx4.template._getFmtValue(l,h._df))){if(h._value!=l)return h.checkEvent("onBeforeChange")&&!0!==h.callEvent("onBeforeChange",[h._idd,h._value,l])?void(null!=h._df?this.setValue(h,h._value):h.childNodes[h._ll?1:0].childNodes[0].value=h._value):(null!=h._df&&a?this.setValue(h,l):h._value=l,void h.callEvent("onChange",[h._idd,l]));null!=h._df&&a&&this.setValue(h,h._value)}},setValue:function(e,g){e._value=void 0!==g&&null!=g?g:"";var c=String(e._value)||"",a=e.childNodes[e._ll?1:0].childNodes[0];null!=e._df&&(c=window.dhx4.template._getFmtValue(c,e._df)),a.value!=c&&(a.value=c,e.getForm()._ccReload(e._idd,c)),a=null},getValue:function(a){var c=a.getForm();return c._formLS&&null!=c._formLS[a._idd]&&this.updateValue(a),c=null,void 0!==a._value&&null!=a._value?a._value:""},setReadonly:function(a,c){a._ro=!0===c,a._ro?a.childNodes[a._ll?1:0].childNodes[0].setAttribute("readOnly","true"):a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("readOnly")},isReadonly:function(a){return a._ro||(a._ro=!1),a._ro},getInput:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setNumberFormat:function(g,h,e,l,c){if("boolean"!=typeof c&&(c=!0),""==h)return g._df=null,c&&this.setValue(g,g._value),!0;if("string"==typeof h){var a=window.dhx4.template._parseFmt(h,e,l);return 0!=a&&(g._df=a,c&&this.setValue(g,g._value),!0)}}},function(){for(var c in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1})dhtmlXForm.prototype.items.input[c]=dhtmlXForm.prototype.items.select[c]}(),dhtmlXForm.prototype.items.password={render:function(a,c){return a._type="pw",a._enabled=!0,this.doAddLabel(a,c),this.doAddInput(a,c,"INPUT","PASSWORD",!0,!0,"dhxform_textarea"),this.doAttachEvents(a),this.setValue(a,c.value),this}},function(){for(var c in{doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.password[c]=dhtmlXForm.prototype.items.input[c]}(),dhtmlXForm.prototype.items.file={render:function(e,g){e._type="fl",e._enabled=!0,this.doAddLabel(e,g),this.doAddInput(e,g,"INPUT","FILE",!0,!1,"dhxform_textarea");var a=e.childNodes[e._ll?1:0].childNodes[0],c=this;return a.onfocus=function(){var h=this.parentNode.parentNode;h.getForm().callEvent("onFocus",[h._idd]),h=null},a.onblur=function(){var h=this.parentNode.parentNode;h.getForm().live_validate&&c._validate(h),h.getForm().callEvent("onBlur",[h._idd]),h=null},a=null,e.childNodes[e._ll?1:0].childNodes[0].onchange=function(){e.callEvent("onChange",[e._idd,this.value])},this},setValue:function(){},getValue:function(a){return a.childNodes[a._ll?1:0].childNodes[0].value}},function(){for(var c in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,getInput:1,enable:1,disable:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.file[c]=dhtmlXForm.prototype.items.input[c]}(),dhtmlXForm.prototype.items.label={_index:!1,render:function(c,e){c._type="lb",c._enabled=!0,c._checked=!0;var a=document.createElement("DIV");return a.className="dhxform_txt_label2"+(e._isTopmost?" topmost":""),a.innerHTML=e.label,c.appendChild(a),1==e.hidden&&this.hide(c),1==e.disabled&&this.userDisable(c),isNaN(e.labelWidth)||(a.style.width=parseInt(e.labelWidth)+"px"),isNaN(e.labelHeight)||(a.style.height=parseInt(e.labelHeight)+"px"),isNaN(e.labelLeft)||(a.style.left=parseInt(e.labelLeft)+"px"),isNaN(e.labelTop)||(a.style.top=parseInt(e.labelTop)+"px"),this},destruct:function(a){this.doUnloadNestedLists(a),a._autoCheck=null,a._enabled=null,a._type=null,a.callEvent=null,a.checkEvent=null,a.getForm=null,a.onselectstart=null,a.parentNode.removeChild(a),a=null},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1},setText:function(a,c){a.firstChild.innerHTML=c},getText:function(a){return a.firstChild.innerHTML}},function(){for(var c in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.label[c]=dhtmlXForm.prototype.items.checkbox[c]}(),dhtmlXForm.prototype.items.button={render:function(c,e){if(c._type="bt",c._enabled=!0,c._name=e.name,c.className=String(c.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left"),c._doOnKeyUpDown=function(h,g){this.callEvent(h,[this.childNodes[0].childNodes[0],g,this._idd])},c.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt">'+e.value+'</div><div class="dhxform_btn_filler" disabled="true"></div></div>',!isNaN(e.width)){var a=Math.max(e.width,10);null==dhtmlXForm.prototype.items[this.t]._dim&&(c.firstChild.style.width=a+"px",dhtmlXForm.prototype.items[this.t]._dim=c.getForm()._checkDim(c,c.firstChild)),c.firstChild.style.width=a-dhtmlXForm.prototype.items[this.t]._dim+"px",c.firstChild.firstChild.className+=" dhxform_btn_txt_autowidth"}return isNaN(e.inputLeft)||(c.childNodes[0].style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(c.childNodes[0].style.top=parseInt(e.inputTop)+"px"),1==e.hidden&&this.hide(c),1==e.disabled&&this.userDisable(c),void 0!==e.tooltip&&(c.firstChild.title=e.tooltip),c.onselectstart=function(g){return(g=g||event).cancelBubble=!0,g.preventDefault?g.preventDefault():g.returnValue=!1,!1},c.firstChild.onselectstart=function(g){return(g=g||event).cancelBubble=!0,g.preventDefault?g.preventDefault():g.returnValue=!1,!1},c.firstChild.onkeypress=function(g){if((32==(g=g||event).keyCode||32==g.charCode||13==g.keyCode||13==g.charCode)&&!this.parentNode._busy)return this.parentNode._busy=!0,g.cancelBubble=!0,g.preventDefault?g.preventDefault():g.returnValue=!1,_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]),!1},c.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)},c.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout"),this.parentNode._doOnBlur(this.parentNode)},c.firstChild.onkeyup=function(g){this.parentNode._doOnKeyUpDown("onKeyUp",g||event)},c.firstChild.onkeydown=function(g){this.parentNode._doOnKeyUpDown("onKeyDown",g||event)},c.firstChild.onmouseover=function(){var g=this.parentNode;g._enabled&&(this._isOver=!0,this.className="dhxform_btn dhxform_btn_over",g=null)},c.firstChild.onmouseout=function(){var g=this.parentNode;g._enabled&&(this.className="dhxform_btn",this._allowClick=!1,this._pressed=!1,this._isOver=!1,g=null)},c.firstChild.ontouchstart=c.firstChild.onmousedown=function(h){if("touchstart"==(h=h||event).type&&h.preventDefault&&h.preventDefault(),!(2<=h.button||this._pressed)){var g=this.parentNode;g._enabled&&(this.className="dhxform_btn dhxform_btn_pressed",this._allowClick=!0,this._pressed=!0,g=null)}},c.firstChild.ontouchend=c.firstChild.onmouseup=function(h){if(!(2<=(h=h||event).button)&&this._pressed){var g=this.parentNode;g._enabled&&(g._busy=!1,this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":""),this._pressed&&this._allowClick&&g.callEvent("_onButtonClick",[g._name,g._cmd]),this._allowClick=!1,this._pressed=!1,g=null)}},c._doOnFocus=function(g){g.getForm().callEvent("onFocus",[g._idd])},c._doOnBlur=function(g){g.getForm().callEvent("onBlur",[g._idd])},this},destruct:function(a){for(this.doUnloadNestedLists(a),a.callEvent=null,a.checkEvent=null,a.getForm=null,a._autoCheck=null,a._type=null,a._enabled=null,a._cmd=null,a._name=null,a._doOnFocus=null,a._doOnBlur=null,a._doOnKeyUpDown=null,a.onselectstart=null,a.firstChild.onselectstart=null,a.firstChild.onkeypress=null,a.firstChild.ontouchstart=null,a.firstChild.ontouchend=null,a.firstChild.onfocus=null,a.firstChild.onblur=null,a.firstChild.onkeyup=null,a.firstChild.onkeydown=null,a.firstChild.onmouseover=null,a.firstChild.onmouseout=null,a.firstChild.onmousedown=null,a.firstChild.onmouseup=null;0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a),a=null},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0,a.childNodes[0].removeAttribute("disabled"),a.childNodes[0].setAttribute("role","link"),a.childNodes[0].setAttribute("tabIndex","0")},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1,a.childNodes[0].setAttribute("disabled","true"),a.childNodes[0].removeAttribute("role"),a.childNodes[0].removeAttribute("tabIndex")},setText:function(a,c){a.childNodes[0].childNodes[0].innerHTML=c},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},setFocus:function(a){a.childNodes[0].focus()}},function(){for(var c in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.button[c]=dhtmlXForm.prototype.items.checkbox[c]}(),dhtmlXForm.prototype.items.hidden={_index:!1,render:function(c,e){c.style.display="none",c._name=e.name,c._type="hd",c._enabled=!0;var a=document.createElement("INPUT");return a.type="HIDDEN",a.name=e.name,a.value=e.value||"",c.appendChild(a),this},destruct:function(a){for(this.doUnloadNestedLists(a);0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a._autoCheck=null,a._name=null,a._type=null,a._enabled=null,a.onselectstart=null,a.callEvent=null,a.checkEvent=null,a.getForm=null,a.parentNode.removeChild(a),a=null},enable:function(a){a._enabled=!0,a.childNodes[0].setAttribute("name",a._name)},disable:function(a){a._enabled=!1,a.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return!0},setValue:function(a,c){a.childNodes[0].value=c},getValue:function(a){return a.childNodes[0].value},getInput:function(a){return a.childNodes[0]}},function(){for(var c in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.hidden[c]=dhtmlXForm.prototype.items.checkbox[c]}(),dhtmlXForm.prototype.items.list={_index:!1,render:function(a,c){return a._type="list",a._enabled=!0,a._isNestedForm=!0,a.style.paddingLeft=a._ofsNested+"px",a.className="dhxform_base_nested"+(a._custom_css||""),[this,new dhtmlXForm(a,null,c)]},destruct:function(a){}},dhtmlXForm.prototype.items.fieldset={_index:!1,render:function(c,g){c._type="fs",parseInt(g.inputWidth),c._width=g.width,c._enabled=!0,c._checked=!0,c.className="fs_"+g.position+("string"==typeof g.className?" "+g.className:"");var e=document.createElement("FIELDSET");e.className="dhxform_fs";var h=String(g.labelAlign).replace("align_","");if(e.innerHTML="<legend class='fs_legend' align='"+h+"' style='text-align:"+h+"'>"+g.label+"</legend>",c.appendChild(e),isNaN(g.inputLeft)||(e.style.left=parseInt(g.inputLeft)+"px"),isNaN(g.inputTop)||(e.style.top=parseInt(g.inputTop)+"px"),"auto"!=g.inputWidth&&!isNaN(g.inputWidth)){e.style.width=parseInt(g.inputWidth)+"px";var a=parseInt(e.style.width);e.offsetWidth>a&&(e.style.width=a+(a-e.offsetWidth)+"px")}return c._addSubListNode=function(){var l=document.createElement("DIV");return l._custom_css=" dhxform_fs_nested",this.childNodes[0].appendChild(l),l},1==g.hidden&&this.hide(c),1==g.disabled&&this.userDisable(c),this},destruct:function(a){for(this.doUnloadNestedLists(a),a._checked=null,a._enabled=null,a._idd=null,a._type=null,a._width=null,a.onselectstart=null,a._addSubListNode=null,a._autoCheck=null,a.callEvent=null,a.checkEvent=null,a.getForm=null;0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a),a=null},setText:function(a,c){a.childNodes[0].childNodes[0].innerHTML=c},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},enable:function(a){a._enabled=!0,0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""))},disable:function(a){a._enabled=!1,String(a.className).search("disabled")<0&&(a.className+=" disabled")},setWidth:function(c,a){c.childNodes[0].style.width=a+"px",c._width=a},getWidth:function(a){return a._width}},function(){for(var c in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.fieldset[c]=dhtmlXForm.prototype.items.checkbox[c]}(),dhtmlXForm.prototype.items.block={_index:!1,render:function(c,e){c._type="bl",c._width=e.width,c._enabled=!0,c._checked=!0,c.className="block_"+e.position+("string"==typeof e.className?" "+e.className:"");var a=document.createElement("DIV");return a.className="dhxform_obj_"+c.getForm().skin+" dhxform_block",a.style.fontSize=c.getForm().cont.style.fontSize,e.style&&(a.style.cssText=e.style),void 0!==e.id&&(a.id=e.id),c.appendChild(a),isNaN(e.inputLeft)||(a.style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(a.style.top=parseInt(e.inputTop)+"px"),"auto"!=e.inputWidth&&(isNaN(e.inputWidth)||(a.style.width=parseInt(e.inputWidth)+"px")),isNaN(e.blockOffset)||(c._ofsNested=e.blockOffset),c._addSubListNode=function(){var g=document.createElement("DIV");return g._inBlcok=!0,void 0!==this._ofsNested&&(g._ofsNested=this._ofsNested),this.childNodes[0].appendChild(g),g},1==e.hidden&&this.hide(c),1==e.disabled&&this.userDisable(c),this},_setCss:function(a,e,c){a.firstChild.className="dhxform_obj_"+e+" dhxform_block",a.firstChild.style.fontSize=c}},function(){for(var c in{enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1})dhtmlXForm.prototype.items.block[c]=dhtmlXForm.prototype.items.fieldset[c]}(),dhtmlXForm.prototype.items.newcolumn={_index:!1},dhtmlXForm.prototype.items.template={render:function(c,e){isNaN(e.rows);return c._type="tp",c._enabled=!0,null!=e.format&&("function"==typeof e.format?c.format=e.format:"string"==typeof e.format&&"function"==typeof window[e.format]&&(c.format=window[e.format])),null==c.format&&(c.format=function(g,h){return h}),this.doAddLabel(c,e),this.doAddInput(c,e,"DIV",null,!0,!0,"dhxform_item_template"),this.setValue(c,e.value||""),this},destruct:function(a){a.format=null,this.d2(a),a=null},setValue:function(a,c){a._value=c,a.childNodes[a._ll?1:0].childNodes[0].innerHTML=a.format(a._idd,a._value)},getValue:function(a){return a._value},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1}},function(){for(var c in dhtmlXForm.prototype.items.template.d2=dhtmlXForm.prototype.items.input.destruct,{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.template[c]=dhtmlXForm.prototype.items.select[c]}(),dhtmlXForm.prototype._ulToObject=function(l,r){for(var m=[],c=0;c<l.childNodes.length;c++){if("li"==String(l.childNodes[c].tagName||"").toLowerCase()){for(var g={},u=l.childNodes[c],s=0;s<r.length;s++)null!=u.getAttribute(r[s])&&(g[String(r[s]).replace("ftype","type")]=u.getAttribute(r[s]));if(!g.label)try{g.label=u.firstChild.nodeValue}catch(o){}var h=u.getElementsByTagName("UL");null!=h[0]&&(g["select"==g.type?"options":"list"]=dhtmlXForm.prototype._ulToObject(h[0],r));for(s=0;s<u.childNodes.length;s++)"userdata"==String(u.childNodes[s].tagName||"").toLowerCase()&&(g.userdata||(g.userdata={}),g.userdata[u.childNodes[s].getAttribute("name")]=u.childNodes[s].firstChild.nodeValue);m[m.length]=g}if("div"==String(l.childNodes[c].tagName||"").toLowerCase()){g={type:"label"};try{g.label=l.childNodes[c].firstChild.nodeValue}catch(o){}m[m.length]=g}}return m},dhtmlXForm.prototype.setUserData=function(h,e,g,a){if(void 0!==a){var c=this.doWithItem([h,e],"_getId");null!=c&&(h=c,e=g,g=a)}this._userdata||(this._userdata={}),this._userdata[h]=this._userdata[h]||{},this._userdata[h][e]=g},dhtmlXForm.prototype.getUserData=function(g,e,a){if(void 0!==a){var c=this.doWithItem([g,e],"_getId");null!=c&&(g=c,e=a)}return null!=this._userdata&&void 0!==this._userdata[g]&&void 0!==this._userdata[g][e]?this._userdata[g][e]:""},dhtmlXForm.prototype.setRTL=function(a){this._rtl=!0===a,this._rtl?String(this.cont).search(/dhxform_rtl/gi)<0&&(this.cont.className+=" dhxform_rtl"):0<=String(this.cont).search(/dhxform_rtl/gi)&&(this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,""))},_dhxForm_doClick=function(h,c){if("object"==typeof c){var a=c[1];c=c[0]}var g;document.createEvent?((g=document.createEvent("MouseEvents")).initEvent(c,!0,!1),h.dispatchEvent(g)):document.createEventObject&&((g=document.createEventObject()).button=1,h.fireEvent("on"+c,g));a&&window.setTimeout(function(){_dhxForm_doClick(h,a)},100)},dhtmlXForm.prototype.setFormData=function(e){for(var c in e){var g=this.getItemType(c);switch(g){case"checkbox":this[1==e[c]||1==parseInt(e[c])||"true"==e[c]||e[c]==this.getItemValue(c,"realvalue")?"checkItem":"uncheckItem"](c);break;case"radio":this.checkItem(c,e[c]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(c,e[c]);break;default:this["setFormData_"+g]?this["setFormData_"+g](c,e[c]):(this.hId||(this.hId=this._genStr(12)),this.setUserData(this.hId,c,e[c]))}}},dhtmlXForm.prototype.getFormData=function(v,l){var c={};for(var u in this.itemPull){var n=this.itemPull[u]._idd,w=this.itemPull[u]._type;if("ch"==w&&(c[n]=this.isItemChecked(n)?this.getItemValue(n):0),"ra"!=w||c[this.itemPull[u]._group]||(c[this.itemPull[u]._group]=this.getCheckedValue(this.itemPull[u]._group)),w in{se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}&&(c[n]=this.getItemValue(n,v)),this["getFormData_"+w]&&(c[n]=this["getFormData_"+w](n)),"up"==w){var h=this.getItemValue(n);for(var g in h)c[g]=h[g]}if(this.itemPull[u]._list)for(var e=0;e<this.itemPull[u]._list.length;e++){var m=this.itemPull[u]._list[e].getFormData(v,l);for(var s in m)c[s]=m[s]}}if(!l&&this.hId&&this._userdata[this.hId])for(var u in this._userdata[this.hId])c[u]||(c[u]=this._userdata[this.hId][u]);return c},dhtmlXForm.prototype.adjustParentSize=function(){for(var l=0,h=-1,m=0;m<this.base.length;m++)l+=this.base[m].firstChild.offsetWidth,this.base[m].offsetHeight>h&&(h=this.base[m].offsetHeight);var g=!1;try{if(g=1==this.cont.parentNode.parentNode.parentNode.parentNode._isCell)var a=this.cont.parentNode.parentNode.parentNode.parentNode}catch(n){}if(g&&void 0!==a)return 0<l&&a.setWidth(l+10),0<h&&a.setHeight(h+a.firstChild.firstChild.offsetHeight+5),void(g=a=null);try{if(1==this.cont.parentNode.parentNode.parentNode._isWindow){var o=this.cont.parentNode.parentNode;"function"==typeof o.callEvent&&(this.cont.style.display="none",o.callEvent("_setCellSize",[l+15,h+15]),this.cont.style.display="")}}catch(n){}},dhtmlXForm.prototype.reset=function(){this.callEvent("onBeforeReset",[this.formId,this.getFormData()])&&(this._last_load_data&&this.setFormData(this._last_load_data),this.callEvent("onAfterReset",[this.formId]))},dhtmlXForm.prototype.send=function(c,m,n,g){if("function"==typeof m?(n=m,m="post"):m="get"==m?"get":"post",!0===g||this.validate()){var l=this.getFormData(!0),h=[];for(var e in l)h.push(e+"="+encodeURIComponent(l[e]));var a=function(o){n&&n.call(this,o,o.xmlDoc.responseText)};"get"==m?window.dhx4.ajax.get(c+(-1==c.indexOf("?")?"?":"&")+h.join("&"),a):window.dhx4.ajax.post(c,h.join("&"),a)}},dhtmlXForm.prototype.save=function(a,c){},dhtmlXForm.prototype.dummy=function(){},dhtmlXForm.prototype._changeFormId=function(c,a){this.formId=a},dhtmlXForm.prototype._dp_init=function(a){a._methods=["dummy","dummy","_changeFormId","dummy"],a._getRowData=function(g,c){var e=this.obj.getFormData(!0);return e[this.action_param]=this.obj.getUserData(g,this.action_param),e},a._clearUpdateFlag=function(){},a.attachEvent("onAfterUpdate",function(e,g,h,c){return"inserted"!=g&&"updated"!=g&&"error"!=g&&"invalid"!=g||this.obj.resetDataProcessor("updated"),"inserted"!=g&&"updated"!=g||(this.obj._last_load_data=this.obj.getFormData(!0)),this.obj.callEvent("onAfterSave",[this.obj.formId,c]),!0}),a.autoUpdate=!1,a.setTransactionMode("POST",!0),this.dp=a,this.formId=(new Date).valueOf(),this.resetDataProcessor("inserted"),this.save=function(){this.callEvent("onBeforeSave",[this.formId,this.getFormData()])&&this.validate()&&a.sendData()}},dhtmlXForm.prototype.resetDataProcessor=function(a){this.dp&&(this.dp.updatedRows=[],this.dp._in_progress=[],this.dp.setUpdated(this.formId,!0,a))},dhtmlXForm.prototype._ccActivate=function(e,a,c){this._formLS||(this._formLS={}),this._formLS[e]||(this._formLS[e]={input:a,value:c}),this._ccActive||(this._ccActive=!0,this._ccDo()),a=null},dhtmlXForm.prototype._ccDeactivate=function(a){this._ccTm&&window.clearTimeout(this._ccTm),this._ccActive=!1,null!=this._formLS&&null!=this._formLS[a]&&(this._formLS[a].input=null,this._formLS[a]=null,delete this._formLS[a])},dhtmlXForm.prototype._ccDo=function(){for(var c in this._ccTm&&window.clearTimeout(this._ccTm),this._formLS){var h=this._formLS[c].input;if("select"==String(h.tagName).toLowerCase()){var e="";0<=h.selectedIndex&&h.selectedIndex<h.options.length&&(e=h.options[h.selectedIndex].value)}else e=h.value;e!=this._formLS[c].value&&(this._formLS[c].value=e,this.callEvent("onInputChange",[h._idd,e,this])),h=null}if(this._ccActive){var g=this;this._ccTm=window.setTimeout(function(){g._ccDo(),g=null},100)}},dhtmlXForm.prototype._ccReload=function(c,a){this._formLS&&this._formLS[c]&&(this._formLS[c].value=a)},dhtmlXForm.prototype._checkDim=function(m,l){var g=document.createElement("DIV");g.className="dhxform_obj_"+this.skin,g.style.cssText+=1==dhx4.isIE6?"visibility:hidden;":"position:absolute;left:-2000px;top:-1000px;",document.body.appendChild(g);var h=m.parentNode,c=m.nextSibling;g.appendChild(m);var e=parseInt(l.style.width),n=(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?l.offsetWidth:l.clientWidth)-e;return null!=c?h.insertBefore(m,c):h.appendChild(m),g.parentNode.removeChild(g),h=c=g=m=l=null,n},dhtmlXForm.prototype._autoload=function(){for(var c=["ftype","name","value","label","check","checked","disabled","text","rows","select","selected","width","style","className","labelWidth","labelHeight","labelLeft","labelTop","inputWidth","inputHeight","inputLeft","inputTop","position","size"],e=document.getElementsByTagName("UL"),g=[],m=0;m<e.length;m++)if("dhtmlxForm"==e[m].className){var l=document.createElement("DIV");g[g.length]={nodeUL:e[m],nodeForm:l,data:dhtmlXForm.prototype._ulToObject(e[m],c),name:e[m].getAttribute("name")||null}}for(m=0;m<g.length;m++){g[m].nodeUL.parentNode.insertBefore(g[m].nodeForm,g[m].nodeUL);var n=new dhtmlXForm(g[m].nodeForm,g[m].data);null!==g[m].name&&(window[g[m].name]=n);var h=g[m].nodeUL.getAttribute("oninit")||null;g[m].nodeUL.parentNode.removeChild(g[m].nodeUL),g[m].nodeUL=null,g[m].nodeForm=null,g[m].data=null,g[m]=null,h&&("function"==typeof h?h():"function"==typeof window[h]&&window[h]())}"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXForm.prototype._autoload,!1):window.detachEvent("onload",dhtmlXForm.prototype._autoload)},"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXForm.prototype._autoload,!1):window.attachEvent("onload",dhtmlXForm.prototype._autoload),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachForm=function(a){this.callEvent("_onBeforeContentAttach",["form"]);var c=document.createElement("DIV");return c.style.width="100%",c.style.height="100%",c.style.position="relative",window.dhtmlx&&dhtmlx.$customScroll?dhtmlx.CustomScroll.enable(c):c.style.overflow="auto",this._attachObject(c),this.dataType="form",this.dataObj=new dhtmlXForm(c,a,this.conf.skin),c=null,this.callEvent("_onContentAttach",[]),this.dataObj}),dhtmlXForm.prototype.items.combo={render:function(c,e){c._type="combo",c._enabled=!0,c._value=null,c._newValue=null;var g=c.getForm().skin;void 0!==e.inputWidth&&"material"==g&&null!=String(e.inputWidth).match(/^\d*$/)&&(e.inputWidth=parseInt(e.inputWidth)+2),this.doAddLabel(c,e),this.doAddInput(c,e,"SELECT",null,!0,!0,"dhxform_select"),this.doAttachEvents(c),this.doLoadOpts(c,e),c.onselectstart=function(h){return!0},c.childNodes[c._ll?1:0].childNodes[0].setAttribute("mode",e.comboType||""),e.comboImagePath&&c.childNodes[c._ll?1:0].childNodes[0].setAttribute("imagePath",e.comboImagePath),e.comboDefaultImage&&c.childNodes[c._ll?1:0].childNodes[0].setAttribute("defaultImage",e.comboDefaultImage),e.comboDefaultImageDis&&c.childNodes[c._ll?1:0].childNodes[0].setAttribute("defaultImageDis",e.comboDefaultImageDis),c._combo=new dhtmlXComboFromSelect(c.childNodes[c._ll?1:0].childNodes[0]),c._combo.setSkin(g),c._combo._currentComboValue=c._combo.getSelectedValue(),c._combo.getInput().id=e.uid,"material"==g&&(c._combo.list.className+=" dhxform_obj_"+g);var a=this;return c._combo.attachEvent("onChange",function(){a.doOnChange(this)}),e.connector&&this.doLoadOptsConnector(c,e.connector),e.filtering?c._combo.enableFilteringMode(!0):e.serverFiltering&&c._combo.enableFilteringMode(!0,e.serverFiltering,e.filterCache,e.filterSubLoad),1==e.readonly&&this.setReadonly(c,!0),1==e.hidden&&this.hide(c),e.style&&(c._combo.DOMelem_input.style.cssText+=e.style),c._combo.attachEvent("onFocus",function(){var h=this.cont.parentNode.parentNode,l=h.getForm();("dhx_terrace"==l.skin||"material"==l.skin)&&this.cont.className.search(/combo_in_focus/)<0&&(this.cont.className+=" combo_in_focus"),l.callEvent("onFocus",[h._idd]),l=h=null}),c._combo.attachEvent("onBlur",function(){var h=this.cont.parentNode.parentNode,l=h.getForm();("dhx_terrace"==l.skin||"material"==l.skin)&&0<=this.cont.className.search(/combo_in_focus/)&&(this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,"")),l.callEvent("onBlur",[h._idd]),l=h=null}),this},destruct:function(a){a.childNodes[a._ll?1:0].childNodes[0].onchange=null,a._combo._currentComboValue=null,a._combo.unload(),a._combo=null,a._apiChange=null,this.d2(a),a=null},doAttachEvents:function(c){var a=this;c.childNodes[c._ll?1:0].childNodes[0].onchange=function(){a.doOnChange(this),a.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(a){a.getForm().hot_validate&&this._validate(a)},doOnChange:function(c){var a=c.base.parentNode.parentNode.parentNode;if(!a._apiChange){if(c._newComboValue=c.getSelectedValue(),c._newComboValue!=c._currentComboValue){if(a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",[a._idd,c._currentComboValue,c._newComboValue]))return window.setTimeout(function(){c.setComboValue(c._currentComboValue)},1),!1;c._currentComboValue=c._newComboValue,a.callEvent("onChange",[a._idd,c._currentComboValue])}a._autoCheck()}},doLoadOptsConnector:function(g,a){var e=this,c=g;g._connector_working=!0,g._apiChange=!0,g._combo.load(a,function(){c.callEvent("onOptionsLoaded",[c._idd]),c._connector_working=!1,null!=c._connector_value&&(e.setValue(c,c._connector_value),c._connector_value=null),c._apiChange=!1,e=c=null})},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0,a._combo.enable()},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1,a._combo.disable()},getCombo:function(a){return a._combo},setValue:function(a,c){a._connector_working?a._connector_value=c:(a._apiChange=!0,a._combo.setComboValue(c),a._combo._currentComboValue=a._combo.getActualValue(),a._apiChange=!1)},getValue:function(a){return a._combo.getActualValue()},setWidth:function(c,a){c.childNodes[c._ll?1:0].childNodes[0].style.width=a+"px"},setReadonly:function(a,c){a._combo&&(a._combo_ro=c,a._combo.readonly(a._combo_ro))},isReadonly:function(a,c){return a._combo_ro||!1},setFocus:function(a){a._enabled&&a._combo.setFocus()},_setCss:function(a,e,c){a._combo.setFontSize(c,c)}},function(){for(var c in{doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1})dhtmlXForm.prototype.items.combo[c]=dhtmlXForm.prototype.items.select[c]}(),dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct,dhtmlXForm.prototype.getCombo=function(a){return this.doWithItem(a,"getCombo")},dhtmlXForm.prototype.items.calendar={render:function(e,h){var c=this;e._type="calendar",e._enabled=!0;var l=navigator.userAgent,a=0<=l.indexOf("MSIE 6.0")||0<=l.indexOf("MSIE 7.0")||0<=l.indexOf("MSIE 8.0");this.doAddLabel(e,h),this.doAddInput(e,h,"INPUT","TEXT",!0,!0,"dhxform_textarea calendar"),this.doAttachChangeLS(e),a&&(e.childNodes[e._ll?1:0].childNodes[0].onfocus2=e.childNodes[e._ll?1:0].childNodes[0].onfocus,e.childNodes[e._ll?1:0].childNodes[0].onfocus=function(){1!=this._skipOnFocus?this.onfocus2.apply(this,arguments):this._skipOnFocus=!1}),e.childNodes[e._ll?1:0].childNodes[0]._idd=e._idd,e.childNodes[e._ll?1:0].childNodes[0].onblur=function(){var m=this.parentNode.parentNode;if(m._c.base._formMouseDown)return m._c.base._formMouseDown=!1,this._skipOnFocus=!0,this.focus(),this.value=this.value,!(m=null);var n=m.getForm();n._ccDeactivate(m._idd),c.checkEnteredValue(this.parentNode.parentNode),n.live_validate&&c._validate(m),n.callEvent("onBlur",[m._idd]),m._c.isVisible()||(m._tempValue=null),n=m=null},e._f=h.dateFormat||null,e._f0=h.serverDateFormat||e._f;var g=e.getForm();return e._c=new dhtmlXCalendarObject(e.childNodes[e._ll?1:0].childNodes[0],h.skin||g.skin||"dhx_skyblue"),e._c._nullInInput=!0,e._c.enableListener(e.childNodes[e._ll?1:0].childNodes[0]),null!=e._f&&e._c.setDateFormat(e._f),window.dhx4.s2b(h.enableTime)||e._c.hideTime(),window.dhx4.s2b(h.enableTodayButton)&&e._c.showToday(),window.dhx4.s2b(h.showWeekNumbers)&&e._c.showWeekNumbers(),isNaN(h.weekStart)||e._c.setWeekStartDay(h.weekStart),void 0!==h.calendarPosition&&e._c.setPosition(h.calendarPosition),null!=h.minutesInterval&&e._c.setMinutesInterval(h.minutesInterval),e._c._itemIdd=e._idd,e._c.attachEvent("onBeforeChange",function(m){if(e._value!=m){if(e.checkEvent("onBeforeChange")&&!0!==e.callEvent("onBeforeChange",[e._idd,e._value,m]))return!1;e._tempValue=e._value=m,c.setValue(e,m,!1),e.callEvent("onChange",[this._itemIdd,e._value])}return!0}),e._c.attachEvent("onClick",function(){e._tempValue=null}),e._c.attachEvent("onHide",function(){e._tempValue=null}),a&&(e._c.base.onmousedown=function(){return!(this._formMouseDown=!0)}),this.setValue(e,h.value),g=null,this},getCalendar:function(a){return a._c},setSkin:function(a,c){a._c.setSkin(c)},setValue:function(c,e,a){e&&null!=e&&void 0!==e&&""!=e?(c._value=e instanceof Date?e:c._c._strToDate(e,c._f0||c._c._dateFormat),c.childNodes[c._ll?1:0].childNodes[0].value=c._c._dateToStr(c._value,c._f||c._c._dateFormat)):(c._value=null,c.childNodes[c._ll?1:0].childNodes[0].value=""),!1!==a&&c._c.setDate(c._value)},getValue:function(c,a){var e=c._tempValue||c._c.getDate();return!0===a&&null==e?"":!0===a?c._c._dateToStr(e,c._f0||c._c._dateFormat):e},setDateFormat:function(c,a,e){c._f=a,c._f0=e||c._f,c._c.setDateFormat(c._f),this.setValue(c,this.getValue(c))},destruct:function(a){a._c.disableListener(a.childNodes[a._ll?1:0].childNodes[0]),a._c.unload(),a._c=null;try{delete a._c}catch(c){}a._f=null;try{delete a._f}catch(c){}a._f0=null;try{delete a._f0}catch(c){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null,a.childNodes[a._ll?1:0].childNodes[0].onblur=null,this.d2(a),a=null},checkEnteredValue:function(a){this.setValue(a,a._c.getDate())}},function(){for(var c in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.calendar[c]=dhtmlXForm.prototype.items.input[c]}(),dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS,dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct,dhtmlXForm.prototype.getCalendar=function(a){return this.doWithItem(a,"getCalendar")},dhtmlXForm.prototype.setCalendarDateFormat=function(c,a,e){this.doWithItem(c,"setDateFormat",a,e)},dhtmlXForm.prototype.items.btn2state={setChecked:function(a,c){a._checked=!0===c,a.childNodes[a._ll?1:0].lastChild.className="dhxform_img "+a._cssName+"_"+(a._checked?"1":"0"),this.doCheckValue(a)}},function(){for(var c in dhtmlXForm.prototype.items.checkbox)dhtmlXForm.prototype.items.btn2state[c]||(dhtmlXForm.prototype.items.btn2state[c]=dhtmlXForm.prototype.items.checkbox[c])}(),dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render,dhtmlXForm.prototype.items.btn2state.render=function(a,c){return c._autoInputWidth=!1,this.render2(a,c),a._type="btn2state",a._cssName=void 0===c.cssName?"btn2state":c.cssName,a._updateImgNode=function(){},a._doOnFocus=function(){a.getForm().callEvent("onFocus",[a._idd])},a._doOnBlur=function(){a.getForm().callEvent("onBlur",[a._idd])},a._doOnKeyUpDown=function(g,e,h){this.callEvent(g,[this.childNodes[this._ll?0:1].childNodes[0],e,this._idd])},this.setChecked(a,a._checked),this},dhtmlXForm.prototype.setFormData_btn2state=function(a,c){this[1==c||1==parseInt(c)||"true"==c||c==this.getItemValue(a)?"checkItem":"uncheckItem"](a)},dhtmlXForm.prototype.getFormData_btn2state=function(a){return this.isItemChecked(a)?this.getItemValue(a):0},dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(e,g){var c=this;e._type="colorpicker",e._enabled=!0,this.doAddLabel(e,g),this.doAddInput(e,g,"INPUT","TEXT",!0,!0,"dhxform_textarea"),e._value=g.value||"",e.childNodes[e._ll?1:0].childNodes[0].value=e._value;var a={input:e.childNodes[e._ll?1:0].childNodes[0],custom_colors:1==window.dhx4.s2b(g.enableCustomColors),skin:e.getForm().skin};return this.colorpicker[e._idd]=new dhtmlXColorPicker(a),this.colorpicker[e._idd]._nodes[0].valueColor=null,this.colorpicker[e._idd].base.className+=" dhtmlxcp_in_form",void 0!==g.customColors&&this.colorpicker[e._idd].setCustomColors(g.customColors),"string"==typeof g.cpPosition&&this.colorpicker[e._idd].setPosition(g.cpPosition),this.colorpicker[e._idd].attachEvent("onSelect",function(h){if(e._value!=h){if(e.checkEvent("onBeforeChange")&&!0!==e.callEvent("onBeforeChange",[e._idd,e._value,h]))return void(e.childNodes[e._ll?1:0].childNodes[0].value=e._value);e._value=h,c.setValue(e,h),e.callEvent("onChange",[e._idd,e._value])}}),this.colorpicker[e._idd].attachEvent("onHide",function(h){var l=e.childNodes[e._ll?1:0].childNodes[0];l.value!=e._value&&(l.value=e._value),l=null}),e.childNodes[e._ll?1:0].childNodes[0]._idd=e._idd,this},getColorPicker:function(a){return this.colorpicker[a._idd]},destruct:function(a){this.colorpicker[a._idd].unload&&this.colorpicker[a._idd].unload(),this.colorpicker[a._idd]=null;try{delete this.colorpicker[a._idd]}catch(c){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null,this.d2(a),a=null},setSkin:function(a,c){this.colorpicker[a._idd].setSkin(c)}},function(){for(var c in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.colorpicker[c]=dhtmlXForm.prototype.items.input[c]}(),dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct,dhtmlXForm.prototype.getColorPicker=function(a){return this.doWithItem(a,"getColorPicker")},dhtmlXForm.prototype.items.container={render:function(a,c){return a._type="container",a._enabled=!0,this.doAddLabel(a,c),this.doAddInput(a,c,"DIV",null,!0,!0,"dhxform_container"),this},getContainer:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},enable:function(a){a._enabled=!0,0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,"")),a.callEvent("onEnable",[a._idd])},disable:function(a){a._enabled=!1,String(a.className).search("disabled")<0&&(a.className+=" disabled"),a.callEvent("onDisable",[a._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}},dhtmlXForm.prototype.getContainer=function(a){return this.doWithItem(a,"getContainer")},function(){for(var c in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.container[c]||(dhtmlXForm.prototype.items.container[c]=dhtmlXForm.prototype.items.input[c])}(),dhtmlXForm.prototype.items.editor={editor:{},render:function(e,g){isNaN(g.rows);e._type="editor",e._enabled=!0,e._editor_id=e.getForm().idPrefix+e._idd,this.doAddLabel(e,g),this.doAddInput(e,g,"DIV",null,!0,!0,"dhxform_item_template"),e._value=g.value||"";var c=this;return this.editor[e._editor_id]=new dhtmlXEditor({parent:e.childNodes[e._ll?1:0].childNodes[0],content:e._value,iconsPath:g.iconsPath,toolbar:g.toolbar,skin:e.getForm().skin}),this.editor[e._editor_id].attachEvent("onAccess",function(l,m){var h;(e.callEvent("_onBeforeEditorAccess",[]),_dhxForm_doClick(document.body,"click"),"blur"==l)?(c.doOnBlur(e,this),e.callEvent("onBlur",[e._idd]),1=={dhx_terrace:1,material:1}[e.getForm().skin]&&0<=(h=e.childNodes[e._ll?1:0].className).indexOf("dhxeditor_focus")&&(e.childNodes[e._ll?1:0].className=h.replace(/\s{0,}dhxeditor_focus/gi,""))):(e.callEvent("onEditorAccess",[e._idd,l,m,this,e.getForm()]),e.callEvent("onFocus",[e._idd]),1=={dhx_terrace:1,material:1}[e.getForm().skin]&&-1==(h=e.childNodes[e._ll?1:0].className).indexOf("dhxeditor_focus")&&(e.childNodes[e._ll?1:0].className+=" dhxeditor_focus"))}),this.editor[e._editor_id].attachEvent("onToolbarClick",function(h){e.callEvent("onEditorToolbarClick",[e._idd,h,this,e.getForm()])}),g.readonly&&this.setReadonly(e,!0),e.childNodes[e._ll?0:1].childNodes[0].removeAttribute("for"),e.childNodes[e._ll?0:1].childNodes[0].onclick=function(){c.editor[e._editor_id]._focus()},this},doOnBlur:function(e,c){var a=c.getContent();if(e._value!=a){if(e.checkEvent("onBeforeChange")&&!0!==e.callEvent("onBeforeChange",[e._idd,e._value,a]))return void c.setContent(e._value);e._value=a,e.callEvent("onChange",[e._idd,a])}},setValue:function(a,c){a._value!=c&&(a._value=c,this.editor[a._editor_id].setContent(a._value))},getValue:function(a){return a._value=this.editor[a._editor_id].getContent(),a._value},enable:function(a){1!=this.isEnabled(a)&&(this.editor[a._editor_id].setReadonly(!1),this.doEn(a))},disable:function(a){1==this.isEnabled(a)&&(this.editor[a._editor_id].setReadonly(!0),this.doDis(a))},setReadonly:function(a,c){this.editor[a._editor_id].setReadonly(c)},getEditor:function(a){return this.editor[a._editor_id]||null},destruct:function(a){a.childNodes[a._ll?0:1].childNodes[0].onclick=null,this.editor[a._editor_id].unload(),this.editor[a._editor_id]=null,this.d2(a),a=null},setFocus:function(a){this.editor[a._editor_id]._focus()}},function(){for(var c in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1})dhtmlXForm.prototype.items.editor[c]=dhtmlXForm.prototype.items.template[c]}(),dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct,dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable,dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable,dhtmlXForm.prototype.getEditor=function(a){return this.doWithItem(a,"getEditor")},dhtmlXForm.prototype.items.image={_dimFix:!0,render:function(l,m){l._type="image",l._enabled=!0,l._fr_name="dhxform_image_"+window.dhx4.newId(),l._url=void 0===m.url||null==m.url?"":m.url,"auto"==m.inputWidth&&(m.inputWidth=120),"auto"==m.inputHeight&&(m.inputHeight=m.inputWidth),this.doAddLabel(l,m),this.doAddInput(l,m,"DIV",null,!0,!0,"dhxform_image");var c=l.childNodes[l._ll?1:0].childNodes[0];c.style.height=parseInt(c.style.height)-dhtmlXForm.prototype.items[this.t]._dim+"px";var a=void 0!==m.imageWidth?parseInt(m.imageWidth):m.inputWidth,e=void 0!==m.imageHeight?parseInt(m.imageHeight):m.inputHeight;"auto"==e&&(e=a),l._dim={mw:m.inputWidth-this._dim,mh:m.inputHeight-this._dim,w:a,h:e},c.innerHTML="<img class='dhxform_image_img' border='0' style='visibility:hidden;'><iframe name='"+l._fr_name+"' style='position: absolute; width:0px; height:0px; top:-10px; left:-10px;' frameBorder='0' border='0'></iframe><div class='dhxform_image_wrap'><form action='"+l._url+"' method='POST' enctype='multipart/form-data' target='"+l._fr_name+"' class='dhxform_image_form'><input type='hidden' name='action' value='uploadImage'><input type='hidden' name='itemId' value='"+l._idd+"'><input type='file' name='file' class='dhxform_image_input'></form>",this.adjustImage(l),c.childNodes[2].firstChild.lastChild.onchange=function(){l._is_uploading=!0,this.parentNode.submit(),this.parentNode.parentNode.className="dhxform_image_wrap dhxform_image_in_progress",this.value=""};var g=this;return 0<=window.navigator.userAgent.indexOf("MSIE")?c.childNodes[1].onreadystatechange=function(){"complete"==this.readyState&&g.doOnUpload(l)}:c.childNodes[1].onload=function(){g.doOnUpload(l)},this._moreClear=function(){g=null},this.setValue(l,m.value||""),c=null,this},destruct:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];a.childNodes[2].firstChild.lastChild.onchange=null,a.childNodes[1].onreadystatechange=null,a.childNodes[1].onload=null,this._moreClear(),this.d2(c),c=null},doAttachEvents:function(){},setValue:function(e,h){e._value=null==h?"":h;var c=e._url+(0<=e._url.indexOf("?")?"&":"?")+"action=loadImage&itemId="+encodeURIComponent(e._idd)+"&itemValue="+encodeURIComponent(e._value)+window.dhx4.ajax._dhxr("&"),g=e.childNodes[e._ll?1:0].childNodes[0].firstChild;if("img"==g.nextSibling.tagName.toLowerCase())g.nextSibling.src=c;else{var a=document.createElement("IMG");a.className="dhxform_image_img",a.style.visibility="hidden",a.onload=function(){this.style.visibility="visible",this.parentNode.removeChild(this.nextSibling),this.onload=this.onerror=null},a.onerror=function(){this.onload.apply(this,arguments),this.style.visibility="hidden"},g.parentNode.insertBefore(a,g),a.src=c,a=null,this.adjustImage(e)}g=null},getValue:function(a){return a._value},doOnUpload:function(e){if(1==e._is_uploading){var a=e.childNodes[e._ll?1:0].childNodes[0].lastChild.previousSibling,c=dhx4.s2j(a.contentWindow.document.body.innerHTML);"object"==typeof c&&null!=c&&1==c.state&&c.itemId==e._idd?(this.setValue(e,c.itemValue,!0),e.getForm().callEvent("onImageUploadSuccess",[c.itemId,c.itemVaule,c.extra])):e.getForm().callEvent("onImageUploadFail",[e._idd,c?c.extra:null]),c=a=null,window.setTimeout(function(){e.childNodes[e._ll?1:0].childNodes[0].lastChild.className="dhxform_image_wrap",e._is_uploading=!1},50)}},adjustImage:function(g){var c=g.childNodes[g._ll?1:0].childNodes[0].firstChild,a=Math.min(g._dim.mw,g._dim.w),e=Math.min(g._dim.mh,g._dim.h);c.style.width=a+"px",c.style.height=e+"px",c.style.marginLeft=Math.max(0,Math.round(g._dim.mw/2-a/2))+"px",c.style.marginTop=Math.max(0,Math.round(g._dim.mh/2-e/2))+"px",c=g=null}},function(){for(var c in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.image[c]||(dhtmlXForm.prototype.items.image[c]=dhtmlXForm.prototype.items.input[c])}(),dhtmlXForm.prototype.items.image.d2=dhtmlXForm.prototype.items.input.destruct,dhtmlXForm.prototype.setFormData_image=function(a,c){this.setItemValue(a,c)},dhtmlXForm.prototype.getFormData_image=function(a){return this.getItemValue(a)},dhtmlXForm.prototype.items.upload={render:function(c,e){c._type="up",c._enabled=!0,c._checked=!0,c.className=e.position+("string"==typeof e.className?" "+e.className:"");var a=document.createElement("DIV");return c.appendChild(a),isNaN(e.inputLeft)||(c.style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(c.style.top=parseInt(e.inputTop)+"px"),"auto"!=e.inputWidth&&(isNaN(e.inputWidth)||(a.style.width=parseInt(e.inputWidth)+"px")),c._uploader=new dhtmlXFileUploader(a,e.swfPath||"",e.swfUrl||"",e.mode||null,e.swfLogs,e.slXap||"",e.slUrl||"",e.slLogs||"",e.multiple),c._uploader.setURL(e.url||""),c._uploader.callEvent=c.callEvent,void 0!==e.autoStart&&c._uploader.setAutoStart(e.autoStart),void 0!==e.autoRemove&&c._uploader.setAutoRemove(e.autoRemove),void 0!==e.titleScreen&&c._uploader.enableTitleScreen(e.titleScreen),void 0!==e.titleText&&c._uploader.setTitleText(e.titleText),1==e.hidden&&this.hide(c),1==e.disabled&&this.userDisable(c),"auto"!=e.inputHeight&&NaN!=parseInt(e.inputHeight)&&(c._uploader.p_files.style.height=parseInt(e.inputHeight)+"px"),this},destruct:function(a){for(this.doUnloadNestedLists(a),a._uploader.callEvent=function(){return!0},a._uploader.unload(),a._uploader.callEvent=null,a._uploader=null,a._checked=null,a._enabled=null,a._idd=null,a._type=null,a.onselectstart=null,a._autoCheck=null,a.callEvent=null,a.checkEvent=null,a.getForm=null;0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a),a=null},setText:function(a,c){},getText:function(a){},enable:function(a){a._enabled=!0,0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,"")),a._uploader.enable()},disable:function(a){a._enabled=!1,String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._uploader.disable()},setWidth:function(c,a){c.childNodes[0].style.width=a+"px",c._width=a},getWidth:function(a){return a._width||parseInt(a.childNodes[0].style.width)},setValue:function(a){a._uploader.clear()},getValue:function(l){var g=l._uploader.getData(),h={},e=0;for(var c in g)h[l._idd+"_r_"+e]=g[c].realName,h[l._idd+"_s_"+e]=g[c].serverName,e++;return h[l._idd+"_count"]=e,h},getUploader:function(a){return a._uploader},getStatus:function(a){return a._uploader.getStatus()}},function(){for(var c in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.upload[c]=dhtmlXForm.prototype.items.checkbox[c]}(),dhtmlXForm.prototype.setFormData_upload=function(a){this.doWithItem(a,"setValue")},dhtmlXForm.prototype.getUploader=function(a){return this.doWithItem(a,"getUploader")},dhtmlXForm.prototype.getUploaderStatus=function(a){return this.doWithItem(a,"getStatus")},dhtmlXFileUploader.prototype.html5=function(){},dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var c=this;this.buttons.browse.onclick=function(){c._enabled&&c.f.click()},this._progress_type="percentage";var a=window.navigator.userAgent;null!=a.match(/Windows/gi)&&null!=a.match(/AppleWebKit/gi)&&null!=a.match(/Safari/gi)&&(a.match(/Version\/5\.1\.5/gi)&&(this._upload_mp=!1),a.match(/Version\/5\.1[^\.\d{1,}]/gi)&&(this._upload_dnd=!1),a.match(/Version\/5\.1\.1/gi)&&(this._upload_mp=!1,this._upload_dnd=!1),a.match(/Version\/5\.1\.2/gi)&&(this._upload_dnd=!1),a.match(/Version\/5\.1\.7/gi)&&(this._upload_mp=!1)),this._addFileInput(),this._upload_dnd?(this.p.ondragenter=function(g){g.dataTransfer&&(g.stopPropagation(),g.preventDefault())},this.p.ondragover=function(g){g.dataTransfer&&(g.stopPropagation(),g.preventDefault())},this.p.ondrop=function(g){g.dataTransfer&&(g.stopPropagation(),g.preventDefault(),c._enabled&&c._parseFilesInInput(g.dataTransfer.files))},this._titleText="Drag-n-Drop files here or<br>click to select files for upload."):this._titleText="Click to select files for upload."},_addFileInput:function(){null!=this.f&&(this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null);var a=this;this.f=document.createElement("INPUT"),this.f.type="file",this._upload_mp&&(this.f.multiple="1"),this.f.className="dhx_uploader_input",this.p_controls.appendChild(this.f),this.f.onchange=function(){a._parseFilesInInput(this.files),window.dhx4.isOpera?a._addFileInput():this.value=""}},_doUploadFile:function(e){var c=this;this._loader||(this._loader=new XMLHttpRequest,this._loader.upload.onprogress=function(g){"uploading"==c._files[this._idd].state&&c._updateFileInList(this._idd,"uploading",Math.round(100*g.loaded/g.total))},this._loader.onload=function(h){var g=dhx4.s2j(this.responseText);"object"==typeof g&&null!=g&&void 0!==g.state&&1==g.state?(c._onUploadSuccess(this.upload._idd,g.name,null,g.extra),g=null):c._onUploadFail(this.upload._idd,null!=g&&null!=g.extra?g.extra:null)},this._loader.onerror=function(g){c._onUploadFail(this.upload._idd)},this._loader.onabort=function(g){c._onUploadAbort(this.upload._idd)}),this._loader.upload._idd=e;var a=new FormData;a.append("file",this._files[e].file),this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5"+window.dhx4.ajax._dhxr("&"),!0),this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest"),this._loader.send(a)},_uploadStop:function(){this._uploading&&this._loader&&this._loader.abort()},_parseFilesInInput:function(c){for(var a=0;a<c.length;a++)this._addFileToQueue(c[a])},_addFileToQueue:function(a){if(this._beforeAddFileToList(a.name,a.size)){var c=a._idd||window.dhx4.newId();this._files[c]={file:a,name:a.name,size:a.size,state:"added"},this._addFileToList(c,a.name,a.size,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)}},_removeFileFromQueue:function(g){if(this._files[g]){var c=this._files[g].name,e=null!=this._data&&null!=this._data[g]?this._data[g].serverName:null;if(!0===this.callEvent("onBeforeFileRemove",[c,e])){var a=!1;this._uploading&&g==this._loader.upload._idd&&"uploading"==this._files[g].state&&(this._uploadStop(),a=!0),this._files[g].file=null,this._files[g].name=null,this._files[g].size=null,this._files[g].state=null,this._files[g]=null,delete this._files[g],this._removeFileFromList(g),this.callEvent("onFileRemove",[c,e]),a&&this._uploadStart()}}},_unloadEngine:function(){this.buttons.browse.onclick=null,this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null,this.p.ondragenter=null,this.p.ondragover=null,this.p.ondrop=null,this._loader&&(this._loader.upload.onprogress=null,this._loader.onload=null,this._loader.onerror=null,this._loader.onabort=null,this._loader.upload._idd=null,this._loader=null),this._initEngine=null,this._doUploadFile=null,this._uploadStop=null,this._parseFilesInInput=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.html4=function(){},dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm(),this._progress_type="loader",this._titleText="Click button<br>to select files for upload."},_addForm:function(){var a=this,e=window.dhx4.newId();this.k||(this.k=document.createElement("DIV"),this.k.className="dhx_file_form_cont",this.buttons.browse.appendChild(this.k),this.fr_name="dhx_file_"+window.dhx4.newId(),this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>',this.fr=this.k.firstChild,0<=window.navigator.userAgent.indexOf("MSIE")?this.fr.onreadystatechange=function(){"complete"==this.readyState&&a._onLoad()}:this.fr.onload=function(){a._onLoad()});var c=document.createElement("DIV");c.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+e+"'><input type='file' name='file' class='dhx_file_input'></form>",this.k.appendChild(c),c.firstChild.lastChild._idd=e,c.firstChild.lastChild.onchange=function(){a._beforeAddFileToList(this.value,null)&&(a._addFileToQueue(this),this.onchange=null,this.parentNode.parentNode.style.display="none",a._addForm())},c=null},_onLoad:function(){if(this._uploading){var a=dhx4.s2j(this.fr.contentWindow.document.body.innerHTML);if("object"==typeof a&&null!=a&&void 0!==a.state){if("cancelled"==a.state)return this._onUploadAbort(this.fr._idd),void(a=null);if(1==a.state)return void 0===a.size||isNaN(a.size)||(this._files[this.fr._idd].size=a.size),this._onUploadSuccess(this.fr._idd,a.name,null,a.extra),void(a=null)}this._onUploadFail(this.fr._idd,null!=a&&null!=a.extra?a.extra:null)}},_addFileToQueue:function(c){var a=c.value.match(/[^\\\/]*$/g);a=null!=a[0]?a[0]:c.value,this._files[c._idd]={name:a,form:c.parentNode,node:c.parentNode.parentNode,input:c,state:"added"},this._addFileToList(c._idd,c.value,!1,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(e){var a=this._files[e].name,c=null!=this._data&&null!=this._data[e]?this._data[e].serverName:null;!0===this.callEvent("onBeforeFileRemove",[a,c])&&(this._files[e].input.onchange=null,this._files[e].form.removeChild(this._files[e].input),this._files[e].node.removeChild(this._files[e].form),this._files[e].node.parentNode.removeChild(this._files[e].node),this._files[e].input=null,this._files[e].name=null,this._files[e].form=null,this._files[e].node=null,this._files[e].size=null,this._files[e].state=null,this._files[e]=null,delete this._files[e],this._removeFileFromList(e),this.callEvent("onFileRemove",[a,c]))},_doUploadFile:function(a){this.fr._idd=a,this._files[a].form.action=this._url,this._files[a].form.submit()},_uploadStop:function(){this._uploading&&(this.fr.contentWindow.location.href=this._url+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel"+window.dhx4.ajax._dhxr("&"))},_unloadEngine:function(){this.k&&(this.fr_name=null,this.fr.onreadystatechange=null,this.fr.onload=null,this.fr.parentNode.removeChild(this.fr),this.fr=null,this.k.firstChild.firstChild.lastChild.onchange=null,this.k.parentNode.removeChild(this.k),this.k=null),this._initEngine=null,this._addForm=null,this._onLoad=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.flash=function(){},dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){null==window.dhtmlXSWFObjectsPull&&(window.dhtmlXSWFObjectsPull={items:{},callEvent:function(h,e,g){return window.dhtmlXSWFObjectsPull.items[h].uploader[e].apply(window.dhtmlXSWFObjectsPull.items[h].uploader,g)}});this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId(),this._swf_file_url=this._swf_file_url+window.dhx4.ajax._dhxr(this._swf_file_url),this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>",swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var a=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+a.major+"."+a.minor+"."+a.release,this._progress_type="percentage",window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(a,c){return!0===this.callEvent("onBeforeFileAdd",[a,c])},_addFileToQueue:function(g,c,e){if(window.dhx4.isIE){var a=document.createElement("INPUT");a.type="TEXT",a.style.position="absolute",a.style.left="0px",a.style.top=window.dhx4.absTop(this.buttons.browse)+"px",a.style.width="10px",document.body.appendChild(a),a.focus(),document.body.removeChild(a),a=null}this._files[g]={name:c,size:e,state:"added"},this._addFileToList(g,c,e,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(g){if(this._files[g]){var c=this._files[g].name,e=null!=this._data&&null!=this._data[g]?this._data[g].serverName:null;if(!0===this.callEvent("onBeforeFileRemove",[c,e])){var a=!1;this._uploading&&"uploading"==this._files[g].state&&(this._uploadStop(),a=!0),swfobject.getObjectById(this._swf_obj_id).removeFileById(g),this._files[g].name=null,this._files[g].size=null,this._files[g].state=null,this._files[g]=null,delete this._files[g],this._removeFileFromList(g),this.callEvent("onFileRemove",[c,e]),a&&this._uploadStart()}}},_doUploadFile:function(a){swfobject.getObjectById(this._swf_obj_id).upload(a,this._swf_upolad_url)},_uploadStop:function(e){for(var c in this._files)"uploading"==this._files[c].state&&swfobject.getObjectById(this._swf_obj_id).uploadStop(c)},_unloadEngine:function(){window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]&&(window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].id=null,window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].uploader=null,window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]=null,delete window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]),this._swf_obj_id=null,this._initEngine=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.sl=function(){},dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){void 0===this._sl_v&&(this._sl_v=this.getSLVersion()),window.dhtmlXFileUploaderSLObjects||(window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(e,a,c){window.dhtmlXFileUploaderSLObjects.items[e].uploader[a].apply(window.dhtmlXFileUploaderSLObjects.items[e].uploader,c)}}),this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId(),0!=this._sl_v?(this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1],this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'):(this._titleText="Silverlight plugin not found<br>or version less than 4.0",this.buttons.browse.style.cursor="wait",this.buttons.browse.title=""),this._progress_type="percentage",window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(e,a,c){this._files[e]={name:a,size:c,state:"added"},this._addFileToList(e,a,c,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(c){if(this._files[c]){var a=!1;this._uploading&&"uploading"==this._files[c].state&&(this._uploadStop(),a=!0),document.getElementById([this._sl_obj_id]).Content.a.removeFileById(c),this._files[c].name=null,this._files[c].size=null,this._files[c].state=null,this._files[c]=null,delete this._files[c],this._removeFileFromList(c),a&&this._uploadStart()}},_doUploadFile:function(c){var a=this._sl_upload_url.split("?");a=null!=a[1]?"&"+a[1]:"",document.getElementById(this._sl_obj_id).Content.a.upload(c,this._sl_upload_url,a+"&mode=sl"+window.dhx4.ajax._dhxr("&"))},_uploadStop:function(e){for(var c in this._uploading=!1,this._files)"uploading"==this._files[c].state&&document.getElementById(this._sl_obj_id).Content.a.uploadStop(c)},_unloadEngine:function(){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]&&(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null,delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]),this._sl_obj_id=null,this._initEngine=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.setSLURL=function(a){this._sl_upload_url=a},dhtmlXFileUploader.prototype.getSLVersion=function(){var a=!1;if(window.dhx4.isIE)try{var c=new ActiveXObject("AgControl.AgControl");if(null!=c)for(var l=4,h=0;c.isVersionSupported([l,h].join("."));)a=[l,h],9<++h&&(l++,h=0);c=null}catch(g){}else null!=navigator.plugins["Silverlight Plug-In"]&&(a=navigator.plugins["Silverlight Plug-In"].description.split("."));return a},dhtmlXForm.prototype.saveBackup=function(){return this._backup||(this._backup={},this._backupId=(new Date).getTime()),this._backup[++this._backupId]=this.getFormData(),this._backupId},dhtmlXForm.prototype.restoreBackup=function(a){null!=this._backup&&null!=this._backup[a]&&this.setFormData(this._backup[a])},dhtmlXForm.prototype.clearBackup=function(a){null!=this._backup&&null!=this._backup[a]&&(this._backup[a]=null,delete this._backup[a])},dhtmlXForm.prototype.addItem=function(e,a,l,g){var c=null;e instanceof Array&&(c=e[1],e=e[0]);var h=null;if(null!=e&&null!=(h=this._getParentForm(e,c)))return null==h.item._list?(a.listParent||(a.listParent=h.item._idd),h.form._addItem("list",h.item._idd,[a],null,h.item._idd,l,g)):h.item._list[0].addItem(null,a,l,g),h.form=h.item=null,h=null,void this._autoCheck();this._prepareItem(a,l,g),this._autoCheck()},dhtmlXForm.prototype.removeItem=function(c,a){this._removeItem(c,a)},dhtmlXForm.prototype.removeColumn=function(m,l,g,e){var o=null;if(m instanceof Array&&(o=m[1],m=m[0]),null==m)if(l=Math.min(Math.max(l,0),this.cont.childNodes.length-1),1==this.cont.childNodes.length)1==g&&this._removeItemsInColumn(this.cont.childNodes[l]);else{if(1==g)this._removeItemsInColumn(this.cont.childNodes[l]);else{var a;if(e)(a=l+1)>this.cont.childNodes.length-1&&(a=l-1);else(a=l-1)<0&&(a=l+1);for(;0<this.cont.childNodes[l].childNodes.length;)this.cont.childNodes[a].appendChild(this.cont.childNodes[l].childNodes[0])}for(var n=[],c=0;c<this.base.length;c++)this.cont.childNodes[l]!=this.base[c]&&n.push(this.base[c]);this.base=n,this.cont.removeChild(this.cont.childNodes[l]),this.b_index--,n=null}else{var h=this._getParentForm(m,o);null!=h&&(null!=h.item._list&&null!=h.item._list[0]&&h.item._list[0].removeColumn(null,l,g,e),h.form=h.item=null,h=null)}},dhtmlXForm.prototype.getColumnNode=function(e,c){var g=null,a=null;if(e instanceof Array&&(a=e[1],e=e[0]),null!=e){var h=this._getParentForm(e,a);return null!=h&&(null!=h.item._list&&null!=h.item._list[0]&&null==g&&(g=h.item._list[0].getColumnNode(null,c)),h.form=h.item=null,h=null),g}return c<0||c>this.cont.childNodes.length-1?null:this.cont.childNodes[c]},dhtmlXForm.prototype._removeItemsInColumn=function(g){for(var a=[],e=0;e<g.childNodes.length;e++){var c=g.childNodes[e];null!=c._idd&&null!=c._type&&a.push([c._idd,"ra"==c._type?c._value:null]),c=null}for(e=0;e<a.length;e++)this.removeItem(a[e][0],a[e][1])},dhtmlXForm.prototype._getParentForm=function(l,h){if(null!=this.itemPull[this.idPrefix+l])return{form:this,item:this.itemPull[this.idPrefix+l]};for(var c in this.itemPull)if("ra"==this.itemPull[c]._type&&this.itemPull[c]._group==l&&this.itemPull[c]._value==h)return{form:this,item:this.itemPull[c]};var g=null;for(var c in this.itemPull)if(!g&&null!=this.itemPull[c]._list)for(var e=0;e<this.itemPull[c]._list.length;e++)g||(g=this.itemPull[c]._list[e]._getParentForm(l,h));return g},function(){for(var c in dhtmlXForm.prototype.items)dhtmlXForm.prototype.items[c]._getItemNode||(dhtmlXForm.prototype.items[c]._getItemNode=function(a){return a})}(),dhtmlXForm.prototype._getItemNode=function(c,a){return null!=a&&(c=[c,a]),this.doWithItem(c,"_getItemNode")},dhtmlXForm.prototype.setRequired=function(n,l,h){void 0===h?h=l:n=[n,l];var e=this._getItemNode(n);if(e){if(h=window.dhx4.s2b(h),e._required=1==h,e._required){e._validate||(e._validate=[]);for(var c=!1,g=0;g<e._validate.length;g++)c="NotEmpty"==e._validate[g]||c;if(c||e._validate.push("NotEmpty"),!((m=e.childNodes[e._ll?0:1].childNodes[0]).lastChild&&m.lastChild.className&&0<=m.lastChild.className.search(/required/))){var a=document.createElement("SPAN");a.className="dhxform_item_required",a.innerHTML="*",m.appendChild(a),a=m=null}}else{if(null!=e._validate){c=e._validate;e._validate=[];for(g=0;g<c.length;g++)"NotEmpty"!=c[g]&&e._validate.push(c[g]);0==e._validate.length&&(e._validate=null)}var m;(m=e.childNodes[e._ll?0:1].childNodes[0]).lastChild&&m.lastChild.className&&0<=m.lastChild.className.search(/required/)&&(m.removeChild(m.lastChild),m=null)}this._resetValidateCss(e),e=null}},dhtmlXForm.prototype.setNote=function(h,e,a){void 0===a?a=e:h=[h,e];var c=this._getItemNode(h);if(c){var g=this._getNoteNode(c);g||(a.width||(a.width=c.childNodes[c._ll?1:0].childNodes[0].offsetWidth),(g=document.createElement("DIV")).className="dhxform_note",!{ch:1,ra:1}[c._type]?c.childNodes[c._ll?1:0].appendChild(g):c.childNodes[c._ll?1:0].insertBefore(g,c.childNodes[c._ll?1:0].lastChild)),g.innerHTML=a.text,null!=a.width&&(g.style.width=a.width+"px",g._w=a.width),g=null}},dhtmlXForm.prototype.clearNote=function(g,c){void 0!==c&&(g=[g,c]);var a=this._getItemNode(g);if(a){var e=this._getNoteNode(a);null!=e&&(e.parentNode.removeChild(e),e=null)}},dhtmlXForm.prototype._getNoteNode=function(a){for(var e=null,c=0;c<a.childNodes[a._ll?1:0].childNodes.length;c++)0<=String(a.childNodes[a._ll?1:0].childNodes[c].className).search(/dhxform_note/)&&(e=a.childNodes[a._ll?1:0].childNodes[c]);return a=null,e},dhtmlXForm.prototype.setValidation=function(l,g,h){"undefined"==typeof note?h=g:l=[l,g];var c=this._getItemNode(l);if(c){if(null!=c._validate)for(var e=0;e<c._validate.length;e++)c._validate[e]=null;if(c._validate=[],"function"==typeof h||"function"==typeof window[h]?c._validate=[h]:c._validate=String(h).split(this.separator),c._required){var a=!1;for(e=0;e<c._validate.length;e++)a="NotEmpty"==c._validate[e]||a;a||c._validate.push("NotEmpty")}c=null}},dhtmlXForm.prototype.clearValidation=function(g,e){void 0!==e&&(g=[g,e]);var a=this._getItemNode(g);if(a){if(null!=a._validate)for(var c=0;c<a._validate.length;c++)a._validate[c]=null;a._validate=a._required?["NotEmpty"]:null,a=null}},dhtmlXForm.prototype.reloadOptions=function(a,l){var c=this.getItemType(a);if({select:1,multiselect:1,combo:1}[c]){if("select"==c||"multiselect"==c){for(var g=this.getOptions(a);0<g.length;)g.remove(0);g.length=0,g=null,"string"==typeof l?this.doWithItem(a,"doLoadOptsConnector",l):l instanceof Array&&this.doWithItem(a,"doLoadOpts",{options:l})}if("combo"==c){var m=this.getCombo(a);if(m.clearAll(),m.setComboValue(""),"string"==typeof l)this.doWithItem(a,"doLoadOptsConnector",l);else if(l instanceof Array){for(var e=null,h=0;h<l.length;h++)window.dhx4.s2b(l[h].selected)&&(e=l[h].value);m.addOption(l),null!=e&&this.setItemValue(a,e),m=null}}}},dhtmlXForm.prototype.setTooltip=function(l,h,g){void 0===g?g=h:l=[l,h];var c=this._getItemNode(l);if(c){var a=null;if(1==c.childNodes.length)a=c.childNodes[0];else for(var e=0;e<c.childNodes.length;e++)null!=c.childNodes[e].className&&0<=c.childNodes[e].className.search("dhxform_label")&&(a=c.childNodes[e]);null!=a&&(null==g||0==g.length?a.removeAttribute("title"):a.title=g),a=null}},dhtmlXAccordion.prototype=new dhtmlXCellTop,dhtmlXAccordion.prototype.setIconset=function(a){this.conf.icons_css="awesome"==a},dhtmlXAccordionCell.prototype=new dhtmlXCellObject,dhtmlXAccordionCell.prototype._initHeader=function(){var a=document.createElement("DIV");a.className="dhx_cell_hdr",a.innerHTML="<div class='dhx_cell_hdr_text'></div><div class='dhx_cell_hdr_arrow'></div>",this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]),a=null,this.conf.ofs_nodes.t._getHdrHeight="func",this.conf.hdr={visible:!0},this.conf.idx_data.hdr="dhx_cell_hdr",this._updateIdx()},dhtmlXAccordionCell.prototype._getHdrHeight=function(){var a=this.cell.childNodes[this.conf.idx.hdr],c=a.offsetHeight||a.offsetHeight;return a=null,c},dhtmlXAccordionCell.prototype.showHeader=function(){1!=this.conf.hdr.visible&&(this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr",this._adjustCont(this._idd))},dhtmlXAccordionCell.prototype.hideHeader=function(){1==this.conf.hdr.visible&&(this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._adjustCont(this._idd))},dhtmlXAccordionCell.prototype.isHeaderVisible=function(){return 1==this.conf.hdr.visible},dhtmlXAccordionCell.prototype.setText=function(c){this.conf.text=c;var a=this.cell.childNodes[this.conf.idx.hdr];a.childNodes["dhx_cell_hdr_icon"==a.firstChild.className?1:0].innerHTML="<span>"+c+"</span>",a=null},dhtmlXAccordionCell.prototype.getText=function(){return this.conf.text},dhtmlXAccordionCell.prototype.setIcon=function(g){var e=this.cell.childNodes[this.conf.idx.hdr];if(1==this.acc.conf.icons_css){if("i"!=(e.firstChild.tagName||"").toLowerCase()){e.firstChild.className+=" dhx_cell_hdr_icon";var c=document.createElement("I");e.insertBefore(c,e.firstChild),c=null}e.firstChild.className=g}else{if("dhx_cell_hdr_icon"!=e.firstChild.className){e.firstChild.className+=" dhx_cell_hdr_icon";var a=document.createElement("IMG");a.className="dhx_cell_hdr_icon",e.insertBefore(a,e.firstChild),a=null}e.firstChild.src=this.acc.conf.icons_path+g}e=null},dhtmlXAccordionCell.prototype.clearIcon=function(){var a=this.cell.childNodes[this.conf.idx.hdr];"dhx_cell_hdr_icon"!=a.firstChild.className&&"i"!=(a.firstChild.tagName||"").toLowerCase()||(a.removeChild(a.firstChild),a.firstChild.className=String(a.firstChild.className).replace(/\s{1,}dhx_cell_hdr_icon/gi,"")),a=null},dhtmlXAccordionCell.prototype._open=function(c){var h={};if(this.acc.conf.multi_mode){var g={};g[this._idd]=!0,h=this.acc._getDynData(g),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="open"}else h[this._idd]=this.conf.size.h;for(var e in h){null!=this.acc._openCache&&(this.acc._openCache[e]=!0);var l=this.acc.t[e].cell;l.cell.className=String(l.cell.className).replace(/\s{1,}dhx_cell_closed/gi,""),l.conf.opened=!0,l._trInitEv("open",c),l.conf.size.h=h[e],l.cell.style.height=l.conf.size.h+"px",l=null}0==this.conf.tr.prop&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!0))},dhtmlXAccordionCell.prototype._close=function(c){var g={};if(this.acc.conf.multi_mode){var h={};h[this._idd]=!0,g=this.acc._getDynData(null,h),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="close"}else g[this._idd]=this._getHdrHeight();for(var e in g){var l=this.acc.t[e].cell;null!=this.acc._openCache&&(this.acc._openCache[e]=!0),e==this._idd?(l.cell.className+=" dhx_cell_closed",l.conf.opened=!1,l._trInitEv("close",c)):(l.conf.size.h=g[e],l._adjustCell(),l._trInitEv("open",c)),l.cell.style.height=g[e]+"px",l=null}0==this.conf.tr.prop&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!1))},dhtmlXAccordionCell.prototype.isOpened=function(){return 1==this.conf.opened},dhtmlXAccordionCell.prototype._trInitEv=function(c,a){0!=this.conf.tr.prop&&(this._trAttachEv(),this.cell._accObj||(this.cell._accObj=this.acc),a&&(this.cell.style[this.conf.tr.prop]=this.conf.tr["height_"+c]),this._cellSetOpacity(c,a))},dhtmlXAccordionCell.prototype._trAttachEv=function(){this.conf.tr.ev_attached||(this.cell._trProp=this.conf.tr.prop,this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!0)},dhtmlXAccordionCell.prototype._trDetachEv=function(){this.conf.tr.ev_attached&&(this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!1)},dhtmlXAccordionCell.prototype._trOnEnd=function(a){a.stopPropagation&&a.stopPropagation(),"height"==a.propertyName&&null!=this._accObj&&(this.style[this._trProp]="",this._accObj.conf.multi_mode&&(null!=this._accObj._openCache&&(this._accObj._openCache[this._accId]=!1),this._accObj._adjustOpened()),1==this._accObj.conf.on_active_click&&(this._accObj.conf.multi_mode?this._accObj._callMainEvent("onActive",[this._accId,this._accObj.t[this._accId].cell.conf.opened]):(null!=this._accObj.conf.on_active_id&&this._accObj._callMainEvent("onActive",[this._accObj.conf.on_active_id,!0]),this._accObj.conf.on_active_id=null),this._accObj.conf.on_active_click=!1),this._accObj=null)},dhtmlXAccordionCell.prototype._cellSetOpacity=function(g,c){for(var e in this.conf.idx)1!={hdr:!0,pr1:!0,pr2:!0,cover:!0}[e]&&(c&&(this.cell.childNodes[this.conf.idx[e]].style[this.conf.tr.prop]=this.conf.tr["op_"+g]),this.cell.childNodes[this.conf.idx[e]].style.opacity=this.conf.tr["op_v_"+g])},dhtmlXAccordionCell.prototype._onActiveCall=function(a){0!=this.acc.conf.on_active_click&&(1==this.acc.conf.multi_mode?(this.acc._callMainEvent("onActive",[this._idd,this.conf.opened]),this.acc.conf.on_active_click=!1):1==a&&(this.acc._callMainEvent("onActive",[this._idd,!0]),this.acc.conf.on_active_click=!1))},dhtmlXAccordionCell.prototype.show=function(){this.conf.visible||(0!=this.conf.docked?(this.cell.style.display="",this.conf.visible=!0,this.acc.conf.multi_mode||(this.acc.conf.hiden_count--,this.acc._updateCellsHeight(),this.acc._updateCellsMargin()),this.acc.conf.size_changed?(this.acc.setSizes(),this.acc.conf.size_changed=!1):this.acc._adjustOpened()):this.dock())},dhtmlXAccordionCell.prototype.hide=function(){this.conf.visible&&(!this.acc.conf.multi_mode&&this.conf.opened&&(this._close(!1),this.acc.conf.last_opened=null),this.cell.style.display="none",this.conf.visible=!1,this.acc.conf.multi_mode||(this.acc.conf.hiden_count++,this.acc._updateCellsHeight(),this.acc._updateCellsMargin()),this.acc._adjustOpened())},dhtmlXAccordionCell.prototype.isVisible=function(){return 1==this.conf.visible},dhtmlXAccordionCell.prototype.setHeight=function(a){this.acc.conf.multi_mode&&("*"==a?this.conf.h_auto=!0:(this.conf.h_auto=!1,this.conf.size.h=a),this.conf.opened&&("*"!=a&&(this.cell.style.height=a+"px"),this.acc._adjustOpened()))},dhtmlXAccordionCell.prototype.moveOnTop=function(){this.cell.parentNode.firstChild!=this.cell&&(this.cell.parentNode.insertBefore(this.cell,this.cell.parentNode.firstChild),this.acc._updateCellsMargin())},dhtmlXAccordionCell.prototype._initDocking=function(){var a=this;this.dock=function(){if(null!=this.acc.dhxWins&&1!=this.conf.docked){var c=this.acc.dhxWins.window(this._idd);c.close(),this._attachFromCell(c),this.conf.docked=!0,this.show(),this.conf.dock_opened&&this.open(),c=null,this.acc._callMainEvent("onDock",[this._idd])}},this.undock=function(c,m,g,l){if(null!=this.acc.dhxWins&&0!=this.conf.docked){var e;if(this.conf.dock_opened=this.conf.opened,null!=this.acc.dhxWins.window(this._idd))(e=this.acc.dhxWins.window(this._idd)).show();else null==c&&(c=20),null==m&&(m=20),null==g&&(g=320),null==l&&(l=200),(e=this.acc.dhxWins.createWindow(this._idd,c,m,g,l)).button("close").hide(),e.addUserButton("dock",99,"Dock"),e.button("dock").show(),e.button("dock").attachEvent("onClick",this._doOnDockClick),e.setText(this.getText()),e.attachEvent("onClose",this._doOnDockWinClose);this.conf.docked=!1,this.hide(),e._attachFromCell(this),e=null,this.acc._callMainEvent("onUnDock",[this._idd])}},this._doOnDockClick=function(){a.dock()},this._doOnDockWinClose=function(c){return c.hide(),!1},this._unloadDocking=function(){a=null}},dhtmlXCellObject.prototype.attachAccordion=function(a){this.callEvent("_onBeforeContentAttach",["acc"]);var c=document.createElement("DIV");return c.style.width="100%",c.style.height="100%",c.style.position="relative",this._attachObject(c),void 0===a&&(a={}),void 0===a.skin&&(a.skin=this.conf.skin),a.parent=c,"function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&("material"==this.conf.skin?c._ofs={t:-1,r:-1,b:-1,l:-1}:c._ofs={s:{first:-1},m:{first:4}}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&("dhx_skyblue"!=this.conf.skin&&"material"!=this.conf.skin||(c._ofs={t:-1,r:-1,b:-1,l:-1})),"function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&("dhx_web"==this.conf.skin?(c._ofs={},1!=this.sidebar.conf.autohide&&(c._ofs.l=2),1==this.sidebar.conf.header&&(c._ofs.t=3)):(c._ofs={l:-1},"dhx_terrace"==this.conf.skin&&(1==this.sidebar.conf.autohide&&(c._ofs.l=0),1==this.sidebar.conf.header&&(c._ofs.t=-1)))),"function"==typeof window.dhtmlXCarouselCell&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders(),this.dataType="acc",this.dataObj=new dhtmlXAccordion(a),a.parent=null,c=a=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXAccordion.prototype.enableDND=function(){if(0!=this.conf.multi_mode&&null==this._dnd){var e=this;for(var c in this._dnd={tr_count:0,tr_items:{}},this._dndAttachEvent=function(g){var a=this.t[g].cell;1!=a.conf.dnd_inited&&("function"==typeof window.addEventListener?a.cell.childNodes[a.conf.idx.hdr].addEventListener("mousedown",this._dndOnMouseDown,!1):a.cell.childNodes[a.conf.idx.hdr].attachEvent("onmousedown",this._dndOnMouseDown),a.conf.dnd_inited=!0),a=null},this._dndDetachEvent=function(g){var a=this.t[g].cell;1==a.conf.dnd_inited&&("function"==typeof window.addEventListener?a.cell.childNodes[a.conf.idx.hdr].removeEventListener("mousedown",this._dndOnMouseDown,!1):a.cell.childNodes[a.conf.idx.hdr].detachEvent("onmousedown",this._dndOnMouseDown),a.conf.dnd_inited=!1),a=null},this._dndOnMouseDown=function(g){(g=g||event).preventDefault&&g.preventDefault();for(var a=g.target||g.srcElement;null!=a&&a.parentNode!=e.cont;)a=a.parentNode;null!=a&&e._dndDragStart(g,a),a=null},this._dndDragStart=function(m,h){if(1!=this._dnd.tr_waiting){for(var a=-1,l=0;l<h.parentNode.childNodes.length;l++)h.parentNode.childNodes[l]==h&&(a=l);if(!0===this.callEvent("onBeforeDrag",[h._accId,a])){"function"==typeof window.addEventListener?(document.body.addEventListener("mousemove",this._dndOnMouseMove,!1),document.body.addEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.attachEvent("onmouseup",this._dndOnMouseUp,!1)),this._dnd.dragObj=h,this._dnd.dy=m.clientY;var g=0;for(l=0;l<this._dnd.dragObj.parentNode.childNodes.length;l++)this._dnd.dragObj.parentNode.childNodes[l]._ind=l,this._dnd.dragObj.parentNode.childNodes[l]==this._dnd.dragObj?(this._dnd.dragObj._k0=g,0<l&&(this._dnd.dragObj._k0+=this.ofs.m.between-this.ofs.m.first),g=0):g+=this._dnd.dragObj.parentNode.childNodes[l].offsetHeight+parseInt(this._dnd.dragObj.parentNode.childNodes[l].style.marginTop);this._dnd.dragObj._k1=g,this._dnd.h=this._dnd.dragObj.offsetHeight,this._dnd.ofs=!1}}},this._dndDoDrag=function(u){if(this._dnd.dragObj&&1!=this._dnd.tr_waiting){var m=u.clientY-this._dnd.dy;0==this._dnd.ofs&&5<Math.abs(m)&&(this._dnd.dragObj.className+=" acc_cell_dragged",this._dnd.ofs=!0),m<0?m<-this._dnd.dragObj._k0&&(m=-this._dnd.dragObj._k0):m>this._dnd.dragObj._k1&&(m=this._dnd.dragObj._k1),this._dnd.dragObj.style.top=m+"px";for(var o=u.clientY-this._dnd.dy,l=0,g=0,n=this._dnd.dragObj._ind+1;n<=this._dnd.dragObj.parentNode.lastChild._ind;n++){l+2*(a=this._dnd.dragObj.parentNode.childNodes[n].offsetHeight)/3<o&&g++,l+=a}var h=this._dnd.dragObj.nextSibling;for(n=0;null!=h;)++n<=g&&null!=h?h._ontop||(h._tm&&window.clearTimeout(h._tm),this._dndAnim(h,!1,parseInt(h.style.top||0),-this._dnd.h-this.ofs.m.between),h._ontop=!0):h._ontop&&(h._tm&&window.clearTimeout(h._tm),this._dndAnim(h,!0,parseInt(h.style.top||0),0),h._ontop=!1),h=h.nextSibling;for(o=this._dnd.dy-u.clientY,l=0,g=0,n=this._dnd.dragObj._ind-1;n>=this._dnd.dragObj.parentNode.firstChild._ind;n--){var a;l+2*(a=this._dnd.dragObj.parentNode.childNodes[n].offsetHeight)/3<o&&g++,l+=a}for(h=this._dnd.dragObj.previousSibling,n=0;null!=h;)++n<=g&&null!=h?h._onbottom||(h._tm&&window.clearTimeout(h._tm),this._dndAnim(h,!0,parseInt(h.style.top||0),this._dnd.h+this.ofs.m.between),h._onbottom=!0):h._onbottom&&(h._tm&&window.clearTimeout(h._tm),this._dndAnim(h,!1,parseInt(h.style.top),0),h._onbottom=!1),h=h.previousSibling}},this._dndDragStop=function(o,m){if(m);else if(0<this._dnd.tr_count)return void(this._dnd.tr_waiting=!0);if(this._dnd.dragObj){this._dnd.dragObj.className=String(this._dnd.dragObj.className).replace(/\s{0,}acc_cell_dragged/gi,"");for(var n=!(this._dnd.dragObj.style.top="0px"),l=0;l<this._dnd.dragObj.parentNode.childNodes.length;l++){var h=this._dnd.dragObj.parentNode.childNodes[l];h!=this._dnd.dragObj&&(h._tm&&window.clearTimeout(h._tm),h.style.top="0px",h._ontop&&(null!=h.nextSibling&&1!=h.nextSibling._ontop||!h.nextSibling)&&(n=h.nextSibling||null),h._onbottom&&(null!=h.previousSibling&&1!=h.previousSibling._onbottom||!h.previousSibling)&&(n=h)),h=null}for(l=0;l<this._dnd.dragObj.parentNode.childNodes.length;l++)this._dnd.dragObj.parentNode.childNodes[l]._ontop=null,this._dnd.dragObj.parentNode.childNodes[l]._onbottom=null;!1!==n&&(null==n?this._dnd.dragObj.parentNode.appendChild(this._dnd.dragObj):this._dnd.dragObj.parentNode.insertBefore(this._dnd.dragObj,n));var r=this._dnd.dragObj._accId,g=this._dnd.dragObj._ind,a=g;for(l=0;l<this._dnd.dragObj.parentNode.childNodes.length;l++)this._dnd.dragObj.parentNode.childNodes[l]==this._dnd.dragObj&&(a=l);this._dnd.dragObj=null,this._dnd.tr_waiting=!1,this._updateCellsMargin(),g!=a&&(this.setSizes(),this.callEvent("onDrop",[r,g,a])),"function"==typeof window.addEventListener?(document.body.removeEventListener("mousemove",this._dndOnMouseMove,!1),document.body.removeEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.detachEvent("onmouseup",this._dndOnMouseUp,!1))}},this._dndAnim=function(m,a,l,h){if(0!=this.conf.tr.prop)return m._dnd_ev||(m._dnd_ev=!0,m._dnd_tr_prop=this.conf.tr.prop,m.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1)),1!=this._dnd.tr_items[m._accId]&&(this._dnd.tr_items[m._accId]=!0,this._dnd.tr_count++),m.style[this.conf.tr.prop]=this.conf.tr.dnd_top,void(m.style.top=h+"px");var g=!1;a?h<=(l+=5)&&(l=h,g=!0):(l-=5)<=h&&(l=h,g=!0),m.style.top=l+"px",m._tm&&window.clearTimeout(m._tm),m._tm=g?null:window.setTimeout(function(){e._dndAnim(m,a,l,h)},5)},this._dndOnTrEnd=function(a){a.stopPropagation&&a.stopPropagation(),"top"==a.propertyName&&(1==e._dnd.tr_items[this._accId]&&(e._dnd.tr_count--,e._dnd.tr_items[this._accId]=!1),this.style[this._dnd_tr_prop]="",0==e._dnd.tr_count&&1==e._dnd.tr_waiting&&e._dndDragStop(null,!0))},this._dndOnMouseMove=function(a){e._dndDoDrag(a||event)},this._dndOnMouseUp=function(a){e._dndDragStop(a||event)},this._dndClearCell=function(a){this.t[a].cell.cell._dnd_ev&&this.t[a].cell.cell.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1),this._dndDetachEvent(a)},this._unloadDND=function(){for(var g in this)0==String(g).indexOf("_dnd")&&"function"==typeof this[g]&&(this[g]=null);this._dnd=null,e=null},this.t)this._dndAttachEvent(c)}},dhtmlXLayoutObject.prototype=new dhtmlXCellTop,dhtmlXLayoutObject.prototype.cells=function(g){for(var c in this.cdata){if(this.cdata[c].conf.name==g)return this.cdata[c];if("layout"==this.cdata[c].dataType&&1==this.cdata[c].dataNested&&null!=this.cdata[c].dataObj){var e=this.cdata[c].dataObj.cells(g);if(null!=e)return e}}return null},dhtmlXLayoutObject.prototype.forEachItem=function(g,e){if("function"==typeof g){for(var c in void 0===e&&(e=this),this.cdata)void 0!==this.cdata[c].conf.name&&g.apply(e,[this.cdata[c]]),"layout"==this.cdata[c].dataType&&1==this.cdata[c].dataNested&&null!=this.cdata[c].dataObj&&this.cdata[c].dataObj.forEachItem(g,e);e=null}},dhtmlXLayoutObject.prototype._forEachSep=function(g,e){if("function"==typeof g){for(var c in void 0===e&&(e=this),null!=this.sep&&g.apply(e,[this.sep]),this.cdata)"layout"==this.cdata[c].dataType&&1==this.cdata[c].dataNested&&null!=this.cdata[c].dataObj&&this.cdata[c].dataObj._forEachSep(g,e);e=null}},dhtmlXLayoutObject.prototype._detectSW=function(){return null==this._confGlob.sw&&(this._confGlob.sw={}),null==this._confGlob.sw[this.conf.skin]&&(this._confGlob.sw[this.conf.skin]=window.dhx4.readFromCss("dhxlayout_sep_sw_"+this.conf.skin)),this._confGlob.sw[this.conf.skin]},dhtmlXLayoutObject.prototype._confGlob={},dhtmlXLayoutObject.prototype.listPatterns=function(){var e=[];for(var c in this.tplData)e.push(c);return e},dhtmlXLayoutObject.prototype.listAutoSizes=function(){return[null!=this.conf.as_cells?this.conf.as_cells.h.join(";"):"",null!=this.conf.as_cells?this.conf.as_cells.v.join(";"):"",this._availAutoSize[this.conf.pattern].h,this._availAutoSize[this.conf.pattern].v]},dhtmlXLayoutObject.prototype._getCellsNames=function(g){var h={};if(null!=this.cdata[g].conf.name&&(h[this.cdata[g].conf.name]=!0),"layout"==this.cdata[g].dataType&&null!=this.cdata[g].dataObj&&this.cdata[g].dataObj.mainInst==this){var c=this.cdata[g].dataObj._getCellsNames("a"),l=this.cdata[g].dataObj._getCellsNames("b");for(var e in c)h[e]=c[e];for(var e in l)h[e]=l[e]}return h},dhtmlXLayoutObject.prototype.setAutoSize=function(c,o,r){if(!0!==r){var v=this.listAutoSizes();if(v[0]==c&&v[1]==o)return;for(var n=!1,l=!1,e=0;e<v[2].length;e++)n=n||v[2][e]==c;for(e=0;e<v[3].length;e++)l=l||v[3][e]==o;if(!n||!l)return}this.conf.as_cells={h:c.split(";"),v:o.split(";")};var g="v"==this.conf.mode?"h":"v";for(var u in this.cdata){var h=this._getCellsNames(u),w=!1;for(e=0;e<this.conf.as_cells[g].length;e++)w=w||h[this.conf.as_cells[g][e]];w&&(this.conf.autosize=u),"layout"==this.cdata[u].dataType&&null!=this.cdata[u].dataObj&&this.cdata[u].dataObj.setAutoSize(c,o,!0)}},dhtmlXLayoutObject.prototype.tplData={"1C":{mode:"c",cells:{a:{name:"a"}}},"2E":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{name:"b",fsize:{v:1}}}},"2U":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{name:"b",fsize:{h:1}}}},"3E":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{name:"c",fsize:{v:2}}}}}}},"3W":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{name:"c",fsize:{h:2}}}}}}},"3J":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}},b:{name:"b",fsize:{h:1}}}},"3L":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}}}},"3T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:2,v:1}},b:{name:"c",fsize:{h:2,v:1}}}}}}},"3U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{name:"c",fsize:{v:1}}}},"4H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:[1,2],v:3}},b:{name:"c",fsize:{h:[1,2],v:3}}}}},b:{name:"d",fsize:{h:2}}}}}}},"4I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:3,v:[1,2]}},b:{name:"c",fsize:{h:3,v:[1,2]}}}}},b:{name:"d",fsize:{v:2}}}}}}},"4T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3],v:1}},b:{name:"d",fsize:{h:3,v:1}}}}}}}}}},"4U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[2,3],v:1}},b:{name:"c",fsize:{h:3,v:1}}}}}}}},b:{name:"d",fsize:{v:1}}}},"4E":{mode:"h",cells:{a:{name:"a",height:.25,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[2,3]}},b:{name:"d",fsize:{v:3}}}}}}}}}},"4W":{mode:"v",cells:{a:{name:"a",width:.25,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3]}},b:{name:"d",fsize:{h:3}}}}}}}}}},"4A":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[1,3]}},b:{name:"d",fsize:{h:3}}}}}}},"4L":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:2,v:3}},b:{name:"d",fsize:{h:2,v:3}}}}}}}}}},"4J":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:3,v:2}},b:{name:"d",fsize:{h:3,v:2}}}}}}}}}},"4F":{mode:"h",cells:{a:{height:1/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[1,3]}},b:{name:"d",fsize:{v:3}}}}}}},"4G":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{name:"d",fsize:{h:1}}}},"4C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[2,3]}},b:{name:"d",fsize:{h:1,v:3}}}}}}}}}},"5H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:[1,2],v:[3,4]}},b:{name:"d",fsize:{h:[1,2],v:4}}}}}}}},b:{name:"e",fsize:{h:2}}}}}}},"5I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:[1,2]}},b:{name:"d",fsize:{h:4,v:[1,2]}}}}}}}},b:{name:"e",fsize:{v:2}}}}}}},"5U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:.25,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[2,3],v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:1}},b:{name:"d",fsize:{h:4,v:1}}}}}}}}}}},b:{name:"e",fsize:{v:1}}}},"5E":{mode:"h",cells:{a:{name:"a",height:.2,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{v:[3,4]}},b:{name:"e",fsize:{v:4}}}}}}}}}}}}},"5W":{mode:"v",cells:{a:{name:"a",width:.2,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:.25,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[3,4]}},b:{name:"e",fsize:{h:4}}}}}}}}}}}}},"5K":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:4}},b:{name:"e",fsize:{h:1,v:4}}}}}}},"5S":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,2]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"5G":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[1,4]}},b:{name:"e",fsize:{h:4}}}}}}},"5C":{mode:"v",cells:{a:{width:2/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2}},b:{name:"b",fsize:{h:[2,1]}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,4]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"6H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:[1,2],v:[4,5]}},b:{name:"e",fsize:{h:[1,2],v:5}}}}}}}}}}},b:{name:"f",fsize:{h:2}}}}}}},"6I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:.25,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[4,5],v:[1,2]}},b:{name:"e",fsize:{h:5,v:[1,2]}}}}}}}}}}},b:{name:"f",fsize:{v:2}}}}}}},"6A":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:.2,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[4,5]}},b:{name:"e",fsize:{h:1,v:5}}}}}}}}}}}}}},b:{name:"f",fsize:{h:1}}}},"6C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.2,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:1,v:[4,5]}},b:{name:"f",fsize:{h:1,v:5}}}}}}}}}}}}}}}},"6J":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:.25,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[3,4]}},b:{name:"d",fsize:{h:1,v:4}}}}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[1,5]}},b:{name:"f",fsize:{h:5}}}}}}},"6E":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:2,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:2,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:2,v:[4,5]}},b:{name:"f",fsize:{h:2,v:5}}}}}}}}}}}}}}}},"6W":{mode:"v",cells:{a:{name:"a",width:1/6,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:.2,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:.25,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[3,4]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[4,5]}},b:{name:"f",fsize:{h:5}}}}}}}}}}}}}}}},"7H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:.2,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:[1,2],v:[4,5]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:[1,2],v:[5,6]}},b:{name:"f",fsize:{h:[1,2],v:6}}}}}}}}}}}}}},b:{name:"g",fsize:{h:2}}}}}}},"7I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:.2,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:.25,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[4,5],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[5,6],v:[1,2]}},b:{name:"f",fsize:{h:6,v:[1,2]}}}}}}}}}}}}}},b:{name:"g",fsize:{v:2}}}}}}}},dhtmlXLayoutObject.prototype._availAutoSize={"1C":{h:["a"],v:["a"]},"2E":{h:["a;b"],v:["a","b"]},"2U":{h:["a","b"],v:["a;b"]},"3E":{h:["a;b;c"],v:["a","b","c"]},"3W":{h:["a","b","c"],v:["a;b;c"]},"3J":{h:["a;c","b"],v:["a;b","b;c"]},"3L":{h:["a","b;c"],v:["a;b","a;c"]},"3T":{h:["a;b","a;c"],v:["a","b;c"]},"3U":{h:["a;c","b;c"],v:["a;b","c"]},"4H":{h:["a","b;c","d"],v:["a;b;d","a;c;d"]},"4I":{h:["a;b;d","a;c;d"],v:["a","b;c","d"]},"4T":{h:["a;b","a;c","a;d"],v:["a","b;c;d"]},"4U":{h:["a;d","b;d","c;d"],v:["a;b;c","d"]},"4E":{h:["a;b;c;d"],v:["a","b","c","d"]},"4W":{h:["a","b","c","d"],v:["a;b;c;d"]},"4A":{h:["a;b","c","d"],v:["a;c;d","b;c;d"]},"4L":{h:["a","b","c;d"],v:["a;b;c","a;b;d"]},"4J":{h:["a;b;c","a;b;d"],v:["a","b","c;d"]},"4F":{h:["a;c;d","b;c;d"],v:["a;b","c","d"]},"4G":{h:["a;b;c","d"],v:["a;d","b;d","c;d"]},"4C":{h:["a","b;c;d"],v:["a;b","a;c","a;d"]},"5H":{h:["a","b;c;d","e"],v:["a;b;e","a;c;e","a;d;e"]},"5I":{h:["a;b;e","a;c;e","a;d;e"],v:["a","b;c;d","e"]},"5U":{h:["a;e","b;e","c;e","d;e"],v:["a;b;c;d","e"]},"5E":{h:["a;b;c;d;e"],v:["a","b","c","d","e"]},"5W":{h:["a","b","c","d","e"],v:["a;b;c;d;e"]},"5K":{h:["a;b;c","d;e"],v:["a;d","b;d","c;d","a;e","b;e","c;e"]},"5S":{h:["a;b","c;d;e"],v:["a;c","a;d","a;e","b;c","b;d","b;e"]},"5G":{h:["a;b;c","d","e"],v:["a;d;e","b;d;e","c;d;e"]},"5C":{h:["a","b","c;d;e"],v:["a;b;c","a;b;d","a;b;e"]},"6H":{h:["a","b;c;d;e","f"],v:["a;b;f","a;c;f","a;d;f","a;e;f"]},"6I":{h:["a;b;f","a;c;f","a;d;f","a;e;f"],v:["a","b;c;d;e","f"]},"6A":{h:["a;b;c;d;e","f"],v:["a;f","b;f","c;f","d;f","e;f"]},"6C":{h:["a","b;c;d;e;f"],v:["a;b","a;c","a;d","a;e","a;f"]},"6J":{h:["a;b;c;d","e","f"],v:["a;e;f","b;e;f","c;e;f","d;e;f"]},"6E":{h:["a","b","c;d;e;f"],v:["a;b;c","a;b;d","a;b;e","a;b;f"]},"6W":{h:["a","b","c","d","e","f"],v:["a;b;c;d;e;f"]},"7H":{h:["a","b;c;d;e;f","g"],v:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"]},"7I":{h:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"],v:["a","b;c;d;e;f","g"]}},dhtmlXLayoutObject.prototype.setSeparatorSize=function(e,g){if("number"!=typeof e){for(var c in this.cdata){if("layout"==this.cdata[c].dataType&&1==this.cdata[c].dataNested&&null!=this.cdata[c].dataObj&&null!=(e=this.cdata[c].dataObj.setSeparatorSize(e,g)).sep)return e;if("a"==c&&null!=this.sep&&(e.current++,e.index==e.current))return{sep:this.sep}}return e}var h=this.setSeparatorSize({index:e,current:-1},g);null!=h.sep&&h.sep._setWH(g)},window.dhtmlXLayoutCell=function(g,e){dhtmlXCellObject.apply(this,[g,"_layout"]);var c=this;if(this.layout=e,this.conf.skin=this.layout.conf.skin,this.conf.mode=this.layout.conf.mode,this.conf.collapsed=!1,this.conf.fixed={w:!1,h:!1},this.conf.docked=!0,"material"==this.conf.skin?this.conf.min_width=42:this.conf.min_width=26,this.conf.min_height=26,this.attachEvent("_onCellUnload",function(){this.cell.childNodes[this.conf.idx.hdr].ondblclick=null,"c"!=this.conf.mode&&(this.cell.childNodes[this.conf.idx.hdr].lastChild.onclick=null),this._unloadDocking(),this.layout=null,c=null}),this._hdrInit(),this.cell.childNodes[this.conf.idx.hdr].ondblclick=function(){var h=c.layout._getMainInst();h._callMainEvent("onDblClick",[c.conf.name]),h=null},this.attachEvent("_onContentLoaded",function(){var h=this.layout._getMainInst();h._callMainEvent("onContentLoaded",[this.conf.name]),h=null}),"c"!=this.conf.mode){var a=document.createElement("DIV");a.className="dhxlayout_arrow dhxlayout_arrow_"+this.conf.mode+this._idd,this.cell.childNodes[this.conf.idx.hdr].appendChild(a),a.onclick=function(h){c.conf.collapsed?c.expand():c.collapse()},a=null}return this.attachEvent("_onBeforeContentAttach",function(h){"tabbar"!=h&&"layout"!=h&&"acc"!=h||this._hideBorders(),"sidebar"==h&&"dhx_skyblue"!=this.conf.skin&&"dhx_terrace"!=this.conf.skin&&(this._hideBorders(),this.showHeader())}),this._initDocking(),this},dhtmlXLayoutCell.prototype=new dhtmlXCellObject,dhtmlXLayoutCell.prototype.getId=function(){return this.conf.name},dhtmlXLayoutCell.prototype._initDocking=function(){var a=this;this.dock=function(){var e=this.layout._getMainInst();if(null==e.dhxWins||this.conf.docked)e=null;else{var c=e.dhxWins.window(this.conf.name);c.close(),this._attachFromCell(c),this.conf.docked=!0,this.conf.dock_collapsed||this.expand(),e._callMainEvent("onDock",[this.conf.name]),e=c=null}},this.undock=function(c,n,l,m){var g=this.layout._getMainInst();if(null!=g.dhxWins&&0!=this.conf.docked){var e;if(this.conf.dock_collapsed=this.conf.collapsed,this.conf.collapsed||this.collapse(),null!=g.dhxWins.window(this.conf.name))(e=g.dhxWins.window(this.conf.name)).show();else null==c&&(c=20),null==n&&(n=20),null==l&&(l=320),null==m&&(m=200),(e=g.dhxWins.createWindow(this.conf.name,c,n,l,m)).button("close").hide(),e.addUserButton("dock",99,"Dock"),e.button("dock").show(),e.button("dock").attachEvent("onClick",this._doOnDockClick),e.setText(this.getText()),e.attachEvent("onClose",this._doOnDockWinClose);this.conf.docked=!1,e._attachFromCell(this),g._callMainEvent("onUnDock",[this.conf.name]),g=e=null}else g=null},this._doOnDockClick=function(){a.dock()},this._doOnDockWinClose=function(c){return c.hide(),!1},this._unloadDocking=function(){a=null}},dhtmlXLayoutCell.prototype._hdrInit=function(){var c="";window.dhx4.isIE?-1!=navigator.userAgent.indexOf("MSIE 9.0")?c=" dhx_cell_hdr_text_ie9":window.dhx4.isIE8?c=" dhx_cell_hdr_text_ie8":window.dhx4.isIE7?c=" dhx_cell_hdr_text_ie7":window.dhx4.isIE6&&(c=" dhx_cell_hdr_text_ie6"):(window.dhx4.isChrome||window.dhx4.isKHTML)&&(c=" dhx_cell_hdr_text_chrome");var a=document.createElement("DIV");a.className="dhx_cell_hdr",a.innerHTML="<div class='dhx_cell_hdr_text"+c+"'></div>",this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]),a=null,this.conf.ofs_nodes.t._getHdrHeight="func",this.conf.hdr={visible:!0},this.conf.idx_data.hdr="dhx_cell_hdr",this._updateIdx(),this.attachEvent("_onSetSize",this._hdrOnSetSize),this.attachEvent("_onBorderChange",this._hdrOnBorderChange),this.attachEvent("_onViewSave",this._hdrOnViewSave),this.attachEvent("_onViewRestore",this._hdrOnViewRestore)},dhtmlXLayoutCell.prototype.showHeader=function(a){this.conf.hdr.visible||this.conf.collapsed||this.conf.hdr.w_saved>this._getAvailWidth()||this.conf.hdr.h_saved>this._getAvailHeight()||(this.conf.hdr.w_saved=this.conf.hdr.h_saved=null,this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr",!0!==a&&this._adjustCont(this._idd))},dhtmlXLayoutCell.prototype.hideHeader=function(a){this.conf.hdr.visible&&!this.conf.collapsed&&(this.conf.hdr.w_saved=this._getMinWidth(this._idd),this.conf.hdr.h_saved=this._getMinHeight(this._idd),this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._hdrUpdBorder(),this._mtbUpdBorder(),!0!==a&&this._adjustCont(this._idd))},dhtmlXLayoutCell.prototype.isHeaderVisible=function(){return 1==this.conf.hdr.visible},dhtmlXLayoutCell.prototype.showArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=""},dhtmlXLayoutCell.prototype.hideArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display="none"},dhtmlXLayoutCell.prototype.isArrowVisible=function(){return""==this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display},dhtmlXLayoutCell.prototype.setText=function(a){this.conf.hdr.text=a,this._hdrUpdText()},dhtmlXLayoutCell.prototype.getText=function(){return this.conf.hdr.text},dhtmlXLayoutCell.prototype.setCollapsedText=function(a){this.conf.hdr.text_collapsed=a,this._hdrUpdText()},dhtmlXLayoutCell.prototype.getCollapsedText=function(){return null!=this.conf.hdr.text_collapsed?this.conf.hdr.text_collapsed:this.conf.hdr.text},dhtmlXLayoutCell.prototype._hdrUpdText=function(){var a=1==this.conf.collapsed&&null!=this.conf.hdr.text_collapsed?this.conf.hdr.text_collapsed:this.conf.hdr.text;this.cell.childNodes[this.conf.idx.hdr].firstChild.innerHTML="<span>"+a+"</span>"},dhtmlXLayoutCell.prototype._hdrUpdBorder=function(){1==this.conf.borders?this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"+(this.conf.hdr.visible?"":" dhx_cell_hdr_hidden"):this.conf.hdr.visible||(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden_no_borders")},dhtmlXLayoutCell.prototype._hdrOnSetSize=function(){this.conf.collapsed&&"v"==this.conf.mode&&this._fitHdr()},dhtmlXLayoutCell.prototype._hdrOnBorderChange=function(){this.hideHeader(!0),this._hdrUpdBorder()},dhtmlXLayoutCell.prototype._hdrOnViewSave=function(a){this.views[a].hdr_vis=this.conf.hdr.visible},dhtmlXLayoutCell.prototype._hdrOnViewRestore=function(a){this.conf.hdr.visible!=this.views[a].hdr_vis&&this[this.views[a].hdr_vis?"showHeader":"hideHeader"](!0),this.views[a].hdr_vis=null,delete this.views[a].hdr_vis},dhtmlXLayoutCell.prototype._getHdrHeight=function(a){return this.conf.collapsed&&"v"==this.conf.mode&&!0!==a?27:this.cell.childNodes[this.conf.idx.hdr].offsetHeight},dhtmlXLayoutCell.prototype._fitHdr=function(){var c=this.cell.childNodes[this.conf.idx.hdr];if(1==this.conf.collapsed){void 0===dhtmlXLayoutObject.prototype._confGlob.hdrColH&&(c.style.height=this.cell.offsetHeight+"px",dhtmlXLayoutObject.prototype._confGlob.hdrColH=parseInt(c.style.height)-this._getHdrHeight(!0));var a=this.cell.offsetHeight+dhtmlXLayoutObject.prototype._confGlob.hdrColH;c.style.height=a+"px",c.firstChild.style.width=a-39+"px"}else c.firstChild.style.width=c.style.height=null;c=null},dhtmlXLayoutCell.prototype.expand=function(m){if(!this.conf.collapsed)return!0;var e=this.layout;if("v"==this.conf.mode){var l=m?e.conf.hh:e.cdata[e.conf.nextCell[this._idd]]._getMinWidth(this._idd),g=e.cont.offsetWidth-e.conf.sw;if(l+this.conf.size.w_avl>g)return e=null,!1}else{var h=m?e.conf.hh:e.cdata[e.conf.nextCell[this._idd]]._getMinHeight(this._idd)+e.cdata[e.conf.nextCell[this._idd]]._getHdrHeight(),c=e.cont.offsetHeight-e.conf.sw;if(h+this.conf.size.h_avl>c)return e=null,!1}if(0!=this.conf.docked){0==this.conf.hdr.visible&&(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._hdrUpdBorder()),this.cell.className=String(this.cell.className).replace(/\s{0,}dhxlayout_collapsed_[hv]/gi,""),this.conf.collapsed=!1,"v"==this.conf.mode?(this.conf.size.w=Math.min(g-l,this.conf.size.w_saved),this.conf.size.w_saved=this.conf.size.w_avl=null):(this.conf.size.h=Math.min(c-h,this.conf.size.h_saved),this.conf.size.h_saved=this.conf.size.h_avl=null),"v"==this.conf.mode&&this._fitHdr(),e.setSizes(e.conf.nextCell[this._idd],e.conf.nextCell[this._idd],1==m,"expand"),e.sep._blockSep(),e=null,this._hdrUpdText();var a=this.layout._getMainInst();return a._callMainEvent("onExpand",[this.conf.name]),!(a=null)}this.dock()},dhtmlXLayoutCell.prototype.collapse=function(){if(this.conf.collapsed)return!1;var c=this.layout;if(0==c.cdata[c.conf.nextCell[this._idd]].expand(!0))return!1;"v"==this.conf.mode?(this.conf.size.w_saved=this.conf.size.w,this.conf.size.w_avl=this._getMinWidth(this._idd)):(this.conf.size.h_saved=this.conf.size.h,this.conf.size.h_avl=this._getMinHeight(this._idd)+this._getHdrHeight()),0==this.conf.hdr.visible&&(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"),this.cell.className+=" dhxlayout_collapsed_"+this.conf.mode,this.conf.collapsed=!0,"v"==this.conf.mode?this.conf.size.w=c.conf.hh:this.conf.size.h=this._getHdrHeight(),c.setSizes(c.conf.nextCell[this._idd],c.conf.nextCell[this._idd],!1,"collapse"),c.sep._blockSep(),c=null,this._hdrUpdText();var a=this.layout._getMainInst();return a._callMainEvent("onCollapse",[this.conf.name]),!(a=null)},dhtmlXLayoutCell.prototype.isCollapsed=function(){return 1==this.conf.collapsed},dhtmlXLayoutCell.prototype.setMinWidth=function(a){this.conf.min_width=parseInt(a)||0},dhtmlXLayoutCell.prototype.setMinHeight=function(a){this.conf.min_height=parseInt(a)||0},dhtmlXLayoutCell.prototype._getMinWidth=function(c){if("layout"==this.dataType&&null!=this.dataObj){if(this.layout._getMainInst()!=this.dataObj._getMainInst())return this.dataObj._getAvailWidth();if("1C"==this.dataObj.conf.pattern)return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(c));if("v"==this.dataObj.conf.mode){var a=c||this._idd;return this.dataObj.cdata[a].conf.collapsed&&(a=this.dataObj.conf.nextCell[a]),Math.max(this.conf.min_width,this.dataObj.cdata[a]._getMinWidth(c)+this.dataObj.cdata[this.dataObj.conf.nextCell[a]]._getWidth()+this.dataObj.conf.sw)}return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(c),this.dataObj.cdata.b._getMinWidth(c))}return Math.max(this.conf.min_width,1)},dhtmlXLayoutCell.prototype._getMinHeight=function(e){var c=0;if(null!=this.conf.idx.menu&&(c+=this.cell.childNodes[this.conf.idx.menu].offsetHeight),"layout"==this.dataType&&null!=this.dataObj){if(this.layout._getMainInst()!=this.dataObj._getMainInst())return this.dataObj._getAvailHeight();if("1C"==this.dataObj.conf.pattern)return Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(e));if("h"==this.dataObj.conf.mode){var a=e;return this.dataObj.cdata[a].conf.collapsed&&(a=this.dataObj.conf.nextCell[a]),Math.max(this.conf.min_height,this.dataObj.cdata[a]._getMinHeight(e)+this.dataObj.cdata[a]._getHdrHeight()+this.dataObj.cdata[this.dataObj.conf.nextCell[a]]._getHeight()+this.dataObj.conf.sw)}return Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(e)+this.dataObj.cdata.a._getHdrHeight(),this.dataObj.cdata.b._getMinHeight(e)+this.dataObj.cdata.b._getHdrHeight())}return Math.max(this.conf.min_height,c)},dhtmlXLayoutCell.prototype._getAvailWidth=function(e){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getAvailWidth(e);if("v"==this.dataObj.conf.mode){var a=1==this.dataObj.cdata.a.conf.collapsed,c=1==this.dataObj.cdata.b.conf.collapsed;return"a"==e?this.dataObj.cdata[c?"a":"b"]._getAvailWidth(e):this.dataObj.cdata[a?"b":"a"]._getAvailWidth(e)}return Math.min(this.dataObj.cdata.a._getAvailWidth(e),this.dataObj.cdata.b._getAvailWidth(e))}return this.cell.offsetWidth-this._getMinWidth()},dhtmlXLayoutCell.prototype._getAvailHeight=function(g){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getAvailHeight(g);if("h"==this.dataObj.conf.mode){var c=1==this.dataObj.cdata.a.conf.collapsed,e=1==this.dataObj.cdata.b.conf.collapsed;return"a"==g?this.dataObj.cdata[e?"a":"b"]._getAvailHeight(g):this.dataObj.cdata[c?"b":"a"]._getAvailHeight(g)}return Math.min(this.dataObj.cdata.a._getAvailHeight(g),this.dataObj.cdata.b._getAvailHeight(g))}var a=this._getHdrHeight();return"v"==this.conf.mode&&this.conf.collapsed&&(a=this.conf.hh),this.cell.offsetHeight-a-this._getMinHeight()},dhtmlXLayoutCell.prototype.setWidth=function(g){if("v"==this.conf.mode){if(this.conf.collapsed)return;if((l=(h=this.layout).cdata[h.conf.nextCell[this._idd]]).conf.collapsed)return g=g+h.conf.sw+l._getWidth(),void(m=h=l=null);var e=this._getMinWidth(this._idd),n=h.cont.offsetWidth-l._getMinWidth(this._idd)-h.conf.sw;g=Math.max(e,Math.min(g,n)),this.conf.size.w=g,h.setSizes(l._idd,l._idd),h=l=null}else{if(null==this.layout||null==this.layout.parentLayout)return;var h,m=this.layout.parentLayout,l=(h=this.layout).cdata[h.conf.nextCell[this._idd]];for(var c in m.cdata)m.cdata[c].dataObj==h&&m.cdata[c].setWidth(g);m=h=null}},dhtmlXLayoutCell.prototype.setHeight=function(n){if("h"==this.conf.mode){if(this.conf.collapsed)return;if((m=(g=this.layout).cdata[g.conf.nextCell[this._idd]]).conf.collapsed){if(n=n+g.conf.sw+m._getHeight(),null!=(o=null!=this.layout&&null!=this.layout.parentLayout?this.layout.parentLayout:null))for(var c in o.cdata)o.cdata[c].dataObj==g&&o.cdata[c].setHeight(n);return void(o=g=m=null)}var l=this._getMinHeight(this._idd)+this._getHdrHeight(),e=g.cont.offsetHeight-m._getMinHeight(this._idd)-m._getHdrHeight()-g.conf.sw;n=Math.max(l,Math.min(n,e)),this.conf.size.h=n,g.setSizes(m._idd,m._idd),g=m=null}else{if(null==this.layout||null==this.layout.parentLayout)return;var g,o=this.layout.parentLayout,m=(g=this.layout).cdata[g.conf.nextCell[this._idd]];for(var c in o.cdata)o.cdata[c].dataObj==g&&o.cdata[c].setHeight(n);o=g=null}},dhtmlXLayoutCell.prototype.getWidth=function(){return this.conf.size.w},dhtmlXLayoutCell.prototype.getHeight=function(){return this.conf.size.h},dhtmlXLayoutCell.prototype.fixSize=function(c,g){this.conf.fixed.w=window.dhx4.s2b(c),this.conf.fixed.h=window.dhx4.s2b(g);var a=this.layout._getMainInst(),e={};a.forEachItem(function(h){if(null!=h.conf.fsize){h.getId();var n={h:1==h.conf.fixed.w,v:1==h.conf.fixed.h};for(var l in n)if(1==n[l]&&null!=h.conf.fsize[l]){h.conf.fsize[l]instanceof Array||(h.conf.fsize[l]=[h.conf.fsize[l]]);for(var m=0;m<h.conf.fsize[l].length;m++)e[h.conf.fsize[l][m]]=!0}}h=null}),a._forEachSep(function(h){h._lockSep(1==e[h.conf.idx]),h=null}),a=null},dhtmlXCellObject.prototype.attachLayout=function(a){this.callEvent("_onBeforeContentAttach",["layout"]);var c=document.createElement("DIV");return c.style.width="100%",c.style.height="100%",c.style.position="relative",c.style.overflow="hidden",this._attachObject(c),void 0!==this._layoutMainInst&&(c._layoutMainInst=this._layoutMainInst),"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&(c._isParentCell=!0,"material"==this.conf.skin&&null==String(this.cell.className).match(/dhx_cell_nested_layout/)&&(this.cell.className+=" dhx_cell_nested_layout")),"function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&("material"==this.conf.skin?c._ofs={t:14,r:14,b:14,l:14}:c._ofs={t:-1,r:-1,l:-1,b:-1}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&("dhx_skyblue"==this.conf.skin&&(c._ofs={t:-1,r:-1,b:-1,l:-1}),"material"==this.conf.skin&&(c._ofs={t:8,r:8,b:8,l:8})),"function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&("dhx_web"==this.conf.skin?(c._ofs={l:8},1==this.sidebar.conf.autohide&&(c._ofs.l=0),1==this.sidebar.conf.header&&(c._ofs.t=9)):"dhx_terrace"==this.conf.skin?(c._ofs={l:11},1==this.sidebar.conf.autohide&&(c._ofs.l=0),1==this.sidebar.conf.header&&(c._ofs.t=10)):c._ofs={l:-1}),"function"==typeof window.dhtmlXCarouselCell&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders(),"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&"material"==this.conf.skin&&(c._ofs={t:14,r:14,b:14,l:14}),"string"==typeof a&&(a={pattern:a}),void 0===a.skin&&(a.skin=this.conf.skin),a.parent=c,this.dataType="layout",this.dataObj=new dhtmlXLayoutObject(a),this instanceof window.dhtmlXLayoutCell&&(this.dataObj.parentLayout=this.layout),c._layoutMainInst=null,a.parent=null,c=a=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXTabBar.prototype=new dhtmlXCellTop,dhtmlXTabBar.prototype._fixTabsOfs=function(){this.conf.tabsOfs={dhx_skyblue:1,dhx_web:0,dhx_terrace:1,material:0}[this.conf.skin]},dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(a){return this.t[a]?this.t[a].cell:null},dhtmlXTabBar.prototype.getAllTabs=function(){var e=[];for(var c in this.t)e.push(c);return e},dhtmlXTabBar.prototype._setTabActive=function(c,a){this.t[c]&&!this.t[c].conf.active&&(void 0===a&&(a=!0),1==a&&!0!==this.callEvent("onSelect",[c,this.conf.lastActive])||(this.setTabInActive(),this.t[c].conf.active=!0,this.conf.contZone&&(this.t[c].cell.cell.style.visibility="visible",this.t[c].cell.cell.style.top="0px",this.t[c].cell.cell.style.zIndex=1),this.t[c].tab.className=this._tabCss(c),this.conf.lastActive=c,this.setSizes(),1==this.conf.url_demand&&this._loadURLOnDemand(c)))},dhtmlXTabBar.prototype.setTabInActive=function(){null!=this.conf.lastActive&&this.t[this.conf.lastActive]&&(this.t[this.conf.lastActive].conf.active=!1,this.conf.contZone&&(this.t[this.conf.lastActive].cell.cell.style.visibility="hidden",this.t[this.conf.lastActive].cell.cell.style.top="-5000px",this.t[this.conf.lastActive].cell.cell.style.zIndex=0),this.t[this.conf.lastActive].tab.className=this._tabCss(this.conf.lastActive),this.conf.lastActive=null)},dhtmlXTabBar.prototype._isTabActive=function(a){return a==this.conf.lastActive&&null!=this.conf.lastActive},dhtmlXTabBar.prototype.getActiveTab=function(){return this.conf.lastActive},dhtmlXTabBar.prototype.goToNextTab=function(){var a=this._getNextVisible(this.conf.lastActive,!0);null!=a&&this._setTabActive(a)},dhtmlXTabBar.prototype.goToPrevTab=function(){var a=this._getPrevVisible(this.conf.lastActive,!0);null!=a&&this._setTabActive(a)},dhtmlXTabBar.prototype._enableTab=function(c,a){this.t[c]&&!this.t[c].conf.enabled&&(this.t[c].conf.enabled=!0,this.t[c].tab.className=this._tabCss(c),1==a&&this._setTabActive(c))},dhtmlXTabBar.prototype._disableTab=function(c,a){this.t[c]&&this.t[c].conf.enabled&&(this.t[c].conf.enabled=!1,this.t[c].tab.className=this._tabCss(c),!1!==a&&this.conf.lastActive==c&&(1==a&&(a=this._getNextVisible(c)||this._getPrevVisible(c)),this._setTabActive(a)))},dhtmlXTabBar.prototype._isTabEnabled=function(a){return null!=this.t[a]&&1==this.t[a].conf.enabled},dhtmlXTabBar.prototype._setTabText=function(g,e,c){if(this.t[g]){var a=!1;void 0!==c&&null!=c||(c=this._getLabelWidth(e,this.t[g].conf.close),a=!0),this.t[g].tab.style.width=c+"px",this.t[g].tab.childNodes[0].innerHTML=e,this.t[g].conf.text=e,this.t[g].conf.width=c,this.t[g].conf.autowidth=a}},dhtmlXTabBar.prototype._getTabText=function(a){return this.t[a]?this.t[a].conf.text:null},dhtmlXTabBar.prototype._removeTab=function(n,e,l){if(this.t[n]){if(1!=l&&1!=this.t[n].conf.remove)return this.t[n].conf.remove=!0,void this._hideTab(n,e);void 0===e&&(e=!0);var g=this._getNextVisible(n),h=this._getPrevVisible(n);for(var c in 1==this.t[n].conf.transEv&&(this.t[n].tab.removeEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[n].conf.transEv=!1),this.t[n].conf)this.t[n].conf[c]=null;if(this.t[n].conf=null,delete this.t[n].conf,this.t[n].cell._unload(),this.t[n].cell=null,this.t[n].tab.parentNode.removeChild(this.t[n].tab),this.t[n].tab=null,this.t[n]=null,delete this.t[n],this.conf.urls[n]=null,delete this.conf.urls[n],this.conf.lastActive==n){if(this.conf.lastActive=null,0!=e){var m=1==e?g||h||this._getFirstVisible():e;null!=m&&this._setTabActive(m)}}else 1!=l&&this._adjustTabs()}},dhtmlXTabBar.prototype.clearAll=function(){for(var c in this.t)this._removeTab(c,!1,!0);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"},dhtmlXTabBar.prototype.moveTab=function(e,a){if(this.t[e]&&!(a<0)){a+=1;var c=this.tabsArea.childNodes[1].firstChild;c.childNodes[a]!=this.t[e].tab&&(c.removeChild(this.t[e].tab),a>=c.childNodes.length?c.appendChild(this.t[e].tab):c.insertBefore(this.t[e].tab,c.childNodes[a])),c=null}},dhtmlXTabBar.prototype._getIndex=function(g){for(var a=-1,e=this.tabsArea.childNodes[1].firstChild,c=1;c<e.childNodes.length;c++)e.childNodes[c]._tabId==g&&(a=c-1);return e=null,a},dhtmlXTabBar.prototype.getNumberOfTabs=function(g){var e=0;for(var c in this.t)e+=1!=g?1:1==this.t[c].conf.visible?1:0;return e},dhtmlXTabBar.prototype.forEachCell=dhtmlXTabBar.prototype.forEachTab=function(e){for(var c in this.t)e.apply(window,[this.t[c].cell])},dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFSResize()},dhtmlXTabBar.prototype.setArrowsMode=function(a){null!=(a={auto:"auto",always:"always"}[String(a)])&&a!=this.conf.mode&&("always"==(this.conf.arwMode=a)&&(this.tabsArea.childNodes[0].className="dhxtabbar_tabs_ar_left",this.tabsArea.childNodes[2].className="dhxtabbar_tabs_ar_right"),this.setSizes())},dhtmlXTabBar.prototype._checkArrows=function(){var h=!1;if("auto"==this.conf.arwMode){var g=0;for(var e in this.t)g+=this.t[e].tab.offsetWidth;var c=this.tabsArea.childNodes[0],l=this.tabsArea.childNodes[2];g>this.cont.offsetWidth?0<=c.className.search(/dhxtabbar_tabs_ar_hidden/)&&(c.className=c.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,""),l.className=l.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,""),h=!0):c.className.search(/dhxtabbar_tabs_ar_hidden/)<1&&(c.className+=" dhxtabbar_tabs_ar_hidden",l.className+=" dhxtabbar_tabs_ar_hidden",h=!0),c=l=null}return h},dhtmlXTabBar.prototype._loadURLOnDemand=function(a){null!=a&&null!=this.conf.urls[a]&&(this.cells(a).attachURL(this.conf.urls[a].href,this.conf.urls[a].ajax),this.conf.urls[a]=null)},window.dhtmlXTabBarCell=function(g,e){for(var c in dhtmlXCellObject.apply(this,[g,"_tabbar"]),this.tabbar=e,this.conf.skin=this.tabbar.conf.skin,this.conf.tabbar_funcs={show:"_showTab",hide:"_hideTab",isVisible:"_isTabVisible",enable:"_enableTab",disable:"_disableTab",isEnabled:"_isTabEnabled",getIndex:"_getIndex",getText:"_getTabText",setText:"_setTabText",setActive:"_setTabActive",isActive:"_isTabActive",close:"_removeTab"},this._tabbarCall=function(a){return function(){for(var h=[this._idd],l=0;l<arguments.length;l++)h.push(arguments[l]);return this.tabbar[a].apply(this.tabbar,h)}},this.conf.tabbar_funcs)"function"!=typeof this[c]&&(this[c]=this._tabbarCall(this.conf.tabbar_funcs[c]));this.attachEvent("_onCellUnload",function(){for(var h in this.tabbar=null,this.conf.tabbar_funcs)this[h]=null,this.conf.tabbar_funcs[h]=null;this.conf.tabbar_funcs=null}),this.attachEvent("_onContentLoaded",function(){this.tabbar._callMainEvent("onContentLoaded",arguments),this.tabbar._callMainEvent("onTabContentLoaded",arguments)}),this.attachEvent("_onContentAttach",function(){this.tabbar._adjustCell(this.tabbar.conf.lastActive)}),this.attachEvent("_onBeforeContentAttach",function(a){"sidebar"==a&&"dhx_skyblue"!=this.conf.skin&&this._hideBorders()})},window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject,dhtmlXCellObject.prototype.attachTabbar=function(a){this.callEvent("_onBeforeContentAttach",["tabbar"]),"string"==typeof a?a={mode:a}:"object"==typeof a&&null!=a||(a={});var c=document.createElement("DIV");return c.style.width="100%",c.style.height="100%",c.style.position="relative",c.style.overflow="hidden","function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&("material"==this.conf.skin?c._ofs={t:-1,r:-1,b:-1,l:-1}:c._ofs={t:-1}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&("dhx_skyblue"==this.conf.skin&&(c._ofs={t:-1,r:-1,b:-1,l:-1}),"material"==this.conf.skin&&(c._ofs={t:8,r:8,b:8,l:8})),"function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&(c._ofs={l:-1},"dhx_web"==this.conf.skin&&1==this.sidebar.conf.autohide&&(c._ofs.l=0),"dhx_terrace"==this.conf.skin&&(1==this.sidebar.conf.autohide&&(c._ofs.l=0),1==this.sidebar.conf.header&&(c._ofs.t=-1))),"function"==typeof window.dhtmlXCarouselCell&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders(),this._attachObject(c),a.skin=this.conf.skin,a.parent=c,this.dataType="tabbar",this.dataObj=new dhtmlXTabBar(a),a.parent=c=null,a=null,this.callEvent("_onContentAttach",[]),this.dataObj},"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.attachEvent("onload",dhtmlXTabBarInitFromHTML),dhtmlXSideBar.prototype=new dhtmlXCellTop,dhtmlXSideBar.prototype._addItem=function(c){var e,g=void 0!==c.id?c.id:window.dhx4.newId();if("separator"==c.type)return(e=document.createElement("DIV")).className="dhxsidebar_sep",this.side.firstChild.appendChild(e),this.s[g]={sep:e},void(e=null);if(c.icons_path=this.conf.icons_path,(e=document.createElement("DIV")).className="dhxsidebar_item",e.innerHTML=window.dhx4.template(this.conf.tpl_str,c),e._idd=g,this.side.firstChild.appendChild(e),e.ondragstart=function(){return!1},1==this.conf.single_cell)var a=this.conf.cell;else{a=new dhtmlXSideBarCell(g,this);this.cont.appendChild(a.cell)}this.t[g]={item:e,cell:a,init:c,conf:{selected:!1,visible:!0,close:close}},void 0!==c.bubble&&this._setItemBubble(g,c.bubble),1==this.conf.header&&a.setHeaderText(window.dhx4.template(this.tpl_header,c)),a=e=null,1==window.dhx4.s2b(c.selected)?this._setItemActive(g):this._adjustCell(g),this._checkHeight()},dhtmlXSideBar.prototype.addItem=function(a){a instanceof Array||(a=[a]);for(var c=0;c<a.length;c++)this._addItem(a[c])},dhtmlXSideBar.prototype.items=dhtmlXSideBar.prototype.cells=function(a){return 1==this.conf.single_cell?this.conf.cell:null!=this.t[a]?this.t[a].cell:null},dhtmlXSideBar.prototype.forEachCell=dhtmlXSideBar.prototype.forEachItem=function(e){if(1!=this.conf.single_cell)for(var c in this.t)"function"==typeof e?e.apply(window,[this.t[c].cell]):"string"==typeof e&&"function"==typeof window[e]&&window[e].apply(window,[this.t[c].cell]);else"function"==typeof e?e.apply(window,[this.conf.cell]):"string"==typeof e&&"function"==typeof window[e]&&window[e].apply(window,[this.conf.cell])},dhtmlXSideBar.prototype.getAllItems=function(){var e=[];for(var c in this.t)e.push(c);return e},dhtmlXSideBar.prototype.getNumberOfItems=function(){return this.getAllItems().length},dhtmlXSideBar.prototype.clearAll=function(){for(var c in this.t)this._removeItem(c,!1,!0);for(var c in this.s)this.removeSep(c)},dhtmlXSideBar.prototype.setSizes=function(){this._adjustCont(),this._adjustSide(),this._checkHeight(),this._adjustCell(this.conf.selected,!0),this.callEvent("_onSetSizes",[])},dhtmlXSideBar.prototype.setSideWidth=function(a){this.conf.width=a,this.setSizes()},dhtmlXSideBar.prototype._adjustSide=function(){null==this.conf.side_ofs&&(this.conf.side_ofs={},this.side.style.width=this.conf.width+"px",this.side.style.height=this.side.parentNode.offsetHeight+"px",this.conf.side_ofs.w=this.side.offsetWidth-parseInt(this.side.style.width),this.conf.side_ofs.h=this.side.offsetHeight-parseInt(this.side.style.height)),this.side.style.width=this.conf.width-this.conf.side_ofs.w+"px",this.side.style.height=this.side.parentNode.offsetHeight-this.arw.offsetHeight-this.conf.side_ofs.h+"px",this.arw.style.width=this.side.style.width,this._scrollSide(0)},dhtmlXSideBar.prototype._checkHeight=function(){var a=null!=this.arw.className.match(/dhxsidebar_arrows_hidden/);null==this.conf.side_hfix&&(this.conf.side_hfix=this.side.offsetHeight-this.side.clientHeight),this.side.firstChild.offsetHeight>this.side.parentNode.clientHeight-this.conf.side_hfix?1==a&&(this.arw.className="dhxsidebar_arrows",this._adjustSide()):0==a&&(this.arw.className="dhxsidebar_arrows dhxsidebar_arrows_hidden",this.side.firstChild.style.top="0px",this._adjustSide())},dhtmlXSideBar.prototype.removeSep=function(c){if(null!=this.s[c]){this.side.firstChild.removeChild(this.s[c].sep),this.s[c].sep=null,this.s[c]=null;try{delete this.s[c]}catch(a){}}},dhtmlXSideBar.prototype.showSide=function(){if(1==this.conf.autohide){if(null==this.sideCover&&this._sideCoverAttach(),1==this.conf.animate_items){var e=function(l,a,m){window.setTimeout(function(){l.style[m]="transform 0.3s",l.style.transform="translate(0px,0px)",l=null},a)};if(!1!==this.conf.transProp){var h=100;for(var c in this.t)this.t[c].item.style[this.conf.transProp]="",this.t[c].item.style.transform="translate(-"+(this.conf.width+20)+"px,0px)",e(this.t[c].item,h+=50,this.conf.transProp)}}var g=this;window.setTimeout(function(){g.arw.style.left=g.side.style.left="0px",g.sideCover.className="dhxsidebar_side_cover dhxsidebar_side_cover_actv",g=null},50)}},dhtmlXSideBar.prototype.hideSide=function(a){1==this.conf.autohide&&(this.arw.style.left=this.side.style.left=-this.conf.width-10+"px",null!=this.sideCover&&(!1!==this.conf.transProp?this.sideCover.className="dhxsidebar_side_cover":this._sideCoverDetach()))},dhtmlXSideBar.prototype._sideCoverAttach=function(){var a=this;this.sideCover=document.createElement("DIV"),this.sideCover.className="dhxsidebar_side_cover",null!=this.arw.nextSibling?this.cont.insertBefore(this.sideCover,this.arw.nextSibling):this.cont.appendChild(this.sideCover),this._sideCoverOnTrEnd=function(){null==this.className.match(/dhxsidebar_side_cover_actv/)&&a._sideCoverDetach()},!(this._sideCoverDetach=function(){null!=this.sideCover&&(!1!==this.conf.transProp&&this.sideCover.removeEventListener(this.conf.transEv,this._sideCoverOnTrEnd,!1),this.sideCover.parentNode.removeChild(this.sideCover),this.sideCover=null,a=null)})!==this.conf.transProp&&this.sideCover.addEventListener(this.conf.transEv,this._sideCoverOnTrEnd,!1)},dhtmlXSideBar.prototype._setItemActive=function(e,c){if(this.conf.selected!=e){if(void 0===c&&(c=!1),1!=c||!0===this.callEvent("onBeforeSelect",[e,this.conf.selected])){var a=null;null!=this.conf.selected&&(a=this.conf.selected,this._setItemInactive(this.conf.selected)),null!=this.t[e]?(this.conf.selected=e,this.t[e].selected=!0,this.t[e].item.className+=" dhxsidebar_item_selected",1!=this.conf.single_cell&&(this.t[e].cell.cell.style.visibility="visible",this.t[e].cell.cell.style.top="0px",this.t[e].cell.cell.style.zIndex=1)):this.conf.selected=null,this._adjustCell(e),1==c&&this.callEvent("onSelect",[e,a]),1==this.conf.autohide&&this.hideSide()}}else 1==this.conf.autohide&&this.hideSide()},dhtmlXSideBar.prototype._setItemInactive=function(a){null!=this.t[a]&&(this.t[a].selected=!1,this.t[a].item.className=this.t[a].item.className.replace(/\s{0,}dhxsidebar_item_selected/gi,""),1!=this.conf.single_cell&&(this.t[a].cell.cell.style.visibility="hidden",this.t[a].cell.cell.style.top="-5000px",this.t[a].cell.cell.style.zIndex=0))},dhtmlXSideBar.prototype._isItemActive=function(a){return this.conf.selected==a},dhtmlXSideBar.prototype._getNextVisible=function(c,a){return this._getNearVisible(c,a,"next")},dhtmlXSideBar.prototype._getPrevVisible=function(c,a){return this._getNearVisible(c,a,"previous")},dhtmlXSideBar.prototype._getFirstVisible=function(){return this._getNearVisible(null,!1,"first")},dhtmlXSideBar.prototype._getNearVisible=function(l,c,h){if("first"==h){var e=this.side.firstChild.firstChild;h="next"}else{if(null==l||null==this.t[l])return c?this._getFirstVisible():null;e=this.t[l].item[h+"Sibling"]}for(var g=null;null!=e&&null==g;){var a=e._idd;null!=a&&null==g&&this.t[a].conf.visible?g=a:e=e[h+"Sibling"]}return e=null,g},dhtmlXSideBar.prototype.goToNextItem=function(a){var c=this._getNextVisible(this.conf.selected,!0);null!=c&&this._setItemActive(c,a)},dhtmlXSideBar.prototype.goToPrevItem=function(a){var c=this._getPrevVisible(this.conf.selected,!0);null!=c&&this._setItemActive(c,a)},dhtmlXSideBar.prototype.getActiveItem=function(){return this.conf.selected},dhtmlXSideBar.prototype.setTemplate=function(g,c){for(var e in this.conf.tpl_name=null!=g&&null!=this.templates[g]?g:"details",this.conf.tpl_str=this.templates[this.conf.tpl_name],null!=c&&(this.conf.icons_path=c),this.t)this.t[e].init.icons_path=this.conf.icons_path,this.t[e].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[e].init);null!=this.side&&(this.side.className="dhxsidebar_side dhxsidebar_tpl_"+this.conf.tpl_name),null!=this._scrollSide&&(this._scrollSide(0),this._checkHeight())},dhtmlXSideBar.prototype.templates={details:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'><div class='dhxsidebar_item_text'>#text#</div>",tiles:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'><div class='dhxsidebar_item_text'>#text#</div>",icons:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'>",icons_text:"<div class='dhxsidebar_item_icon'><img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'></div><div class='dhxsidebar_item_text'>#text#</div>",text:"<div class='dhxsidebar_item_text'>#text#</div>"},dhtmlXSideBar.prototype.tpl_bubble="<div class='dhxsidebar_bubble'>#value#</div>",dhtmlXSideBar.prototype.tpl_header="#text#",window.dhtmlXSideBarCell=function(h,g){dhtmlXCellObject.apply(this,[h,"_sidebar"]);var e=this;for(var c in this.sidebar=g,this.conf.skin=this.sidebar.conf.skin,this.conf.sidebar_funcs={show:"_showItem",hide:"_hideItem",isVisible:"_isItemVisible",setActive:"_setItemActive",isActive:"_isItemActive",setText:"_setItemText",getText:"_getItemText",remove:"_removeItem",setBubble:"_setItemBubble",getBubble:"_getItemBubble",clearBubble:"_clearItemBubble"},this._sidebarCall=function(a){return function(){for(var l=[this._idd],m=0;m<arguments.length;m++)l.push(arguments[m]);return this.sidebar[a].apply(this.sidebar,l)}},this.conf.sidebar_funcs)"function"!=typeof this[c]&&(this[c]=this._sidebarCall(this.conf.sidebar_funcs[c]));1==this.sidebar.conf.header&&(this._initHeader(),this.cell.childNodes[this.conf.idx.hdr].onclick=function(l){var a=(l=l||event).target||l.srcElement;null!=a.className.match(/dhx_cell_sidebar_hdr_icon/gi)&&(e.sidebar.conf.clear_click=!0,e.sidebar.showSide()),a=null}),this.attachEvent("_onCellUnload",function(){for(var l in null!=this.conf.idx.hdr&&(this.cell.childNodes[this.conf.idx.hdr].onclick=null),this.sidebar=null,this.conf.sidebar_funcs)this[l]=this.conf.sidebar_funcs[l]=null;this.conf.sidebar_funcs=null,e=null}),this.attachEvent("_onContentLoaded",function(){this.sidebar.callEvent("onContentLoaded",arguments)}),this.attachEvent("_onBeforeContentAttach",function(a){"tabbar"!=a&&"layout"!=a&&"acc"!=a||this._hideBorders(),"sidebar"==a&&"dhx_skyblue"!=this.conf.skin&&this._hideBorders(),"dhx_web"!=this.conf.skin&&"dhx_terrace"!=this.conf.skin||"menu"!=a&&"toolbar"!=a&&"ribbon"!=a||null==this.cell.className.match(/dhx_cell_cont_no_top/gi)&&(this.cell.className+=" dhx_cell_cont_no_top")})},dhtmlXSideBarCell.prototype=new dhtmlXCellObject,dhtmlXSideBar.prototype._setItemText=function(g,e){if(null!=this.t[g]){for(var c in e)this.t[g].init[c]=e[c];this.t[g].init.icons_path=this.conf.icons_path,this.t[g].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[g].init),null!=this.t[g].conf.bubble&&(this.t[g].item.innerHTML+=window.dhx4.template(this.tpl_bubble,{value:this.t[g].conf.bubble})),1==this.conf.header&&this.t[g].cell.setHeaderText(window.dhx4.template(this.tpl_header,this.t[g].init))}},dhtmlXSideBar.prototype._getItemText=function(g){var e={};if(null!=this.t[g])for(var c in this.t[g].init)e[c]=this.t[g].init[c];return e},dhtmlXSideBar.prototype._removeItem=function(o,n,l){if(null!=this.t[o]){if(1!=l&&1!=this.t[o].conf.remove)return this.t[o].conf.remove=!0,void this._hideItem(o,n);void 0===n&&(n=!0);var g=this._getNextVisible(o),h=this._getPrevVisible(o);for(var c in 1==this.t[o].conf.transEv&&(this.t[o].item.removeEventListener(this.conf.transEv,this._doOnTrEnd),this.t[o].conf.transEv=!1),1!=this.conf.single_cell&&(this.t[o].cell._unload(),this.t[o].cell=null),this.t[o].item.ondragstart=null,this.t[o].item.parentNode.removeChild(this.t[o].item),this.t[o].item=null,this.t[o])this.t[o][c]=null;this.t[o]=null;try{delete this.t[o]}catch(m){}if(this.conf.selected==o&&0!=n)(this.conf.selected=null)!=(n=1==n?g||h||this._getFirstVisible():n)&&this._setItemActive(n);else 1!=l&&this._checkHeight()}},dhtmlXSideBar.prototype._showItem=function(c,a){null!=this.t[c]&&1!=this.t[c].conf.visible&&1!=this.t[c].conf.transActv&&(!1!==this.conf.transProp?(this.t[c].conf.transActv=!0,this.t[c].conf.transMode="show",this.t[c].conf.transProp=this.conf.transProp,this.t[c].conf.transActvId=a?c:null,1!=this.t[c].conf.transEv&&(this.t[c].item.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[c].conf.transEv=!0),this.t[c].conf.visible=!0,this.t[c].item.style[this.conf.transProp]=this.conf.transValue,this.t[c].item.className="dhxsidebar_item"):(this.t[c].conf.visible=!0,this.t[c].item.style.display="",1==a?this._setItemActive(c):this._checkHeight()))},dhtmlXSideBar.prototype._hideItem=function(h,g){if(null!=this.t[h]&&1==this.t[h].conf.visible&&1!=this.t[h].conf.transActv){var e=!1;this.conf.selected==h&&(this.conf.selected=null,this.t[h].conf.active=!1,this.t[h].item.className="dhxsidebar_item",e=!0);var c=this._getPrevVisible(h),a=this._getNextVisible(h);g=e&&!1!==g?(1==g?null:g)||a||c:null;!1!==this.conf.transProp?(this.t[h].conf.transActv=!0,this.t[h].conf.transMode="hide",this.t[h].conf.transProp=this.conf.transProp,this.t[h].conf.transActvId=g,this.t[h].conf.visible=!1,1!=this.t[h].conf.transEv&&(this.t[h].item.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[h].conf.transEv=!0),this.t[h].item.style[this.conf.transProp]=this.conf.transValue,this.t[h].item.className="dhxsidebar_item dhxsidebar_item_hidden"):(this.t[h].item.style.display="none",this.t[h].conf.visible=!1,1!=this.conf.single_cell&&(this.t[h].cell.cell.style.visibility="hidden",this.t[h].cell.cell.style.top="-5000px"),null!=g&&this._setItemActive(g),this._checkHeight(),1==this.t[h].conf.remove&&this._removeItem(h))}},dhtmlXSideBar.prototype._isItemVisible=function(a){return 1==this.t[a].conf.visible},dhtmlXSideBar.prototype._setItemBubble=function(c,a){null!=this.t[c]&&(this.t[c].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[c].init)+window.dhx4.template(this.tpl_bubble,{value:String(a)}),this.t[c].conf.bubble=a)},dhtmlXSideBar.prototype._getItemBubble=function(a){return null==this.t[a]?null:"undefuned"==typeof this.t[a].conf.bubble?null:this.t[a].conf.bubble},dhtmlXSideBar.prototype._clearItemBubble=function(a){null!=this.t[a]&&(this.t[a].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[a].init),this.t[a].conf.bubble=null)},dhtmlXCellObject.prototype.attachSidebar=function(a){this.callEvent("_onBeforeContentAttach",["sidebar"]),null==a&&(a={});var c=document.createElement("DIV");return c.style.width="100%",c.style.height="100%",c.style.position="relative",c.style.overflow="hidden","function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell||("dhx_skyblue"==this.conf.skin&&(c._ofs={t:-1,r:-1,b:-1,l:-1}),"dhx_web"==this.conf.skin&&("function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&(c._ofs={l:8}),"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&(c._ofs={t:2}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&(c._ofs={t:8}),"function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(c._ofs={t:2})),"dhx_terrace"==this.conf.skin&&("function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&(c._ofs={l:-1}),"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&(c._ofs={t:-1,r:-1,b:-1,l:-1}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&(c._ofs={t:-1}),"function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(c._ofs={t:-1,r:-1,b:-1,l:-1})),"material"==this.conf.skin&&("function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(c._ofs={t:-1,r:-1,b:-1,l:-1}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&(c._ofs={t:-1,r:-1,b:-1,l:-1}),"function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&(c._ofs={l:-1}))),this._attachObject(c),a.skin=this.conf.skin,a.parent=c,this.dataType="sidebar",this.dataObj=new dhtmlXSideBar(a),a.parent=c=null,a=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXSideBarCell.prototype._initHeader=function(){var a=document.createElement("DIV");a.className="dhx_cell_sidebar_hdr",a.innerHTML=(1==this.sidebar.conf.autohide?"<div class='dhx_cell_sidebar_hdr_icon'></div>":"")+"<div class='dhx_cell_sidebar_hdr_text"+(1==this.sidebar.conf.autohide?" dhx_cell_sidebar_hdr_text_icon":"")+"'></div>",this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]),a=null,this.conf.ofs_nodes.t._getHdrHeight="func",this.conf.hdr={visible:!0},this.conf.idx_data.hdr="dhx_cell_sidebar_hdr",this._updateIdx()},dhtmlXSideBarCell.prototype._getHdrHeight=function(){return this.cell.childNodes[this.conf.idx.hdr].offsetHeight},dhtmlXSideBarCell.prototype.showHeader=function(){1!=this.conf.hdr.visible&&(this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_sidebar_hdr",this._adjustCont(this._idd))},dhtmlXSideBarCell.prototype.hideHeader=function(){1==this.conf.hdr.visible&&(this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_sidebar_hdr dhx_cell_sidebar_hdr_hidden",this._adjustCont(this._idd))},dhtmlXSideBarCell.prototype.isHeaderVisible=function(){return 1==this.conf.hdr.visible},dhtmlXSideBarCell.prototype.setHeaderText=function(c){this.conf.text=c;var a=this.cell.childNodes[this.conf.idx.hdr];a.childNodes["dhx_cell_sidebar_hdr_icon"==a.firstChild.className?1:0].innerHTML="<span>"+c+"</span>",a=null},dhtmlXSideBarCell.prototype.getHeaderText=function(){return this.conf.text},dhtmlXCarousel.prototype=new dhtmlXCellTop,dhtmlXCarousel.prototype.ef={},dhtmlXCarousel.prototype.cells=function(a){return this.cdata[a].cell},dhtmlXCarousel.prototype.forEachCell=function(e){for(var c in this.cdata)"function"==typeof e?e.apply(window,[this.cdata[c].cell]):"string"==typeof e&&"function"==typeof window[e]&&window[e].apply(window,[this.cdata[c].cell])},dhtmlXCarousel.prototype._initControls=function(){var e=this,c="material"==this.conf.skin?["",""]:this.conf.arw;this.controls=document.createElement("DIV"),this.controls.className="dhx_carousel_controls",this.controls.innerHTML="<div class='dhx_carousel_bars'></div><div class='dhx_carousel_btn dhx_carousel_btn_prev'>"+c[0]+"</div><div class='dhx_carousel_btn dhx_carousel_btn_next'>"+c[1]+"</div>",this.cont.appendChild(this.controls),this._doOnControlClick=function(l){if(1!=e.conf.clear_click){if(l=l||event,null!=window.dhx4.dnd.evs.start&&"click"!=l.type&&1!=e.conf.clear_click){if(1==window.dhx4.dnd._mTouch(l))return;e.conf.clear_click=!0}var a=l.target||l.srcElement,h=null;if(null!=a.className)if(null!=a.className.match(/btn_prev/))h=-1;else if(null!=a.className.match(/btn_next/))h=1;else if(null!=a.className.match(/dhx_carousel_onebar/)&&null==a.className.match(/dhx_carousel_baractv/))for(var g=0;g<a.parentNode.childNodes.length;g++)a.parentNode.childNodes[g]==a&&(h=g-e.conf.selected);null!=h&&e._animateStart(h),a=null}else e.conf.clear_click=!1},"function"==typeof window.addEventListener?(this.controls.addEventListener("click",this._doOnControlClick,!1),null!=window.dhx4.dnd.evs.start&&this.controls.addEventListener(window.dhx4.dnd.evs.start,this._doOnControlClick,!1)):(this.controls.attachEvent("onclick",this._doOnControlClick),(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&(this.controls.onselectstart=function(a){return(a=a||event).preventDefault&&a.preventDefault(),a.returnValue=!1})),this.showControls=function(){this.controls.style.display="",this.setSizes()},this.hideControls=function(){this.controls.style.display="none",this.setSizes()},this._checkControls=function(){this.controls.childNodes[1].className="dhx_carousel_btn dhx_carousel_btn_prev"+(this.conf.selected<=0?"_dis":""),this.controls.childNodes[2].className="dhx_carousel_btn dhx_carousel_btn_next"+(this.conf.selected>=this.conf.items_count-1||0==this.conf.items_count?"_dis":"")},this._adjustControls=function(){this.controls.firstChild.style.left=Math.round(this.cont.offsetWidth/2-this.controls.firstChild.offsetWidth/2)+"px"},this._addBar=function(){var a=document.createElement("DIV");a.className="dhx_carousel_onebar",a.innerHTML="<div class='dhx_carousel_barcore'>&nbsp;</div>",this.controls.firstChild.appendChild(a),a=null,this._adjustControls()},this._removeBar=function(g){var a=this.controls.firstChild.lastChild;null!=a&&(a.parentNode.removeChild(a),a=null,!1!==g&&this._adjustControls())},this._setBarIndex=function(a){for(var g=0;g<this.controls.firstChild.childNodes.length;g++)this.controls.firstChild.childNodes[g].className="dhx_carousel_onebar"+(g==a?" dhx_carousel_baractv":"")},this._unloadControls=function(){for("function"==typeof window.addEventListener?(this.controls.removeEventListener("click",this._doOnControlClick,!1),null!=window.dhx4.dnd.evs.start&&this.controls.removeEventListener(window.dhx4.dnd.evs.start,this._doOnControlClick,!1)):(this.controls.detachEvent("onclick",this._doOnControlClick),(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&(this.controls.onselectstart=null));0<this.controls.firstChild.childNodes.length;)this._removeBar(!1);this.cont.removeChild(this.controls),this.controls=null,e=null},1!=this.conf.buttons&&this.hideControls(),this._checkControls()},window.dhtmlXCarouselCell=function(e,c){dhtmlXCellObject.apply(this,[e,"_carousel"]);var a=this;return this.carousel=c,this.conf.skin=this.carousel.conf.skin,this.attachEvent("_onCellUnload",function(){this.carousel=null,a=null}),this.attachEvent("_onContentLoaded",function(){this.carousel._callMainEvent("onContentLoaded",[this._idd])}),this._showCover=function(){if(1!=this.conf.cover){this._showCellCover();var g=this.cell.childNodes[this.conf.idx.cover];g.onclick=function(){a.carousel._callMainEvent("_cellCoverClick",[a._idd])},g=null}},this._hideCover=function(){1==this.conf.cover&&(this.cell.childNodes[this.conf.idx.cover].onclick=null,this._hideCellCover())},this},dhtmlXCarouselCell.prototype=new dhtmlXCellObject,dhtmlXCarouselCell.prototype.getId=function(){return this._idd},dhtmlXCarouselCell.prototype.getIndex=function(){return this.carousel.cdata[this._idd].index},dhtmlXCarouselCell.prototype.setActive=function(){var a=this.getIndex()-this.carousel.conf.selected;0!=a&&this.carousel._animateStart(a)},dhtmlXCarouselCell.prototype.remove=function(){this.carousel._removeCell(this._idd)},dhtmlXCellObject.prototype.attachCarousel=function(a){this.callEvent("_onBeforeContentAttach",["carousel"]);var c=document.createElement("DIV");return c.style.width="100%",c.style.height="100%",c.style.position="relative",c.style.overflow="hidden",this._attachObject(c),"function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&"dhx_terrace"==this.conf.skin&&(c._ofs={t:-1,r:-1,b:-1,l:-1}),void 0!==a&&null!=a||(a={}),void 0===a.skin&&(a.skin=this.conf.skin),a.parent=c,this.dataType="carousel",this.dataObj=new dhtmlXCarousel(a),a.parent=null,c=a=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCarousel.prototype.ef.slide=!0,dhtmlXCarousel.prototype.ef.slide_conf={anim_step:25,anim_timeout:10,anim_slide:"left 0.3s"},dhtmlXCarousel.prototype.ef.slide_f={prepare:"_slide_prepare",start:"_slide_start",end:"_slide_end",update_selected:"_slide_update_selected",detect_x:"_slide_detect_x",detect_aw:"_slide_detect_area_width",cell_added:"_slide_cell_added"},dhtmlXCarousel.prototype._slide_init=function(){return this.ef.slide_conf},dhtmlXCarousel.prototype._slide_f=function(){return this.ef.slide_f},dhtmlXCarousel.prototype._slide_prepare=function(c,a){var g=this.conf.anim_step,h=this.conf.width+this.conf.ofs_item;0==a&&(g=h+1),this.area._init=parseInt(this.area.style.left);var e=this.ind[this.conf.selected+c];this._slide_update_selected(e),!1!==this.conf.transProp&&0!=a?(1!=this.conf.transEvInit&&(this.area.addEventListener(this.conf.transEv,this._animateTransEnd,!1),this.conf.transEvInit=!0),this.conf.current_dir=c,this.area.style[this.conf.transProp]=this.conf.anim_slide,this.area.style.left=this.area._init+h*-c+"px"):this._slide_start(g,0,h,c)},dhtmlXCarousel.prototype._slide_start=function(h,a,l,c){var g=!1;if(l<=(a+=h)&&(a=l,g=!0),this.area.style.left=this.area._init+a*-c+"px",1!=g){var e=this;window.setTimeout(function(){e._slide_start(h,a,l,c),e=null},this.conf.anim_timeout)}else this.cdata[this.ind[this.conf.selected]].cell._showCover(),this._animateEnd(c)},dhtmlXCarousel.prototype._slide_end=function(c,a){c.type==this.conf.transEv&&a==this.area&&(this.area.style[this.conf.transProp]="",1==this.conf.transEvInit&&(this.area.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),this.conf.transEvInit=!1),this.cdata[this.ind[this.conf.selected]].cell._showCover(),this._animateEnd(this.conf.current_dir))},dhtmlXCarousel.prototype._slide_update_selected=function(a){this.cdata[a].cell._hideCover()},dhtmlXCarousel.prototype._slide_detect_x=function(e){return this.cdata[e].index*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item},dhtmlXCarousel.prototype._slide_cell_added=function(a){this.conf.selected!=this.cdata[a].index&&this.cdata[a].cell._showCover(),this.cdata[a].index<=this.conf.selected&&1<this.conf.items_count&&this._animateStart(1,!1)},dhtmlXCarousel.prototype._slide_detect_area_width=function(){return this.conf.items_count},dhtmlXCarousel.prototype.ef.flip=!0,dhtmlXCarousel.prototype.ef.flip_conf={anim_flip:"transform 0.3s ease-out",anim_flip_ang:-87,anim_flip_trstyle:"transform"},dhtmlXCarousel.prototype.ef.flip_f={prepare:"_flip_prepare",start:"_flip_start",end:"_flip_end",update_selected:"_flip_update_selected",detect_x:"_flip_detect_x",detect_aw:"_flip_detect_area_width",cell_added:"_flip_cell_added"},dhtmlXCarousel.prototype._flip_init=function(){var a=0!=this.conf.transProp&&this.ef.flip_conf;return!1!==a&&1==window.dhx4.isKHTML&&null==a.anim_flip.match("webkit")&&(a.anim_flip=a.anim_flip.replace(/transform/,"-webkit-transform"),a.anim_flip_trstyle="webkitTransform"),a},dhtmlXCarousel.prototype._flip_f=function(){return this.ef.flip_f},dhtmlXCarousel.prototype._flip_prepare=function(a){this.conf.flip_data={fromIndex:this.conf.selected,toIndex:this.conf.selected+a,mode:0,dir:a},this._flip_start()},dhtmlXCarousel.prototype._flip_start=function(){var a=this.cdata[this.ind[0==this.conf.flip_data.mode?this.conf.flip_data.fromIndex:this.conf.flip_data.toIndex]].cell;null==this.area.className.match(/dhxcarousel_area_flip/)&&(this.area.className+=" dhxcarousel_area_flip"),1!=a.conf.tr_ev&&(a.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),a.conf.tr_ev=!0),0==this.conf.flip_data.mode?a.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(0<this.conf.flip_data.dir?this.conf.anim_flip_ang:-this.conf.anim_flip_ang)+"deg)":(a.cell.style.visibility="visible",a.cell.style[this.conf.anim_flip_trstyle]="rotateY(0deg)"),a.cell.style[this.conf.transProp]=this.conf.anim_flip,a=null},dhtmlXCarousel.prototype._flip_end=function(n,m){if(n.type==this.conf.transEv){var a=this.cdata[this.ind[0==this.conf.flip_data.mode?this.conf.flip_data.fromIndex:this.conf.flip_data.toIndex]].cell;if(m==a.cell)if(a.cell.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),a.conf.tr_ev=!1,0==this.conf.flip_data.mode)a.cell.style[this.conf.transProp]="",a.cell.style.visibility="hidden",this.conf.flip_data.mode=1,this._flip_start();else{for(var g=this.conf.flip_data.dir,h=Math.min(this.conf.flip_data.fromIndex,this.conf.flip_data.toIndex)+1,c=Math.max(this.conf.flip_data.fromIndex,this.conf.flip_data.toIndex)-1,l=h;l<=c;l++)this.cdata[this.ind[l]].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.conf.anim_flip_ang*g/Math.abs(g))+"deg)";null!=this.area.className.match(/dhxcarousel_area_flip/)&&(this.area.className=String(this.area.className).replace(/\s{0,}dhxcarousel_area_flip/gi,"")),this.conf.flip_data=null,a.cell.style[this.conf.transProp]="",this._animateEnd(g)}a=null}},dhtmlXCarousel.prototype._flip_update_selected=function(a){},dhtmlXCarousel.prototype._flip_detect_x=function(e){return 0*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item},dhtmlXCarousel.prototype._flip_cell_added=function(a){this.conf.selected!=this.cdata[a].index?(this.cdata[a].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.cdata[a].index<this.conf.selected?this.conf.anim_flip_ang:-this.conf.anim_flip_ang)+"deg)",this.cdata[a].cell.cell.style.visibility="hidden"):this.cdata[a].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY(0deg)"},dhtmlXCarousel.prototype._flip_detect_area_width=function(){return 1},dhtmlXCarousel.prototype.ef.cards=!0,dhtmlXCarousel.prototype.ef.cards_conf={anim_cards:"left 0.3s"},dhtmlXCarousel.prototype.ef.cards_f={prepare:"_cards_prepare",start:"_cards_start",end:"_cards_end",update_selected:"_cards_update_selected",detect_x:"_cards_detect_x",detect_aw:"_cards_detect_area_width",cell_added:"_cards_cell_added"},dhtmlXCarousel.prototype._cards_init=function(){return 0!=this.conf.transProp&&this.ef.cards_conf},dhtmlXCarousel.prototype._cards_f=function(){return this.ef.cards_f},dhtmlXCarousel.prototype._cards_prepare=function(e,c){if(0<e){var g=this.ind[this.conf.selected+e],a=this.cdata[g].cell;this._cards_update_selected(g),1!=a.conf.transEvInit&&(a.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),a.conf.transEvInit=!0),this.conf.current_id=g,this.conf.current_dir=e,a.cell.style[this.conf.transProp]=this.conf.anim_cards,a.cell.style.left=this._cards_detect_x(g,0)+"px",a=null}else{this._cards_adjust_middle(this.conf.selected+e+1,this.conf.selected-1,1);g=this.ind[this.conf.selected];(a=this.cdata[g].cell)._hideCover(),1!=a.conf.transEvInit&&(a.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),a.conf.transEvInit=!0),this.conf.current_id=g,this.conf.current_dir=e,this.cdata[this.ind[this.conf.selected+e]].cell._hideCover(),a.cell.style[this.conf.transProp]=this.conf.anim_cards,a.cell.style.left=this._cards_detect_x(g,1)+"px",a=null}},dhtmlXCarousel.prototype._cards_start=function(e,a,g,c){},dhtmlXCarousel.prototype._cards_end=function(g,c){if(g.type==this.conf.transEv&&null!=this.conf.current_id&&c==this.cdata[this.conf.current_id].cell.cell){var a=this.cdata[this.conf.current_id].cell;a.cell.style[this.conf.transProp]="",1!=a.conf.transEvInit&&(a.cell.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),a.conf.transEvInit=!1),this.conf.current_id=null,0<this.conf.current_dir&&this._cards_adjust_middle(this.conf.selected+1,this.conf.selected+this.conf.current_dir-1,0),this.cdata[this.ind[this.conf.selected]].cell._showCover(),this._animateEnd(this.conf.current_dir)}},dhtmlXCarousel.prototype._cards_update_selected=function(a){this.cdata[a].cell._hideCover()},dhtmlXCarousel.prototype._cards_adjust_middle=function(e,h,c){for(var g=e;g<=h;g++){var l=this.ind[g],a=this.cdata[l].cell;a.conf.size.x=this._cards_detect_x(l,c),a.cell.style.left=a.conf.size.x+"px",a=null}},dhtmlXCarousel.prototype._cards_detect_x=function(e,c){return void 0!==c&&null!=c||(c=this.cdata[e].index<=this.conf.selected?0:1),c*(this.conf.width+this.conf.ofs_left+this.conf.ofs_item)+this.conf.ofs_item},dhtmlXCarousel.prototype._cards_cell_added=function(a){this.cdata[a].cell.conf.size.x=this._cards_detect_x(a),this.cdata[a].cell.cell.style.left=this.cdata[a].cell.conf.size.x+"px",this.conf.selected!=this.cdata[a].index&&this.cdata[a].cell._showCover()},dhtmlXCarousel.prototype._cards_detect_area_width=function(){return 2},dhtmlXWindows.prototype.forEachWindow=function(e){for(var c in this.w)e.apply(window,[this.w[c].cell])},dhtmlXWindows.prototype.window=function(a){return null!=this.w[a]?this.w[a].cell:null},dhtmlXWindows.prototype.isWindow=function(a){return null!=this.w[a]},dhtmlXWindows.prototype.findByText=function(g){var e=[];for(var c in this.w)0<=this.w[c].cell.getText().indexOf(String(g))&&e.push(this.w[c]);return e},dhtmlXWindows.prototype.setSkin=function(e){if(e!=this.conf.skin){for(var c in null!=this.vp&&(this.vp.className=String(this.vp.className).replace("dhxwins_vp_"+this.conf.skin," dhxwins_vp_"+e)),this.w)this.w[c].cell._resetSizeState(),this._winAdjustCell(c),this._winAdjustTitle(c);this.conf.skin=e}},dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(!1)},dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(!0)},dhtmlXWindows.prototype._getTopBottomWin=function(h){var g=null;for(var c in this.w)if(this.w[c].conf.visible){var e=!1;null!=g&&(e=g.z>this.w[c].win.style.zIndex,h&&(e=!e)),(null==g||e)&&(g={win:this.w[c].cell,z:this.w[c].win.style.zIndex})}return g?g.win:null},dhtmlXWindows.prototype._winMakeActive=function(e,h){if(null==e||!0===h||1!=this.w[e].conf.actv){for(var u=[],n={},c=0;c<this._zOrder.length;c++){var m=this._zOrder[c].name,g=this._zOrder[c].value,v=[];for(var r in this.w){var s=this.w[r];null==n[r]&&s.conf[m]===g&&1==s.conf.visible&&e!=r&&(window.dhx4.zim.clear(s.conf.z_id),v.push([r,Number(s.win.style.zIndex)]),n[r]=!0),s=null}if(v.sort(function(x,w){return x[1]<w[1]?1:-1}),null!=e&&this.w[e].conf[m]===g&&null==n[e])window.dhx4.zim.clear(this.w[e].conf.z_id),v=[[e,Number(this.w[e].win.style.zIndex)]].concat(v),n[e]=!0;u=u.concat(v)}for(c=u.length-1;0<=c;c--){r=u[c][0];if((s=this.w[r]).win.style.zIndex=window.dhx4.zim.reserve(s.conf.z_id),s.conf.modal&&null!=this.mcover)for(var o in this.mcover)this.mcover[o].style.zIndex=s.win.style.zIndex;this._winAdjustFRMZIndex(r),null==e&&0==c&&(e=r),s.conf.actv=e==r,s.win.className=s.conf.actv?"dhxwin_active":"dhxwin_inactive",s=null}null!=e&&this.conf.last_active!=e&&this._callMainEvent("onFocus",e),this.conf.last_active=e}},dhtmlXWindows.prototype._zOrder=[{name:"modal",value:!0},{name:"sticked",value:!0},{name:"sticked",value:!1}],dhtmlXWindows.prototype._vpPull={},dhtmlXWindows.prototype._vpOf={},dhtmlXWindows.prototype._vpPullAdd=function(){if(null!=this.vp){var e=null;for(var c in this._vpPull)this._vpPull[c].vp==this.vp&&(this._vpPull[c].count++,e=c);null==e&&(this._vpPull[window.dhx4.newId()]={vp:this.vp,count:1}),this.vp==document.body&&1==this.conf.vp_of_auto&&this._vpOfInit(),this._vpOfUpd()}},dhtmlXWindows.prototype._vpPullRemove=function(){if(null==this.vp)return 0;var e=0;for(var c in this._vpPull)this._vpPull[c].vp==this.vp&&0==(e=--this._vpPull[c].count)&&(this._vpPull[c].vp=null,this._vpPull[c].count=null,delete this._vpPull[c]);return this._vpOfClear(),e},dhtmlXWindows.prototype._vpOfInit=function(){this._vpOf[this.conf.vp_of_id]=!0},dhtmlXWindows.prototype._vpOfClear=function(){this._vpOf[this.conf.vp_of_id]=!1,delete this._vpOf[this.conf.vp_of_id],this._vpOfUpd()},dhtmlXWindows.prototype._vpOfUpd=function(){var e=!1;for(var c in this._vpOf)e=e||this._vpOf[c];1==e?null==document.body.className.match(/dhxwins_vp_auto/)&&(document.body.className+=" dhxwins_vp_auto"):null!=document.body.className.match(/dhxwins_vp_auto/)&&(document.body.className=String(document.body.className).replace(/\s{0,}dhxwins_vp_auto/gi,""))},dhtmlXWindows.prototype.attachViewportTo=function(h){var e=this._vpPullRemove();if(this.conf.vp_custom){for(;0<this.vp.childNodes.length;)this.vp.removeChild(this.vp.lastChild);this.vp.parentNode.removeChild(this.vp),this.vp=null}else null!=this.vp&&0==e&&(this.vp.className=String(this.vp.className).replace(new RegExp("\\s{1,}dhxwins_vp_"+this.conf.skin),""));if(null==h)this.vp=null;else{this.vp="string"==typeof h?document.getElementById(h):h;var g="dhxwins_vp_"+this.conf.skin;for(var c in this.vp.className.indexOf(g)<0&&(this.vp.className+=" "+g),h=null,this.w)this.vp.appendChild(this.w[c].win);this.conf.vp_custom=!1}this.vp==document.body&&(document.body.style.position="static"),this._vpPullAdd()},dhtmlXWindows.prototype.setViewport=function(c,l,g,a,h){var e=document.createElement("DIV");e.style.position="absolute",e.style.left=c+"px",e.style.top=l+"px",e.style.width=g+"px",e.style.height=a+"px",void 0===h||null==h?h=document.body:"string"==typeof h&&(h=document.getElementById(h)),h.appendChild(e),this.attachViewportTo(e),this.conf.vp_custom=!0,h=e=null},dhtmlXWindows.prototype._winSetPosition=function(g,a,e){var c=this.w[g];c.conf.maxed&&(c.conf.lastMX+=a-c.conf.x,c.conf.lastMY+=e-c.conf.y),c.conf.x=a,c.conf.y=e,c.win.style.left=c.conf.x+"px",c.win.style.top=c.conf.y+"px",this._winAdjustFRMPosition(g),c=null},dhtmlXWindows.prototype._winAdjustPosition=function(m,c,l){var e=this.w[m];void 0===c&&(c=e.conf.x),void 0===l&&(l=e.conf.y);var a=e.conf.keep_in_vp?0:-e.conf.w+this.conf.vp_pos_ofs,h=e.conf.keep_in_vp?this.vp.clientWidth-e.conf.w:this.vp.clientWidth-this.conf.vp_pos_ofs;c<a?c=a:h<c&&(c=h);var g=e.conf.keep_in_vp?this.vp.clientHeight-e.conf.h:this.vp.clientHeight-this.conf.vp_pos_ofs;l<0?l=0:g<l&&(l=g),c==e.conf.x&&l==e.conf.y||this._winSetPosition(m,c,l),e=null},dhtmlXWindows.prototype._winSetSize=function(n,l,e,m,c){var g=this.w[n],a=null!=l?l:g.conf.w,h=null!=e?e:g.conf.h;null==this.conf.ofs_w&&(g.win.style.width=a+"px",g.win.style.height=h+"px",this.conf.ofs_w=g.win.offsetWidth-a,this.conf.ofs_h=g.win.offsetHeight-h),null!=g.conf.min_w&&a<g.conf.min_w&&(a=g.conf.min_w),null!=g.conf.max_w&&a>g.conf.max_w&&(a=g.conf.max_w),!g.conf.parked&&null!=g.conf.min_h&&h<g.conf.min_h&&(h=g.conf.min_h),null!=g.conf.max_h&&h>g.conf.max_h&&(h=g.conf.max_h),g.conf.keep_in_vp&&(a>this.vp.clientWidth&&(a=this.vp.clientWidth),h>this.vp.clientHeight&&(h=this.vp.clientHeight)),g.win.style.width=a-this.conf.ofs_w+"px",g.win.style.height=h-this.conf.ofs_h+"px",g.conf.w=a,g.conf.h=h,this._winAdjustFRMSize(n),c&&this._winAdjustPosition(n,g.conf.x,g.conf.y),g.conf.parked||1==m||this._winAdjustCell(n),g=null},dhtmlXWindows.prototype._winMinmax=function(h,e){if((void 0===e||this.w[h].conf.maxed!=e)&&0!=this.w[h].conf.allow_resize){var c=this.w[h];if(c.conf.parked&&this._winPark(h,!1),c.conf.maxed)this._winSetSize(h,c.conf.lastMW,c.conf.lastMH),this._winAdjustPosition(h,c.conf.lastMX,c.conf.lastMY),c.conf.maxed=!1;else{var a=0,g=0;null!=c.conf.max_w&&(a=c.conf.x+Math.round(c.conf.w-c.conf.max_w)/2),null!=c.conf.max_h&&(g=Math.max(c.conf.y+Math.round(c.conf.h-c.conf.max_h)/2,0)),c.conf.lastMX=c.conf.x,c.conf.lastMY=c.conf.y,c.conf.lastMW=c.conf.w,c.conf.lastMH=c.conf.h,this._winSetSize(h,this.vp.clientWidth,this.vp.clientHeight),this._winAdjustPosition(h,a,g),c.conf.maxed=!0}c.b.minmax.setCss(c.conf.maxed?"minmaxed":"minmax"),c.conf.maxed?this._callMainEvent("onMaximize",h):this._callMainEvent("onMinimize",h),c=null}},dhtmlXWindows.prototype._winShow=function(c,a){1!=this.w[c].conf.visible&&(this.w[c].win.style.display="",this.w[c].conf.visible=!0,1!=a&&null!=this.conf.last_active||this._winMakeActive(c,!0),this._callMainEvent("onShow",c))},dhtmlXWindows.prototype._winHide=function(c,a){0!=this.w[c].conf.visible&&(this.w[c].win.style.display="none",this.w[c].conf.visible=!1,this.w[c].conf.actv&&(this.w[c].conf.actv=!1,this.w[c].win.className="dhxwin_inactive",this._winMakeActive(null,!0)),this._callMainEvent("onHide",c))},dhtmlXWindows.prototype._winPark=function(e,a){if(0!=this.w[e].conf.allow_park&&0!=this.w[e].conf.header){var c=this.w[e];1==a&&!1!==this.conf.tr.prop&&(c.win.style[this.conf.tr.prop]=this.conf.tr[c.conf.parked?"height_open":"height_close"],c.conf.tr_ev||(c.win.addEventListener(this.conf.tr.ev,this._winOnParkTrans,!1),c.conf.tr_ev=!0)),c.conf.parked?(c.hdr.className=String(c.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,""),c.hdr.style.zIndex=0,c.conf.parked=!1,c.conf.tr_mode="park",this._winCellSetOpacity(e,"open",a),this._winSetSize(e,c.conf.w,c.conf.lastPH,1==a&&!1!==this.conf.tr.prop),1==a&&!1!==this.conf.tr.prop||(this._callMainEvent("onParkDown",e),c.conf.keep_in_vp&&this._winAdjustPosition(e,c.conf.x,c.conf.y)),1==window.dhx4.isIE8&&0==this.conf.tr.prop&&null!=c.cell.cell.className.match(/dhxwin_parked/)&&(c.cell.cell.className=c.cell.cell.className.replace(/\s{0,}dhxwin_parked/gi,""))):(c.conf.lastPH=c.conf.h,c.hdr.className+=" dhxwin_hdr_parked",0!=a&&0!=this.conf.tr.prop||(c.hdr.style.zIndex=3),c.conf.parked=!0,c.conf.tr_mode="park",this._winCellSetOpacity(e,"close",a),this._winSetSize(e,c.conf.w,c.hdr.offsetHeight+this.conf.ofs_h,1==a&&!1!==this.conf.tr.prop),1==a&&!1!==this.conf.tr.prop||this._callMainEvent("onParkUp",e),1==window.dhx4.isIE8&&0==this.conf.tr.prop&&null==c.cell.cell.className.match(/dhxwin_parked/)&&(c.cell.cell.className+=" dhxwin_parked")),c=null}},dhtmlXWindows.prototype._winCellSetOpacity=function(m,l,e,h){var c=this.w[m].cell;for(var g in c.conf.idx)1!={pr1:!0,pr2:!0}[g]&&(1==e&&0!=this.conf.tr.prop&&(c.cell.childNodes[c.conf.idx[g]].style[this.conf.tr.prop]=this.conf.tr["op_"+l]),c.cell.childNodes[c.conf.idx[g]].style.opacity=this.conf.tr["op_v_"+l]);c=null},dhtmlXWindows.prototype._winCellClearOpacity=function(g){var c=this.w[g].cell;for(var e in c.conf.idx)1!={pr1:!0,pr2:!0}[e]&&0!=this.conf.tr.prop&&(c.cell.childNodes[c.conf.idx[e]].style[this.conf.tr.prop]="");c=null},dhtmlXWindows.prototype._winStick=function(c,a){void 0!==a&&this.w[c].conf.sticked==a||(this.w[c].conf.sticked=!this.w[c].conf.sticked,this.w[c].b.stick.setCss(this.w[c].conf.sticked?"sticked":"stick"),this._winMakeActive(this.conf.last_active,!0),this.w[c].conf.sticked?this._callMainEvent("onStick",c):this._callMainEvent("onUnStick",c))},dhtmlXWindows.prototype._winClose=function(g){if(!0===this._callMainEvent("onClose",g)||1==this.conf.unloading){var e=this.w[g];for(var c in e.conf.fs_mode&&e.cell.setToFullScreen(!1),e.conf.modal&&this._winSetModal(g,!1),window.dhx4.zim.clear(e.conf.z_id),null!=this.cm&&null!=this.cm.icon[g]&&this._detachContextMenu("icon",g,null),"function"==typeof window.addEventListener?(e.win.removeEventListener("mousedown",this._winOnMouseDown,!1),e.win.removeEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&e.win.removeEventListener("dblclick",this._winOnMouseDown,!1),1==this.conf.dnd_enabled&&null!=window.dhx4.dnd.evs.start&&(e.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),1!=window.dhx4.dnd.p_en&&(e.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),e.win.removeEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,!1)))):(e.win.detachEvent("onmousedown",this._winOnMouseDown),e.win.detachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&e.win.attachEvent("ondblclick",this._winOnMouseDown)),e.b)this._winRemoveButton(g,c,!0);for(var c in e.b=null,e.cell._unload(),e.cell=null,e.brd.parentNode.removeChild(e.brd),(e.brd=null)!=e.fr_cover&&(e.fr_cover.parentNode.removeChild(e.fr_cover),e.fr_cover=null),null!=e.fr_m_cover&&(e.fr_m_cover.parentNode.removeChild(e.fr_m_cover),e.fr_m_cover=null),e.hdr._isWinHdr=!0,e.hdr.firstChild._isWinIcon=!0,e.hdr.onselectstart=null,e.hdr.parentNode.removeChild(e.hdr),e.hdr=null,e.conf)e.conf[c]=null,delete e.conf[c];e.conf=null,e.win._idd=null,e.win._isWindow=null,e.win.parentNode.removeChild(e.win),e.win=null,e=null,this.w[g]=null,delete this.w[g],this.conf.unloading||this._winMakeActive(null,!0)}},dhtmlXWindows.prototype._winSetModal=function(m,g,l){if(this.w[m].conf.modal!=g){void 0===l&&(l=!0);var e=this.w[m];if(1==g&&0==e.conf.modal){if(null!=this.conf.last_modal&&this._winSetModal(this.conf.last_modal,!1,!1),null==this.mcover){var h=document.createElement("DIV");h.className="dhxwins_mcover",this.vp.insertBefore(h,e.fr_m_cover||e.win),this.mcover={d:h},this.conf.fr_cover&&(this.mcover.f=document.createElement("IFRAME"),this.mcover.f.className="dhxwins_mcover",this.mcover.f.border=0,this.mcover.f.frameBorder=0,this.vp.insertBefore(this.mcover.f,h)),h=null}else this.mcover.d.nextSibling!=(e.fr_m_cover||e.win)&&(this.vp.insertBefore(this.mcover.d,e.fr_m_cover||e.win),null!=this.mcover.f&&this.vp.insertBefore(this.mcover.f,this.mcover.d));e.conf.modal=!0,this.conf.last_modal=m,this._winMakeActive(m,!0)}else if(0==g&&1==e.conf.modal&&(e.conf.modal=!1,this.conf.last_modal=null,l&&null!=this.mcover)){for(var c in this.mcover)this.vp.removeChild(this.mcover[c]),this.mcover[c]=null;this.mcover=null}e=null}},dhtmlXWindows.prototype._winMouseDownHandler=function(g,c){var a=g.target||g.srcElement;if(!(2<=g.button)){if("button"==c.mode)if("mousedown"==c.press_type)this.conf.button_last=c.button_name;else if(("mouseup"==c.press_type&&c.button_name==this.conf.button_last||"MSPointerDown"==c.press_type||"pointerdown"==c.press_type)&&!(this.conf.button_last=null)!==this._winButtonClick(c.id,c.button_name,g))return;if(("pointerdown"==c.press_type||"mousedown"==c.press_type||"dblclick"==c.press_type)&&"hdr"==c.mode){if(this.conf.dblclick_active=!1,1==this.conf.dblclick_ev)"dblclick"==c.press_type&&(this.conf.dblclick_active=!0);else if(null==this.conf.dblclick_last)this.conf.dblclick_last=(new Date).getTime(),this.dblclick_id=c.id;else{a=(new Date).getTime();this.conf.dblclick_last+this.conf.dblclick_tm>a&&this.dblclick_id==c.id?(this.conf.dblclick_active=!0,this.conf.dblclick_last=null,this.dblclick_id=null):(this.conf.dblclick_last=a,this.dblclick_id=c.id)}if(this.conf.dblclick_active)return void this._winDoHeaderDblClick(c.id)}"mousedown"!=c.press_type&&c.press_type!=window.dhx4.dnd.evs.start||this._winMakeActive(c.id),c.press_type}},dhtmlXWindows.prototype._winDoHeaderDblClick=function(a){"minmax"!=this.conf.dblclick_mode?"park"!=this.conf.dblclick_mode?"function"!=typeof this.conf.dblclick_mode?"function"!=typeof window[this.conf.dblclick_mode]||window[this.conf.dblclick_mode].apply(window,[a]):this.conf.dblclick_mode.apply(window,[a]):this._winPark(a,!0):this._winMinmax(a)},dhtmlXWindows.prototype._winAdjustCell=function(c){var r=this.w[c];if("material"==this.conf.skin)var o=0,n=r.conf.header?r.hdr.offsetHeight:1,g=r.win.clientWidth,s=r.win.clientHeight-n;else o=1,n=r.conf.header?r.hdr.offsetHeight:1,g=r.win.clientWidth-2,s=r.win.clientHeight-n-1;r.brd.style.left=o+"px",r.brd.style.top=n+"px",null==r.conf.brd&&(r.brd.style.width=g+"px",r.brd.style.height=s+"px",r.conf.brd={w:g-r.brd.offsetWidth,h:s-r.brd.offsetHeight}),r.brd.style.width=g+r.conf.brd.w+"px",r.brd.style.height=s+r.conf.brd.h+"px";var e=5;"material"==this.conf.skin&&(e=1);var a=1+e,m=r.conf.header?n:n+e,h=r.brd.clientWidth,l=r.brd.clientHeight;r.cell._setSize(a,m,h,l),r.fr_cover.style.left=a+"px",r.fr_cover.style.top=m+"px",r.fr_cover.style.width=h+"px",r.fr_cover.style.height=l+"px",r=null},dhtmlXWindows.prototype._winAdjustTitle=function(h){var c=this.w[h].hdr.childNodes[0],g=this.w[h].hdr.childNodes[1],e=this.w[h].hdr.childNodes[2],a="material"==this.conf.skin?7:0;g.style.paddingLeft=c.offsetWidth+12+a+"px",g.style.paddingRight=e.offsetWidth+10+a+"px",g=e=c=null},dhtmlXWindows.prototype._callMainEvent=function(c,g){var a=this.w[g];if(a.cell.checkEvent(c))var e=a.cell._callMainEvent(c,[a.cell]);else e=this.callEvent(c,[a.cell]);return a=null,e},dhtmlXWindows.prototype._winInitFRM=function(e){if(1==this.conf.fr_cover){var a=this.w[e],c=document.createElement("IFRAME");c.className="dhxwin_main_fr_cover",c.border=0,c.frameBorder=0,c.style.zIndex=a.win.style.zIndex,a.win.parentNode.insertBefore(c,a.win),a.fr_m_cover=c,c=null}},dhtmlXWindows.prototype._winAdjustFRMSize=function(c){var a=this.w[c];null!=a.fr_m_cover&&(a.fr_m_cover.style.width=a.conf.w+"px",a.fr_m_cover.style.height=a.conf.h+"px"),a=null},dhtmlXWindows.prototype._winAdjustFRMPosition=function(c){var a=this.w[c];null!=a.fr_m_cover&&(a.fr_m_cover.style.left=a.win.style.left,a.fr_m_cover.style.top=a.win.style.top),a=null},dhtmlXWindows.prototype._winAdjustFRMZIndex=function(c){var a=this.w[c];null!=a.fr_m_cover&&(a.fr_m_cover.style.zIndex=a.win.style.zIndex),a=null},dhtmlXWindowsCell.prototype=new dhtmlXCellObject,dhtmlXWindowsCell.prototype.setText=function(a){this.wins.w[this._idd].conf.text=a,this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=a},dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].conf.text},dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].conf.allow_move=!0},dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].conf.allow_move=!1},dhtmlXWindowsCell.prototype.isMovable=function(){return 1==this.wins.w[this._idd].conf.allow_move},dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].conf.allow_resize=!0,this.wins.w[this._idd].b.minmax.enable()},dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].conf.allow_resize=!1,this.wins.w[this._idd].b.minmax.disable()},dhtmlXWindowsCell.prototype.isResizable=function(){return 1==this.wins.w[this._idd].conf.allow_resize},dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,!0)},dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,!1)},dhtmlXWindowsCell.prototype.isMaximized=function(){return 1==this.wins.w[this._idd].conf.maxed},dhtmlXWindowsCell.prototype.setPosition=function(a,c){this.wins._winSetPosition(this._idd,a,c)},dhtmlXWindowsCell.prototype.getPosition=function(){var a=this.wins.w[this._idd],c=[a.conf.x,a.conf.y];return a=null,c},dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)},dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,!0)},dhtmlXWindowsCell.prototype.isParked=function(){return 1==this.wins.w[this._idd].conf.parked},dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].conf.allow_park=!0,this.wins.w[this._idd].b.park.enable()},dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].conf.allow_park=!1,this.wins.w[this._idd].b.park.disable()},dhtmlXWindowsCell.prototype.isParkable=function(){return 1==this.wins.w[this._idd].conf.allow_park},dhtmlXWindowsCell.prototype.show=function(a){this.wins._winShow(this._idd,window.dhx4.s2b(a))},dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)},dhtmlXWindowsCell.prototype.isHidden=function(){return 1!=this.wins.w[this._idd].conf.visible},dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,!0)},dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,!1)},dhtmlXWindowsCell.prototype.isSticked=function(){return 1==this.wins.w[this._idd].conf.sticked},dhtmlXWindowsCell.prototype.setDimension=function(e,a){var c=this.wins.w[this._idd];c.conf.parked&&this.wins._winPark(this._idd,!1),c.conf.maxed?(null!=e&&(c.conf.lastMW=e),null!=a&&(c.conf.lastMH=a),this.wins._winMinmax(this._idd)):this.wins._winSetSize(this._idd,e,a,!1,!0),c=null},dhtmlXWindowsCell.prototype.getDimension=function(){var a=this.wins.w[this._idd],c=[a.conf.w,a.conf.h];return a=null,c},dhtmlXWindowsCell.prototype.setMinDimension=function(e,a){var c=this.wins.w[this._idd];c.conf.min_w=e,c.conf.min_h=a,this.wins._winSetSize(this._idd,c.conf.w,c.conf.h),c=null},dhtmlXWindowsCell.prototype.getMinDimension=function(){var a=this.wins.w[this._idd],c=[a.conf.min_w,a.conf.min_h];return a=null,c},dhtmlXWindowsCell.prototype.setMaxDimension=function(e,a){var c=this.wins.w[this._idd];c.conf.max_w=e,c.conf.max_h=a,this.wins._winSetSize(this._idd,c.conf.w,c.conf.h),c=null},dhtmlXWindowsCell.prototype.getMaxDimension=function(){var a=this.wins.w[this._idd],c=[a.conf.max_w,a.conf.max_h];return a=null,c},dhtmlXWindowsCell.prototype.keepInViewport=function(a){this.wins.w[this._idd].conf.keep_in_vp=window.dhx4.s2b(a)},dhtmlXWindowsCell.prototype.center=function(){var e=this.wins.vp,c=this.wins.w[this._idd],a=Math.round((e.clientWidth-c.conf.w)/2),g=Math.round((e.clientHeight-c.conf.h)/2);this.wins._winSetPosition(this._idd,a,g),e=c=null},dhtmlXWindowsCell.prototype.centerOnScreen=function(){for(var c=this.wins.w[this._idd],l=window.dhx4.screenDim(),h=window.dhx4.absLeft(this.wins.vp),g=window.dhx4.absTop(this.wins.vp),e=this.wins.vp.parentNode;null!=e;)e.scrollLeft&&(h-=e.scrollLeft),e.scrollTop&&(g-=e.scrollTop),e=e.parentNode;var a=Math.round((l.right-l.left-c.conf.w)/2),m=Math.round((l.bottom-l.top-c.conf.h)/2);this.wins._winAdjustPosition(this._idd,a-h,m-g),d=c=null},dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,!0)},dhtmlXWindowsCell.prototype.bringToBottom=function(){var a=this.wins.w[this._idd].conf.actv?null:this.wins.conf.last_active;window.dhx4.zim.clear(this.wins.w[this._idd].conf.z_id),this.wins.w[this._idd].win.style.zIndex=0,this.wins._winMakeActive(a,!0)},dhtmlXWindowsCell.prototype.isOnTop=function(){return 1==this.wins.w[this._idd].conf.actv},dhtmlXWindowsCell.prototype.isOnBottom=function(){var e={id:null,z:1/0};for(var c in this.wins.w)this.wins.w[c].conf.visible&&this.wins.w[c].win.style.zIndex<e.z&&(e.id=c,e.z=this.wins.w[c].win.style.zIndex);return e.id==this._idd},dhtmlXWindowsCell.prototype.showHeader=function(){var a=this.wins.w[this._idd];0==a.conf.header&&(a.hdr.className=String(a.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),a.brd.className=String(a.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),this.conf.cells_cont=null,a.conf.brd=null,a.conf.header=!0,this.wins._winAdjustCell(this._idd)),a=null},dhtmlXWindowsCell.prototype.hideHeader=function(){var a=this.wins.w[this._idd];1==a.conf.header&&(a.conf.parked&&this.wins._winPark(this._idd,!1),a.hdr.className+=" dhxwin_hdr_hidden",a.brd.className+=" dhxwin_hdr_hidden",this.conf.cells_cont=null,a.conf.brd=null,a.conf.header=!1,this.wins._winAdjustCell(this._idd)),a=null},dhtmlXWindowsCell.prototype.setModal=function(a){this.wins._winSetModal(this._idd,window.dhx4.s2b(a))},dhtmlXWindowsCell.prototype.isModal=function(){return 1==this.wins.w[this._idd].conf.modal},dhtmlXWindowsCell.prototype._adjustByCont=function(a,c){a+=this.wins.w[this._idd].conf.w-this.conf.size.w,c+=this.wins.w[this._idd].conf.h-this.conf.size.h,this.wins._winSetSize(this._idd,a,c)},dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)},dhtmlXWindowsCell.prototype.setIconCss=function(a){this.wins.w[this._idd].hdr.firstChild.className="dhxwin_icon "+a,this.wins._winAdjustTitle(this._idd)},dhtmlXWindowsCell.prototype.setToFullScreen=function(c){c=window.dhx4.s2b(c);var a=this.wins.w[this._idd];a.conf.fs_mode!=c&&(null==this.wins.fsn&&(this.wins.fsn=document.createElement("DIV"),this.wins.fsn.className=this.wins.vp.className+" dhxwins_vp_fs",document.body.appendChild(this.wins.fsn)),c?(this.wins.fsn.appendChild(a.win),this.maximize(),this.hideHeader()):(this.wins.vp.appendChild(a.win),this.minimize(),this.showHeader(),0==this.wins.fsn.childNodes.length&&(this.wins.fsn.parentNode.removeChild(this.wins.fsn),this.wins.fsn=null)),a.conf.fs_mode=c),a=null},dhtmlXWindowsCell.prototype.button=function(a){return"minmax1"!=a&&"minmax2"!=a||(a="minmax"),this.wins.w[this._idd].b[a]},dhtmlXWindowsCell.prototype.addUserButton=function(m,l,e){var a=new dhtmlXWindowsButton(this.wins,this._idd,m,e,!0),g=null,c=this.wins.w[this._idd].hdr.lastChild;isNaN(l)?l=0:l<0&&(l=0),null!=c.childNodes[l]&&(g=c.childNodes[l]),null!=g?c.insertBefore(a.button,g):c.appendChild(a.button),this.wins.w[this._idd].b[m]=a,a=g=c=null,this.wins._winAdjustTitle(this._idd)},dhtmlXWindowsCell.prototype.removeUserButton=function(a){null!=this.wins.w[this._idd].b[a]&&1==this.wins.w[this._idd].b[a].conf.custom&&this.wins._winRemoveButton(this._idd,a)},window.dhtmlXWindowsButton=function(h,c,a,g,e){return this.conf={wins:h,winId:c,name:a,enabled:!0,visible:!0,custom:!0},this.button=document.createElement("DIV"),this.button._buttonName=a,this.button.title=g,this.enable=function(){this.conf.enabled=!0,this.setCss(this.conf.css)},this.disable=function(){this.conf.enabled=!1,this.setCss(this.conf.css)},this.isEnabled=function(){return 1==this.conf.enabled},this.show=function(){this.button.style.display="",this.conf.visible=!0,this.conf.wins._winAdjustTitle(this.conf.winId)},this.hide=function(){this.button.style.display="none",this.conf.visible=!1,this.conf.wins._winAdjustTitle(this.conf.winId)},this.isHidden=function(){return 0==this.conf.visible},this.setCss=function(m){this.conf.css=m;var l=this.conf.enabled?"":"_dis";this.button.className="dhxwin_button"+l+" dhxwin_button_"+this.conf.css+l},this._doOnClick=function(l){return this.callEvent("onClick",[this.conf.wins.w[this.conf.winId].cell,this])},this.unload=function(l){dhx4._eventable(this,"clear"),this.button._buttonName=null,this.button.parentNode.removeChild(this.button),null!=this.conf.wins.cm&&null!=this.conf.wins.cm.button[this.conf.winId]&&null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]&&this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name),this.button=null,this.enable=null,this.disable=null,this.isEnabled=null,this.show=null,this.hide=null,this.isHidden=null,this.setCss=null,this.unload=null,1!=l&&this.conf.wins._winAdjustTitle(this.conf.winId),this.conf.wins=null,this.conf.winId=null,this.conf=null},this.setCss(a),dhx4._eventable(this),this},dhtmlXWindows.prototype._winButtonClick=function(e,a,c){return!this.w[e].b[a].isEnabled()||(!0===this.w[e].b[a]._doOnClick()?("help"==a&&this._callMainEvent("onHelp",e),"park"==a&&this._winPark(e,!0),"minmax"==a&&this._winMinmax(e),"stick"==a?(this._winStick(e),!1):"close"!=a||(this._winClose(e),!1)):void 0)},dhtmlXWindows.prototype._winRemoveButton=function(e,a,c){this.w[e].b[a].unload(c),this.w[e].b[a]=null,delete this.w[e].b[a]},dhtmlXWindows.prototype._dndInitModule=function(){var a=this;this.conf.dnd_enabled=!0,this.conf.dnd_tm=null,this.conf.dnd_time=0,this._dndOnMouseDown=function(h,l){if(!a.conf.dblclick_active&&(h.preventDefault?h.preventDefault():h.returnValue=!1,!0===a._callMainEvent("onBeforeMoveStart",l))){a.conf.dnd={id:l,x:a._dndPos(h,"X"),y:a._dndPos(h,"Y"),ready:!0,css:!1,css_touch:!1,css_vp:!1,tr:null,mode:"def",moved:!1,prevent:!1},a.w[l].conf.keep_in_vp?(a.conf.dnd.minX=0,a.conf.dnd.maxX=a.vp.clientWidth-a.w[l].conf.w,a.conf.dnd.minY=0,a.conf.dnd.maxY=a.vp.clientHeight-a.w[l].conf.h):(a.conf.dnd.minX=-a.w[l].conf.w+a.conf.vp_pos_ofs,a.conf.dnd.maxX=a.vp.clientWidth-a.conf.vp_pos_ofs,a.conf.dnd.minY=0,a.conf.dnd.maxY=a.vp.clientHeight-a.conf.vp_pos_ofs);for(var c=["MozTransform","WebkitTransform","OTransform","msTransform","transform"],g=0;g<c.length;g++)null!=document.documentElement.style[c[g]]&&null==a.conf.dnd.tr&&(a.conf.dnd.tr=c[g],a.conf.dnd.mode="tr");"tr"==a.conf.dnd.mode&&(a.w[l].win.style[a.conf.dnd.tr]="translate(0px,0px)",null!=a.w[l].fr_m_cover&&(a.w[l].fr_m_cover.style[a.conf.dnd.tr]=a.w[l].win.style[a.conf.dnd.tr])),0==window.dhx4.dnd._mTouch(h)&&h.type==window.dhx4.dnd.evs.start?(0==a.conf.dnd.css_touch&&(a.w[l].win.className+=" dhxwin_dnd_touch",a.conf.dnd.css_touch=!0),0==a.conf.dnd.css_vp&&(a.vp.className+=" dhxwins_vp_dnd",a.conf.dnd.css_vp=!0)):a._dndInitEvents()}},this._dndOnMouseMove=function(l){l=l||event;var h=a.conf.dnd,c=a._dndPos(l,"X")-h.x,m=a._dndPos(l,"Y")-h.y;if(l.type==window.dhx4.dnd.evs.move&&1!=h.moved&&(20<Math.abs(c)||20<Math.abs(m)))return null!=a.conf.dnd_tm&&(window.clearTimeout(a.conf.dnd_tm),a.conf.dnd_tm=null),void window.removeEventListener(window.dhx4.dnd.evs.start,a._dndOnMouseMove,!1);if(1==h.ready){var g=a.w[h.id];l.preventDefault?l.preventDefault():l.returnValue=!1,1!=h.css&&(0==h.css_touch&&(g.win.className+=" dhxwin_dnd"),g.fr_cover.className+=" dhxwin_fr_cover_dnd",h.css=!0),1!=h.css_vp&&(a.vp.className+=" dhxwins_vp_dnd",h.css_vp=!0),h.newX=g.conf.x+c,h.newY=g.conf.y+m,"tr"==h.mode?(h.newX=Math.min(Math.max(h.newX,h.minX),h.maxX),c=h.newX-g.conf.x,h.newY=Math.min(Math.max(h.newY,h.minY),h.maxY),m=h.newY-g.conf.y,g.win.style[h.tr]="translate("+c+"px,"+m+"px)",null!=g.fr_m_cover&&(g.fr_m_cover.style[h.tr]=g.win.style[h.tr])):(h.newX<h.minX||h.newX>h.maxX?h.newX=Math.min(Math.max(h.newX,h.minX),h.maxX):h.x=a._dndPos(l,"X"),h.newY<h.minY||h.newY>h.maxY?h.newY=Math.min(Math.max(h.newY,h.minY),h.maxY):h.y=a._dndPos(l,"Y"),a._winSetPosition(h.id,h.newX,h.newY)),h.moved=!0,g=h=null}},this._dndOnMouseUp=function(h){if(h=h||event,a._dndUnloadEvents(),null!=a.conf.dnd&&null!=a.conf.dnd.id){var g=a.conf.dnd,c=a.w[g.id];null!=g.newX&&"tr"==g.mode&&(a._winSetPosition(g.id,g.newX,g.newY),c.win.style[g.tr]="translate(0px,0px)",null!=c.fr_m_cover&&(c.fr_m_cover.style[g.tr]=c.win.style[g.tr])),1==g.css&&(0==g.css_touch&&(c.win.className=String(c.win.className).replace(/\s{0,}dhxwin_dnd/gi,"")),c.fr_cover.className=String(c.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,"")),1==g.css_touch&&(c.win.className=String(c.win.className).replace(/\s{0,}dhxwin_dnd_touch/gi,"")),1==g.css_vp&&(a.vp.className=String(a.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,"")),1==g.moved?a._callMainEvent("onMoveFinish",g.id):a._callMainEvent("onMoveCancel",g.id),c=g=a.conf.dnd=null}1==window.dhx4.dnd.p_en&&h.type==window.dhx4.dnd.evs.end&&(window.dhx4.dnd._touchOn(),window.removeEventListener(window.dhx4.dnd.evs.end,a._dndOnMouseUp,!1),window.removeEventListener(window.dhx4.dnd.evs.move,a._dndOnMouseMove,!1),null!=a.conf.dnd_tm&&window.clearTimeout(a.conf.dnd_tm),a.conf.dnd_tm=null)},this._dndOnSelectStart=function(c){return(c=c||event).preventDefault?c.preventDefault():c.returnValue=!1,!1},this._dndInitEvents=function(){"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._dndOnMouseMove,!1),window.addEventListener("mouseup",this._dndOnMouseUp,!1),window.addEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove),document.body.attachEvent("onmouseup",this._dndOnMouseUp),document.body.attachEvent("onselectstart",this._dndOnSelectStart))},this._dndUnloadEvents=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._dndOnMouseMove,!1),window.removeEventListener("mouseup",this._dndOnMouseUp,!1),window.removeEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove),document.body.detachEvent("onmouseup",this._dndOnMouseUp),document.body.detachEvent("onselectstart",this._dndOnSelectStart))},this._dndUnloadModule=function(){this.detachEvent(this.conf.dnd_evid),this.conf.dnd_evid=null,this._dndOnMouseDown=null,this._dndOnMouseMove=null,this._dndOnMouseUp=null,this._dndOnSelectStart=null,this._dndInitEvents=null,this._dndUnloadEvents=null,this._dndInitModule=null,this._dndUnloadModule=null,a=null},this._dndPos=function(e,c){var g=e[this.conf.dnd_ev_prefix+c];return null!=g&&0!=g||null==e.touches||(g=e.touches[0][this.conf.dnd_ev_prefix+c]),g},this.conf.dnd_evid=this.attachEvent("_winMouseDown",function(g,c){if(null!=this.w[c.id]&&1==this.w[c.id].conf.allow_move&&!(void 0!==g.button&&2<=g.button)){if(g.type==window.dhx4.dnd.evs.start){if("hdr"==c.mode){if(this.w[c.id].conf.maxed&&null==this.w[c.id].conf.max_w&&null==this.w[c.id].conf.max_h)return;this.conf.dnd_ev_prefix="page",this.conf.dnd={x:this._dndPos(g,"X"),y:this._dndPos(g,"Y")},this.conf.dnd_time<1?this._dndOnMouseDown(g,c.id):(null!=this.conf.dnd_tm&&window.clearTimeout(this.conf.dnd_tm),this.conf.dnd_tm=window.setTimeout(function(){a._dndOnMouseDown(g,c.id)},this.conf.dnd_time)),1==window.dhx4.dnd.p_en&&(window.dhx4.dnd._touchOff(),window.addEventListener(window.dhx4.dnd.evs.end,this._dndOnMouseUp,!1)),window.addEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,!1)}return!1}if(g.type==window.dhx4.dnd.evs.end)return null!=this.conf.dnd_tm&&(window.clearTimeout(this.conf.dnd_tm),this.conf.dnd_tm=null),this._dndOnMouseUp(g),window.removeEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,!1),!1;if(this.conf.dnd_ev_prefix="client","hdr"==c.mode&&"mousedown"==g.type&&(!this.w[c.id].conf.maxed||null!=this.w[c.id].conf.max_w||null!=this.w[c.id].conf.max_h))return g.preventDefault?g.preventDefault():g.returnValue=!1,this._dndOnMouseDown(g,c.id),!1}})},dhtmlXWindowsCell.prototype._initResize=function(){var a=this,c=navigator.userAgent;this.conf.resize={b_width:6,c_type:0<c.indexOf("MSIE 10.0")||0<c.indexOf("MSIE 9.0")||0<c.indexOf("MSIE 8.0")||0<c.indexOf("MSIE 7.0")||0<c.indexOf("MSIE 6.0"),btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&void 0===window.addEventListener?1:0},this._rOnCellMouseMove=function(n){if(1==a.wins.conf.resize_actv||0==a.wins.w[a._idd].conf.allow_resize||1==a.conf.progress||1==a.wins.w[a._idd].conf.maxed||1==a.wins.w[a._idd].conf.fs_mode){var l=a.wins.w[a._idd].brd;return"default"!=l.style.cursor&&(l.style.cursor="default"),void(l=null)}n=n||event;var w=a.wins.w[a._idd].brd,g=a.conf.resize,s=0==a.wins.w[a._idd].conf.header,u=n.clientX,o=n.clientY;u+=document.documentElement.scrollLeft||document.body.scrollLeft||0,o+=document.documentElement.scrollTop||document.body.scrollTop||0;var h=window.dhx4.absLeft(w),v=window.dhx4.absTop(w),m="";u<=h+g.b_width?m="w":u>=h+w.offsetWidth-g.b_width&&(m="e"),o>=v+w.offsetHeight-g.b_width?m="s"+m:s&&o<=v+g.b_width&&(m="n"+m),""==m&&(m=!1),g.mode!=m&&(g.mode=m,w.style.cursor=0==m?"default":m+"-resize"),w=g=null},this._rOnCellMouseDown=function(m){if((void 0===(m=m||event).button||m.button==a.conf.resize.btn_left)&&0!=a.conf.resize.mode&&1!=a.conf.progress&&0!=a.wins.w[a._idd].conf.allow_resize&&1!=a.wins.w[a._idd].conf.fs_mode&&(m.preventDefault?m.preventDefault():m.returnValue=!1,!0===a.wins._callMainEvent("onBeforeResizeStart",a._idd))){var g=a.wins.w[a._idd],l=a.conf.resize;if(a.wins.conf.resize_actv=!0,l.min_w=g.conf.min_w,l.min_h=g.conf.min_h,l.max_w=g.conf.max_w||1/0,l.max_h=g.conf.max_h||1/0,"layout"==g.cell.dataType&&null!=g.cell.dataObj&&"function"==typeof g.cell.dataObj._getWindowMinDimension){var h=g.cell.dataObj._getWindowMinDimension(g.cell);l.min_w=Math.max(h.w,l.min_w),l.min_h=Math.max(h.h,l.min_h)}l.vp_l=a.wins.conf.vp_pos_ofs,l.vp_r=a.wins.vp.clientWidth-a.wins.conf.vp_pos_ofs,l.vp_b=a.wins.vp.clientHeight-a.wins.conf.vp_pos_ofs,l.x=m.clientX,l.y=m.clientY,"function"==typeof window.addEventListener?(window.addEventListener("mousemove",a._rOnWinMouseMove,!1),window.addEventListener("mouseup",a._rOnWinMouseUp,!1),window.addEventListener("selectstart",a._rOnSelectStart,!1)):(document.body.attachEvent("onmousemove",a._rOnWinMouseMove),document.body.attachEvent("onmouseup",a._rOnWinMouseUp),document.body.attachEvent("onselectstart",a._rOnSelectStart)),l.resized=!1,l.vp_cursor=a.wins.vp.style.cursor,a.wins.vp.style.cursor=l.mode+"-resize",g=l=null}},this._rOnCellContextMenu=function(g){return(g=g||event).preventDefault?g.preventDefault():g.returnValue=!1,!1},this._rOnWinMouseMove=function(m){m=m||event;var h=a.wins.w[a._idd],l=a.conf.resize;l.resized||(h.fr_cover.className+=" dhxwin_fr_cover_resize",l.resized=!0);var g=m.clientX-l.x,n=m.clientY-l.y;0<=l.mode.indexOf("e")?(l.rw=Math.min(Math.max(h.conf.w+g,l.min_w),l.max_w),l.rx=null,h.conf.x+l.rw<l.vp_l?l.rw=l.vp_l-h.conf.x:h.conf.x+l.rw>a.wins.vp.clientWidth&&(l.rw=a.wins.vp.clientWidth-h.conf.x)):0<=l.mode.indexOf("w")&&(l.rw=Math.min(Math.max(h.conf.w-g,l.min_w),l.max_w),l.rx=h.conf.x+h.conf.w-l.rw,l.rx<0?(l.rw=l.rw+l.rx,l.rx=0):l.rx>l.vp_r&&(l.rw=l.rw-l.vp_r,l.rx=l.vp_r)),0<=l.mode.indexOf("s")?(l.rh=Math.min(Math.max(h.conf.h+n,l.min_h),l.max_h),l.ry=null,h.conf.y+l.rh>a.wins.vp.clientHeight&&(l.rh=a.wins.vp.clientHeight-h.conf.y)):0<=l.mode.indexOf("n")&&(l.rh=Math.min(Math.max(h.conf.h-n,l.min_h),l.max_h),l.ry=h.conf.y+h.conf.h-l.rh,l.ry<0?(l.rh=l.rh+l.ry,l.ry=0):l.ry>l.vp_b&&(l.rh=l.rh-l.vp_b,l.ry=l.vp_b)),a._rAdjustSizer(),h=l=null},this._rOnWinMouseUp=function(){var g=a.conf.resize,e=a.wins.w[a._idd];a.wins.conf.resize_actv=!1,a.wins.vp.style.cursor=g.vp_cursor,e.fr_cover.className=String(e.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,""),g.resized&&(a.wins._winSetSize(a._idd,g.rw,g.rh),null==g.rx&&(g.rx=e.conf.x),null==g.ry&&(g.ry=e.conf.y),g.rx==e.conf.x&&g.ry==e.conf.y||a.wins._winSetPosition(a._idd,g.rx,g.ry)),null!=g.obj&&(g.obj.parentNode.removeChild(g.obj),g.obj=null),null!=g.objFR&&(g.objFR.parentNode.removeChild(g.objFR),g.objFR=null),"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",a._rOnWinMouseMove,!1),window.removeEventListener("mouseup",a._rOnWinMouseUp,!1),window.removeEventListener("selectstart",a._rOnSelectStart,!1)):(document.body.detachEvent("onmousemove",a._rOnWinMouseMove),document.body.detachEvent("onmouseup",a._rOnWinMouseUp),document.body.detachEvent("onselectstart",a._rOnSelectStart)),1==g.resized?("layout"==a.dataType&&null!=a.dataObj&&a.dataObj.callEvent("onResize",[]),a.wins._callMainEvent("onResizeFinish",a._idd)):a.wins._callMainEvent("onResizeCancel",a._idd),g.mode="",e=g=null},this._rOnSelectStart=function(g){return(g=g||event).preventDefault?g.preventDefault():g.returnValue=!1,!1},this._rInitSizer=function(){var g=a.conf.resize,e=a.wins.w[a._idd];g.obj=document.createElement("DIV"),g.obj.className="dhxwin_resize",g.obj.style.zIndex=e.win.style.zIndex,g.obj.style.cursor=g.mode+"-resize",a.wins.vp.appendChild(g.obj),1==a.wins.conf.fr_cover&&(g.objFR=document.createElement("IFRAME"),g.objFR.className="dhxwin_resize_fr_cover",g.objFR.style.zIndex=g.obj.style.zIndex,a.wins.vp.insertBefore(g.objFR,g.obj)),g.rx=e.conf.x,g.ry=e.conf.y,g.rw=e.conf.w,g.rh=e.conf.h,g=null},this._rAdjustSizer=function(){var e=a.conf.resize;e.obj||this._rInitSizer(),e.obj.style.width=e.rw+"px",e.obj.style.height=e.rh+"px",null!=e.rx&&(e.obj.style.left=e.rx+"px"),null!=e.ry&&(e.obj.style.top=e.ry+"px"),null!=e.objFR&&(e.objFR.style.width=e.obj.style.width,e.objFR.style.height=e.obj.style.height,null!=e.rx&&(e.objFR.style.left=e.obj.style.left),null!=e.ry&&(e.objFR.style.top=e.obj.style.top)),e=null},"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.addEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.addEventListener("mousedown",this._rOnCellMouseDown,!1),this.wins.w[this._idd].brd.addEventListener("contextmenu",this._rOnCellContextMenu,!1)):(this.wins.w[this._idd].brd.attachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.attachEvent("onmousedown",this._rOnCellMouseDown),this.wins.w[this._idd].brd.attachEvent("oncontextmenu",this._rOnCellContextMenu)),this._unloadResize=function(){"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.removeEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.removeEventListener("mousedown",this._rOnCellMouseDown,!1),this.wins.w[this._idd].brd.removeEventListener("contextmenu",this._rOnCellContextMenu,!1)):(this.wins.w[this._idd].brd.detachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.detachEvent("onmousedown",this._rOnCellMouseDown),this.wins.w[this._idd].brd.detachEvent("oncontextmenu",this._rOnCellContextMenu)),this._initResize=null,this._rOnCellMouseMove=null,this._rOnCellMouseDown=null,this._rOnWinMouseMove=null,this._rOnWinMouseUp=null,this._rOnSelectStart=null,this._rInitSizer=null,this._rAdjustSizer=null,this._unloadResize=null,this.conf.resize=null,a=null}},dhtmlXWindows.prototype.attachContextMenu=function(a){return this._renderContextMenu("icon",null,null,a)},dhtmlXWindows.prototype.getContextMenu=function(){return null!=this.cm&&null!=this.cm.global?this.cm.global:null},dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu("icon",null,null)},dhtmlXWindowsCell.prototype.attachContextMenu=function(a){return this.wins._renderContextMenu("icon",this._idd,null,a)},dhtmlXWindowsCell.prototype.getContextMenu=function(){return null!=this.wins.cm&&null!=this.wins.cm.icon[this._idd]?this.wins.cm.icon[this._idd]:null},dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu("icon",this._idd,null)},dhtmlXWindowsButton.prototype.attachContextMenu=function(a){return this.conf.wins._renderContextMenu("button",this.conf.winId,this.conf.name,a)},dhtmlXWindowsButton.prototype.getContextMenu=function(){return null==this.conf.wins.cm||null==this.conf.wins.cm.button[this.conf.winId]?null:null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]?this.conf.wins.cm.button[this.conf.winId][this.conf.name]:null},dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)},dhtmlXWindows.prototype._renderContextMenu=function(m,l,e,c){var g=this,a=!1;if(null==this.cm&&(this.cm={global:null,icon:{},button:{}},a=!0),null==l){if(null!=this.cm.global)return}else if("icon"==m){if(null!=this.cm.icon[l])return}else if("button"==m&&null!=this.cm.button[l]&&null!=this.cm.button[l][e])return;null==c&&(c={}),c.parent=null,c.context=!0;var h=new dhtmlXMenuObject(c);return h.setAutoHideMode(!1),h.attachEvent("onShow",function(){this.conf.wins_menu_open=!0}),h.attachEvent("onHide",function(){this.conf.wins_menu_open=!1,g.conf.opened_menu=null}),null==l?this.cm.global=h:"icon"==m?this.cm.icon[l]=h:"button"==m&&(null==this.cm.button[l]&&(this.cm.button[l]={}),this.cm.button[l][e]=h),a&&(this._showContextMenu=function(s,r){if(!(2<=s.button)){if("icon"==r.mode&&null!=r.id&&"mousedown"==r.press_type){if(null==(u=this.cm.icon[r.id]||this.cm.global))return;s.cancelBubble=!0;var o=this.w[r.id].hdr.firstChild;u.conf.wins_menu_open&&this.conf.opened_menu==r.id?u.hideContextMenu():(this._hideContextMenu(),u.showContextMenu(window.dhx4.absLeft(o),window.dhx4.absTop(o)+o.offsetHeight),this.conf.opened_menu=r.id),u=o=null}if("button"==r.mode&&null!=r.id&&"mousedown"==r.press_type){if(null==this.cm.button[r.id]||null==this.cm.button[r.id][r.button_name])return;s.cancelBubble=!0,this.conf.button_last=null;var u=this.cm.button[r.id][r.button_name],n=this.w[r.id].b[r.button_name].button;u.conf.wins_menu_open&&this.conf.opened_menu==r.id?u.hideContextMenu():(this._hideContextMenu(),u.showContextMenu(window.dhx4.absLeft(n),window.dhx4.absTop(n)+n.offsetHeight),this.conf.opened_menu=r.id),u=n=null}}},this._hideContextMenu=function(u){if(null!=u){if("keydown"==(u=u||event).type&&27!=u.keyCode)return;for(var s=u.target||u.srcElement,o=!0;null!=s&&1==o;)null!=s.className&&0<=s.className.search(/SubLevelArea_Polygon/)?o=!1:s=s.parentNode}if(o||null==u){for(var r in null!=g.cm.global&&g.cm.global.hideContextMenu(),g.cm.icon)null!=g.cm.icon[r]&&g.cm.icon[r].hideContextMenu();for(var r in g.cm.button)for(var n in g.cm.button[r])null!=g.cm.button[r][n]&&g.cm.button[r][n].hideContextMenu()}},this._detachContextMenu=function(r,o,n){null!=this.cm&&(null==o?null!=this.cm.global&&(this.cm.global.unload(),this.cm.global=null):"icon"==r?null!=this.cm.icon[o]&&(this.cm.icon[o].unload(),this.cm.icon[o]=null):"button"==r&&null!=this.cm.button[o]&&null!=this.cm.button[o][n]&&(this.cm.button[o][n].unload(),this.cm.button[o][n]=null))},this.attachEvent("_winMouseDown",this._showContextMenu),"function"==typeof window.addEventListener?(window.addEventListener("mousedown",this._hideContextMenu,!1),window.addEventListener("keydown",this._hideContextMenu,!1)):(document.body.attachEvent("onmousedown",this._hideContextMenu),document.body.attachEvent("onkeydown",this._hideContextMenu)),this._unloadContextMenu=function(){this._detachContextMenu("icon",null,null),this.cm=null,"function"==typeof window.addEventListener?(window.removeEventListener("mousedown",this._hideContextMenu,!1),window.removeEventListener("keydown",this._hideContextMenu,!1)):(document.body.detachEvent("onmousedown",this._hideContextMenu),document.body.detachEvent("onkeydown",this._hideContextMenu)),g=null}),h},window.dhtmlx||(window.dhtmlx={}),function(){var r=null;function u(A,x){var y=A.callback;s(!1),A.box.parentNode.removeChild(A.box),r=A.box=null,y&&y(x)}function a(y){if(r){var x=(y=y||event).which||event.keyCode;return dhtmlx.message.keyboard&&(13!=x&&32!=x||u(r,!0),27==x&&u(r,!1)),y.preventDefault&&y.preventDefault(),!(y.cancelBubble=!0)}}function s(y){s.cover||((s.cover=document.createElement("DIV")).onkeydown=a,s.cover.className="dhx_modal_cover",document.body.appendChild(s.cover));document.body.scrollHeight;s.cover.style.display=y?"inline-block":"none"}function l(y,x){return"<div class='dhtmlx_popup_button' result='"+x+"' ><div>"+y+"</div></div>"}function w(C,D,F){var E=C.tagName?C:function(y,C,F){var E=document.createElement("DIV");E.className=" dhtmlx_modal_box dhtmlx-"+y.type,E.setAttribute("dhxbox",1);var x="";if(y.width&&(E.style.width=y.width),y.height&&(E.style.height=y.height),y.title&&(x+='<div class="dhtmlx_popup_title">'+y.title+"</div>"),x+='<div class="dhtmlx_popup_text"><span>'+(y.content?"":y.text)+'</span></div><div  class="dhtmlx_popup_controls">',C&&(x+=l(y.ok||"OK",!0)),F&&(x+=l(y.cancel||"Cancel",!1)),y.buttons)for(var A=0;A<y.buttons.length;A++)x+=l(y.buttons[A],A);if(x+="</div>",E.innerHTML=x,y.content){var D=y.content;"string"==typeof D&&(D=document.getElementById(D)),"none"==D.style.display&&(D.style.display=""),E.childNodes[y.title?1:0].appendChild(D)}return E.onclick=function(J){var I=(J=J||event).target||J.srcElement;if(I.className||(I=I.parentNode),"dhtmlx_popup_button"==I.className){var H=I.getAttribute("result");u(y,H="true"==H||"false"!=H&&H)}},y.box=E,(C||F)&&(r=y),E}(C,D,F);C.hidden||s(!0),document.body.appendChild(E);var A=C.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-E.offsetWidth)/2)),H=C.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-E.offsetHeight)/2));return"top"==C.position?E.style.top="-3px":E.style.top=H+"px",E.style.left=A+"px",E.onkeydown=a,E.focus(),C.hidden&&dhtmlx.modalbox.hide(E),E}function o(x){return w(x,!0,!1)}function c(x){return w(x,!0,!0)}function h(x){return w(x)}function n(y,x,A){return"object"!=typeof y&&("function"==typeof x&&(A=x,x=""),y={text:y,type:x,callback:A}),y}document.attachEvent?document.attachEvent("onkeydown",a):document.addEventListener("keydown",a,!0),dhtmlx.alert=function(){var x=n.apply(this,arguments);return x.type=x.type||"confirm",o(x)},dhtmlx.confirm=function(){var x=n.apply(this,arguments);return x.type=x.type||"alert",c(x)},dhtmlx.modalbox=function(){var x=n.apply(this,arguments);return x.type=x.type||"alert",h(x)},dhtmlx.modalbox.hide=function(x){for(;x&&x.getAttribute&&!x.getAttribute("dhxbox");)x=x.parentNode;x&&(x.parentNode.removeChild(x),s(!1),r=null)};var v=dhtmlx.message=function(C,A,y,D){switch((C=function(A,y,x,C){return"object"==typeof A&&A||(A={text:A,type:y,expire:x,id:C}),A.id=A.id||v.uid(),A.expire=A.expire||v.expire,A}.apply(this,arguments)).type=C.type||"info",C.type.split("-")[0]){case"alert":return o(C);case"confirm":return c(C);case"modalbox":return h(C);default:return function(y){v.area||(v.area=document.createElement("DIV"),v.area.className="dhtmlx_message_area",v.area.style[v.position]="15px",document.body.appendChild(v.area)),v.hide(y.id);var x=document.createElement("DIV");return x.innerHTML="<div>"+y.text+"</div>",x.className="dhtmlx-info dhtmlx-"+y.type,x.onclick=function(){y&&v.hide(y.id),y=null},"bottom"==v.position&&v.area.firstChild?v.area.insertBefore(x,v.area.firstChild):v.area.appendChild(x),0<y.expire&&(v.timers[y.id]=window.setTimeout(function(){v.hide(y.id)},y.expire)),v.pull[y.id]=x,x=null,y.id}(C)}};v.seed=(new Date).valueOf(),v.uid=function(){return v.seed++},v.expire=4e3,v.keyboard=!0,v.position="top",v.pull={},v.timers={},v.hideAll=function(){for(var x in v.pull)v.hide(x)},v.hide=function(y){var x=v.pull[y];x&&x.parentNode&&(window.setTimeout(function(){x.parentNode.removeChild(x),x=null},2e3),x.className+=" hidden",v.timers[y]&&window.clearTimeout(v.timers[y]),delete v.pull[y])}}(),function(){var dhx={},temp,_cache,newlines,quotes;dhx.assert=function(test,message){test||dhx.assert_error(message)},dhx.assert_error=function(message){dhx.log("error",message),dhx.message&&"string"==typeof message&&dhx.message({type:"debug",text:message,expire:-1}),!1!==dhx.debug&&eval("debugger;")},dhx.assert_core_ready=function(){window.dhx_on_core_ready&&dhx_on_core_ready()},dhx.codebase="./",dhx.name="Core",dhx.clone=function(source){var f=dhx.clone._function;return f.prototype=source,new f},dhx.clone._function=function(){},dhx.extend=function(base,source,force){if(dhx.assert(base,"Invalid mixing target"),dhx.assert(source,"Invalid mixing source"),base._dhx_proto_wait)return dhx.PowerArray.insertAt.call(base._dhx_proto_wait,source,1),base;for(var method in source)base[method]&&!force||(base[method]=source[method]);return source.defaults&&dhx.extend(base.defaults,source.defaults),source.$init&&source.$init.call(base),base},dhx.copy=function(source){if(dhx.assert(source,"Invalid mixing target"),1<arguments.length){var target=source;source=arguments[1]}else target=dhx.isArray(source)?[]:{};for(var method in source)source[method]&&"object"==typeof source[method]&&!dhx.isDate(source[method])?(target[method]=dhx.isArray(source[method])?[]:{},dhx.copy(target[method],source[method])):target[method]=source[method];return target},dhx.single=function(source){var instance=null;return function(config){return instance||(instance=new source({})),instance._reinit&&instance._reinit.apply(instance,arguments),instance}},dhx.protoUI=function(){dhx.debug_proto&&dhx.log("UI registered: "+arguments[0].name);var selfname=arguments[0].name,t=function(data){if(!t)return dhx.ui[selfname].prototype;var origins=t._dhx_proto_wait;if(origins){for(var params=[origins[0]],i=1;i<origins.length;i++)params[i]=origins[i],params[i]._dhx_proto_wait&&(params[i]=params[i].call(dhx,params[i].name)),params[i].prototype&&params[i].prototype.name&&(dhx.ui[params[i].prototype.name]=params[i]);if(dhx.ui[selfname]=dhx.proto.apply(dhx,params),t._dhx_type_wait)for(i=0;i<t._dhx_type_wait.length;i++)dhx.Type(dhx.ui[selfname],t._dhx_type_wait[i]);t=origins=null}return this!=dhx?new dhx.ui[selfname](data):dhx.ui[selfname]};return t._dhx_proto_wait=Array.prototype.slice.call(arguments,0),dhx.ui[selfname]=t},dhx.proto=function(){dhx.debug_proto&&dhx.log("Proto chain:"+arguments[0].name+"["+arguments.length+"]");var origins=arguments,compilation=origins[0],has_constructor=!!compilation.$init,construct=[];dhx.assert(compilation,"Invalid mixing target");for(var i=origins.length-1;0<i;i--){if(dhx.assert(origins[i],"Invalid mixing source"),"function"==typeof origins[i]&&(origins[i]=origins[i].prototype),origins[i].$init&&construct.push(origins[i].$init),origins[i].defaults){var defaults=origins[i].defaults;for(var def in compilation.defaults||(compilation.defaults={}),defaults)dhx.isUndefined(compilation.defaults[def])&&(compilation.defaults[def]=defaults[def])}if(origins[i].type&&compilation.type)for(var def in origins[i].type)compilation.type[def]||(compilation.type[def]=origins[i].type[def]);for(var key in origins[i])compilation[key]||(compilation[key]=origins[i][key])}has_constructor&&construct.push(compilation.$init),compilation.$init=function(){for(var i=0;i<construct.length;i++)construct[i].apply(this,arguments)};var result=function(config){this.$ready=[],dhx.assert(this.$init,"object without init method"),this.$init(config),this._parseSettings&&this._parseSettings(config,this.defaults);for(var i=0;i<this.$ready.length;i++)this.$ready[i].call(this)};return result.prototype=compilation,compilation=origins=null,result},dhx.bind=function(functor,object){return function(){return functor.apply(object,arguments)}},dhx.require=function(module,callback,master){if("string"==typeof module){if(!0!==dhx._modules[module]){if(".css"==module.substr(-4)){var link=dhx.html.create("LINK",{type:"text/css",rel:"stylesheet",href:dhx.codebase+module});return document.head.appendChild(link),void(callback&&callback.call(master||window))}arguments[4];callback?dhx._modules[module]?dhx._modules[module].push([callback,master]):(dhx._modules[module]=[[callback,master]],dhx.ajax(dhx.codebase+module,function(text){dhx.exec(text);var calls=dhx._modules[module];dhx._modules[module]=!0;for(var i=0;i<calls.length;i++)calls[i][0].call(calls[i][1]||window,!i)})):(dhx.exec(dhx.ajax().sync().get(dhx.codebase+module).responseText),dhx._modules[module]=!0)}}else{var count=module.length||0,callback_origin=callback;if(count)(callback=function(){if(!count)return callback_origin.apply(this,arguments);count--,dhx.require(module[module.length-count-1],callback,master)})();else{for(var file in module)count++;for(var file in callback=function(){0===--count&&callback_origin.apply(this,arguments)},module)dhx.require(file,callback,master)}}},dhx._modules={},dhx.exec=function(code){window.execScript?window.execScript(code):window.eval(code)},dhx.wrap=function(code,wrap){return code?function(){var result=code.apply(this,arguments);return wrap.apply(this,arguments),result}:wrap},dhx.isUndefined=function(a){return void 0===a},dhx.delay=function(method,obj,params,delay){return window.setTimeout(function(){var ret=method.apply(obj,params||[]);return method=obj=params=null,ret},delay||1)},dhx.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed},dhx.toNode=function(node){return"string"==typeof node?document.getElementById(node):node},dhx.toArray=function(array){return dhx.extend(array||[],dhx.PowerArray,!0)},dhx.toFunctor=function(str){return"string"==typeof str?eval(str):str},dhx.isArray=function(obj){return Array.isArray?Array.isArray(obj):"[object Array]"===Object.prototype.toString.call(obj)},dhx.isDate=function(obj){return obj instanceof Date},dhx._events={},dhx.event=function(node,event,handler,master){node=dhx.toNode(node);var id=dhx.uid();return master&&(handler=dhx.bind(handler,master)),dhx._events[id]=[node,event,handler],node.addEventListener?node.addEventListener(event,handler,!1):node.attachEvent&&node.attachEvent("on"+event,handler),id},dhx.eventRemove=function(id){if(id){dhx.assert(this._events[id],"Removing non-existing event");var ev=dhx._events[id];ev[0].removeEventListener?ev[0].removeEventListener(ev[1],ev[2],!1):ev[0].detachEvent&&ev[0].detachEvent("on"+ev[1],ev[2]),delete this._events[id]}},dhx.log=function(type,message,details){1==arguments.length&&(message=type,type="log"),window.console&&console.log&&(type=type.toLowerCase(),window.console[type]?window.console[type](message||"unknown error"):window.console.log(type+": "+message),details&&window.console.log(details))},dhx.log_full_time=function(name){dhx._start_time_log=new Date,dhx.log("Timing start ["+name+"]"),window.setTimeout(function(){var time=new Date;dhx.log("Timing end ["+name+"]:"+(time.valueOf()-dhx._start_time_log.valueOf())/1e3+"s")},1)},dhx.log_time=function(name){var fname="_start_time_log"+name;if(dhx[fname]){var time=new Date;dhx.log("Info","Timing end ["+name+"]:"+(time.valueOf()-dhx[fname].valueOf())/1e3+"s"),dhx[fname]=null}else dhx[fname]=new Date,dhx.log("Info","Timing start ["+name+"]")},dhx.debug_code=function(code){code.call(dhx)},dhx.EventSystem={$init:function(){this._evs_events||(this._evs_events={},this._evs_handlers={},this._evs_map={})},blockEvent:function(){this._evs_events._block=!0},unblockEvent:function(){this._evs_events._block=!1},mapEvent:function(map){dhx.extend(this._evs_map,map,!0)},on_setter:function(config){if(config)for(var i in config)"function"==typeof config[i]&&this.attachEvent(i,config[i])},callEvent:function(type,params){if(this._evs_events._block)return!0;type=type.toLowerCase();var event_stack=this._evs_events[type.toLowerCase()],return_value=!0;if(dhx.debug&&dhx.log("info","["+this.name+"] event:"+type,params),event_stack)for(var i=0;i<event_stack.length;i++)!1===event_stack[i].apply(this,params||[])&&(return_value=!1);return this._evs_map[type]&&!this._evs_map[type].callEvent(type,params)&&(return_value=!1),return_value},attachEvent:function(type,functor,id){dhx.assert(functor,"Invalid event handler for "+type),type=type.toLowerCase(),id=id||dhx.uid(),functor=dhx.toFunctor(functor);var event_stack=this._evs_events[type]||dhx.toArray();return event_stack.push(functor),this._evs_events[type]=event_stack,this._evs_handlers[id]={f:functor,t:type},id},detachEvent:function(id){if(this._evs_handlers[id]){var type=this._evs_handlers[id].t,functor=this._evs_handlers[id].f;this._evs_events[type].remove(functor),delete this._evs_handlers[id]}},hasEvent:function(type){return type=type.toLowerCase(),!!this._evs_events[type]}},dhx.extend(dhx,dhx.EventSystem),dhx.PowerArray={removeAt:function(pos,len){0<=pos&&this.splice(pos,len||1)},remove:function(value){this.removeAt(this.find(value))},insertAt:function(data,pos){if(pos||0===pos){var b=this.splice(pos,this.length-pos);this[pos]=data,this.push.apply(this,b)}else this.push(data)},find:function(data){for(var i=0;i<this.length;i++)if(data==this[i])return i;return-1},each:function(functor,master){for(var i=0;i<this.length;i++)functor.call(master||this,this[i])},map:function(functor,master){for(var i=0;i<this.length;i++)this[i]=functor.call(master||this,this[i]);return this},filter:function(functor,master){for(var i=0;i<this.length;i++)functor.call(master||this,this[i])||(this.splice(i,1),i--);return this}},dhx.env={},function(){-1!=navigator.userAgent.indexOf("Mobile")&&(dhx.env.mobile=!0),(dhx.env.mobile||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android"))&&(dhx.env.touch=!0),-1!=navigator.userAgent.indexOf("Opera")?dhx.env.isOpera=!0:(dhx.env.isIE=!!document.all,dhx.env.isFF=!document.all,dhx.env.isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),dhx.env.isSafari=dhx.env.isWebKit&&-1!=navigator.userAgent.indexOf("Mac")),-1!=navigator.userAgent.toLowerCase().indexOf("android")&&(dhx.env.isAndroid=!0),dhx.env.transform=!1,dhx.env.transition=!1;for(var options={names:["transform","transition"],transform:["transform","WebkitTransform","MozTransform","OTransform","msTransform"],transition:["transition","WebkitTransition","MozTransition","OTransition","msTransition"]},d=document.createElement("DIV"),i=0;i<options.names.length;i++)for(var coll=options[options.names[i]],j=0;j<coll.length;j++)if(void 0!==d.style[coll[j]]){dhx.env[options.names[i]]=coll[j];break}d.style[dhx.env.transform]="translate3d(0,0,0)",dhx.env.translate=d.style[dhx.env.transform]?"translate3d":"translate";var prefix="",cssprefix=!1;dhx.env.isOpera&&(prefix="-o-",cssprefix="O"),dhx.env.isFF&&(prefix="-Moz-"),dhx.env.isWebKit&&(prefix="-webkit-"),dhx.env.isIE&&(prefix="-ms-"),dhx.env.transformCSSPrefix=prefix,dhx.env.transformPrefix=cssprefix||dhx.env.transformCSSPrefix.replace(/-/gi,""),dhx.env.transitionEnd="-Moz-"==dhx.env.transformCSSPrefix?"transitionend":dhx.env.transformPrefix+"TransitionEnd"}(),dhx.env.svg=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),dhx.html={_native_on_selectstart:0,denySelect:function(){dhx._native_on_selectstart||(dhx._native_on_selectstart=document.onselectstart),document.onselectstart=dhx.html.stopEvent},allowSelect:function(){0!==dhx._native_on_selectstart&&(document.onselectstart=dhx._native_on_selectstart||null),dhx._native_on_selectstart=0},index:function(node){for(var k=0;node=node.previousSibling;)k++;return k},_style_cache:{},createCss:function(rule){var text="";for(var key in rule)text+=key+":"+rule[key]+";";var name=this._style_cache[text];return name||(name="s"+dhx.uid(),this.addStyle("."+name+"{"+text+"}"),this._style_cache[text]=name),name},addStyle:function(rule){var style=document.createElement("style");style.setAttribute("type","text/css"),style.setAttribute("media","screen"),style.styleSheet?style.styleSheet.cssText=rule:style.appendChild(document.createTextNode(rule)),document.getElementsByTagName("head")[0].appendChild(style)},create:function(name,attrs,html){attrs=attrs||{};var node=document.createElement(name);for(var attr_name in attrs)node.setAttribute(attr_name,attrs[attr_name]);return attrs.style&&(node.style.cssText=attrs.style),attrs.class&&(node.className=attrs.class),html&&(node.innerHTML=html),node},getValue:function(node){return(node=dhx.toNode(node))?dhx.isUndefined(node.value)?node.innerHTML:node.value:""},remove:function(node){if(node instanceof Array)for(var i=0;i<node.length;i++)this.remove(node[i]);else node&&node.parentNode&&node.parentNode.removeChild(node)},insertBefore:function(node,before,rescue){node&&(before&&before.parentNode?before.parentNode.insertBefore(node,before):rescue.appendChild(node))},locate:function(e,id){if(e.tagName)var trg=e;else trg=(e=e||event).target||e.srcElement;for(;trg;){if(trg.getAttribute){var test=trg.getAttribute(id);if(test)return test}trg=trg.parentNode}return null},offset:function(elem){if(elem.getBoundingClientRect){var box=elem.getBoundingClientRect(),body=document.body,docElem=document.documentElement,scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{y:Math.round(top),x:Math.round(left)}}for(top=0,left=0;elem;)top+=parseInt(elem.offsetTop,10),left+=parseInt(elem.offsetLeft,10),elem=elem.offsetParent;return{y:top,x:left}},posRelative:function(ev){return ev=ev||event,dhx.isUndefined(ev.offsetX)?{x:ev.layerX,y:ev.layerY}:{x:ev.offsetX,y:ev.offsetY}},pos:function(ev){if((ev=ev||event).pageX||ev.pageY)return{x:ev.pageX,y:ev.pageY};var d=dhx.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:ev.clientX+d.scrollLeft-d.clientLeft,y:ev.clientY+d.scrollTop-d.clientTop}},preventEvent:function(e){return e&&e.preventDefault&&e.preventDefault(),dhx.html.stopEvent(e)},stopEvent:function(e){return!((e||event).cancelBubble=!0)},addCss:function(node,name){node.className+=" "+name},removeCss:function(node,name){node.className=node.className.replace(RegExp(" "+name,"g"),"")}},dhx.ready=function(code){this._ready?code.call():this._ready_code.push(code)},dhx._ready_code=[],temp=document.getElementsByTagName("SCRIPT"),dhx.assert(temp.length,"Can't locate codebase"),temp.length&&((temp=(temp[temp.length-1].getAttribute("src")||"").split("/")).splice(temp.length-1,1),dhx.codebase=temp.slice(0,temp.length).join("/")+"/"),dhx.event(window,"load",function(){dhx4.callEvent("onReady",[]),dhx.delay(function(){dhx._ready=!0;for(var i=0;i<dhx._ready_code.length;i++)dhx._ready_code[i].call();dhx._ready_code=[]})}),dhx.locale=dhx.locale||{},dhx.assert_core_ready(),dhx.ready(function(){dhx.event(document.body,"click",function(e){dhx4.callEvent("onClick",[e||event])})}),_cache={},newlines=new RegExp("(\\r\\n|\\n)","g"),quotes=new RegExp('(\\")',"g"),dhx.Template=function(str){if("function"==typeof str)return str;if(_cache[str])return _cache[str];if(-1!=(str=(str||"").toString()).indexOf("->"))switch((str=str.split("->"))[0]){case"html":str=dhx.html.getValue(str[1])}str=(str=(str=(str=(str=(str=(str=(str=(str=(str||"").toString()).replace(newlines,"\\n")).replace(quotes,'\\"')).replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"')).replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"")).replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"')).replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"')).replace("{obj}",'"+obj+"')).replace(/#([^#'";, ]+)#/gi,'"+(obj.$1)+"');try{_cache[str]=Function("obj","common",'return "'+str+'";')}catch(e){dhx.assert_error("Invalid template:"+str)}return _cache[str]},dhx.Template.empty=function(){return""},dhx.Template.bind=function(value){return dhx.bind(dhx.Template(value),this)},dhx.Type=function(obj,data){if(obj._dhx_proto_wait)return obj._dhx_type_wait||(obj._dhx_type_wait=[]),void obj._dhx_type_wait.push(data);"function"==typeof obj&&(obj=obj.prototype),obj.types||(obj.types={default:obj.type},obj.type.name="default");var name=data.name,type=obj.type;for(var key in name&&(type=obj.types[name]=dhx.clone(data.baseType?obj.types[data.baseType]:obj.type)),data)0===key.indexOf("template")?type[key]=dhx.Template(data[key]):type[key]=data[key];return name},dhx.Settings={$init:function(){this._settings=this.config={}},define:function(property,value){return"object"==typeof property?this._parseSeetingColl(property):this._define(property,value)},_define:function(property,value){var setter=this[property+"_setter"];return this._settings[property]=setter?setter.call(this,value,property):value},_parseSeetingColl:function(coll){if(coll)for(var a in coll)this._define(a,coll[a])},_parseSettings:function(obj,initial){var settings={};initial&&(settings=dhx.extend(settings,initial)),"object"!=typeof obj||obj.tagName||dhx.extend(settings,obj,!0),this._parseSeetingColl(settings)},_mergeSettings:function(config,defaults){for(var key in defaults)switch(typeof config[key]){case"object":config[key]=this._mergeSettings(config[key]||{},defaults[key]);break;case"undefined":config[key]=defaults[key]}return config},debug_freid_c_id:!0,debug_freid_a_name:!0},dhx.ajax=function(url,call,master){if(0!==arguments.length){var http_request=new dhx.ajax;return master&&(http_request.master=master),http_request.get(url,null,call)}return this.getXHR?this:new dhx.ajax},dhx.ajax.count=0,dhx.ajax.prototype={master:null,getXHR:function(){return dhx.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(url,params,call){var x=this.getXHR();if(dhx.isArray(call)||(call=[call]),"object"==typeof params){var t=[];for(var a in params){var value=params[a];null!==value&&value!==dhx.undefined||(value=""),t.push(a+"="+encodeURIComponent(value))}params=t.join("&")}params&&"GET"===this.request&&(url=url+(-1!=url.indexOf("?")?"&":"?")+params,params=null),x.open(this.request,url,!this._sync),"POST"===this.request&&x.setRequestHeader("Content-type","application/x-www-form-urlencoded");var self=this;return x.onreadystatechange=function(){if(!x.readyState||4==x.readyState){if(dhx.debug_time&&dhx.log_full_time("data_loading"),dhx.ajax.count++,call&&self)for(var i=0;i<call.length;i++)if(call[i]){var method=call[i].success||call[i];(400<=x.status||!x.status&&!x.responseText)&&(method=call[i].error),method&&method.call(self.master||self,x.responseText,x.responseXML,x)}self&&(self.master=null),call=self=null}},x.send(params||null),x},get:function(url,params,call){return 2==arguments.length&&(call=params,params=null),this.request="GET",this.send(url,params,call)},post:function(url,params,call){return this.request="POST",this.send(url,params,call)},put:function(url,params,call){return this.request="PUT",this.send(url,params,call)},del:function(url,params,call){return this.request="DELETE",this.send(url,params,call)},sync:function(){return this._sync=!0,this},bind:function(master){return this.master=master,this}},dhx.send=function(url,values,method,target){var form=dhx.html.create("FORM",{target:target||"_self",action:url,method:method||"POST"},"");for(var k in values){var field=dhx.html.create("INPUT",{type:"hidden",name:k,value:values[k]},"");form.appendChild(field)}form.style.display="none",document.body.appendChild(form),form.submit(),document.body.removeChild(form)},dhx.AtomDataLoader={$init:function(config){this.data={},config&&(this._settings.datatype=config.datatype||"json",this.$ready.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0,this._settings.url&&this.url_setter(this._settings.url),this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(value){return this._ready_for_data&&this.load(value,this._settings.datatype),value},data_setter:function(value){return this._ready_for_data?(this.parse(value,this._settings.datatype),!0):value},debug_freid_c_datatype:!0,debug_freid_c_dataFeed:!0,load:function(url,call){if(!url.$proxy){this.callEvent("onXLS",[]),"string"==typeof call?(this.data.driver=dhx.DataDriver[call],call=arguments[2]):this.data.driver||(this.data.driver=dhx.DataDriver.json);var callback=[{success:this._onLoad,error:this._onLoadError}];return call&&(dhx.isArray(call)?callback.push.apply(callback,call):callback.push(call)),dhx.ajax(url,callback,this)}url.load(this,"string"==typeof call?call:"json")},parse:function(data,type){this.callEvent("onXLS",[]),this.data.driver=dhx.DataDriver[type||"json"],this._onLoad(data,null)},_onLoad:function(text,xml,loader,key){var driver=this.data.driver,data=driver.toObject(text,xml);if(data){var top=driver.getRecords(data)[0];this.data=driver?driver.getDetails(top):text}else this._onLoadError(text,xml,loader);this.callEvent("onXLE",[])},_onLoadError:function(text,xml,xhttp){this.callEvent("onXLE",[]),this.callEvent("onLoadError",arguments),dhx4.callEvent("onLoadError",[text,xml,xhttp,this])},_check_data_feed:function(data){if(!this._settings.dataFeed||this._ignore_feed||!data)return!0;var url=this._settings.dataFeed;return"function"==typeof url?url.call(this,data.id||data,data):(url=url+(-1==url.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(data.id||data),this.callEvent("onXLS",[]),dhx.ajax(url,function(text,xml,loader){this._ignore_feed=!0;var data=dhx.DataDriver.toObject(text,xml);data?this.setValues(data.getDetails(data.getRecords()[0])):this._onLoadError(text,xml,loader),this._ignore_feed=!1,this.callEvent("onXLE",[])},this),!1)}},dhx.DataDriver={},dhx.DataDriver.json={toObject:function(data){if(data||(data="[]"),"string"==typeof data){try{eval("dhx.temp="+data)}catch(e){return dhx.assert_error(e),null}data=dhx.temp}if(data.data){var t=data.data.config={};for(var key in data)"data"!=key&&(t[key]=data[key]);data=data.data}return data},getRecords:function(data){return data&&!dhx.isArray(data)?[data]:data},getDetails:function(data){return"string"==typeof data?{id:dhx.uid(),value:data}:data},getInfo:function(data){var cfg=data.config;return cfg?{_size:cfg.total_count||0,_from:cfg.pos||0,_parent:cfg.parent||0,_config:cfg.config,_key:cfg.dhx_security}:{}},child:"data"},dhx.DataDriver.html={toObject:function(data){if("string"==typeof data){var t=null;return-1==data.indexOf("<")&&(t=dhx.toNode(data)),t||((t=document.createElement("DIV")).innerHTML=data),t.getElementsByTagName(this.tag)}return data},getRecords:function(node){for(var data=[],i=0;i<node.childNodes.length;i++){var child=node.childNodes[i];1==child.nodeType&&data.push(child)}return data},getDetails:function(data){return dhx.DataDriver.xml.tagToObject(data)},getInfo:function(data){return{_size:0,_from:0}},tag:"LI"},dhx.DataDriver.jsarray={toObject:function(data){return"string"==typeof data?(eval("dhx.temp="+data),dhx.temp):data},getRecords:function(data){return data},getDetails:function(data){for(var result={},i=0;i<data.length;i++)result["data"+i]=data[i];return result},getInfo:function(data){return{_size:0,_from:0}}},dhx.DataDriver.csv={toObject:function(data){return data},getRecords:function(data){return data.split(this.row)},getDetails:function(data){data=this.stringToArray(data);for(var result={},i=0;i<data.length;i++)result["data"+i]=data[i];return result},getInfo:function(data){return{_size:0,_from:0}},stringToArray:function(data){data=data.split(this.cell);for(var i=0;i<data.length;i++)data[i]=data[i].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return data},row:"\n",cell:","},dhx.DataDriver.xml={_isValidXML:function(data){return data&&data.documentElement?data.getElementsByTagName("parsererror").length?null:data:null},toObject:function(text,xml){if(this._isValidXML(data))return data;if("string"==typeof text)var data=this.fromString(text.replace(/^[\s]+/,""));else data=text;return this._isValidXML(data)?data:null},getRecords:function(data){return this.xpath(data,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(data){return this.tagToObject(data,{})},getInfo:function(data){var config=this.xpath(data,this.config);return config=config.length?this.assignTypes(this.tagToObject(config[0],{})):null,{_size:data.documentElement.getAttribute("total_count")||0,_from:data.documentElement.getAttribute("pos")||0,_parent:data.documentElement.getAttribute("parent")||0,_config:config,_key:data.documentElement.getAttribute("dhx_security")||null}},xpath:function(xml,path){if(window.XPathResult){var node=xml;-1==xml.nodeName.indexOf("document")&&(xml=xml.ownerDocument);for(var res=[],col=xml.evaluate(path,node,null,XPathResult.ANY_TYPE,null),temp=col.iterateNext();temp;)res.push(temp),temp=col.iterateNext();return res}var test=!0;try{void 0===xml.selectNodes&&(test=!1)}catch(e){}if(test)return xml.selectNodes(path);var name=path.split("/").pop();return xml.getElementsByTagName(name)},assignTypes:function(obj){for(var k in obj){var test=obj[k];if("object"==typeof test)this.assignTypes(test);else if("string"==typeof test){if(""===test)continue;"true"==test?obj[k]=!0:"false"==test?obj[k]=!1:test==1*test&&(obj[k]=1*obj[k])}}return obj},tagToObject:function(tag,z){z=z||{};var flag=!1,a=tag.attributes;if(a&&a.length){for(var i=0;i<a.length;i++)z[a[i].name]=a[i].value;flag=!0}var b=tag.childNodes;for(i=0;i<b.length;i++)if(1==b[i].nodeType){var name=b[i].tagName;void 0!==z[name]?(dhx.isArray(z[name])||(z[name]=[z[name]]),z[name].push(this.tagToObject(b[i],{}))):z[b[i].tagName]=this.tagToObject(b[i],{}),flag=!0}return flag?(z.value=z.value||this.nodeValue(tag),z):this.nodeValue(tag)},nodeValue:function(node){return node.firstChild?node.firstChild.data:""},fromString:function(xmlString){try{if(window.DOMParser)return(new DOMParser).parseFromString(xmlString,"text/xml");if(window.ActiveXObject){var temp=new ActiveXObject("Microsoft.xmlDOM");return temp.loadXML(xmlString),temp}}catch(e){return dhx.assert_error(e),null}dhx.assert_error("Load from xml string is not supported")}},dhx.DataLoader=dhx.proto({$init:function(config){config=config||"",this._ajax_queue=dhx.toArray(),this.data=new dhx.DataStore,this.data.attachEvent("onClearAll",dhx.bind(this._call_onclearall,this)),this.data.attachEvent("onServerConfig",dhx.bind(this._call_on_config,this)),this.data.feed=this._feed},_feed:function(from,count,callback){if(this._load_count)return this._load_count=[from,count,callback];this._load_count=!0,this._feed_last=[from,count],this._feed_common.call(this,from,count,callback)},_feed_common:function(from,count,callback){var url=this.data.url;from<0&&(from=0),this.load(url+(-1==url.indexOf("?")?"?":"&")+(this.dataCount()?"continue=true&":"")+"start="+from+"&count="+count,[this._feed_callback,callback])},_feed_callback:function(){var temp=this._load_count,last=this._feed_last;this._load_count=!1,"object"!=typeof temp||temp[0]==last[0]&&temp[1]==last[1]||this.data.feed.apply(this,temp)},load:function(url,call){var ajax=dhx.AtomDataLoader.load.apply(this,arguments);this._ajax_queue.push(ajax),this.data.url||(this.data.url=url)},loadNext:function(count,start,callback,url,now){if(this._settings.datathrottle&&!now)return this._throttle_request&&window.clearTimeout(this._throttle_request),void(this._throttle_request=dhx.delay(function(){this.loadNext(count,start,callback,url,!0)},this,0,this._settings.datathrottle));start||0===start||(start=this.dataCount()),this.data.url=this.data.url||url,this.callEvent("onDataRequest",[start,count,callback,url])&&this.data.url&&this.data.feed.call(this,start,count,callback)},_maybe_loading_already:function(count,from){var last=this._feed_last;return!!(this._load_count&&last&&last[0]<=from&&last[1]+last[0]>=count+from)},_onLoad:function(text,xml,loader){this._ajax_queue.remove(loader);var data=this.data.driver.toObject(text,xml);if(!data)return this._onLoadError(text,xml,loader);this.data._parse(data),this._call_onready(),this.callEvent("onXLE",[])},removeMissed_setter:function(value){return this.data._removeMissed=value},scheme_setter:function(value){this.data.scheme(value)},dataFeed_setter:function(value){return this.data.attachEvent("onBeforeFilter",dhx.bind(function(text,value){if(this._settings.dataFeed){var filter={};if(!text&&!value)return;if("function"==typeof text){if(!value)return;text(value,filter)}else filter={text:value};this.clearAll();var url=this._settings.dataFeed,urldata=[];if("function"==typeof url)return url.call(this,value,filter);for(var key in filter)urldata.push("dhx_filter["+key+"]="+encodeURIComponent(filter[key]));return this.load(url+(url.indexOf("?")<0?"?":"&")+urldata.join("&"),this._settings.datatype),!1}},this)),value},debug_freid_c_ready:!0,debug_freid_c_datathrottle:!0,_call_onready:function(){if(this._settings.ready&&!this._ready_was_used){var code=dhx.toFunctor(this._settings.ready);code&&dhx.delay(code,this,arguments),this._ready_was_used=!0}},_call_onclearall:function(){for(var i=0;i<this._ajax_queue.length;i++)this._ajax_queue[i].abort();this._ajax_queue=dhx.toArray()},_call_on_config:function(config){this._parseSeetingColl(config)}},dhx.AtomDataLoader),dhx.DataStore=function(){this.name="DataStore",dhx.extend(this,dhx.EventSystem),this.setDriver("json"),this.pull={},this.order=dhx.toArray(),this._marks={}},dhx.DataStore.prototype={setDriver:function(type){dhx.assert(dhx.DataDriver[type],"incorrect DataDriver"),this.driver=dhx.DataDriver[type]},_parse:function(data,master){this.callEvent("onParse",[this.driver,data]),this._filter_order&&this.filter();var info=this.driver.getInfo(data);info._key&&(dhx.securityKey=info._key),info._config&&this.callEvent("onServerConfig",[info._config]);var recs=this.driver.getRecords(data);this._inner_parse(info,recs),this._scheme_group&&this._group_processing&&this._group_processing(this._scheme_group),this._scheme_sort&&(this.blockEvent(),this.sort(this._scheme_sort),this.unblockEvent()),this.callEvent("onStoreLoad",[this.driver,data]),this.refresh()},_inner_parse:function(info,recs){var from=1*(info._from||0),subload=!0,marks=!1;if(0===from&&this.order[0]){if(this._removeMissed){marks={};for(var i=0;i<this.order.length;i++)marks[this.order[i]]=!0}subload=!1,from=this.order.length}var j=0;for(i=0;i<recs.length;i++){var temp=this.driver.getDetails(recs[i]),id=this.id(temp);this.pull[id]?subload&&this.order[j+from]&&j++:(this.order[j+from]=id,j++),this.pull[id]?(dhx.extend(this.pull[id],temp,!0),this._scheme_update&&this._scheme_update(this.pull[id]),marks&&delete marks[id]):(this.pull[id]=temp,this._scheme_init&&this._scheme_init(temp))}if(marks){for(var delid in this.blockEvent(),marks)this.remove(delid);this.unblockEvent()}this.order[info._size-1]||(this.order[info._size-1]=dhx.undefined)},id:function(data){return data.id||(data.id=dhx.uid())},changeId:function(old,newid){this.pull[old]&&(this.pull[newid]=this.pull[old]),this.pull[newid].id=newid,this.order[this.order.find(old)]=newid,this._filter_order&&(this._filter_order[this._filter_order.find(old)]=newid),this._marks[old]&&(this._marks[newid]=this._marks[old],delete this._marks[old]),this.callEvent("onIdChange",[old,newid]),this._render_change_id&&this._render_change_id(old,newid),delete this.pull[old]},item:function(id){return this.pull[id]},update:function(id,data){if(dhx.isUndefined(data)&&(data=this.item(id)),this._scheme_update&&this._scheme_update(data),!1===this.callEvent("onBeforeUpdate",[id,data]))return!1;this.pull[id]=data,this.callEvent("onStoreUpdated",[id,data,"update"])},refresh:function(id){this._skip_refresh||(id?this.callEvent("onStoreUpdated",[id,this.pull[id],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(code,master){this._skip_refresh=!0,code.call(master||this),this._skip_refresh=!1},getRange:function(from,to){if(from=from?this.indexById(from):this.$min||this.startOffset||0,to?to=this.indexById(to):(to=Math.min(this.$max||this.endOffset||1/0,this.dataCount()-1))<0&&(to=0),to<from){var a=to;to=from,from=a}return this.getIndexRange(from,to)},getIndexRange:function(from,to){to=Math.min(to||1/0,this.dataCount()-1);for(var ret=dhx.toArray(),i=from||0;i<=to;i++)ret.push(this.item(this.order[i]));return ret},dataCount:function(){return this.order.length},exists:function(id){return!!this.pull[id]},move:function(sindex,tindex){dhx.assert(0<=sindex&&0<=tindex,"DataStore::move","Incorrect indexes");var id=this.idByIndex(sindex),obj=this.item(id);this.order.removeAt(sindex),this.order.insertAt(id,Math.min(this.order.length,tindex)),this.callEvent("onStoreUpdated",[id,obj,"move"])},scheme:function(config){for(var key in this._scheme={},this._scheme_init=config.$init,this._scheme_update=config.$update,this._scheme_serialize=config.$serialize,this._scheme_group=config.$group,this._scheme_sort=config.$sort,config)"$"!=key.substr(0,1)&&(this._scheme[key]=config[key])},sync:function(source,filter,silent){"string"==typeof source&&(source=$$("source")),"function"!=typeof filter&&(silent=filter,filter=null),dhx.debug_bind&&(this.debug_sync_master=source,dhx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)),this._backbone_source=!1,"DataStore"!=source.name&&(source.data&&"DataStore"==source.data.name?source=source.data:this._backbone_source=!0);var sync_logic=dhx.bind(function(mode,record,data){if(this._backbone_source){if(!mode)return;if(0===mode.indexOf("change"))return"change"==mode?(this.pull[record.id]=record.attributes,void this.refresh(record.id)):void 0;"reset"==mode&&(data=record),this.order=[],this.pull={},this._filter_order=null;for(var i=0;i<data.models.length;i++){var id=data.models[i].id;this.order.push(id),this.pull[id]=data.models[i].attributes}}else this._filter_order=null,this.order=dhx.toArray([].concat(source.order)),this.pull=source.pull;filter&&this.silent(filter),this._on_sync&&this._on_sync(),dhx.debug_bind&&dhx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id),this.callEvent("onSyncApply",[]),silent?silent=!1:this.refresh()},this);this._backbone_source?source.bind("all",sync_logic):this._sync_events=[source.attachEvent("onStoreUpdated",sync_logic),source.attachEvent("onIdChange",dhx.bind(function(old,nid){this.changeId(old,nid)},this))],sync_logic()},add:function(obj,index){if(this._scheme)for(var key in this._scheme)dhx.isUndefined(obj[key])&&(obj[key]=this._scheme[key]);this._scheme_init&&this._scheme_init(obj);var id=this.id(obj),order=arguments[2]||this.order,data_size=order.length;if((dhx.isUndefined(index)||index<0)&&(index=data_size),data_size<index&&(dhx.log("Warning","DataStore:add","Index of out of bounds"),index=Math.min(order.length,index)),!1===this.callEvent("onBeforeAdd",[id,obj,index]))return!1;if(dhx.assert(!this.exists(id),"Not unique ID"),this.pull[id]=obj,order.insertAt(id,index),this._filter_order){var original_index=this._filter_order.length;!index&&this.order.length&&(original_index=0),this._filter_order.insertAt(id,original_index)}return this.callEvent("onAfterAdd",[id,index]),this.callEvent("onStoreUpdated",[id,obj,"add"]),id},remove:function(id){if(dhx.isArray(id))for(var i=0;i<id.length;i++)this.remove(id[i]);else{if(!1===this.callEvent("onBeforeDelete",[id]))return!1;dhx.assert(this.exists(id),"Not existing ID in remove command"+id);var obj=this.item(id);this.order.remove(id),this._filter_order&&this._filter_order.remove(id),delete this.pull[id],this._marks[id]&&delete this._marks[id],this.callEvent("onAfterDelete",[id]),this.callEvent("onStoreUpdated",[id,obj,"delete"])}},clearAll:function(){this.pull={},this.order=dhx.toArray(),this._filter_order=this.url=null,this.callEvent("onClearAll",[]),this.refresh()},idByIndex:function(index){return(index>=this.order.length||index<0)&&dhx.log("Warning","DataStore::idByIndex Incorrect index"),this.order[index]},indexById:function(id){var res=this.order.find(id);return this.pull[id]||dhx.log("Warning","DataStore::indexById Non-existing ID: "+id),res},next:function(id,step){return this.order[this.indexById(id)+(step||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(id,step){return this.order[this.indexById(id)-(step||1)]},sort:function(by,dir,as){var sort=by;"function"==typeof by?sort={as:by,dir:dir}:"string"==typeof by&&(sort={by:by.replace(/#/g,""),dir:dir,as:as});var parameters=[sort.by,sort.dir,sort.as];this.callEvent("onBeforeSort",parameters)&&(this._sort_core(sort),this.refresh(),this.callEvent("onAfterSort",parameters))},_sort_core:function(sort){if(this.order.length){var sorter=this._sort._create(sort),neworder=this.getRange(this.first(),this.last());neworder.sort(sorter),this.order=neworder.map(function(obj){return dhx.assert(obj,"Client sorting can't be used with dynamic loading"),this.id(obj)},this)}},_filter_reset:function(preserve){this._filter_order&&!preserve&&(this.order=this._filter_order,delete this._filter_order)},_filter_core:function(filter,value,preserve){for(var neworder=dhx.toArray(),i=0;i<this.order.length;i++){var id=this.order[i];filter(this.item(id),value)&&neworder.push(id)}preserve&&this._filter_order||(this._filter_order=this.order),this.order=neworder},filter:function(text,value,preserve){if(this.callEvent("onBeforeFilter",[text,value])&&(this._filter_reset(preserve),this.order.length)){if(text){var filter=text;value=value||"","string"==typeof text&&(text=text.replace(/#/g,""),"function"==typeof value?filter=function(obj){return value(obj[text])}:(value=value.toString().toLowerCase(),filter=function(obj,value){return dhx.assert(obj,"Client side filtering can't be used with dynamic loading"),-1!=(obj[text]||"").toString().toLowerCase().indexOf(value)})),this._filter_core(filter,value,preserve,this._filterMode)}this.refresh(),this.callEvent("onAfterFilter",[])}},each:function(method,master){for(var i=0;i<this.order.length;i++)method.call(master||this,this.item(this.order[i]))},_methodPush:function(object,method){return function(){return object[method].apply(object,arguments)}},addMark:function(id,mark,css,value){var obj=this._marks[id]||{};return(this._marks[id]=obj)[mark]||(obj[mark]=value||!0,css&&(this.item(id).$css=(this.item(id).$css||"")+" "+mark,this.refresh(id))),obj[mark]},removeMark:function(id,mark,css){var obj=this._marks[id];if(obj&&obj[mark]&&delete obj[mark],css){var current_css=this.item(id).$css;current_css&&(this.item(id).$css=current_css.replace(mark,""),this.refresh(id))}},hasMark:function(id,mark){var obj=this._marks[id];return obj&&obj[mark]},provideApi:function(target,eventable){this.debug_bind_master=target,eventable&&this.mapEvent({onbeforesort:target,onaftersort:target,onbeforeadd:target,onafteradd:target,onbeforedelete:target,onafterdelete:target,onbeforeupdate:target});for(var list=["sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize","sync","addMark","removeMark","hasMark"],i=0;i<list.length;i++)target[list[i]]=this._methodPush(this,list[i])},serialize:function(){for(var ids=this.order,result=[],i=0;i<ids.length;i++){var el=this.pull[ids[i]];this._scheme_serialize&&!1===(el=this._scheme_serialize(el))||result.push(el)}return result},_sort:{_create:function(config){return this._dir(config.dir,this._by(config.by,config.as))},_as:{date:function(a,b){return(b-=0)<(a-=0)?1:a<b?-1:0},int:function(a,b){return(b*=1)<(a*=1)?1:a<b?-1:0},string_strict:function(a,b){return a=a.toString(),(b=b.toString())<a?1:a<b?-1:0},string:function(a,b){return b?a?(a=a.toString().toLowerCase(),(b=b.toString().toLowerCase())<a?1:a<b?-1:0):-1:1}},_by:function(prop,method){return prop?("function"!=typeof method&&(method=this._as[method||"string"]),dhx.assert(method,"Invalid sorting method"),function(a,b){return method(a[prop],b[prop])}):method},_dir:function(prop,method){return"asc"!=prop&&prop?function(a,b){return-1*method(a,b)}:method}}},dhx.BaseBind={debug_freid_ignore:{id:!0},bind:function(target,rule,format){if("string"==typeof target&&(target=dhx.ui.get(target)),target._initBindSource&&target._initBindSource(),this._initBindSource&&this._initBindSource(),target.getBindData||dhx.extend(target,dhx.BindSource),!this._bind_ready){var old_render=this.render;if(this.filter){var key=this._settings.id;this.data._on_sync=function(){target._bind_updated[key]=!1}}this.render=function(){if(!this._in_bind_processing){this._in_bind_processing=!0;var result=this.callEvent("onBindRequest");return this._in_bind_processing=!1,old_render.apply(this,!1===result?arguments:[])}},(this.getValue||this.getValues)&&(this.save=function(){this.validate&&!this.validate()||target.setBindData(this.getValue?this.getValue:this.getValues(),this._settings.id)}),this._bind_ready=!0}target.addBind(this._settings.id,rule,format),dhx.debug_bind&&dhx.log("[bind] "+this.name+"@"+this._settings.id+" <= "+target.name+"@"+target._settings.id);var target_id=this._settings.id;this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return target.getBindData(target_id)}),!this._settings.dataFeed&&this.loadNext&&this.data.attachEvent("onStoreLoad",function(){target._bind_updated[target_id]=!1}),this.isVisible(this._settings.id)&&this.refresh()},unbind:function(target){return this._unbind(target)},_unbind:function(target){target.removeBind(this._settings.id);var events=this._sync_events||(this.data?this.data._sync_events:0);if(events&&target.data)for(var i=0;i<events.length;i++)target.data.detachEvent(events[i])}},dhx.BindSource={$init:function(){this._bind_hash={},this._bind_updated={},this._ignore_binds={},this._bind_specific_rules(this)},saveBatch:function(code){this._do_not_update_binds=!0,code.call(this),this._do_not_update_binds=!1,this._update_binds()},setBindData:function(data,key){if(key&&(this._ignore_binds[key]=!0),dhx.debug_bind&&dhx.log("[bind:save] "+this.name+"@"+this._settings.id+" <= @"+key),this.setValue)this.setValue(data);else if(this.setValues)this.setValues(data);else{var id=this.getCursor();id&&(data=dhx.extend(this.item(id),data,!0),this.update(id,data))}this.callEvent("onBindUpdate",[data,key,id]),this.save&&this.save(),key&&(this._ignore_binds[key]=!1)},getBindData:function(key,update){if(this._bind_updated[key])return!1;var target=dhx.ui.get(key);target.isVisible(target._settings.id)&&(this._bind_updated[key]=!0,dhx.debug_bind&&dhx.log("[bind:request] "+this.name+"@"+this._settings.id+" => "+target.name+"@"+target._settings.id),this._bind_update(target,this._bind_hash[key][0],this._bind_hash[key][1]),update&&target.filter&&target.refresh())},addBind:function(source,rule,format){this._bind_hash[source]=[rule,format]},removeBind:function(source){delete this._bind_hash[source],delete this._bind_updated[source],delete this._ignore_binds[source]},_bind_specific_rules:function(obj){obj.filter?dhx.extend(this,dhx.CollectionBind):obj.setValue?dhx.extend(this,dhx.ValueBind):dhx.extend(this,dhx.RecordBind)},_update_binds:function(){if(!this._do_not_update_binds)for(var key in this._bind_hash)this._ignore_binds[key]||(this._bind_updated[key]=!1,this.getBindData(key,!0))},_bind_update_common:function(target,rule,data){target.setValue?target.setValue(data?data[rule]:data):target.filter?target.data.silent(function(){this.filter(rule,data)}):!data&&target.clear?target.clear():target._check_data_feed(data)&&target.setValues(dhx.clone(data)),target.callEvent("onBindApply",[data,rule,this])}},dhx.DataValue=dhx.proto({name:"DataValue",isVisible:function(){return!0},$init:function(config){var id=(this.data=config)&&config.id?config.id:dhx.uid();this._settings={id:id},dhx.ui.views[id]=this},setValue:function(value){this.data=value,this.callEvent("onChange",[value])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind),dhx.DataRecord=dhx.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(config){this.data=config||{};var id=config&&config.id?config.id:dhx.uid();this._settings={id:id},dhx.ui.views[id]=this},getValues:function(){return this.data},setValues:function(data){this.data=data,this.callEvent("onChange",[data])},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind,dhx.AtomDataLoader,dhx.Settings),dhx.DataCollection=dhx.proto({name:"DataCollection",isVisible:function(){return!!(this.data.order.length||this.data._filter_order||this._settings.dataFeed)},$init:function(config){this.data.provideApi(this,!0);var id=config&&config.id?config.id:dhx.uid();this._settings.id=id,(dhx.ui.views[id]=this).data.attachEvent("onStoreLoad",dhx.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},dhx.DataLoader,dhx.EventSystem,dhx.BaseBind,dhx.Settings),dhx.ValueBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(target,rule,format){var data=this.getValue()||"";if(format&&(data=format(data)),target.setValue)target.setValue(data);else if(target.filter)target.data.silent(function(){this.filter(rule,data)});else{var pod={};pod[rule]=data,target._check_data_feed(data)&&target.setValues(pod)}target.callEvent("onBindApply",[data,rule,this])}},dhx.RecordBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(target,rule){var data=this.getValues()||null;this._bind_update_common(target,rule,data)}},dhx.CollectionBind={$init:function(){this._cursor=null,this.attachEvent("onSelectChange",function(data){var sel=this.getSelected();this.setCursor(sel?sel.id||sel:null)}),this.attachEvent("onAfterCursorChange",this._update_binds),this.data.attachEvent("onStoreUpdated",dhx.bind(function(id,data,mode){id&&id==this.getCursor()&&"paint"!=mode&&this._update_binds()},this)),this.data.attachEvent("onClearAll",dhx.bind(function(){this._cursor=null},this)),this.data.attachEvent("onIdChange",dhx.bind(function(oldid,newid){this._cursor==oldid&&(this._cursor=newid)},this))},setCursor:function(id){id==this._cursor||null!==id&&!this.item(id)||(this.callEvent("onBeforeCursorChange",[this._cursor]),this._cursor=id,this.callEvent("onAfterCursorChange",[id]))},getCursor:function(){return this._cursor},_bind_update:function(target,rule){var data=this.item(this.getCursor())||this._settings.defaultData||null;this._bind_update_common(target,rule,data)}},dhx.ui||(dhx.ui={}),dhx.ui.views||(dhx.ui.views={},dhx.ui.get=function(id){return id._settings?id:dhx.ui.views[id]}),window.dhtmlx&&(dhtmlx.BaseBind=dhx.BaseBind),dhtmlXDataStore=function(config){var obj=new dhx.DataCollection(config);return obj._dp_init=function(dp){var varname="_methods";dp[varname]=["dummy","dummy","changeId","dummy"],this.data._old_names={add:"inserted",update:"updated",delete:"deleted"},this.data.attachEvent("onStoreUpdated",function(id,data,mode){id&&!dp._silent&&dp.setUpdated(id,!0,this._old_names[mode])}),dp[varname="_getRowData"]=function(id,pref){var ev=this.obj.data.item(id),data={id:id};if(data[this.action_param]=this.obj.getUserData(id),ev)for(var a in ev)data[a]=ev[a];return data},this.changeId=function(oldid,newid){this.data.changeId(oldid,newid),dp._silent=!0,this.data.callEvent("onStoreUpdated",[newid,this.item(newid),"update"]),dp._silent=!1},dp[varname="_clearUpdateFlag"]=function(){},this._userdata={}},obj.dummy=function(){},obj.setUserData=function(id,name,value){this._userdata[id]=value},obj.getUserData=function(id,name){return this._userdata[id]},obj.dataFeed=function(obj){this.define("dataFeed",obj)},dhx.extend(obj,dhx.BindSource),obj},window.dhtmlXDataView&&(dhtmlXDataView.prototype._initBindSource=function(){this.isVisible=function(){return!!(this.data.order.length||this.data._filter_order||this._settings.dataFeed)};this._settings=this._settings||this._settings,this._settings.id||(this._settings.id=dhx.uid()),this.unbind=dhx.BaseBind.unbind,this.unsync=dhx.BaseBind.unsync,dhx.ui.views[this._settings.id]=this}),window.dhtmlXChart&&(dhtmlXChart.prototype._initBindSource=function(){this.isVisible=function(){return!!(this.data.order.length||this.data._filtered_state||this._settings.dataFeed)};this._settings=this._settings||this._settings,this._settings.id||(this._settings.id=dhx.uid()),this.unbind=dhx.BaseBind.unbind,this.unsync=dhx.BaseBind.unsync,dhx.ui.views[this._settings.id]=this}),dhx.BaseBind.unsync=function(target){return dhx.BaseBind._unbind.call(this,target)},dhx.BaseBind.unbind=function(target){return dhx.BaseBind._unbind.call(this,target)},dhx.BaseBind.legacyBind=function(){return dhx.BaseBind.bind.apply(this,arguments)},dhx.BaseBind.legacySync=function(source,rule){return this._initBindSource&&this._initBindSource(),source._initBindSource&&source._initBindSource(),this.attachEvent("onAfterEditStop",function(id){return this.save(id),!0}),this.attachEvent("onDataRequest",function(start,count){for(var i=start;i<start+count;i++)if(!source.data.order[i])return source.loadNext(count,start),!1}),this.save=function(id){id||(id=this.getCursor());var sobj=this.item(id),tobj=source.item(id);for(var key in sobj)0!==key.indexOf("$")&&(tobj[key]=sobj[key]);source.refresh(id)},source&&"DataCollection"==source.name?source.data.sync.apply(this.data,arguments):this.data.sync.apply(this.data,arguments)},window.dhtmlXForm&&(dhtmlXForm.prototype.bind=function(target){dhx.BaseBind.bind.apply(this,arguments),target.getBindData(this._settings.id)},dhtmlXForm.prototype.unbind=function(target){dhx.BaseBind._unbind.call(this,target)},dhtmlXForm.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this)},dhtmlXForm.prototype._check_data_feed=function(data){if(!this._settings.dataFeed||this._ignore_feed||!data)return!0;var url=this._settings.dataFeed;return"function"==typeof url?url.call(this,data.id||data,data):(url=url+(-1==url.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(data.id||data),this.load(url),!1)},dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData,dhtmlXForm.prototype.getValues=function(){return this.getFormData(!1,!0)},dhtmlXForm.prototype.dataFeed=function(value){this._settings?this._settings.dataFeed=value:this._server_feed=value},dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(value){return!0}),window.scheduler&&(window.Scheduler||(window.Scheduler={}),Scheduler.$syncFactory=function(scheduler){scheduler.sync=function(source,rule){this._initBindSource&&this._initBindSource(),source._initBindSource&&source._initBindSource();var insync=function(ignore){scheduler.clearAll();for(var order=source.data.order,pull=source.data.pull,evs=[],i=0;i<order.length;i++)rule&&rule.copy?evs[i]=dhx.clone(pull[order[i]]):evs[i]=pull[order[i]];scheduler._process_loading(evs),scheduler.callEvent("onSyncApply",[])};this.save=function(id){id||(id=this.getCursor());var data=this.item(id),olddat=source.item(id);this.callEvent("onStoreSave",[id,data,olddat])&&(dhx.extend(source.item(id),data,!0),source.update(id))},this.item=function(id){return this.getEvent(id)},this._sync_events=[source.data.attachEvent("onStoreUpdated",function(id,data,mode){insync.call(this)}),source.data.attachEvent("onIdChange",function(oldid,newid){combo.changeOptionId(oldid,newid)})],this.attachEvent("onEventChanged",function(id){this.save(id)}),this.attachEvent("onEventAdded",function(id,data){source.data.pull[id]||source.add(data)}),this.attachEvent("onEventDeleted",function(id){source.data.pull[id]&&source.remove(id)}),insync()},scheduler.unsync=function(target){dhx.BaseBind._unbind.call(this,target)},scheduler._initBindSource=function(){this._settings||(this._settings={id:dhx.uid()})}},Scheduler.$syncFactory(window.scheduler)),window.dhtmlXCombo&&(dhtmlXCombo.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXCombo.prototype.unbind=function(target){dhx.BaseBind._unbind.call(this,target)},dhtmlXCombo.prototype.unsync=function(target){dhx.BaseBind._unbind.call(this,target)},dhtmlXCombo.prototype.dataFeed=function(value){this._settings?this._settings.dataFeed=value:this._server_feed=value},dhtmlXCombo.prototype.sync=function(source,rule){this._initBindSource&&this._initBindSource(),source._initBindSource&&source._initBindSource();var combo=this,insync=function(ignore){combo.clearAll(),combo.addOption(this.serialize()),combo.callEvent("onSyncApply",[])};this._sync_events=[source.data.attachEvent("onStoreUpdated",function(id,data,mode){insync.call(this)}),source.data.attachEvent("onIdChange",function(oldid,newid){combo.changeOptionId(oldid,newid)})],insync.call(source)},dhtmlXCombo.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},(dhx.ui.views[this._settings.id]=this).data={silent:dhx.bind(function(code){code.call(this)},this)},dhx4._eventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])}))},dhtmlXCombo.prototype.item=function(id){return this.getOption(id)},dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()},dhtmlXCombo.prototype.isVisible=function(){return!(!this.optionsArr.length&&!this._settings.dataFeed)},dhtmlXCombo.prototype.refresh=function(){this.render(!0)}),window.dhtmlXGridObject&&(dhtmlXGridObject.prototype.bind=function(source,rule,format){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXGridObject.prototype.unbind=function(target){dhx.BaseBind._unbind.call(this,target)},dhtmlXGridObject.prototype.unsync=function(target){dhx.BaseBind._unbind.call(this,target)},dhtmlXGridObject.prototype.dataFeed=function(value){this._settings?this._settings.dataFeed=value:this._server_feed=value},dhtmlXGridObject.prototype.sync=function(source,rule){this._initBindSource&&this._initBindSource(),source._initBindSource&&source._initBindSource();var grid=this;this.save=function(id){id||(id=this.getCursor()),dhx.extend(source.item(id),this.item(id),!0),source.update(id)};var insync=function(ignore){var cursor=grid.getCursor?grid.getCursor():null,from=0;grid._legacy_ignore_next?(from=grid._legacy_ignore_next,grid._legacy_ignore_next=!1):grid.clearAll();var count=this.dataCount();if(count){grid._parsing=!0;for(var i=from;i<count;i++){var id=this.order[i];id&&(from&&grid.rowsBuffer[i]||(grid.rowsBuffer[i]={idd:id,data:this.pull[id]},grid.rowsBuffer[i]._parser=grid._process_store_row,grid.rowsBuffer[i]._locator=grid._get_store_data,grid.rowsAr[id]=this.pull[id]))}grid.rowsBuffer[count-1]||(grid.rowsBuffer[count-1]=dhtmlx.undefined,grid.xmlFileUrl=grid.xmlFileUrl||this.url),grid.pagingOn?grid.changePage():grid._srnd&&grid._fillers?grid._update_srnd_view():(grid.render_dataset(),grid.callEvent("onXLE",[])),grid._parsing=!1}cursor&&grid.setCursor&&grid.setCursor(grid.rowsAr[cursor]?cursor:null),grid.callEvent("onSyncApply",[])};this._sync_events=[source.data.attachEvent("onStoreUpdated",function(id,data,mode){"delete"==mode?(grid.deleteRow(id),grid.data.callEvent("onStoreUpdated",[id,data,mode])):"update"==mode?(grid.callEvent("onSyncUpdate",[data,mode]),grid.update(id,data),grid.data.callEvent("onStoreUpdated",[id,data,mode])):"add"==mode?(grid.callEvent("onSyncUpdate",[data,mode]),grid.add(id,data,this.indexById(id)),grid.data.callEvent("onStoreUpdated",[id,data,mode])):insync.call(this)}),source.data.attachEvent("onStoreLoad",function(driver,data){grid.xmlFileUrl=source.data.url,grid._legacy_ignore_next=driver.getInfo(data)._from}),source.data.attachEvent("onIdChange",function(oldid,newid){grid.changeRowId(oldid,newid)})],grid.attachEvent("onDynXLS",function(start,count){for(var i=start;i<start+count;i++)if(!source.data.order[i])return source.loadNext(count,start),!1;grid._legacy_ignore_next=start,insync.call(source.data)}),insync.call(source.data),grid.attachEvent("onEditCell",function(stage,id,ind,value,oldvalue){return 2==stage&&value!=oldvalue&&this.save(id),!0}),grid.attachEvent("onClearAll",function(){this._f_rowsBuffer=null}),rule&&rule.sort&&grid.attachEvent("onBeforeSorting",function(ind,type,dir){if("connector"==type)return!1;var id=this.getColumnId(ind);return source.sort("#"+id+"#","asc"==dir?"asc":"desc","int"==type?type:"string"),grid.setSortImgState(!0,ind,dir),!1}),rule&&rule.filter&&(grid.attachEvent("onFilterStart",function(cols,values){return grid._con_f_used&&grid._con_f_used.length||(source.data.silent(function(){source.filter();for(var i=0;i<cols.length;i++)if(""!=values[i]){var id=grid.getColumnId(cols[i]);source.filter("#"+id+"#",values[i],0!=i)}}),source.refresh()),!1}),grid.collectValues=function(index){var id=this.getColumnId(index);return function(id){var values=[],checks={};return this.data.each(function(obj){var value=obj[id];checks[value]||(checks[value]=!0,values.push(value))}),values.sort(),values}.call(source,id)}),rule&&rule.select&&grid.attachEvent("onRowSelect",function(id){source.setCursor(id)}),grid.clearAndLoad=function(url){source.clearAll(),source.load(url)}},dhtmlXGridObject.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed},(dhx.ui.views[this._settings.id]=this).data={silent:dhx.bind(function(code){code.call(this)},this)},dhx4._eventable(this.data);for(var i=0;i<this._cCount;i++)this.columnIds[i]||(this.columnIds[i]="cell"+i);this.attachEvent("onSelectStateChanged",function(id){this.callEvent("onSelectChange",[id])}),this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])}),this.attachEvent("onEditCell",function(stage,rId){return 2===stage&&this.getCursor&&rId&&rId==this.getCursor()&&this._update_binds(),!0}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}},dhtmlXGridObject.prototype.item=function(id){if(null===id)return null;var source=this.getRowById(id);if(!source)return null;var data=dhx.copy(source._attrs);data.id=id;for(var length=this.getColumnsNum(),i=0;i<length;i++)data[this.columnIds[i]]=this.cells(id,i).getValue();return data},dhtmlXGridObject.prototype.update=function(id,data){for(var i=0;i<this.columnIds.length;i++){var key=this.columnIds[i];dhx.isUndefined(data[key])||this.cells(id,i).setValue(data[key])}var attrs=this.getRowById(id)._attrs;for(var key in data)attrs[key]=data[key];this.callEvent("onBindUpdate",[data,null,id])},dhtmlXGridObject.prototype.add=function(id,data,index){for(var ar_data=[],i=0;i<this.columnIds.length;i++){var key=this.columnIds[i];ar_data[i]=dhx.isUndefined(data[key])?"":data[key]}this.addRow(id,ar_data,index);this.getRowById(id)._attrs=dhx.copy(data)},dhtmlXGridObject.prototype.getSelected=function(){return this.getSelectedRowId()},dhtmlXGridObject.prototype.isVisible=function(){return!!(this.rowsBuffer.length||this._f_rowsBuffer||this._settings.dataFeed)},dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()},dhtmlXGridObject.prototype.filter=function(callback,master){if(this._settings.dataFeed){var filter={};if(!callback&&!master)return;if("function"==typeof callback){if(!master)return;callback(master,filter)}else dhx.isUndefined(callback)?filter=master:filter[callback]=master;this.clearAll();var url=this._settings.dataFeed;if("function"==typeof url)return url.call(this,master,filter);var urldata=[];for(var key in filter)urldata.push("dhx_filter["+key+"]="+encodeURIComponent(filter[key]));return this.load(url+(url.indexOf("?")<0?"?":"&")+urldata.join("&")),!1}if(null===master)return this.filterBy(0,function(){return!1});this.filterBy(0,function(value,id){return callback.call(this,id,master)})}),window.dhtmlXTreeObject&&(dhtmlXTreeObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXTreeObject.prototype.unbind=function(target){dhx.BaseBind._unbind.call(this,target)},dhtmlXTreeObject.prototype.dataFeed=function(value){this._settings?this._settings.dataFeed=value:this._server_feed=value},dhtmlXTreeObject.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},(dhx.ui.views[this._settings.id]=this).data={silent:dhx.bind(function(code){code.call(this)},this)},dhx4._eventable(this.data),this.attachEvent("onSelect",function(id){this.callEvent("onSelectChange",[id])}),this.attachEvent("onEdit",function(stage,rId){return 2===stage&&rId&&rId==this.getCursor()&&this._update_binds(),!0}))},dhtmlXTreeObject.prototype.item=function(id){return null===id?null:{id:id,text:this.getItemText(id)}},dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()},dhtmlXTreeObject.prototype.isVisible=function(){return!0},dhtmlXTreeObject.prototype.refresh=function(){},dhtmlXTreeObject.prototype.filter=function(callback,master){if(this._settings.dataFeed){var filter={};if(!callback&&!master)return;if("function"==typeof callback){if(!master)return;callback(master,filter)}else dhx.isUndefined(callback)?filter=master:filter[callback]=master;this.deleteChildItems(0);var url=this._settings.dataFeed;if("function"==typeof url)return url.call(this,[data.id||data,data]);var urldata=[];for(var key in filter)urldata.push("dhx_filter["+key+"]="+encodeURIComponent(filter[key]));return this.loadXML(url+(url.indexOf("?")<0?"?":"&")+urldata.join("&")),!1}},dhtmlXTreeObject.prototype.update=function(id,data){dhx.isUndefined(data.text)||this.setItemText(id,data.text)})}(),dataProcessor.prototype={url:function(a){return-1!=a.indexOf("?")?"&":"?"},setTransactionMode:function(c,a){"object"==typeof c?(this._tMode=c.mode||this._tMode,this._headers=this._headers||c.headers,this._payload=this._payload||c.payload):(this._tMode=c,this._tSend=a),"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0)},escape:function(a){return this._utf?encodeURIComponent(a):escape(a)},enableUTFencoding:function(a){this._utf=dhx4.s2b(a)},setDataColumns:function(a){this._columns="string"==typeof a?a.split(","):a},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(a){this._endnm=dhx4.s2b(a)},enablePartialDataSend:function(a){this._changed=dhx4.s2b(a)},setUpdateMode:function(c,a){this.autoUpdate="cell"==c,this.updateMode=c,this.dnd=a},ignore:function(c,a){this._silent_mode=!0,c.call(a||window),this._silent_mode=!1},setUpdated:function(g,e,h){if(!this._silent_mode){var c=this.findRow(g);h=h||"updated";var a=this.obj.getUserData(g,this.action_param);a&&"updated"==h&&(h=a),e?(this.set_invalid(g,!1),this.updatedRows[c]=g,this.obj.setUserData(g,this.action_param,h),this._in_progress[g]&&(this._in_progress[g]="wait")):this.is_invalid(g)||(this.updatedRows.splice(c,1),this.obj.setUserData(g,this.action_param,"")),e||this._clearUpdateFlag(g),this.markRow(g,e,h),e&&this.autoUpdate&&this.sendData(g)}},_clearUpdateFlag:function(a){},markRow:function(l,e,h){var g="",c=this.is_invalid(l);if(c&&(g=this.styles[c],e=!0),this.callEvent("onRowMark",[l,e,h,c])&&(g=this.styles[e?h:"clear"]+g,this.obj[this._methods[0]](l,g),c&&c.details)){g+=this.styles[c+"_cell"];for(var a=0;a<c.details.length;a++)c.details[a]&&this.obj[this._methods[1]](l,a,g)}},getState:function(a){return this.obj.getUserData(a,this.action_param)},is_invalid:function(a){return this._invalid[a]},set_invalid:function(e,c,a){a&&(c={value:c,details:a,toString:function(){return this.value.toString()}}),this._invalid[e]=c},checkBeforeUpdate:function(a){return!0},sendData:function(a){if(!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2){if(this.obj.editStop&&this.obj.editStop(),void 0===a||this._tSend)return this.sendAllData();if(this._in_progress[a])return!1;if(this.messages=[],"deleted"!==this.getState(a)&&!this.checkBeforeUpdate(a)&&this.callEvent("onValidationError",[a,this.messages]))return!1;this._beforeSendData(this._getRowData(a),a)}},_beforeSendData:function(a,c){if(!this.callEvent("onBeforeUpdate",[c,this.getState(c),a]))return!1;this._sendData(a,c)},serialize:function(g,h){if("string"==typeof g)return g;if(void 0!==h)return this.serialize_one(g,"");var a=[],e=[];for(var c in g)g.hasOwnProperty(c)&&(a.push(this.serialize_one(g[c],c+this.post_delim)),e.push(c));return a.push("ids="+this.escape(e.join(","))),window.dhtmlx&&dhtmlx.security_key&&a.push("dhx_security="+dhtmlx.security_key),a.join("&")},serialize_one:function(g,c){if("string"==typeof g)return g;var a=[];for(var e in g)if(g.hasOwnProperty(e)){if(("id"==e||e==this.action_param)&&"REST"==this._tMode)continue;a.push(this.escape((c||"")+e)+"="+this.escape(g[e]))}return a.join("&")},_applyPayload:function(a){if(this._payload)for(var c in this._payload)a=a+(-1===a.indexOf("?")?"?":"&")+this.escape(c)+"="+this.escape(this._payload[c]);return a},_sendData:function(h,l){if(h){if(!this.callEvent("onBeforeDataSending",l?[l,this.getState(l),h]:[null,null,h]))return!1;l&&(this._in_progress[l]=(new Date).valueOf());var r=this,o=function(u){var w=[];if(l)w.push(l);else if(h)for(var v in h)w.push(v);return r.afterUpdate(r,u,w)},c=this.serverProcessor+(this._user?this.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):""),s=this._applyPayload(c);if("GET"==this._tMode)dhx4.ajax.query({url:s+(-1!=s.indexOf("?")?"&":"?")+this.serialize(h,l),method:"GET",headers:this._headers,callback:o});else if("POST"==this._tMode)dhx4.ajax.query({url:s,method:"POST",headers:this._headers,callback:o,data:this.serialize(h,l)});else if("REST"==this._tMode){var e=this.getState(l),g=c.replace(/(\&|\?)editing\=true/,""),m=g.split("?");m[1]&&(m[1]="?"+m[1]);var n="",a="post";"inserted"==e?n=this.serialize(h,l):("deleted"==e?a="DELETE":(a="PUT",n=this.serialize(h,l)),g=m[0]+l+(m[1]||"")),this._applyPayload(g),dhx4.ajax.query({url:g,method:a,headers:this._headers,data:n,callback:o})}this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var c=!0,a=0;a<this.updatedRows.length;a++)"deleted"!==this.getState(this.updatedRows[a])&&(c&=this.checkBeforeUpdate(this.updatedRows[a]));if(!c&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(a=0;a<this.updatedRows.length;a++)if(!this._in_progress[this.updatedRows[a]]){if(this.is_invalid(this.updatedRows[a]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[a]),this.updatedRows[a]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(g){for(var c={},a=!1,e=0;e<this.updatedRows.length;e++){var h=this.updatedRows[e];this._in_progress[h]||this.is_invalid(h)||this.callEvent("onBeforeUpdate",[h,this.getState(h),this._getRowData(h)])&&(c[h]=this._getRowData(h,h+this.post_delim),a=!0,this._in_progress[h]=(new Date).valueOf())}return a?c:null},setVerificator:function(c,a){this.mandatoryFields[c]=a||function(e){return""!==e}},clearVerificator:function(a){this.mandatoryFields[a]=!1},findRow:function(c){var a=0;for(a=0;a<this.updatedRows.length&&c!=this.updatedRows[a];a++);return a},defineAction:function(a,c){this._uActions||(this._uActions=[]),this._uActions[a]=c},afterUpdateCallback:function(c,m,l,h){var a=c,g="error"!=l&&"invalid"!=l;if(g||this.set_invalid(c,l),this._uActions&&this._uActions[l]&&!this._uActions[l](h))return delete this._in_progress[a];"wait"!=this._in_progress[a]&&this.setUpdated(c,!1);var e=c;switch(l){case"inserted":case"insert":m!=c&&(this.obj[this._methods[2]](c,m),c=m);break;case"delete":case"deleted":return this.obj.setUserData(c,this.action_param,"true_deleted"),this.obj[this._methods[3]](c),delete this._in_progress[a],this.callEvent("onAfterUpdate",[c,l,m,h])}"wait"!=this._in_progress[a]?(g&&this.obj.setUserData(c,this.action_param,""),delete this._in_progress[a]):(delete this._in_progress[a],this.setUpdated(m,!0,this.obj.getUserData(c,this.action_param))),this.callEvent("onAfterUpdate",[e,l,m,h])},afterUpdate:function(o,n,a){if(window.JSON)try{var v=JSON.parse(n.xmlDoc.responseText),h=v.action||this.getState(a)||"updated",c=v.sid||a[0],g=v.tid||a[0];return o.afterUpdateCallback(c,g,h,v),void o.finalizeUpdate()}catch(r){}var u=dhx4.ajax.xmltop("data",n.xmlDoc);if(!u||"DIV"==u.tagName)return this.cleanUpdate(a);var s=dhx4.ajax.xpath("//data/action",u);if(!s.length)return this.cleanUpdate(a);for(var m=0;m<s.length;m++){var l=s[m];h=l.getAttribute("type"),c=l.getAttribute("sid"),g=l.getAttribute("tid");o.afterUpdateCallback(c,g,h,l)}o.finalizeUpdate()},cleanUpdate:function(c){if(c)for(var a=0;a<c.length;a++)delete this._in_progress[c[a]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(a){(this.obj=a)._dp_init&&a._dp_init(this),this.connector_init&&(a._dataprocessor=this)},setOnAfterUpdate:function(a){this.attachEvent("onAfterUpdate",a)},enableDebug:function(a){},setOnBeforeUpdateHandler:function(a){this.attachEvent("onBeforeDataSending",a)},setAutoUpdate:function(e,c){e=e||2e3,this._user=c||(new Date).valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(g,l,m,h){this.afterAutoUpdate(g,l,m,h)}),this.attachEvent("onFullSync",function(){this.fullSync()});var a=this;window.setInterval(function(){a.loadUpdate()},e)},afterAutoUpdate:function(a,e,g,c){return"collision"!=e||!(this._need_update=!0)},fullSync:function(){return 1==this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(a,c){if(this._update_busy)return!1;this._update_busy=!0,dhx4.ajax.get(a,c)},_v:function(a){return a.firstChild?a.firstChild.nodeValue:""},_a:function(a){for(var e=[],c=0;c<a.length;c++)e[c]=this._v(a[c]);return e},loadUpdate:function(){var c=this,a=this.obj.getUserData(0,"version"),e=this.serverProcessor+this.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+a].join("&");e=e.replace("editing=true&",""),this.getUpdates(e,function(o){var s=dhx4.ajax.xmltop("updates",o.xmlDoc),l=dhx4.ajax.xpath("//userdata",s);c.obj.setUserData(0,"version",c._v(l[0]));var g=dhx4.ajax.xpath("//update",s);if(g.length){c._silent_mode=!0;for(var m=0;m<g.length;m++){var h=g[m].getAttribute("status"),u=g[m].getAttribute("id"),n=g[m].getAttribute("parent");switch(h){case"inserted":c.callEvent("insertCallback",[g[m],u,n]);break;case"updated":c.callEvent("updateCallback",[g[m],u,n]);break;case"deleted":c.callEvent("deleteCallback",[g[m],u,n])}}c._silent_mode=!1}c._update_busy=!1,c=null})}},window.dataProcessor&&!dataProcessor.prototype.init_original&&(dataProcessor.prototype.connector_init=!0);