(function ($) { $.fn.extend({ setClock: function (options) { var defaults = { "aWeekDay": ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"], "sFormat": "YYYY年MM月DD日", "clockId": "", "hCol": "#000", "mCol": "#999", "sCol": "red", "isNumCol": "#000", "noNumCol": "#ccc", "dCol": "#ffffff", "bgCol": "#ffffff", "clockType": 0 }; var _this = this; var settings = $.extend({}, defaults, options); var $canvasClock = _this.find(".canvasClock"); var $elecClock = _this.find(".elecClock"); if (settings.clockType == 0) { var $clockIn = _this.find(".clockIn"); var clockName = settings.clockId; $clockIn.drawClock({ cloId: clockName }) } if (settings.clockType == 1) { var $digits = _this.find(".digits"); var $hou01 = _this.find(".hou01"); var $hou02 = _this.find(".hou02"); var $min01 = _this.find(".min01"); var $min02 = _this.find(".min02"); var $sec01 = _this.find(".sec01"); var $sec02 = _this.find(".sec02"); var $date = _this.find(".date_a"); var $week = _this.find(".date_b"); (function upDateTime() { var timeout = 0; if ($digits) { var _now = moment().format("HHmmss"); $hou01.text(_now[0]); $hou02.text(_now[1]); $min01.text(_now[2]); $min02.text(_now[3]); if ($sec01 || $sec02) { $sec01.text(_now[4]); $sec02.text(_now[5]) } } if ($date) { var _date = moment().format(settings.sFormat); $date.text(_date) } if ($week) { var _week = settings.aWeekDay[moment().format("d")]; $week.text(_week) } clearTimeout(timeout); timeout = setTimeout(upDateTime, 1000) })() } } }) })(jQuery);