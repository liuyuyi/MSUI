function xmlPointer(data){this.d=data}function dhtmlXTreeObject(htmlObject,width,height,rootId){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}this.parentObject="object"!=typeof htmlObject?document.getElementById(htmlObject):htmlObject,this.parentObject.style.overflow="hidden",this._itim_dg=!0,this.dlmtr=",",this.dropLower=!1,this.enableIEImageFix(),this.xmlstate=0,this.mytype="tree",this.smcheck=!0,this.width=width,this.height=height,this.rootId=rootId,this.childCalc=null,this.def_img_x="18px",this.def_img_y="18px",this.def_line_img_x="18px",this.def_line_img_y="18px",this._dragged=new Array,this._selected=new Array,this.style_pointer="pointer",this._aimgs=!0,this.htmlcA=" [",this.htmlcB="]",this.lWin=window,this.cMenu=0,this.mlitems=0,this.iconURL="",this.dadmode=0,this.slowParse=!1,this.autoScroll=!0,this.hfMode=0,this.nodeCut=new Array,this.XMLsource=0,this.XMLloadingWarning=0,this._idpull={},this._pullSize=0,this.treeLinesOn=!0,this.tscheck=!1,this.timgen=!0,this.dpcpy=!1,this._ld_id=null,this._oie_onXLE=[],this.imPath=window.dhx_globalImgPath||"",this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif"),this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif"),this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif"),this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"),this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"),this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif"),this.cutImg=new Array(0,0,0),this.cutImage="but_cut.gif",dhtmlxEventable(this),this.dragger=new dhtmlDragAndDropObject,this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this),this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none",this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow",this.allTree=this._createSelf(),this.allTree.appendChild(this.htmlNode.htmlNode),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden");var self=this;return this.allTree.onselectstart=new Function("return false;"),_isMacOS&&(this.allTree.oncontextmenu=function(e){return self._doContClick(e||window.event,!0)}),this.allTree.onmousedown=function(e){return self._doContClick(e||window.event)},this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe),_isIE&&this.preventIECashing(!0),window.addEventListener&&window.addEventListener("unload",function(){try{self.destructor()}catch(e){}},!1),window.attachEvent&&window.attachEvent("onunload",function(){try{self.destructor()}catch(e){}}),this.setImagesPath=this.setImagePath,this.setIconsPath=this.setIconPath,dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path),dhtmlx.skin&&this.setSkin(dhtmlx.skin),this}function cObject(){return this}function dhtmlXTreeItemObject(itemId,itemText,parentObject,treeObject,actionHandler,mode){return this.htmlNode="",this.acolor="",this.scolor="",this.tr=0,this.childsCount=0,this.tempDOMM=0,this.tempDOMU=0,this.dragSpan=0,this.dragMove=0,this.span=0,this.closeble=1,this.childNodes=new Array,this.userData=new cObject,this.checkstate=0,this.treeNod=treeObject,this.label=itemText,this.parentObject=parentObject,this.actionHandler=actionHandler,this.images=new Array(treeObject.imageArray[0],treeObject.imageArray[1],treeObject.imageArray[2]),this.id=treeObject._globalIdStorageAdd(itemId,this),this.treeNod.checkBoxOff?this.htmlNode=this.treeNod._createItem(1,this,mode):this.htmlNode=this.treeNod._createItem(0,this,mode),this.htmlNode.objBelong=this}xmlPointer.prototype={text:function(){return _isFF?(new XMLSerializer).serializeToString(this.d):this.d.xml},get:function(name){return this.d.getAttribute(name)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.data:""},each:function(name,f,t,i){var a=this.d.childNodes,c=new xmlPointer;if(a.length)for(i=i||0;i<a.length;i++)if(a[i].tagName==name&&(c.d=a[i],-1==f.apply(t,[c,i])))return},get_all:function(){for(var a={},b=this.d.attributes,i=0;i<b.length;i++)a[b[i].name]=b[i].value;return a},sub:function(name){var a=this.d.childNodes,c=new xmlPointer;if(a.length)for(var i=0;i<a.length;i++)if(a[i].tagName==name)return c.d=a[i],c},up:function(name){return new xmlPointer(this.d.parentNode)},set:function(name,val){this.d.setAttribute(name,val)},clone:function(name){return new xmlPointer(this.d)},sub_exists:function(name){var a=this.d.childNodes;if(a.length)for(var i=0;i<a.length;i++)if(a[i].tagName==name)return!0;return!1},through:function(name,rule,v,f,t){var a=this.d.childNodes;if(a.length)for(var i=0;i<a.length;i++){if(a[i].tagName==name&&null!=a[i].getAttribute(rule)&&""!=a[i].getAttribute(rule)&&(!v||a[i].getAttribute(rule)==v)){var c=new xmlPointer(a[i]);f.apply(t,[c,i])}var w=this.d;this.d=a[i],this.through(name,rule,v,f,t),this.d=w}}},dhtmlXTreeObject.prototype.setDataMode=function(mode){this._datamode=mode},dhtmlXTreeObject.prototype._doContClick=function(ev,force){if(!force&&2!=ev.button)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(var el=_isIE?ev.srcElement:ev.target;el&&"BODY"!=el.tagName&&!el.parentObject;)el=el.parentNode;if(!el||!el.parentObject)return!0;var obj=el.parentObject;if(this.callEvent("onRightClick",[obj.id,ev])||((ev.srcElement||ev.target).oncontextmenu=function(e){return!((e||event).cancelBubble=!0)}),this._acMenu=obj.cMenu||this.cMenu,this._acMenu){if(!this.callEvent("onBeforeContextMenu",[obj.id]))return!0;if(_isMacOS||((ev.srcElement||ev.target).oncontextmenu=function(e){return!((e||event).cancelBubble=!0)}),this._acMenu.showContextMenu){var dEl0=window.document.documentElement,dEl1=window.document.body,corrector=new Array(dEl0.scrollLeft||dEl1.scrollLeft,dEl0.scrollTop||dEl1.scrollTop);if(_isIE)var x=ev.clientX+corrector[0],y=ev.clientY+corrector[1];else x=ev.pageX,y=ev.pageY;this._acMenu.showContextMenu(x-1,y-1),this.contextID=obj.id,ev.cancelBubble=!0,this._acMenu._skip_hide=!0}else el.contextMenuId=obj.id,el.contextMenu=this._acMenu,el.a=this._acMenu._contextStart,el.a(el,ev),el.a=null;return!1}return!0},dhtmlXTreeObject.prototype.enableIEImageFix=function(mode){mode?(this._getImg=function(){var z=document.createElement("DIV");return z.innerHTML="&nbsp;",z.className="dhx_bg_img_fix",z},this._setSrc=function(a,b){a.style.backgroundImage="url("+b+")"},this._getSrc=function(a){var z=a.style.backgroundImage;return z.substr(4,z.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(id){return document.createElement(id==this.rootId?"div":"img")},this._setSrc=function(a,b){a.src=b},this._getSrc=function(a){return a.src})},dhtmlXTreeObject.prototype.destructor=function(){for(var a in this._idpull){var z=this._idpull[a];z&&(z.parentObject=null,z.treeNod=null,z.childNodes=null,z.span=null,z.tr.nodem=null,z.tr=null,z.htmlNode.objBelong=null,z.htmlNode=null,this._idpull[a]=null)}for(var a in this.parentObject.innerHTML="",this.XMLLoader&&this.XMLLoader.destructor(),this.allTree.onselectstart=null,this.allTree.oncontextmenu=null,this.allTree.onmousedown=null,this)this[a]=null},cObject.prototype=new Object,cObject.prototype.clone=function(){function _dummy(){}return _dummy.prototype=this,new _dummy},dhtmlXTreeObject.prototype._globalIdStorageAdd=function(itemId,itemObject){return this._globalIdStorageFind(itemId,1,1)?(itemId=itemId+"_"+(new Date).valueOf(),this._globalIdStorageAdd(itemId,itemObject)):(this._idpull[itemId]=itemObject,this._pullSize++,itemId)},dhtmlXTreeObject.prototype._globalIdStorageSub=function(itemId){this._idpull[itemId]&&(this._unselectItem(this._idpull[itemId]),this._idpull[itemId]=null,this._pullSize--),this._locker&&this._locker[itemId]&&(this._locker[itemId]=!1)},dhtmlXTreeObject.prototype._globalIdStorageFind=function(itemId,skipXMLSearch,skipParsing,isreparse){var z=this._idpull[itemId];return z||null},dhtmlXTreeObject.prototype._escape=function(str){switch(this.utfesc){case"none":return str;case"utf8":return encodeURIComponent(str);default:return escape(str)}},dhtmlXTreeObject.prototype._drawNewTr=function(htmlObject,node){var tr=document.createElement("tr"),td1=document.createElement("td"),td2=document.createElement("td");return td1.appendChild(document.createTextNode(" ")),td2.colSpan=3,td2.appendChild(htmlObject),tr.appendChild(td1),tr.appendChild(td2),tr},dhtmlXTreeObject.prototype.loadXMLString=function(xmlString,afterCall){this.parsCount||this.callEvent("onXLS",[this,null]),this.xmlstate=1,afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXMLString(xmlString)},dhtmlXTreeObject.prototype.loadXML=function(file,afterCall){if(this._datamode&&"xml"!=this._datamode)return this["load"+this._datamode.toUpperCase()](file,afterCall);this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1,this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe),afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXML(file)},dhtmlXTreeObject.prototype._attachChildNode=function(parentObject,itemId,itemText,itemActionHandler,image1,image2,image3,optionStr,childs,beforeNode,afterNode){beforeNode&&beforeNode.parentObject&&(parentObject=beforeNode.parentObject),0==parentObject.XMLload&&this.XMLsource&&!this.XMLloadingWarning&&(parentObject.XMLload=1,this._loadDynXML(parentObject.id));var n,Count=parentObject.childsCount,Nodes=parentObject.childNodes;if(afterNode&&afterNode.tr.previousSibling&&(afterNode.tr.previousSibling.previousSibling?beforeNode=afterNode.tr.previousSibling.nodem:optionStr=optionStr.replace("TOP","")+",TOP"),beforeNode){var ik,jk;for(ik=0;ik<Count;ik++)if(Nodes[ik]==beforeNode){for(jk=Count;jk!=ik;jk--)Nodes[1+jk]=Nodes[jk];break}Count=++ik}if(optionStr)for(var tempStr=optionStr.split(","),i=0;i<tempStr.length;i++)switch(tempStr[i]){case"TOP":for(0<parentObject.childsCount&&((beforeNode=new Object).tr=parentObject.childNodes[0].tr.previousSibling),parentObject._has_top=!0,ik=Count;0<ik;ik--)Nodes[ik]=Nodes[ik-1];Count=0}(n=this._idpull[itemId])&&-1==n.span||(n=Nodes[Count]=new dhtmlXTreeItemObject(itemId,itemText,parentObject,this,itemActionHandler,1),itemId=Nodes[Count].id,parentObject.childsCount++),n.htmlNode||(n.label=itemText,n.htmlNode=this._createItem(this.checkBoxOff?1:0,n),n.htmlNode.objBelong=n),image1&&(n.images[0]=image1),image2&&(n.images[1]=image2),image3&&(n.images[2]=image3);var tr=this._drawNewTr(n.htmlNode);if((this.XMLloadingWarning||this._hAdI)&&(n.htmlNode.parentNode.parentNode.style.display="none"),beforeNode&&beforeNode.tr&&beforeNode.tr.nextSibling?parentObject.htmlNode.childNodes[0].insertBefore(tr,beforeNode.tr.nextSibling):this.parsingOn==parentObject.id?this.parsedArray[this.parsedArray.length]=tr:parentObject.htmlNode.childNodes[0].appendChild(tr),beforeNode&&!beforeNode.span&&(beforeNode=null),this.XMLsource&&(n.XMLload=childs&&0!=childs?0:1),(n.tr=tr).nodem=n,0==parentObject.itemId&&(tr.childNodes[0].className="hiddenRow"),(parentObject._r_logic||this._frbtr)&&this._setSrc(n.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]),optionStr)for(tempStr=optionStr.split(","),i=0;i<tempStr.length;i++)switch(tempStr[i]){case"SELECT":this.selectItem(itemId,!1);break;case"CALL":this.selectItem(itemId,!0);break;case"CHILD":n.XMLload=0;break;case"CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+itemId:this.setCheck(itemId,1);break;case"HCHECKED":this._setCheck(n,"unsure");break;case"OPEN":n.openMe=1}if(!this.XMLloadingWarning&&(this._getOpenState(parentObject)<0&&!this._hAdI&&this.openItem(parentObject.id),beforeNode&&(this._correctPlus(beforeNode),this._correctLine(beforeNode)),this._correctPlus(parentObject),this._correctLine(parentObject),this._correctPlus(n),2<=parentObject.childsCount&&(this._correctPlus(Nodes[parentObject.childsCount-2]),this._correctLine(Nodes[parentObject.childsCount-2])),2!=parentObject.childsCount&&this._correctPlus(Nodes[0]),this.tscheck&&this._correctCheckStates(parentObject),this._onradh))if(1==this.xmlstate){var old=this.onXLE;this.onXLE=function(id){this._onradh(itemId),old&&old(id)}}else this._onradh(itemId);return n},dhtmlXTreeObject.prototype.insertNewItem=function(parentId,itemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children){var parentObject=this._globalIdStorageFind(parentId);if(!parentObject)return-1;var nodez=this._attachChildNode(parentObject,itemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children);return this._idpull[this.rootId].XMLload||(this._idpull[this.rootId].XMLload=1),nodez},dhtmlXTreeObject.prototype.insertNewChild=function(parentId,itemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children){return this.insertNewItem(parentId,itemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children)},dhtmlXTreeObject.prototype._parseXMLTree=function(a,b,c,d,xml){var p=new xmlPointer(xml.getXMLTopNode("tree"));a._parse(p),a._p=p},dhtmlXTreeObject.prototype._parseItem=function(c,temp,preNode,befNode){var id;if(!this._srnd||this._idpull[id=c.get("id")]&&this._idpull[id].span){var a=c.get_all();if("object"!=typeof this.waitUpdateXML||this.waitUpdateXML[a.id]){var zST=[];if(a.select&&zST.push("SELECT"),a.top&&zST.push("TOP"),a.call&&(this.nodeAskingCall=a.id),-1==a.checked?zST.push("HCHECKED"):a.checked&&zST.push("CHECKED"),a.open&&zST.push("OPEN"),this.waitUpdateXML)if(this._globalIdStorageFind(a.id))var newNode=this.updateItem(a.id,a.text,a.im0,a.im1,a.im2,a.checked,a.child);else{0==this.npl?zST.push("TOP"):preNode=temp.childNodes[this.npl];newNode=this._attachChildNode(temp,a.id,a.text,0,a.im0,a.im1,a.im2,zST.join(","),a.child,0,preNode);a.id=newNode.id,preNode=null}else newNode=this._attachChildNode(temp,a.id,a.text,0,a.im0,a.im1,a.im2,zST.join(","),a.child,befNode||0,preNode);if(a.tooltip&&(newNode.span.parentNode.parentNode.title=a.tooltip),a.style&&(newNode.span.style.cssText?newNode.span.style.cssText+=";"+a.style:newNode.span.setAttribute("style",newNode.span.getAttribute("style")+"; "+a.style)),a.radio&&(newNode._r_logic=!0),a.nocheckbox)newNode.span.parentNode.previousSibling.previousSibling.style.display="none",newNode.nocheckbox=!0;a.disabled&&(null!=a.checked&&this._setCheck(newNode,a.checked),this.disableCheckbox(newNode,1)),newNode._acc=a.child||0,this.parserExtension&&this.parserExtension._parseExtension.call(this,c,a,temp?temp.id:0),this.setItemColor(newNode,a.aCol,a.sCol),"1"==a.locked&&this.lockItem(newNode.id,!0,!0),(a.imwidth||a.imheight)&&this.setIconSize(a.imwidth,a.imheight,newNode),"0"!=a.closeable&&"1"!=a.closeable||this.setItemCloseable(newNode,a.closeable);var zcall="";a.topoffset&&this.setItemTopOffset(newNode,a.topoffset),this.slowParse&&"object"!=typeof this.waitUpdateXML||c.sub_exists("item")&&(zcall=this._parse(c,a.id,1)),""!=zcall&&(this.nodeAskingCall=zcall),c.each("userdata",function(u){this.setUserData(c.get("id"),u.get("name"),u.content())},this)}else this._parse(c,a.id,1)}else this._addItemSRND(temp.id,id,c)},dhtmlXTreeObject.prototype._parse=function(p,parentId,level,start){if(this._srnd&&!this.parentObject.offsetHeight){var self=this;return window.setTimeout(function(){self._parse(p,parentId,level,start)},100)}if(p.exists()){if(this.skipLock=!0,!parentId){parentId=p.get("id");var skey=p.get("dhx_security");skey&&(dhtmlx.security_key=skey),p.get("radio")&&(this.htmlNode._r_logic=!0),this.parsingOn=parentId,this.parsedArray=new Array,this.setCheckList="",this.nodeAskingCall=""}var temp=this._globalIdStorageFind(parentId);if(!temp)return dhtmlxError.throwError("DataStructure","XML refers to not existing parent");if(this.parsCount=this.parsCount?this.parsCount+1:1,this.XMLloadingWarning=1,!temp.childsCount||start||this._edsbps||temp._has_top)preNode=0;else var preNode=0;if(this.npl=0,p.each("item",function(c,i){temp.XMLload=1,this._parseItem(c,temp,0,preNode),this.npl++},this,start),!level){if(p.each("userdata",function(u){this.setUserData(p.get("id"),u.get("name"),u.content())},this),temp.XMLload=1,this.waitUpdateXML){this.waitUpdateXML=!1;for(var i=temp.childsCount-1;0<=i;i--)temp.childNodes[i]._dmark&&this.deleteItem(temp.childNodes[i].id)}for(this._globalIdStorageFind(this.parsingOn),i=0;i<this.parsedArray.length;i++)temp.htmlNode.childNodes[0].appendChild(this.parsedArray[i]);this.parsedArray=[],this.lastLoadedXMLId=parentId,this.XMLloadingWarning=0;for(var chArr=this.setCheckList.split(this.dlmtr),n=0;n<chArr.length;n++)chArr[n]&&this.setCheck(chArr[n],1);this.XMLsource&&this.tscheck&&this.smcheck&&temp.id!=this.rootId&&(0===temp.checkstate?this._setSubChecked(0,temp):1===temp.checkstate&&this._setSubChecked(1,temp)),this._redrawFrom(this,null,start),p.get("order")&&"none"!=p.get("order")&&this._reorderBranch(temp,p.get("order"),!0),""!=this.nodeAskingCall&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]),this._branchUpdate&&this._branchUpdateNext(p)}if(1==this.parsCount){if(this.parsingOn=null,!this._edsbps||!this._edsbpsA.length){var that=this;window.setTimeout(function(){that.callEvent("onXLE",[that,parentId])},1),this.xmlstate=0}this.skipLock=!1}return this.parsCount--,!level&&this.onXLE&&this.onXLE(this,parentId),this.nodeAskingCall}},dhtmlXTreeObject.prototype._branchUpdateNext=function(p){p.each("item",function(c){var nid=c.get("id");this._idpull[nid]&&!this._idpull[nid].XMLload||(this._branchUpdate++,this.smartRefreshItem(c.get("id"),c))},this),this._branchUpdate--},dhtmlXTreeObject.prototype.checkUserData=function(node,parentId){if(1==node.nodeType&&"userdata"==node.tagName){var name=node.getAttribute("name");name&&node.childNodes[0]&&this.setUserData(parentId,name,node.childNodes[0].data)}},dhtmlXTreeObject.prototype._redrawFrom=function(dhtmlObject,itemObject,start,visMode){if(itemObject)tempx=itemObject;else{var tempx=dhtmlObject._globalIdStorageFind(dhtmlObject.lastLoadedXMLId);if(dhtmlObject.lastLoadedXMLId=-1,!tempx)return 0}for(var i=start?start-1:0;i<tempx.childsCount;i++)this._branchUpdate&&1!=this._getOpenState(tempx)||itemObject&&1!=visMode||(tempx.childNodes[i].htmlNode.parentNode.parentNode.style.display=""),1==tempx.childNodes[i].openMe&&(this._openItem(tempx.childNodes[i]),tempx.childNodes[i].openMe=0),dhtmlObject._redrawFrom(dhtmlObject,tempx.childNodes[i]);tempx.unParsed||!tempx.XMLload&&this.XMLsource||(tempx._acc=0),dhtmlObject._correctLine(tempx),dhtmlObject._correctPlus(tempx)},dhtmlXTreeObject.prototype._createSelf=function(){var div=document.createElement("div");return div.className="containerTableStyle",div.style.width=this.width,div.style.height=this.height,this.parentObject.appendChild(div),div},dhtmlXTreeObject.prototype._xcloseAll=function(itemObject){if(!itemObject.unParsed){if(this.rootId!=itemObject.id){if(!itemObject.htmlNode)return;for(var Nodes=itemObject.htmlNode.childNodes[0].childNodes,Count=Nodes.length,i=1;i<Count;i++)Nodes[i].style.display="none";this._correctPlus(itemObject)}for(i=0;i<itemObject.childsCount;i++)itemObject.childNodes[i].childsCount&&this._xcloseAll(itemObject.childNodes[i])}},dhtmlXTreeObject.prototype._xopenAll=function(itemObject){this._HideShow(itemObject,2);for(var i=0;i<itemObject.childsCount;i++)this._xopenAll(itemObject.childNodes[i])},dhtmlXTreeObject.prototype._correctPlus=function(itemObject){if(itemObject.htmlNode){var imsrc=itemObject.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,imsrc2=itemObject.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],workArray=this.lineArray;if(this.XMLsource&&!itemObject.XMLload){workArray=this.plusArray;if(this._setSrc(imsrc2,this.iconURL+itemObject.images[2]),this._txtimg)return imsrc.innerHTML="[+]"}else if(itemObject.childsCount||itemObject.unParsed)if(itemObject.htmlNode.childNodes[0].childNodes[1]&&"none"!=itemObject.htmlNode.childNodes[0].childNodes[1].style.display){if(!itemObject.wsign)workArray=this.minusArray;if(this._setSrc(imsrc2,this.iconURL+itemObject.images[1]),this._txtimg)return imsrc.innerHTML="[-]"}else{if(!itemObject.wsign)workArray=this.plusArray;if(this._setSrc(imsrc2,this.iconURL+itemObject.images[2]),this._txtimg)return imsrc.innerHTML="[+]"}else this._setSrc(imsrc2,this.iconURL+itemObject.images[0]);var tempNum=2;itemObject.treeNod.treeLinesOn?(itemObject.parentObject&&(tempNum=this._getCountStatus(itemObject.id,itemObject.parentObject)),this._setSrc(imsrc,this.imPath+workArray[tempNum])):this._setSrc(imsrc,this.imPath+workArray[3])}},dhtmlXTreeObject.prototype._correctLine=function(itemObject){if(itemObject.htmlNode){var sNode=itemObject.parentObject;if(sNode)if(0!=this._getLineStatus(itemObject.id,sNode)&&this.treeLinesOn)for(i=1;i<=itemObject.childsCount&&itemObject.htmlNode.childNodes[0].childNodes[i];i++)itemObject.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")",itemObject.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundRepeat="repeat-y";else for(var i=1;i<=itemObject.childsCount&&itemObject.htmlNode.childNodes[0].childNodes[i];i++)itemObject.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundImage="",itemObject.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundRepeat=""}},dhtmlXTreeObject.prototype._getCountStatus=function(itemId,itemObject){return itemObject.childsCount<=1?itemObject.id==this.rootId?4:0:itemObject.childNodes[0].id==itemId?itemObject.id==this.rootId?2:1:itemObject.childNodes[itemObject.childsCount-1].id==itemId?0:1},dhtmlXTreeObject.prototype._getLineStatus=function(itemId,itemObject){return itemObject.childNodes[itemObject.childsCount-1].id==itemId?0:1},dhtmlXTreeObject.prototype._HideShow=function(itemObject,mode){if(this.XMLsource&&!itemObject.XMLload){if(1==mode)return;return itemObject.XMLload=1,void this._loadDynXML(itemObject.id)}var Nodes=itemObject.htmlNode.childNodes[0].childNodes,Count=Nodes.length;if(1<Count){"none"==Nodes[1].style.display&&1!=mode||2==mode?nodestyle="":(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none");for(var i=1;i<Count;i++)Nodes[i].style.display=nodestyle}this._correctPlus(itemObject)},dhtmlXTreeObject.prototype._getOpenState=function(itemObject){if(!itemObject.htmlNode)return 0;var z=itemObject.htmlNode.childNodes[0].childNodes;return z.length<=1?0:"none"!=z[1].style.display?1:-1},dhtmlXTreeObject.prototype.onRowClick2=function(){var that=this.parentObject.treeNod;return that.callEvent("onDblClick",[this.parentObject.id,that])&&(this.parentObject.closeble&&"0"!=this.parentObject.closeble?that._HideShow(this.parentObject):that._HideShow(this.parentObject,2),that.checkEvent("onOpenEnd")&&(that.xmlstate?(that._oie_onXLE.push(that.onXLE),that.onXLE=that._epnFHe):that.callEvent("onOpenEnd",[this.parentObject.id,that._getOpenState(this.parentObject)]))),!1},dhtmlXTreeObject.prototype.onRowClick=function(){var that=this.parentObject.treeNod;if(!that.callEvent("onOpenStart",[this.parentObject.id,that._getOpenState(this.parentObject)]))return 0;this.parentObject.closeble&&"0"!=this.parentObject.closeble?that._HideShow(this.parentObject):that._HideShow(this.parentObject,2),that.checkEvent("onOpenEnd")&&(that.xmlstate?(that._oie_onXLE.push(that.onXLE),that.onXLE=that._epnFHe):that.callEvent("onOpenEnd",[this.parentObject.id,that._getOpenState(this.parentObject)]))},dhtmlXTreeObject.prototype._epnFHe=function(that,id,flag){id!=this.rootId&&this.callEvent("onOpenEnd",[id,that.getOpenState(id)]),that.onXLE=that._oie_onXLE.pop(),flag||that._oie_onXLE.length||that.onXLE&&that.onXLE(that,id)},dhtmlXTreeObject.prototype.onRowClickDown=function(e){e=e||window.event,this.parentObject.treeNod._selectItem(this.parentObject,e)},dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var str=new Array,i=0;i<this._selected.length;i++)str[i]=this._selected[i].id;return str.join(this.dlmtr)},dhtmlXTreeObject.prototype._selectItem=function(node,e){if(this.checkEvent("onSelect")&&(this._onSSCFold=this.getSelectedItemId()),this._unselectItems(),this._markItem(node),this.checkEvent("onSelect")){var z=this.getSelectedItemId();z!=this._onSSCFold&&this.callEvent("onSelect",[z])}},dhtmlXTreeObject.prototype._markItem=function(node){node.scolor&&(node.span.style.color=node.scolor),node.span.className="selectedTreeRow",node.i_sel=!0,this._selected[this._selected.length]=node},dhtmlXTreeObject.prototype.getIndexById=function(itemId){var z=this._globalIdStorageFind(itemId);return z?this._getIndex(z):null},dhtmlXTreeObject.prototype._getIndex=function(w){for(var z=w.parentObject,i=0;i<z.childsCount;i++)if(z.childNodes[i]==w)return i},dhtmlXTreeObject.prototype._unselectItem=function(node){if(node&&node.i_sel){node.span.className="standartTreeRow",node.acolor&&(node.span.style.color=node.acolor),node.i_sel=!1;for(var i=0;i<this._selected.length;i++)if(!this._selected[i].i_sel){this._selected.splice(i,1);break}}},dhtmlXTreeObject.prototype._unselectItems=function(){for(var i=0;i<this._selected.length;i++){var node=this._selected[i];node.span.className="standartTreeRow",node.acolor&&(node.span.style.color=node.acolor),node.i_sel=!1}this._selected=new Array},dhtmlXTreeObject.prototype.onRowSelect=function(e,htmlObject,mode){e=e||window.event;var obj=this.parentObject;htmlObject&&(obj=htmlObject.parentObject);var that=obj.treeNod,lastId=that.getSelectedItemId();e&&e.skipUnSel||that._selectItem(obj,e),mode||(obj.actionHandler?obj.actionHandler(obj.id,lastId):that.callEvent("onClick",[obj.id,lastId]))},dhtmlXTreeObject.prototype._correctCheckStates=function(dhtmlObject){if(this.tscheck&&dhtmlObject&&dhtmlObject.id!=this.rootId){var act=dhtmlObject.childNodes,flag1=0,flag2=0;if(0!=dhtmlObject.childsCount){for(var i=0;i<dhtmlObject.childsCount;i++)if(!act[i].dscheck)if(0==act[i].checkstate)flag1=1;else{if(1!=act[i].checkstate){flag2=flag1=1;break}flag2=1}flag1&&flag2?this._setCheck(dhtmlObject,"unsure"):flag1?this._setCheck(dhtmlObject,!1):this._setCheck(dhtmlObject,!0),this._correctCheckStates(dhtmlObject.parentObject)}}},dhtmlXTreeObject.prototype.onCheckBoxClick=function(e){if(this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate]))return!!this.parentObject.dscheck||(this.treeNod.tscheck?1==this.parentObject.checkstate?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):1==this.parentObject.checkstate?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0),this.treeNod._correctCheckStates(this.parentObject.parentObject),this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate]))},dhtmlXTreeObject.prototype._createItem=function(acheck,itemObject,mode){var table=document.createElement("table");table.cellSpacing=0,table.cellPadding=0,table.border=0,this.hfMode&&(table.style.tableLayout="fixed"),table.style.margin=0,table.style.padding=0;var tbody=document.createElement("tbody"),tr=document.createElement("tr"),td1=document.createElement("td");if(td1.className="standartTreeImage",this._txtimg){var img0=document.createElement("div");td1.appendChild(img0),img0.className="dhx_tree_textSign"}else{(img0=this._getImg(itemObject.id)).border="0","IMG"==img0.tagName&&(img0.align="absmiddle"),td1.appendChild(img0),img0.style.padding=0,img0.style.margin=0,img0.style.width=this.def_line_img_x,img0.style.height=this.def_line_img_y}var td11=document.createElement("td"),inp=this._getImg(this.cBROf?this.rootId:itemObject.id);inp.checked=0,this._setSrc(inp,this.imPath+this.checkArray[0]),inp.style.width="16px",inp.style.height="16px",acheck||(td11.style.display="none"),td11.appendChild(inp),this.cBROf||"IMG"!=inp.tagName||(inp.align="absmiddle"),inp.onclick=this.onCheckBoxClick,inp.treeNod=this,inp.parentObject=itemObject,window._KHTMLrv?td11.style.width="20px":td11.width="20px";var td12=document.createElement("td");td12.className="standartTreeImage";var img=this._getImg(this.timgen?itemObject.id:this.rootId);img.onmousedown=this._preventNsDrag,img.ondragstart=this._preventNsDrag,img.border="0",this._aimgs&&(img.parentObject=itemObject,"IMG"==img.tagName&&(img.align="absmiddle"),img.onclick=this.onRowSelect),mode||this._setSrc(img,this.iconURL+this.imageArray[0]),td12.appendChild(img),img.style.padding=0,img.style.margin=0,this.timgen?(td12.style.width=img.style.width=this.def_img_x,img.style.height=this.def_img_y):(img.style.width="0px",img.style.height="0px",(_isOpera||window._KHTMLrv)&&(td12.style.display="none"));var td2=document.createElement("td");return td2.className="standartTreeRow",itemObject.span=document.createElement("span"),itemObject.span.className="standartTreeRow",this.mlitems?(itemObject.span.style.width=this.mlitems,itemObject.span.style.display="block"):td2.noWrap=!0,_isIE&&7<_isIE?td2.style.width="999999px":window._KHTMLrv||(td2.style.width="100%"),itemObject.span.innerHTML=itemObject.label,td2.appendChild(itemObject.span),td2.parentObject=itemObject,td1.parentObject=itemObject,td2.onclick=this.onRowSelect,td1.onclick=this.onRowClick,td2.ondblclick=this.onRowClick2,this.ettip&&(tr.title=itemObject.label),this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(td12,this),td12.parentObject=itemObject),this.dragger.addDraggableItem(td2,this)),itemObject.span.style.paddingLeft="5px",itemObject.span.style.paddingRight="5px",td2.style.verticalAlign="",td2.style.fontSize="10px",td2.style.cursor=this.style_pointer,tr.appendChild(td1),tr.appendChild(td11),tr.appendChild(td12),tr.appendChild(td2),tbody.appendChild(tr),table.appendChild(tbody),(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))&&(tr.onmousemove=this._itemMouseIn,tr[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut),table},dhtmlXTreeObject.prototype.setImagePath=function(newPath){this.imPath=newPath,this.iconURL=newPath},dhtmlXTreeObject.prototype.setIconPath=function(path){this.iconURL=path},dhtmlXTreeObject.prototype.setOnRightClickHandler=function(func){this.attachEvent("onRightClick",func)},dhtmlXTreeObject.prototype.setOnClickHandler=function(func){this.attachEvent("onClick",func)},dhtmlXTreeObject.prototype.setOnSelectStateChange=function(func){this.attachEvent("onSelect",func)},dhtmlXTreeObject.prototype.setXMLAutoLoading=function(filePath){this.XMLsource=filePath},dhtmlXTreeObject.prototype.setOnCheckHandler=function(func){this.attachEvent("onCheck",func)},dhtmlXTreeObject.prototype.setOnOpenHandler=function(func){this.attachEvent("onOpenStart",func)},dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(func){this.attachEvent("onOpenStart",func)},dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(func){this.attachEvent("onOpenEnd",func)},dhtmlXTreeObject.prototype.setOnDblClickHandler=function(func){this.attachEvent("onDblClick",func)},dhtmlXTreeObject.prototype.openAllItems=function(itemId){var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;this._xopenAll(temp)},dhtmlXTreeObject.prototype.getOpenState=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp?this._getOpenState(temp):""},dhtmlXTreeObject.prototype.closeAllItems=function(itemId){itemId===window.undefined&&(itemId=this.rootId);var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;this._xcloseAll(temp),this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"},dhtmlXTreeObject.prototype.setUserData=function(itemId,name,value){var sNode=this._globalIdStorageFind(itemId,0,!0);sNode&&("hint"==name&&(sNode.htmlNode.childNodes[0].childNodes[0].title=value),void 0===sNode.userData["t_"+name]&&(sNode._userdatalist?sNode._userdatalist+=","+name:sNode._userdatalist=name),sNode.userData["t_"+name]=value)},dhtmlXTreeObject.prototype.getUserData=function(itemId,name){var sNode=this._globalIdStorageFind(itemId,0,!0);if(sNode)return console.log(sNode.userData["t_"+name]),sNode.userData["t_"+name]},dhtmlXTreeObject.prototype.getItemColor=function(itemId){var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;var res=new Object;return temp.acolor&&(res.acolor=temp.acolor),temp.scolor&&(res.scolor=temp.scolor),res},dhtmlXTreeObject.prototype.setItemColor=function(itemId,defaultColor,selectedColor){if(itemId&&itemId.span)var temp=itemId;else temp=this._globalIdStorageFind(itemId);if(!temp)return 0;temp.i_sel?selectedColor&&(temp.span.style.color=selectedColor):defaultColor&&(temp.span.style.color=defaultColor),selectedColor&&(temp.scolor=selectedColor),defaultColor&&(temp.acolor=defaultColor)},dhtmlXTreeObject.prototype.getItemText=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp?temp.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML:0},dhtmlXTreeObject.prototype.getParentId=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp&&temp.parentObject?temp.parentObject.id:""},dhtmlXTreeObject.prototype.changeItemId=function(itemId,newItemId){if(itemId!=newItemId){var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;temp.id=newItemId,temp.span.contextMenuId=newItemId,this._idpull[newItemId]=this._idpull[itemId],delete this._idpull[itemId]}},dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut(),this.nodeCut=(new Array).concat(this._selected);for(var i=0;i<this.nodeCut.length;i++){var tempa=this.nodeCut[i];tempa._cimgs=new Array,tempa._cimgs[0]=tempa.images[0],tempa._cimgs[1]=tempa.images[1],tempa._cimgs[2]=tempa.images[2],tempa.images[0]=tempa.images[1]=tempa.images[2]=this.cutImage,this._correctPlus(tempa)}},dhtmlXTreeObject.prototype.doPaste=function(itemId){var tobj=this._globalIdStorageFind(itemId);if(!tobj)return 0;for(var i=0;i<this.nodeCut.length;i++)this._checkPNodes(tobj,this.nodeCut[i])||this._moveNode(this.nodeCut[i],tobj);this.clearCut()},dhtmlXTreeObject.prototype.clearCut=function(){for(var i=0;i<this.nodeCut.length;i++){var tempa=this.nodeCut[i];tempa.images[0]=tempa._cimgs[0],tempa.images[1]=tempa._cimgs[1],tempa.images[2]=tempa._cimgs[2],this._correctPlus(tempa)}this.nodeCut=new Array},dhtmlXTreeObject.prototype._moveNode=function(itemObject,targetObject){return this._moveNodeTo(itemObject,targetObject)},dhtmlXTreeObject.prototype._fixNodesCollection=function(target,zParent){var flag=0,Nodes=target.childNodes,Count=target.childsCount-1;if(zParent!=Nodes[Count]){for(var i=0;i<Count;i++)Nodes[i]==Nodes[Count]&&(Nodes[i]=Nodes[i+1],Nodes[i+1]=Nodes[Count]);for(i=0;i<Count+1;i++)if(flag){var temp=Nodes[i];Nodes[i]=flag,flag=temp}else Nodes[i]==zParent&&(flag=Nodes[i],Nodes[i]=Nodes[Count])}},dhtmlXTreeObject.prototype._recreateBranch=function(itemObject,targetObject,beforeNode,level){var st="";if(beforeNode){for(i=0;i<targetObject.childsCount&&targetObject.childNodes[i]!=beforeNode;i++);0!=i?beforeNode=targetObject.childNodes[i-1]:(st="TOP",beforeNode="")}var t2=this._onradh;this._onradh=null;var newNode=this._attachChildNode(targetObject,itemObject.id,itemObject.label,0,itemObject.images[0],itemObject.images[1],itemObject.images[2],st,0,beforeNode);if(newNode._userdatalist=itemObject._userdatalist,newNode.userData=itemObject.userData.clone(),itemObject._attrs)for(var attr in newNode._attrs={},itemObject._attrs)newNode._attrs[attr]=itemObject._attrs[attr];newNode.XMLload=itemObject.XMLload,t2&&(this._onradh=t2,this._onradh(newNode.id));for(var i=0;i<itemObject.childsCount;i++)this._recreateBranch(itemObject.childNodes[i],newNode,0,1);return newNode},dhtmlXTreeObject.prototype._moveNodeTo=function(itemObject,targetObject,beforeNode){if(itemObject.treeNod._nonTrivialNode)return itemObject.treeNod._nonTrivialNode(this,targetObject,beforeNode,itemObject);if(this._checkPNodes(targetObject,itemObject))return!1;if(targetObject.mytype)var framesMove=itemObject.treeNod.lWin!=targetObject.lWin;else framesMove=itemObject.treeNod.lWin!=targetObject.treeNod.lWin;if(!this.callEvent("onDrag",[itemObject.id,targetObject.id,beforeNode?beforeNode.id:null,itemObject.treeNod,targetObject.treeNod]))return!1;0==targetObject.XMLload&&this.XMLsource&&(targetObject.XMLload=1,this._loadDynXML(targetObject.id)),this.openItem(targetObject.id);var oldTree=itemObject.treeNod,c=itemObject.parentObject.childsCount,z=itemObject.parentObject;if(framesMove||oldTree.dpcpy){var _otiid=itemObject.id;itemObject=this._recreateBranch(itemObject,targetObject,beforeNode),oldTree.dpcpy||oldTree.deleteItem(_otiid)}else{var Count=targetObject.childsCount,Nodes=targetObject.childNodes;0==Count&&(targetObject._open=!0),oldTree._unselectItem(itemObject),(Nodes[Count]=itemObject).treeNod=targetObject.treeNod,targetObject.childsCount++;var tr=this._drawNewTr(Nodes[Count].htmlNode);beforeNode?(targetObject.htmlNode.childNodes[0].insertBefore(tr,beforeNode.tr),this._fixNodesCollection(targetObject,beforeNode),Nodes=targetObject.childNodes):(targetObject.htmlNode.childNodes[0].appendChild(tr),1==this.dadmode&&this._fixNodesCollection(targetObject,beforeNode))}if(!oldTree.dpcpy&&!framesMove){var zir=itemObject.tr;if(document.all&&-1!=navigator.appVersion.search(/MSIE\ 5\.0/gi)?window.setTimeout(function(){zir.parentNode.removeChild(zir)},250):itemObject.parentObject.htmlNode.childNodes[0].removeChild(itemObject.tr),beforeNode&&targetObject==itemObject.parentObject)z.childNodes[z.childsCount-1]=0;else for(var i=0;i<z.childsCount;i++)if(z.childNodes[i].id==itemObject.id){z.childNodes[i]=0;break}oldTree._compressChildList(z.childsCount,z.childNodes),z.childsCount--}if(!framesMove&&!oldTree.dpcpy){if(oldTree!=(((itemObject.tr=tr).nodem=itemObject).parentObject=targetObject).treeNod){if(itemObject.treeNod._registerBranch(itemObject,oldTree))return;this._clearStyles(itemObject),this._redrawFrom(this,itemObject.parentObject),this._onradh&&this._onradh(itemObject.id)}this._correctPlus(targetObject),this._correctLine(targetObject),this._correctLine(itemObject),this._correctPlus(itemObject),beforeNode?this._correctPlus(beforeNode):2<=targetObject.childsCount&&(this._correctPlus(Nodes[targetObject.childsCount-2]),this._correctLine(Nodes[targetObject.childsCount-2])),this._correctPlus(Nodes[targetObject.childsCount-1]),this.tscheck&&this._correctCheckStates(targetObject),oldTree.tscheck&&oldTree._correctCheckStates(z)}return 1<c&&(oldTree._correctPlus(z.childNodes[c-2]),oldTree._correctLine(z.childNodes[c-2])),oldTree._correctPlus(z),oldTree._correctLine(z),this.callEvent("onDrop",[itemObject.id,targetObject.id,beforeNode?beforeNode.id:null,oldTree,targetObject.treeNod]),itemObject.id},dhtmlXTreeObject.prototype._clearStyles=function(itemObject){if(itemObject.htmlNode){var td1=itemObject.htmlNode.childNodes[0].childNodes[0].childNodes[1],td3=td1.nextSibling.nextSibling;itemObject.span.innerHTML=itemObject.label,itemObject.i_sel=!1,itemObject._aimgs&&this.dragger.removeDraggableItem(td1.nextSibling),this.checkBoxOff?(td1.childNodes[0].style.display="",td1.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(td1.childNodes[0],this.imPath+this.checkArray[itemObject.checkstate])):td1.childNodes[0].style.display="none",(td1.childNodes[0].treeNod=this).dragger.removeDraggableItem(td3),this.dragAndDropOff&&this.dragger.addDraggableItem(td3,this),this._aimgs&&this.dragger.addDraggableItem(td1.nextSibling,this),td3.childNodes[0].className="standartTreeRow",td3.onclick=this.onRowSelect,td3.ondblclick=this.onRowClick2,td1.previousSibling.onclick=this.onRowClick,this._correctLine(itemObject),this._correctPlus(itemObject);for(var i=0;i<itemObject.childsCount;i++)this._clearStyles(itemObject.childNodes[i])}},dhtmlXTreeObject.prototype._registerBranch=function(itemObject,oldTree){oldTree&&oldTree._globalIdStorageSub(itemObject.id),itemObject.id=this._globalIdStorageAdd(itemObject.id,itemObject),itemObject.treeNod=this;for(var i=0;i<itemObject.childsCount;i++)this._registerBranch(itemObject.childNodes[i],oldTree);return 0},dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(mode){this.tscheck=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.setOnMouseInHandler=function(func){this.ehlt=!0,this.attachEvent("onMouseIn",func)},dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(func){this.ehlt=!0,this.attachEvent("onMouseOut",func)},dhtmlXTreeObject.prototype.enableTreeImages=function(mode){this.timgen=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.enableFixedMode=function(mode){this.hfMode=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.enableCheckBoxes=function(mode,hidden){this.checkBoxOff=convertStringToBoolean(mode),this.cBROf=!(this.checkBoxOff||convertStringToBoolean(hidden))},dhtmlXTreeObject.prototype.setStdImages=function(image1,image2,image3){this.imageArray[0]=image1,this.imageArray[1]=image2,this.imageArray[2]=image3},dhtmlXTreeObject.prototype.enableTreeLines=function(mode){this.treeLinesOn=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.setImageArrays=function(arrayName,image1,image2,image3,image4,image5){switch(arrayName){case"plus":this.plusArray[0]=image1,this.plusArray[1]=image2,this.plusArray[2]=image3,this.plusArray[3]=image4,this.plusArray[4]=image5;break;case"minus":this.minusArray[0]=image1,this.minusArray[1]=image2,this.minusArray[2]=image3,this.minusArray[3]=image4,this.minusArray[4]=image5}},dhtmlXTreeObject.prototype.openItem=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp?this._openItem(temp):0},dhtmlXTreeObject.prototype._openItem=function(item){var state=this._getOpenState(item);if(state<0||this.XMLsource&&!item.XMLload){if(!this.callEvent("onOpenStart",[item.id,state]))return 0;this._HideShow(item,2),this.checkEvent("onOpenEnd")&&(this.onXLE==this._epnFHe&&this._epnFHe(this,item.id,!0),this.xmlstate&&this.XMLsource?(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe):this.callEvent("onOpenEnd",[item.id,this._getOpenState(item)]))}else this._srnd&&this._HideShow(item,2);item.parentObject&&!this._skip_open_parent&&this._openItem(item.parentObject)},dhtmlXTreeObject.prototype.closeItem=function(itemId){if(this.rootId==itemId)return 0;var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;temp.closeble&&this._HideShow(temp,1)},dhtmlXTreeObject.prototype.getLevel=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp?this._getNodeLevel(temp,0):0},dhtmlXTreeObject.prototype.setItemCloseable=function(itemId,flag){if(flag=convertStringToBoolean(flag),itemId&&itemId.span)var temp=itemId;else temp=this._globalIdStorageFind(itemId);if(!temp)return 0;temp.closeble=flag},dhtmlXTreeObject.prototype._getNodeLevel=function(itemObject,count){return itemObject.parentObject?this._getNodeLevel(itemObject.parentObject,count+1):count},dhtmlXTreeObject.prototype.hasChildren=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp?!(!this.XMLsource||temp.XMLload)||temp.childsCount:0},dhtmlXTreeObject.prototype._getLeafCount=function(itemNode){for(var a=0,b=0;b<itemNode.childsCount;b++)0==itemNode.childNodes[b].childsCount&&a++;return a},dhtmlXTreeObject.prototype.setItemText=function(itemId,newLabel,newTooltip){var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;temp.label=newLabel,temp.span.innerHTML=newLabel,temp.span.parentNode.parentNode.title=newTooltip||""},dhtmlXTreeObject.prototype.getItemTooltip=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp&&(temp.span.parentNode.parentNode._dhx_title||temp.span.parentNode.parentNode.title)||""},dhtmlXTreeObject.prototype.refreshItem=function(itemId){itemId||(itemId=this.rootId);this._globalIdStorageFind(itemId);this.deleteChildItems(itemId),this._loadDynXML(itemId)},dhtmlXTreeObject.prototype.setItemImage2=function(itemId,image1,image2,image3){var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;temp.images[1]=image2,temp.images[2]=image3,temp.images[0]=image1,this._correctPlus(temp)},dhtmlXTreeObject.prototype.setItemImage=function(itemId,image1,image2){var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;image2?(temp.images[1]=image1,temp.images[2]=image2):temp.images[0]=image1,this._correctPlus(temp)},dhtmlXTreeObject.prototype.getSubItems=function(itemId){var temp=this._globalIdStorageFind(itemId,0,1);if(!temp)return 0;var z="";for(i=0;i<temp.childsCount;i++)z?z+=this.dlmtr+temp.childNodes[i].id:z=""+temp.childNodes[i].id;return z},dhtmlXTreeObject.prototype._getAllScraggyItems=function(node){for(var z="",i=0;i<node.childsCount;i++)if(node.childNodes[i].unParsed||0<node.childNodes[i].childsCount){if(node.childNodes[i].unParsed)var zb=this._getAllScraggyItemsXML(node.childNodes[i].unParsed,1);else zb=this._getAllScraggyItems(node.childNodes[i]);zb&&(z?z+=this.dlmtr+zb:z=zb)}else z?z+=this.dlmtr+node.childNodes[i].id:z=""+node.childNodes[i].id;return z},dhtmlXTreeObject.prototype._getAllFatItems=function(node){for(var z="",i=0;i<node.childsCount;i++)if(node.childNodes[i].unParsed||0<node.childNodes[i].childsCount){if(z?z+=this.dlmtr+node.childNodes[i].id:z=""+node.childNodes[i].id,node.childNodes[i].unParsed)var zb=this._getAllFatItemsXML(node.childNodes[i].unParsed,1);else zb=this._getAllFatItems(node.childNodes[i]);zb&&(z+=this.dlmtr+zb)}return z},dhtmlXTreeObject.prototype._getAllSubItems=function(itemId,z,node){if(node)temp=node;else var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;z="";for(var i=0;i<temp.childsCount;i++){z?z+=this.dlmtr+temp.childNodes[i].id:z=""+temp.childNodes[i].id;var zb=this._getAllSubItems(0,z,temp.childNodes[i]);zb&&(z+=this.dlmtr+zb)}return z},dhtmlXTreeObject.prototype.selectItem=function(itemId,mode,preserve){mode=convertStringToBoolean(mode);var temp=this._globalIdStorageFind(itemId);if(!temp||!temp.parentObject)return 0;this.XMLloadingWarning?temp.parentObject.openMe=1:this._openItem(temp.parentObject);var ze=null;preserve&&((ze=new Object).ctrlKey=!0,temp.i_sel&&(ze.skipUnSel=!0)),mode?this.onRowSelect(ze,temp.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1):this.onRowSelect(ze,temp.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)},dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var str=new Array,i=0;i<this._selected.length;i++)str[i]=this._selected[i].span.innerHTML;return str.join(this.dlmtr)},dhtmlXTreeObject.prototype._compressChildList=function(Count,Nodes){Count--;for(var i=0;i<Count;i++)0==Nodes[i]&&(Nodes[i]=Nodes[i+1],Nodes[i+1]=0)},dhtmlXTreeObject.prototype._deleteNode=function(itemId,htmlObject,skip){if(!htmlObject||!htmlObject.parentObject)return 0;var tempos=0,tempos2=0;htmlObject.tr.nextSibling&&(tempos=htmlObject.tr.nextSibling.nodem),htmlObject.tr.previousSibling&&(tempos2=htmlObject.tr.previousSibling.nodem);for(var sN=htmlObject.parentObject,Count=sN.childsCount,Nodes=sN.childNodes,i=0;i<Count;i++)if(Nodes[i].id==itemId){skip||sN.htmlNode.childNodes[0].removeChild(Nodes[i].tr),Nodes[i]=0;break}this._compressChildList(Count,Nodes),skip||sN.childsCount--,tempos&&(this._correctPlus(tempos),this._correctLine(tempos)),tempos2&&(this._correctPlus(tempos2),this._correctLine(tempos2)),this.tscheck&&this._correctCheckStates(sN),skip||this._globalIdStorageRecSub(htmlObject)},dhtmlXTreeObject.prototype.setCheck=function(itemId,state){var sNode=this._globalIdStorageFind(itemId,0,1);sNode&&("unsure"===state?this._setCheck(sNode,state):(state=convertStringToBoolean(state),this.tscheck&&this.smcheck?this._setSubChecked(state,sNode):this._setCheck(sNode,state)),this.smcheck&&this._correctCheckStates(sNode.parentObject))},dhtmlXTreeObject.prototype._setCheck=function(sNode,state){if(sNode){if((sNode.parentObject._r_logic||this._frbtr)&&state)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=sNode;else for(var i=0;i<sNode.parentObject.childsCount;i++)this._setCheck(sNode.parentObject.childNodes[i],0);var z=sNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];sNode.checkstate="unsure"==state?2:state?1:0,sNode.dscheck&&(sNode.checkstate=sNode.dscheck),this._setSrc(z,this.imPath+(sNode.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[sNode.checkstate])}},dhtmlXTreeObject.prototype.setSubChecked=function(itemId,state){var sNode=this._globalIdStorageFind(itemId);this._setSubChecked(state,sNode),this._correctCheckStates(sNode.parentObject)},dhtmlXTreeObject.prototype._setSubChecked=function(state,sNode){if(state=convertStringToBoolean(state),sNode){if((sNode.parentObject._r_logic||this._frbtr)&&state)for(var i=0;i<sNode.parentObject.childsCount;i++)this._setSubChecked(0,sNode.parentObject.childNodes[i]);if(sNode._r_logic||this._frbtr)this._setSubChecked(state,sNode.childNodes[0]);else for(i=0;i<sNode.childsCount;i++)this._setSubChecked(state,sNode.childNodes[i]);var z=sNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];sNode.checkstate=state?1:0,sNode.dscheck&&(sNode.checkstate=sNode.dscheck),this._setSrc(z,this.imPath+(sNode.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[sNode.checkstate])}},dhtmlXTreeObject.prototype.isItemChecked=function(itemId){var sNode=this._globalIdStorageFind(itemId);if(sNode)return sNode.checkstate},dhtmlXTreeObject.prototype.deleteChildItems=function(itemId){var sNode=this._globalIdStorageFind(itemId);if(sNode)for(var j=sNode.childsCount,i=0;i<j;i++)this._deleteNode(sNode.childNodes[0].id,sNode.childNodes[0])},dhtmlXTreeObject.prototype.deleteItem=function(itemId,selectParent){if(!this._onrdlh||this._onrdlh(itemId))this._deleteItem(itemId,selectParent);this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"},dhtmlXTreeObject.prototype._deleteItem=function(itemId,selectParent,skip){selectParent=convertStringToBoolean(selectParent);var sNode=this._globalIdStorageFind(itemId);if(sNode){var pid=this.getParentId(itemId),zTemp=sNode.parentObject;return this._deleteNode(itemId,sNode,skip),this._editCell&&this._editCell.id==itemId&&(this._editCell=null),this._correctPlus(zTemp),this._correctLine(zTemp),selectParent&&pid!=this.rootId&&this.selectItem(pid,1),zTemp}},dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(itemObject){for(var i=0;i<itemObject.childsCount;i++)this._globalIdStorageRecSub(itemObject.childNodes[i]),this._globalIdStorageSub(itemObject.childNodes[i].id);this._globalIdStorageSub(itemObject.id);var z=itemObject;z.span=null,z.tr.nodem=null,z.tr=null,z.htmlNode=null},dhtmlXTreeObject.prototype.insertNewNext=function(itemId,newItemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children){var sNode=this._globalIdStorageFind(itemId);if(!sNode||!sNode.parentObject)return 0;var nodez=this._attachChildNode(0,newItemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children,sNode);return console.log(nodez),nodez},dhtmlXTreeObject.prototype.getItemIdByIndex=function(itemId,index){var z=this._globalIdStorageFind(itemId);return!z||index>=z.childsCount?null:z.childNodes[index].id},dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(itemId,index){var z=this._globalIdStorageFind(itemId);return!z||index>=z.childsCount?null:z.childNodes[index].id},dhtmlXTreeObject.prototype.setDragHandler=function(func){this.attachEvent("onDrag",func)},dhtmlXTreeObject.prototype._clearMove=function(){this._lastMark&&(this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null),this.allTree.className=this.allTree.className.replace(" selectionBox","")},dhtmlXTreeObject.prototype.enableDragAndDrop=function(mode,rmode){"temporary_disabled"==mode?mode=!(this.dADTempOff=!1):this.dADTempOff=!0,this.dragAndDropOff=convertStringToBoolean(mode),this.dragAndDropOff&&this.dragger.addDragLanding(this.allTree,this),1<arguments.length&&(this._ddronr=!convertStringToBoolean(rmode))},dhtmlXTreeObject.prototype._setMove=function(htmlNode,x,y){if(htmlNode.parentObject.span){var a1=getAbsoluteTop(htmlNode),a2=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode,this.dadmodefix=0;var zN=htmlNode.parentObject.span;zN.className+=" dragAndDropRow",this._lastMark=zN,this._autoScroll(null,a1,a2)}},dhtmlXTreeObject.prototype._autoScroll=function(node,a1,a2){this.autoScroll&&(node&&(a1=getAbsoluteTop(node),a2=getAbsoluteTop(this.allTree)-this.allTree.scrollTop),a1-a2-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20),a1-a2<parseInt(this.allTree.scrollTop)+30&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20))},dhtmlXTreeObject.prototype._createDragNode=function(htmlObject,e){if(!this.dADTempOff)return null;var obj=htmlObject.parentObject;if(!this.callEvent("onBeforeDrag",[obj.id,e]))return null;obj.i_sel||this._selectItem(obj,e);var dragSpan=document.createElement("div"),text=new Array;if(this._itim_dg)for(var i=0;i<this._selected.length;i++)text[i]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[i].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[i].span.innerHTML+"</td></tr></table>";else text=this.getSelectedItemText().split(this.dlmtr);return dragSpan.innerHTML=text.join(""),dragSpan.style.position="absolute",dragSpan.className="dragSpanDiv",this._dragged=(new Array).concat(this._selected),dragSpan},dhtmlXTreeObject.prototype._focusNode=function(item){var z=getAbsoluteTop(item.htmlNode)-getAbsoluteTop(this.allTree);(z>this.allTree.offsetHeight-30||z<0)&&(this.allTree.scrollTop=z+this.allTree.scrollTop)},dhtmlXTreeObject.prototype._preventNsDrag=function(e){return e&&e.preventDefault&&e.preventDefault(),!1},dhtmlXTreeObject.prototype._drag=function(sourceHtmlObject,dhtmlObject,targetHtmlObject){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer),targetHtmlObject.parentObject||(targetHtmlObject=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0),this._clearMove();var z=sourceHtmlObject.parentObject.treeNod;if(z&&z._clearMove&&z._clearMove(""),!this.dragMove||this.dragMove()){if(z&&z._clearMove&&z._dragged)col=z._dragged;else var col=new Array(sourceHtmlObject.parentObject);for(var trg=targetHtmlObject.parentObject,i=0;i<col.length;i++){var newID=this._moveNode(col[i],trg);this.dadmodec&&!1!==newID&&(trg=this._globalIdStorageFind(newID,!0,!0)),newID&&!this._sADnD&&this.selectItem(newID,0,1)}}z&&(z._dragged=new Array)},dhtmlXTreeObject.prototype._dragIn=function(htmlObject,shtmlObject,x,y){if(!this.dADTempOff)return 0;var fobj=shtmlObject.parentObject,tobj=htmlObject.parentObject;if(tobj||!this._ddronr){if(!this.callEvent("onDragIn",[fobj.id,tobj?tobj.id:null,fobj.treeNod,this]))return tobj&&this._autoScroll(htmlObject),0;if(tobj){if(null==fobj.childNodes)return this._setMove(htmlObject,x,y),htmlObject;for(var stree=fobj.treeNod,i=0;i<stree._dragged.length;i++)if(this._checkPNodes(tobj,stree._dragged[i]))return this._autoScroll(htmlObject),0;this._setMove(htmlObject,x,y),this._getOpenState(tobj)<=0&&(this._autoOpenId=tobj.id,this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1e3))}else this.allTree.className+=" selectionBox";return htmlObject}},dhtmlXTreeObject.prototype._autoOpenItem=function(e,treeObject){treeObject.openItem(treeObject._autoOpenId)},dhtmlXTreeObject.prototype._dragOut=function(htmlObject){this._clearMove(),this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)},dhtmlXTreeObject.prototype.moveItem=function(itemId,mode,targetId,targetTree){var sNode=this._globalIdStorageFind(itemId);if(!sNode)return 0;switch(mode){case"right":alert("Not supported yet");break;case"item_child":if(!(tNode=(targetTree||this)._globalIdStorageFind(targetId)))return 0;(targetTree||this)._moveNodeTo(sNode,tNode,0);break;case"item_sibling":if(!(tNode=(targetTree||this)._globalIdStorageFind(targetId)))return 0;(targetTree||this)._moveNodeTo(sNode,tNode.parentObject,tNode);break;case"item_sibling_next":var tNode;if(!(tNode=(targetTree||this)._globalIdStorageFind(targetId)))return 0;tNode.tr&&tNode.tr.nextSibling&&tNode.tr.nextSibling.nodem?(targetTree||this)._moveNodeTo(sNode,tNode.parentObject,tNode.tr.nextSibling.nodem):(targetTree||this)._moveNodeTo(sNode,tNode.parentObject);break;case"left":sNode.parentObject.parentObject&&this._moveNodeTo(sNode,sNode.parentObject.parentObject,sNode.parentObject);break;case"up":if(-1==(z=this._getPrevNode(sNode))||!z.parentObject)return;this._moveNodeTo(sNode,z.parentObject,z);break;case"up_strict":0!=(z=this._getIndex(sNode))&&this._moveNodeTo(sNode,sNode.parentObject,sNode.parentObject.childNodes[z-1]);break;case"down_strict":var z=this._getIndex(sNode),count=sNode.parentObject.childsCount-2;z==count?this._moveNodeTo(sNode,sNode.parentObject):z<count&&this._moveNodeTo(sNode,sNode.parentObject,sNode.parentObject.childNodes[z+2]);break;case"down":if(-1==(z=this._getNextNode(this._lastChild(sNode)))||!z.parentObject)return;if(z.parentObject==sNode.parentObject)z=this._getNextNode(z);if(-1==z)this._moveNodeTo(sNode,sNode.parentObject);else{if(-1==z||!z.parentObject)return;this._moveNodeTo(sNode,z.parentObject,z)}}_isIE&&_isIE<8&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0")},dhtmlXTreeObject.prototype._loadDynXML=function(id,src){src=src||this.XMLsource;var sn=(new Date).valueOf();this._ld_id=id,this.loadXML(src+getUrlSymbol(src)+"uid="+sn+"&id="+this._escape(id))},dhtmlXTreeObject.prototype._checkPNodes=function(item1,item2){return!this._dcheckf&&(item2==item1?1:item1.parentObject?this._checkPNodes(item1.parentObject,item2):0)},dhtmlXTreeObject.prototype.disableDropCheck=function(mode){this._dcheckf=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.preventIECaching=function(mode){this.no_cashe=convertStringToBoolean(mode),this.XMLLoader.rSeed=this.no_cashe},dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching,dhtmlXTreeObject.prototype.disableCheckbox=function(itemId,mode){if("object"!=typeof itemId)var sNode=this._globalIdStorageFind(itemId,0,1);else sNode=itemId;sNode&&(sNode.dscheck=convertStringToBoolean(mode)?(sNode.checkstate||0)%3+3:2<sNode.checkstate?sNode.checkstate-3:sNode.checkstate,this._setCheck(sNode),sNode.dscheck<3&&(sNode.dscheck=!1))},dhtmlXTreeObject.prototype.setEscapingMode=function(mode){this.utfesc=mode},dhtmlXTreeObject.prototype.enableHighlighting=function(mode){this.ehlt=!0,this.ehlta=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype._itemMouseOut=function(){var that=this.childNodes[3].parentObject,tree=that.treeNod;tree.callEvent("onMouseOut",[that.id]),that.id==tree._l_onMSI&&(tree._l_onMSI=null),tree.ehlta&&(that.span.className=that.span.className.replace("_lor",""))},dhtmlXTreeObject.prototype._itemMouseIn=function(){var that=this.childNodes[3].parentObject,tree=that.treeNod;tree._l_onMSI!=that.id&&tree.callEvent("onMouseIn",[that.id]),tree._l_onMSI=that.id,tree.ehlta&&(that.span.className=that.span.className.replace("_lor",""),that.span.className=that.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor"))},dhtmlXTreeObject.prototype.enableActiveImages=function(mode){this._aimgs=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.focusItem=function(itemId){var sNode=this._globalIdStorageFind(itemId);if(!sNode)return 0;this._focusNode(sNode)},dhtmlXTreeObject.prototype.getAllSubItems=function(itemId){return this._getAllSubItems(itemId)},dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless,dhtmlXTreeObject.prototype._getAllScraggyItems=function(node){for(var z="",i=0;i<node.childsCount;i++)if(node.childNodes[i].unParsed||0<node.childNodes[i].childsCount){if(node.childNodes[i].unParsed)var zb=this._getAllScraggyItemsXML(node.childNodes[i].unParsed,1);else zb=this._getAllScraggyItems(node.childNodes[i]);zb&&(z?z+=this.dlmtr+zb:z=zb)}else z?z+=this.dlmtr+node.childNodes[i].id:z=""+node.childNodes[i].id;return z},dhtmlXTreeObject.prototype._getAllFatItems=function(node){for(var z="",i=0;i<node.childsCount;i++)if(node.childNodes[i].unParsed||0<node.childNodes[i].childsCount){if(z?z+=this.dlmtr+node.childNodes[i].id:z=""+node.childNodes[i].id,node.childNodes[i].unParsed)var zb=this._getAllFatItemsXML(node.childNodes[i].unParsed,1);else zb=this._getAllFatItems(node.childNodes[i]);zb&&(z+=this.dlmtr+zb)}return z},dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids,dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)},dhtmlXTreeObject.prototype.getAllUnchecked=function(itemId){return itemId&&(itemId=this._globalIdStorageFind(itemId)),this._getAllChecked(itemId,"",0)},dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)},dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var temp=[this._getAllChecked("","",1)],second=this._getAllChecked("","",2);return second&&temp.push(second),temp.join(this.dlmtr)},dhtmlXTreeObject.prototype._getAllChecked=function(htmlNode,list,mode){htmlNode||(htmlNode=this.htmlNode),htmlNode.checkstate==mode&&(htmlNode.nocheckbox||(list?list+=this.dlmtr+htmlNode.id:list=""+htmlNode.id));for(var j=htmlNode.childsCount,i=0;i<j;i++)list=this._getAllChecked(htmlNode.childNodes[i],list,mode);return list||""},dhtmlXTreeObject.prototype.setItemStyle=function(itemId,style_string,resetCss){resetCss=resetCss||!1;var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;temp.span.style.cssText?temp.span.style.cssText=resetCss?style_string:temp.span.style.cssText+";"+style_string:temp.span.setAttribute("style",temp.span.getAttribute("style")+"; "+style_string)},dhtmlXTreeObject.prototype.enableImageDrag=function(mode){this._itim_dg=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.setOnDragIn=function(func){this.attachEvent("onDragIn",func)},dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(mode){this.autoScroll=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.setSkin=function(name){var tmp=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=tmp+" dhxtree_"+name,"dhx_terrace"==name&&this.enableTreeLines(!1)},dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(obj){return[obj.parent,obj.width||"100%",obj.height||"100%",obj.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{}),dhtmlXTreeObject.prototype._dp_init=function(dp){dp.attachEvent("insertCallback",function(upd,id,parent){var text=this._loader.doXPath(".//item",upd)[0].getAttribute("text");this.obj.insertNewItem(parent,id,text,0,0,0,0,"CHILD")}),dp.attachEvent("updateCallback",function(upd,id,parent){var text=this._loader.doXPath(".//item",upd)[0].getAttribute("text");this.obj.setItemText(id,text),this.obj.getParentId(id)!=parent&&this.obj.moveItem(id,"item_child",parent),this.setUpdated(id,!0,"updated")}),dp.attachEvent("deleteCallback",function(upd,id,parent){this.obj.setUserData(id,this.action_param,"true_deleted"),this.obj.deleteItem(id,!1)}),dp._methods=["setItemStyle","","changeItemId","deleteItem"],this.attachEvent("onEdit",function(state,id){return 3==state&&dp.setUpdated(id,!0),!0}),this.attachEvent("onDrop",function(id,id_2,id_3,tree_1,tree_2){tree_1==tree_2&&dp.setUpdated(id,!0)}),this._onrdlh=function(rowId){var z=dp.getState(rowId);return"inserted"==z?(dp.set_invalid(rowId,!1),dp.setUpdated(rowId,!1),!0):"true_deleted"==z?(dp.setUpdated(rowId,!1),!0):(dp.setUpdated(rowId,!0,"deleted"),!1)},this._onradh=function(rowId){dp.setUpdated(rowId,!0,"inserted")},dp._getRowData=function(rowId){var data={},z=this.obj._globalIdStorageFind(rowId),z2=z.parentObject,i=0;for(i=0;i<z2.childsCount&&z2.childNodes[i]!=z;i++);for(data.tr_id=z.id,data.tr_pid=z2.id,data.tr_order=i,data.tr_text=z.span.innerHTML,z2=(z._userdatalist||"").split(","),i=0;i<z2.length;i++)data[z2[i]]=z.userData["t_"+z2[i]];return data}};